This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

# File Summary

## Purpose
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: pages/joymewIndex/joymewIndex.wxml, appGlobalData/splidInfo.js, appGlobalData/index.js, app.js, pages/joymewIndex/joymewIndex.js, app.json, app.js, utils/index.js, utils/request.js, utils/qiniu/index.js, pages, packageGame, packageC, packageB, packageA, components, assets/constant, appGlobalData, api
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)

# Directory Structure
```
api/estimate.js
api/gift.js
api/hostingStyle.js
api/index.js
api/message.js
api/pay.js
api/weddingMan.js
app.js
app.json
appGlobalData/accountInfo.js
appGlobalData/examineMode.js
appGlobalData/gameInfo.js
appGlobalData/index.js
appGlobalData/readme.md
appGlobalData/siyiInfo.js
appGlobalData/splidInfo.js
appGlobalData/systemInfo.js
appGlobalData/userInfo.js
assets/constant/default.js
assets/constant/host.js
assets/constant/sceneInfo.js
components/feedbackEntry/feedbackEntry.js
components/feedbackEntry/feedbackEntry.json
components/feedbackEntry/feedbackEntry.wxml
components/feedbackEntry/feedbackEntry.wxss
components/imageCropper/cropper/cropper.js
components/imageCropper/cropper/cropper.json
components/imageCropper/cropper/cropper.wxml
components/imageCropper/cropper/cropper.wxss
components/imageCropper/index.js
components/imageCropper/index.json
components/imageCropper/index.wxml
components/imageCropper/index.wxss
components/privacyAuthorize/privacyAuthorize.js
components/privacyAuthorize/privacyAuthorize.json
components/privacyAuthorize/privacyAuthorize.wxml
components/privacyAuthorize/privacyAuthorize.wxss
packageA/api/hbkdRecharge.js
packageA/api/recharge.js
packageA/pages/hbkdRecharge/hbkdRecharge.js
packageA/pages/hbkdRecharge/hbkdRecharge.json
packageA/pages/hbkdRecharge/hbkdRecharge.wxml
packageA/pages/hbkdRecharge/hbkdRecharge.wxss
packageA/pages/hbkdRecharge/styles/commonMode.wxss
packageA/pages/hbkdRecharge/styles/templateMode.wxss
packageA/pages/hbkdRecharge/styles/zshlMode.wxss
packageA/pages/recharge/recharge.js
packageA/pages/recharge/recharge.json
packageA/pages/recharge/recharge.wxml
packageA/pages/recharge/recharge.wxss
packageA/pages/rechargeWedding/rechargeWedding.js
packageA/pages/rechargeWedding/rechargeWedding.json
packageA/pages/rechargeWedding/rechargeWedding.wxml
packageA/pages/rechargeWedding/rechargeWedding.wxss
packageA/pages/wishRank/wishRank.js
packageA/pages/wishRank/wishRank.json
packageA/pages/wishRank/wishRank.scss
packageA/pages/wishRank/wishRank.wxml
packageB/api/photoWall.js
packageB/api/winningRecord.js
packageB/pages/photoWallIndex/photoWallIndex.js
packageB/pages/photoWallIndex/photoWallIndex.json
packageB/pages/photoWallIndex/photoWallIndex.wxml
packageB/pages/photoWallIndex/photoWallIndex.wxss
packageB/pages/photoWallUpload/photoWallUpload.js
packageB/pages/photoWallUpload/photoWallUpload.json
packageB/pages/photoWallUpload/photoWallUpload.wxml
packageB/pages/photoWallUpload/photoWallUpload.wxss
packageB/pages/sendGiftLottery/components/machineBody/index.js
packageB/pages/sendGiftLottery/components/machineBody/index.json
packageB/pages/sendGiftLottery/components/machineBody/index.wxml
packageB/pages/sendGiftLottery/components/machineBody/index.wxss
packageB/pages/sendGiftLottery/components/machineHeader/index.js
packageB/pages/sendGiftLottery/components/machineHeader/index.json
packageB/pages/sendGiftLottery/components/machineHeader/index.wxml
packageB/pages/sendGiftLottery/components/machineHeader/index.wxss
packageB/pages/sendGiftLottery/components/popup/index.js
packageB/pages/sendGiftLottery/components/popup/index.json
packageB/pages/sendGiftLottery/components/popup/index.wxml
packageB/pages/sendGiftLottery/components/popup/index.wxss
packageB/pages/sendGiftLottery/components/rightEntry/index.js
packageB/pages/sendGiftLottery/components/rightEntry/index.json
packageB/pages/sendGiftLottery/components/rightEntry/index.wxml
packageB/pages/sendGiftLottery/components/rightEntry/index.wxss
packageB/pages/sendGiftLottery/components/sendGift/index.js
packageB/pages/sendGiftLottery/components/sendGift/index.json
packageB/pages/sendGiftLottery/components/sendGift/index.wxml
packageB/pages/sendGiftLottery/components/sendGift/index.wxss
packageB/pages/sendGiftLottery/index.js
packageB/pages/sendGiftLottery/index.json
packageB/pages/sendGiftLottery/index.wxml
packageB/pages/sendGiftLottery/index.wxss
packageB/pages/sendGiftLottery/mockName.js
packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.js
packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.json
packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.scss
packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.wxml
packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.js
packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.json
packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.scss
packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.wxml
packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.js
packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.json
packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.scss
packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.wxml
packageB/pages/winningRecord/winningRecord.js
packageB/pages/winningRecord/winningRecord.json
packageB/pages/winningRecord/winningRecord.scss
packageB/pages/winningRecord/winningRecord.wxml
packageC/api/brides.js
packageC/api/draw.js
packageC/api/feedback.js
packageC/pages/agreement/agreement.js
packageC/pages/agreement/agreement.json
packageC/pages/agreement/agreement.wxml
packageC/pages/agreement/agreement.wxss
packageC/pages/brides/bride.wxs
packageC/pages/brides/brides.js
packageC/pages/brides/brides.json
packageC/pages/brides/brides.less
packageC/pages/brides/brides.min.wxss
packageC/pages/brides/brides.wxml
packageC/pages/brides/brides.wxss
packageC/pages/draw/draw.js
packageC/pages/draw/draw.json
packageC/pages/draw/draw.wxml
packageC/pages/draw/draw.wxss
packageC/pages/draw/drawPage/drawPage.js
packageC/pages/draw/drawPage/drawPage.json
packageC/pages/draw/drawPage/drawPage.wxml
packageC/pages/draw/drawPage/drawPage.wxss
packageC/pages/feedback/feedback.js
packageC/pages/feedback/feedback.json
packageC/pages/feedback/feedback.wxml
packageC/pages/feedback/feedback.wxss
packageC/pages/outerLink/outerLink.js
packageC/pages/outerLink/outerLink.json
packageC/pages/outerLink/outerLink.wxml
packageC/pages/outerLink/outerLink.wxss
packageC/pages/photographerWall/photographerWall.js
packageC/pages/photographerWall/photographerWall.json
packageC/pages/photographerWall/photographerWall.wxml
packageC/pages/photographerWall/photographerWall.wxss
packageGame/api/commonRank.js
packageGame/api/guessHb.js
packageGame/api/kbx.js
packageGame/api/nyn.js
packageGame/api/shoutHb.js
packageGame/api/zfdm.js
packageGame/api/zyz.js
packageGame/pages/commonRank/commonRank.json
packageGame/pages/commonRank/commonRank.scss
packageGame/pages/commonRank/commonRank.ts
packageGame/pages/commonRank/commonRank.wxml
packageGame/pages/guessHb/guessHb.js
packageGame/pages/guessHb/guessHb.json
packageGame/pages/guessHb/guessHb.wxml
packageGame/pages/guessHb/guessHb.wxss
packageGame/pages/hbWall/hbWall.js
packageGame/pages/hbWall/hbWall.json
packageGame/pages/hbWall/hbWall.wxml
packageGame/pages/hbWall/hbWall.wxss
packageGame/pages/kbx/kbx.js
packageGame/pages/kbx/kbx.json
packageGame/pages/kbx/kbx.wxml
packageGame/pages/kbx/kbx.wxss
packageGame/pages/luckyWheel/luckyWheel.js
packageGame/pages/luckyWheel/luckyWheel.json
packageGame/pages/luckyWheel/luckyWheel.wxml
packageGame/pages/luckyWheel/luckyWheel.wxss
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.js
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.json
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.less
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.wxml
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.wxss
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.js
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.json
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.wxml
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.wxss
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.js
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.json
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.wxml
packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.wxss
packageGame/pages/luckyWheel/prizeSheet/prizeSheet.js
packageGame/pages/luckyWheel/prizeSheet/prizeSheet.json
packageGame/pages/luckyWheel/prizeSheet/prizeSheet.wxml
packageGame/pages/luckyWheel/prizeSheet/prizeSheet.wxss
packageGame/pages/luckyWheel/wait/wait.js
packageGame/pages/luckyWheel/wait/wait.json
packageGame/pages/luckyWheel/wait/wait.wxml
packageGame/pages/luckyWheel/wait/wait.wxss
packageGame/pages/nyn/nyn.js
packageGame/pages/nyn/nyn.json
packageGame/pages/nyn/nyn.wxml
packageGame/pages/nyn/nyn.wxss
packageGame/pages/shoutHb/components/cd/index.js
packageGame/pages/shoutHb/components/cd/index.json
packageGame/pages/shoutHb/components/cd/index.scss
packageGame/pages/shoutHb/components/cd/index.wxml
packageGame/pages/shoutHb/components/danmu/index.js
packageGame/pages/shoutHb/components/danmu/index.json
packageGame/pages/shoutHb/components/danmu/index.scss
packageGame/pages/shoutHb/components/danmu/index.wxml
packageGame/pages/shoutHb/components/microphone/index.js
packageGame/pages/shoutHb/components/microphone/index.json
packageGame/pages/shoutHb/components/microphone/index.wxml
packageGame/pages/shoutHb/components/microphone/index.wxss
packageGame/pages/shoutHb/components/ready/index.js
packageGame/pages/shoutHb/components/ready/index.json
packageGame/pages/shoutHb/components/ready/index.scss
packageGame/pages/shoutHb/components/ready/index.wxml
packageGame/pages/shoutHb/components/resPopup/index.js
packageGame/pages/shoutHb/components/resPopup/index.json
packageGame/pages/shoutHb/components/resPopup/index.wxml
packageGame/pages/shoutHb/components/resPopup/index.wxss
packageGame/pages/shoutHb/components/textBoard/index.js
packageGame/pages/shoutHb/components/textBoard/index.json
packageGame/pages/shoutHb/components/textBoard/index.wxml
packageGame/pages/shoutHb/components/textBoard/index.wxss
packageGame/pages/shoutHb/index.js
packageGame/pages/shoutHb/index.json
packageGame/pages/shoutHb/index.wxml
packageGame/pages/shoutHb/index.wxss
packageGame/pages/shoutHb/modules/game/index.js
packageGame/pages/shoutHb/modules/game/index.json
packageGame/pages/shoutHb/modules/game/index.scss
packageGame/pages/shoutHb/modules/game/index.wxml
packageGame/pages/shoutHb/modules/rank/index.js
packageGame/pages/shoutHb/modules/rank/index.json
packageGame/pages/shoutHb/modules/rank/index.scss
packageGame/pages/shoutHb/modules/rank/index.wxml
packageGame/pages/shoutHb/modules/wait/index.js
packageGame/pages/shoutHb/modules/wait/index.json
packageGame/pages/shoutHb/modules/wait/index.scss
packageGame/pages/shoutHb/modules/wait/index.wxml
packageGame/pages/zfdm/zfdm.js
packageGame/pages/zfdm/zfdm.json
packageGame/pages/zfdm/zfdm.wxml
packageGame/pages/zfdm/zfdm.wxss
packageGame/pages/zyz/zyz.js
packageGame/pages/zyz/zyz.json
packageGame/pages/zyz/zyz.wxml
packageGame/pages/zyz/zyz.wxss
packageGame/utils/tween.js
pages/estimate/components/eFooter/eFooter.js
pages/estimate/components/eFooter/eFooter.json
pages/estimate/components/eFooter/eFooter.wxml
pages/estimate/components/eFooter/eFooter.wxss
pages/estimate/components/mark/aiLiveReplyStorage.js
pages/estimate/components/mark/danmu/danmu.js
pages/estimate/components/mark/danmu/danmu.json
pages/estimate/components/mark/danmu/danmu.wxml
pages/estimate/components/mark/danmu/danmu.wxss
pages/estimate/components/mark/item.wxss
pages/estimate/components/mark/mark.js
pages/estimate/components/mark/mark.json
pages/estimate/components/mark/mark.wxml
pages/estimate/components/mark/mark.wxss
pages/estimate/components/mark/markAfterQuery/mark.wxs
pages/estimate/components/mark/markAfterQuery/markAfterQuery.js
pages/estimate/components/mark/markAfterQuery/markAfterQuery.json
pages/estimate/components/mark/markAfterQuery/markAfterQuery.wxml
pages/estimate/components/mark/markAfterQuery/markAfterQuery.wxss
pages/estimate/components/mark/qrcode/qrcode.js
pages/estimate/components/mark/qrcode/qrcode.json
pages/estimate/components/mark/qrcode/qrcode.wxml
pages/estimate/components/mark/qrcode/qrcode.wxss
pages/estimate/components/mark/rateStar/rateStar.js
pages/estimate/components/mark/rateStar/rateStar.json
pages/estimate/components/mark/rateStar/rateStar.wxml
pages/estimate/components/mark/rateStar/rateStar.wxss
pages/estimate/components/mark/replyInput/replyInput.js
pages/estimate/components/mark/replyInput/replyInput.json
pages/estimate/components/mark/replyInput/replyInput.wxml
pages/estimate/components/mark/replyInput/replyInput.wxss
pages/estimate/components/mark/star.wxs
pages/estimate/estimate.js
pages/estimate/estimate.json
pages/estimate/estimate.wxml
pages/estimate/estimate.wxss
pages/estimateOld/components/eFooter/eFooter.js
pages/estimateOld/components/eFooter/eFooter.json
pages/estimateOld/components/eFooter/eFooter.wxml
pages/estimateOld/components/eFooter/eFooter.wxss
pages/estimateOld/components/mark/danmu/danmu.js
pages/estimateOld/components/mark/danmu/danmu.json
pages/estimateOld/components/mark/danmu/danmu.wxml
pages/estimateOld/components/mark/danmu/danmu.wxss
pages/estimateOld/components/mark/item.wxss
pages/estimateOld/components/mark/mark.js
pages/estimateOld/components/mark/mark.json
pages/estimateOld/components/mark/mark.wxml
pages/estimateOld/components/mark/mark.wxss
pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.js
pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.json
pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.wxml
pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.wxss
pages/estimateOld/components/mark/qrcode/qrcode.js
pages/estimateOld/components/mark/qrcode/qrcode.json
pages/estimateOld/components/mark/qrcode/qrcode.wxml
pages/estimateOld/components/mark/qrcode/qrcode.wxss
pages/estimateOld/components/mark/rateStar/rateStar.js
pages/estimateOld/components/mark/rateStar/rateStar.json
pages/estimateOld/components/mark/rateStar/rateStar.wxml
pages/estimateOld/components/mark/rateStar/rateStar.wxss
pages/estimateOld/components/mark/replyInput/replyInput.js
pages/estimateOld/components/mark/replyInput/replyInput.json
pages/estimateOld/components/mark/replyInput/replyInput.wxml
pages/estimateOld/components/mark/replyInput/replyInput.wxss
pages/estimateOld/components/mark/star.wxs
pages/estimateOld/estimate.js
pages/estimateOld/estimate.json
pages/estimateOld/estimate.wxml
pages/estimateOld/estimate.wxss
pages/index/index.js
pages/index/index.json
pages/index/index.wxml
pages/index/index.wxss
pages/joymewIndex/joymewIndex.js
pages/joymewIndex/joymewIndex.json
pages/joymewIndex/joymewIndex.wxml
pages/joymewIndex/joymewIndex.wxss
pages/joymewIndex/styles/bby.wxss
pages/joymewIndex/styles/birth.wxss
pages/joymewIndex/styles/bly.wxss
pages/joymewIndex/styles/bydl.wxss
pages/joymewIndex/styles/crl.wxss
pages/joymewIndex/styles/dhy.wxss
pages/joymewIndex/styles/enterprise.wxss
pages/joymewIndex/styles/hx.wxss
pages/joymewIndex/styles/jbtm.wxss
pages/joymewIndex/styles/myy.wxss
pages/joymewIndex/styles/qqy.wxss
pages/joymewIndex/styles/sy.wxss
pages/joymewIndex/styles/txh.wxss
pages/joymewIndex/styles/wedding.wxss
pages/joymewIndex/styles/wl.wxss
pages/joymewIndex/styles/xsy.wxss
pages/joymewIndex/styles/ysy.wxss
pages/joymewIndex/styles/zshl.wxss
pages/live/live.js
pages/live/live.json
pages/live/live.wxml
pages/live/live.wxss
pages/pay/pay.js
pages/pay/pay.json
pages/pay/pay.wxml
pages/reserve/hostingStyle/hostingStyle.js
pages/reserve/hostingStyle/hostingStyle.json
pages/reserve/hostingStyle/hostingStyle.scss
pages/reserve/hostingStyle/hostingStyle.wxml
pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.js
pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.json
pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.scss
pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.wxml
pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.js
pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.json
pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.scss
pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.wxml
pages/reserve/hostingStyle/HostingStyleSchedule/utils.wxs
pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.js
pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.json
pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.scss
pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.wxml
pages/reserve/hostingStyle/workDetail/workDetail.js
pages/reserve/hostingStyle/workDetail/workDetail.json
pages/reserve/hostingStyle/workDetail/workDetail.scss
pages/reserve/hostingStyle/workDetail/workDetail.wxml
pages/reserve/hostingStyle/WorkList/WorkList.js
pages/reserve/hostingStyle/WorkList/WorkList.json
pages/reserve/hostingStyle/WorkList/WorkList.scss
pages/reserve/hostingStyle/WorkList/WorkList.wxml
pages/reserve/reserve.js
pages/reserve/reserve.json
pages/reserve/reserve.wxml
pages/reserve/reserve.wxss
pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.js
pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.json
pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.wxml
pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.wxss
pages/reserve/reserveButtonAndPopup/tool.wxs
pages/reserve/store/hostingStyle.js
pages/reserve/store/reserve.js
pages/reserve/vip/vip.js
pages/reserve/vip/vip.json
pages/reserve/vip/vip.wxml
pages/reserve/vip/vip.wxss
pages/reserve/workDetail/workDetail.js
pages/reserve/workDetail/workDetail.json
pages/reserve/workDetail/workDetail.scss
pages/reserve/workDetail/workDetail.wxml
pages/review/imgPreview/imgPreview.js
pages/review/imgPreview/imgPreview.json
pages/review/imgPreview/imgPreview.wxml
pages/review/imgPreview/imgPreview.wxss
pages/review/rankInfo/rankInfo.js
pages/review/rankInfo/rankInfo.json
pages/review/rankInfo/rankInfo.wxml
pages/review/rankInfo/rankInfo.wxss
pages/review/review.js
pages/review/review.json
pages/review/review.wxml
pages/review/review.wxss
pages/review/reviewItem/reviewItem.js
pages/review/reviewItem/reviewItem.json
pages/review/reviewItem/reviewItem.wxml
pages/review/reviewItem/reviewItem.wxss
pages/test/test.js
pages/test/test.json
pages/test/test.wxml
pages/test/test.wxss
utils/index.js
utils/qiniu/index.js
utils/request.js
```

# Files

## File: api/message.js
````javascript
import { request } from '../utils/request.js'

/**
 * æ¶ˆæ¯å®¡æ ¸
 */
export function reqSecurityMsgCheck(content) {
    return request('subscribeController/msg_sec_check', 'POST', {
      content,
    });
  }
  
/**
 * è·å–èŠå¤©è®°å½•
 */
export function reqGetChatRecord(splid) {
  return request(
    "wxScan/getMsgInfo",
    "GET",
    {
      splid,
      num: 1,
      size: 30,
    },
    {
      host: "H5",
    }
  );
}

/**
 * å‘é€èŠå¤©æ¶ˆæ¯
 */
export function reqSendChatMessage(message) {
  return request('sendMsgController/msgGo6', 'POST', {
    splid: wx.getStorageSync('liveId'),
    content: message,
    color: 0,
  },{
    host: "H5",
  });
}
````

## File: api/weddingMan.js
````javascript
import { request } from '../utils/request';

/**
 * è¿›è¡Œè¯„ä»·
 * @param {String} id ç”¨æˆ·id
 * @param {String} userType ç”¨æˆ·ç±»å‹ 1 è¡¨ç¤ºå¸ä»ªç”¨æˆ·  3 è¡¨ç¤ºå©šç¤¼äººç”¨æˆ·  2 è¡¨ç¤ºå½“å‰äº’åŠ¨ç”¨æˆ·
 */
export function reqGetUserInfo(id, userType) {
  return request(
    'qiMiao/getOhterUserInfo',
    'GET',
    {
      obj_userId: String(id),
      user_type: String(userType),
    },
    {
      host: 'WWW',
    },
  );
}

/**
 * è·å–ç”¨æˆ·çš„ä½œå“åˆ—è¡¨
 */
export function reqGetCaseList(id) {
  return request(
    'qiMiao/getCaseList',
    'GET',
    {
      obj_userId: id,
    },
    {
      host: 'WWW',
    },
  );
}

/**
 * è·å–è¯„ä»·åˆ—è¡¨
 * @param {Object} params
 * @param {Number} params.currentPage å½“å‰é¡µ
 * @param {Number} params.showCount æ¯é¡µæ¡æ•°
 * @param {String} params.userId ç”¨æˆ·id
 */
export function reqGetUserComments({ currentPage, showCount, userId }) {
  return request(
    'splidComment/getMyCommentList',
    'GET',
    {
      is_need_label: '1',
      type: '3',
      currentPage,
      showCount,
      obj_userId: userId,
    },
    {
      host: 'WWW',
    },
  );
}
````

## File: appGlobalData/examineMode.js
````javascript
import { generateRandomAvatarAndNickname } from '../utils/index'

/**
 * å®¡æ ¸æ¨¡å—
 * @description å®¡æ ¸å‘˜è¿›å…¥å°ç¨‹åºçš„æƒ…å†µä¸‹(å®¡æ ¸æ¨¡å¼)éœ€è¦æ‰§è¡Œçš„é€»è¾‘
 */

/**
 *
 * @param {*} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function examineMode_module(app) {
  const { globalData } = app;
  const LIVEID = "afb94fa7142f43adb3c5dc8bc61d2d9b";
  //     const DEFAULTAVATOR =
  //   "https://static.joymew.com/joymewScreen/defaultHeadImg2.png";

  globalData.examineMode_isExamineMode = false; // {Boolean}æ˜¯å¦æ˜¯å®¡æ ¸æ¨¡å¼
  globalData.examineMode_liveId = LIVEID; // {String} å®¡æ ¸æ¨¡å¼ä¸‹çš„liveId
  /**
   * åˆå§‹åŒ–"å®¡æ ¸æ¨¡å¼çŠ¶æ€"
   * @description æ ¹æ®äºŒç»´ç ä¿¡æ¯(å¸¦å‚æ•°çš„url)ã€åˆ†äº«å¸¦å‚ã€ç¼“å­˜ä¸­liveIdæ¥åˆ¤æ–­æ˜¯å¦æ˜¯å®¡æ ¸æ¨¡å¼
   */
  app.examineMode_initData = ({ qrcodeInfo, sharedLiveId, storageLiveId }) => {
    // æ‰«ç è¿›å…¥çš„æƒ…å†µä¸€å®šæ˜¯éå®¡æ ¸æ¨¡å¼
    if (qrcodeInfo) {
      globalData.examineMode_isExamineMode = false;
    } else if (sharedLiveId) {
      // åˆ†äº«å¸¦å‚çš„æƒ…å†µè¦åˆ¤æ–­liveIdæ˜¯å¦å’ŒLIVEIDä¸€è‡´,ä¸€è‡´åˆ™æ˜¯å®¡æ ¸æ¨¡å¼
      globalData.examineMode_isExamineMode = sharedLiveId === LIVEID;
    } else if(storageLiveId) {
      // ç¼“å­˜ä¸­è¯»å–liveIdçš„æƒ…å†µè¦åˆ¤æ–­liveIdæ˜¯å¦å’ŒLIVEIDä¸€è‡´,ä¸€è‡´åˆ™æ˜¯å®¡æ ¸æ¨¡å¼
      globalData.examineMode_isExamineMode = storageLiveId === LIVEID;
    } else {
      // å…¶ä»–æƒ…å†µé»˜è®¤æ˜¯å®¡æ ¸æ¨¡å¼
      globalData.examineMode_isExamineMode = true;
    }
    if(globalData.examineMode_isExamineMode) {
      // ç”Ÿæˆä¸€ä¸ªéšæœºå¤´åƒæ˜µç§°
      const { nickName, avatar } = generateRandomAvatarAndNickname();
      app.userInfo_setuserInfo({
        avatar: avatar,
        nickname: nickName
      });
      return LIVEID;
    } else {
      return undefined;
    }
  };
}
export default examineMode_module;
````

## File: appGlobalData/gameInfo.js
````javascript
/**
 * æ¸¸æˆä¿¡æ¯æ¨¡å—
 */

/**
 *
 * @param {*} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function gameInfo_module(app) {
  const { globalData } = app;
  globalData.gameInfo_nynList = []; // {object[]}æ‰­ä¸€æ‰­å¥–é¡¹åˆ—è¡¨
  globalData.gameInfo_luckyWheelPrizeItemList = []; // {object[]}å¹¸è¿å°è½¬ç›˜å¥–é¡¹åˆ—è¡¨
  /**
   * åˆå§‹åŒ– "æ‰­ä¸€æ‰­å’Œå¹¸è¿å°è½¬ç›˜çš„å¥–é¡¹åˆ—è¡¨"
   */
  app.gameInfo_initNynAndluckyWheel = (nynList, luckySmallList) => {
    // è®¾ç½®æ‰­ä¸€æ‰­å¥–é¡¹åˆ—è¡¨
    const tmpNynPrizeArray = [];
    const tmpNynList = nynList.split(',');
    for (let i = 0; i < tmpNynList.length; i += 1) {
      if (tmpNynList[i] === '0') {
        tmpNynPrizeArray.push({
          desc: 'è°¢è°¢å‚ä¸',
          endIndex: i,
        });
      } else if (tmpNynList[i] !== '-1') {
        tmpNynPrizeArray.push({
          desc: tmpNynList[i] + 'å…ƒ',
          endIndex: i,
        });
      }
    }
    globalData.gameInfo_nynList = tmpNynPrizeArray;
    // è®¾ç½®å¹¸è¿å°è½¬ç›˜å¥–é¡¹åˆ—è¡¨
    globalData.gameInfo_luckyWheelPrizeItemList = luckySmallList.split(',');
  };
}
export default gameInfo_module;
````

## File: appGlobalData/index.js
````javascript
import accountInfo_module from "./accountInfo";
import examineMode_module from "./examineMode";
import splidInfo_module from "./splidInfo";
import siyiInfo_module from "./siyiInfo";
import userInfo_module from "./userInfo";
import systemInfo_module from "./systemInfo";
import gameInfo_module from "./gameInfo";

export default {
    accountInfo_module, // {Function} è´¦å·ä¿¡æ¯æ¨¡å—
    examineMode_module, // {Function} å®¡æ ¸æ¨¡å¼æ¨¡å—
    splidInfo_module, // {Function} æœ¬åœºæ´»åŠ¨ä¿¡æ¯æ¨¡å—
    siyiInfo_module, // {Function} æœ¬åœºæ´»åŠ¨ä¸»æŒäººä¿¡æ¯æ¨¡å—
    userInfo_module, // {Function} ç”¨æˆ·ä¿¡æ¯æ¨¡å—
    systemInfo_module, // {Function} å°ç¨‹åºç³»ç»Ÿæ¨¡å—
    gameInfo_module, // {Function} æ¸¸æˆä¿¡æ¯æ¨¡å—
}
````

## File: appGlobalData/readme.md
````markdown
# appGLobalDataæ¨¡å—è¯´æ˜
**å…¨å±€çŠ¶æ€ç®¡ç†**
- å¯¹app.jsæŒ‰åŠŸèƒ½æ¨¡å—è¿›è¡Œæ‹†åˆ†
- åªæœ‰app.jså¯ä»¥å¼•å…¥è¯¥æ¨¡å—

**çŠ¶æ€æ–¹æ³•å‘½åè§„åˆ™**
```
æ¨¡å—å_çŠ¶æ€å(æ¯”å¦‚:accountInfo_name)
æ¨¡å—å_æ–¹æ³•å(æ¯”å¦‚:accountInfo_initData)
```


**å¼€å‘æ­¥éª¤**
```
1ã€éœ€è¦æ–°å¢åŠŸèƒ½æ¨¡å—
    1.1ã€æŒ‰ç…§å·²æœ‰çš„å…¶ä»–åŠŸèƒ½æ¨¡å—æ ¼å¼åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªJsæ¨¡å—è¿›è¡Œå¼€å‘
    1.2ã€åœ¨index.jsä¸­å¼•å…¥æ–°å»ºçš„Jsæ¨¡å—

2ã€ä¸éœ€è¦æ–°å¢åŠŸèƒ½æ¨¡å—
    æ‰¾åˆ°å¯¹åº”çš„Jsæ¨¡å—å¯¹çŠ¶æ€æ–¹æ³•è¿›è¡Œç¼–å†™
```
````

## File: appGlobalData/systemInfo.js
````javascript
/**
 * å°ç¨‹åºç³»ç»Ÿæ¨¡å—
 */

/**
 *
 * @param {*} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function systemInfo_module(app) {
    const { globalData } = app;
  
    globalData.systemInfo_bottomLift = 0; // {Number} åº•éƒ¨å®‰å…¨è·ç¦»
    globalData.systemInfo_statusBarHeight = 0; // {Number} çŠ¶æ€æ é«˜åº¦(æœ‰ç”µæ± ã€æ—¶é—´æ çš„é«˜åº¦)
    globalData.systemInfo_titleBarHeight = 0; // {Number} æ ‡é¢˜æ é«˜åº¦(ä¸åŒ…æ‹¬çŠ¶æ€æ )
    /**
     * åˆå§‹åŒ–ç³»ç»Ÿä¿¡æ¯
     */
    app.systemInfo_initData = () => {
        wx.getSystemInfo({
            success: (res) => {
                console.log(res);
                globalData.systemInfo_bottomLift = res.screenHeight - res.safeArea.bottom;
                globalData.systemInfo_statusBarHeight = res.statusBarHeight;
                globalData.systemInfo_titleBarHeight = res.model.indexOf('iPhone') !== -1 ? 44 : 48;
            },
            fail: (err) => {
                console.log(err);
            },
          });
    };
  }
  export default systemInfo_module;
````

## File: assets/constant/default.js
````javascript
export default {
  defaultJoymewAvatar: 'https://ustatic.hudongmiao.com/joymewMp/defaultHeadImg2.png', // é»˜è®¤å—¨å–µå¤´åƒ
  defaultGrayAvatar: 'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar.png', // é»˜è®¤ç°è‰²å¤´åƒ
  commentDanmu: [
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/7caf15e372604102aeee963d75b2768b',
      comment: 'ä¸»æŒäººæ™®é€šè¯è¯´æ»´æ æ æ»´ï¼ŒğŸ˜„å¹½é»˜é£è¶£ï¼Œå¾ˆä¸é”™ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/be4285f66ab243bb868fac7ba4e4dc19',
      comment: 'å£°éŸ³éŸ³å¥½å¥½å¬ï¼Œæ°”æ°›æ´»è·ƒäº’åŠ¨ç²¾å½©',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/46baed054d9649e4955dcc4fa9a56553',
      comment: 'ä¸»æŒäººçœŸçš„å¤ªæ£’äº†é£è¶£å¹½é»˜å¯åŠ¨ç²¾å½©æ´»è·ƒå¤šæ‰å¤šè‰ºè€Œä¸”äººé•¿å¾—å¤ªå¸…äº†å’Œå¤ªé…·äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/8f0dfeb8425144508e1139fed41f7388',
      comment: 'ä¸»æŒäººå¸…å“¥ä½ å¤ªæ£’äº†ï¼Œå¸Œæœ›å‡ å¹´åæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿè¯·æ‚¨å¸®å„¿å­ä¸»æŒå©šç¤¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/7a7b0d7763e2430595966d015369292b',
      comment: 'ä¸»æŒäººå¸…æ°”ï¼Œé£è¶£å¹½é»˜ï¼Œå¤šæ‰å¤šè‰ºï¼Œæœ‰æœºä¼šä¼šæ¨èæœ‹å‹',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/826189c5cabc4a0bbce00eb036164b12',
      comment: 'éå¸¸éš¾å¿˜çš„ä¸€æ¬¡å©šç¤¼ï¼Œæ–°å¨˜å¤ªç¾äº†ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/e8fc93d922ce43c395a89e4e2872eebe',
      comment: 'å¹½é»˜é£è¶£,ä¸¾æ­¢æ–‡é›…,ä¼˜é›…å¤§æ–¹å‹,æ¸©æš–é˜³å…‰',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/95f5831d6a294298b05ad0925b4cb55d',
      comment: 'ä¸»æŒå°å“¥å“¥å£°éŸ³å¥½å¬ï¼Œä¸»æŒæ°›å›´ä¹Ÿå¾ˆä¸é”™ï¼›äº’åŠ¨è¾ƒå¼ºã€‚æ£’æ£’å“’ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/e9c03d76d1f44bf2ad9f1ccab784fe9c',
      comment: ',ä¸»æŒäººä»Šå¤©æ™šä¸Šè¯´çš„éå¸¸æ£’ï¼Œå¤šæ‰å¤šè‰º',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/054dc1930af4434687cc56fedadd7db5',
      comment: 'äº’åŠ¨åŠ¨ç²¾ç²¾å½©æ°”æ°›æ´»ã€è·ƒé£è¶£å¹½é»˜ä¸»æŒäººè¾›è‹¦äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/de0c871f15de4b91b53143b3a4dcb0a3',
      comment: 'é‡è§çš„éƒ½æ˜¯å¤©æ„ï¼Œæ‹¥æœ‰çš„éƒ½æ˜¯å¹¸è¿',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/a6e7486e3c684e26a832b62d54ce383b',
      comment: 'ä¸»æŒäººå£°éŸ³çœŸçš„å¾ˆèµ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/8db03d1957e84d16a2495c5e31c4881c',
      comment: 'æ°”æ°›å¾ˆå¥½ï¼Œä¸»æŒäººå¾ˆèµ/:strong ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/42ee2ed12f06478b9065ed1d80df5477',
      comment: 'æœ‰è¶£çš„ä¸€åœºå©šå®´',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/9e60e611b92c4668bb08d07d8f1474a7',
      comment: 'æ°”æ°›æ´»è·ƒï¼é‡‘ç‰Œä¸»æŒï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/6bbcf56bb69b42779e1cdc5676366c98',
      comment: 'ä¸»æŒäººå¸…æ°”ä¸”ä¸”å¤šæ‰å¤šå¤šè‰ºé£è¶£å¹½é»˜ï¼Œä¸»æŒè¾›è‹¦äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/ee6539d289464f85a79e6c0be44b254e',
      comment: 'å¸ä»ªæ°”æ°›æ‹¿æçš„ç›¸å½“å¯ä»¥ï¼Œå¯æ˜¯æˆ‘æ²¡çº¢åŒ…æ²¡å¥–å“ï¼Œæ²¡å¨ƒå¨ƒ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/ec85b975240b481d843bc5bc6f5c2690',
      comment: 'äº’åŠ¨åšçš„å¾ˆå¥½ï¼Œæ•´ä¸ªç¯èŠ‚å®‰æ’çš„ç¯ç¯ç›¸æ‰£',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/c903f512edfd46358234f5446cce8a0f',
      comment: 'ä¸»æŒäººå¸…æ°”å¤šæ‰å¤šè‰ºï¼Œç°åœºæ°”æ°›æ´»è·ƒï¼Œäº’åŠ¨ç›¸å½“ç²¾å½©ï¼Œå©šç¤¼åœ¨æ¬¢å¿«çš„æ°›å›´ä¸­åœ†æ»¡ç»“æŸï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/3457b5391a3944bfa9b882d46358e597',
      comment: 'ä¸»æŒå¥½å¸…,ç‰›ï¼Œç‰›ï¼Œç‰›',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d10c27b7250b4d24975d55dd6c036887',
      comment: '50å—é’±å¾ˆå¼€å¿ƒå“ˆå“ˆå“ˆå“ˆå“ˆ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/a91b2655840b45deb5e2008f13e82689',
      comment: 'æˆ‘å¾ˆå–œæ¬¢è¿™çš„ä¸»æŒäºº',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/f29814ab9c6845018ddcf4a89a9c71a0',
      comment: 'æ°”æ°›æçš„å¾ˆå—¨ï¼Œä¸»æŒäººä¹Ÿå¾ˆæ£’',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/b70536b6c16c4e0a9ce1b79668fde844',
      comment: 'å¸ä»ªå°å“¥è¾›è‹¦äº†ï¼å©šç¤¼å¾ˆæ£’',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/efe8e550a0b349a29d490f1dc3c1d407',
      comment: 'é¢ï¼Œåˆç¢°è§äº†ğŸ˜† ğŸ˜† ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/9130a8326af945e9997dfa2b220ccf5a',
      comment: 'è¾›è‹¦å•¦ï¼Œå¦‚æœç»“å©šï¼Œè‚¯å®šæ˜¯æˆ‘çš„é¦–é€‰å¯¹è±¡',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/85a406981e0c425f8e74938821e0a317',
      comment: 'å¸…æ°”åè¶³ä¸»æŒäººï¼Œæ°”æ°›æ´»è·ƒç²¾å½©ï¼Œä½“éªŒæ„Ÿè¶…å¥½',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/dc69a13ce76c4ed2a0e9a730e28fd168',
      comment: 'å¸…æ°”åè¶³ä¸»æŒäººï¼Œæ°”æ°›æ´»è·ƒç²¾å½©ï¼Œä½“éªŒæ„Ÿè¶…å¥½',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/3f6793bace83483c99c29ce01ceb5a47',
      comment: 'ä¸»æŒäººè®¤çœŸæ´»è·ƒä¸”å¤šæ‰å¤šè‰ºï¼Œäº’åŠ¨ç²¾å½©ï¼Œæ˜¯ä¸ªäººæ‰ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/6bfd19867ffd4c689d18f7afc0dd793e',
      comment: 'éå¸¸æ»¡æ„ï¼Œéå¸¸å¤šæ‰å¤šè‰ºï¼Œæ°”æ°›æ´»è·ƒï¼Œäº’åŠ¨ç²¾å½©ï¼Œä¸»æŒäººè¾›è‹¦å•¦ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/18e1c4dfaba1484b9ab5ece4241e5a53',
      comment: 'å¤šæ‰å¤šè‰ºï¼Œå¤ªæ£’äº†ã€‚è¶…å–œæ¬¢ä½ ã€‚666ğŸ‘ğŸ‘ğŸ‘ğŸ‘',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/afa8d092d8864b0b87d7f5b2220edc8f',
      comment: 'ä¸»æŒäººä¸»æŒå¾—å¤ªå¥½äº†æ–¹ä¸ºä½ ç‚¹èµ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/b88d1bc61a474041b38e6f636d449312',
      comment: 'ä¼˜ç§€ï¼Œæ‰åä¸å¸…æ°”äºä¸€èº«',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/53e0d99190da4abaa986de4b71308474',
      comment: 'é“ä»”çš„æ­Œå£°å¤ªåŠ¨å¬äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/60f63fe1650948789fdf0ed76f5adadf',
      comment: 'å¸ä»ªå°å“¥ä»Šå¤©ç»™äº†ï¼Œä¸ºä»–ç‚¹èµ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/c5307e264d494311aacd183bf7eeb139',
      comment: 'æ•´åœºä¸€ä¸ªäººï¼Œå—¨ç¿»å…¨åœºï¼Œç‚¹èµ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d59d1ff0f82b40f3bd0af22f4e6c7e8b',
      comment: 'ä¸»æŒäººå¤ªå¸…äº† æ˜¯ä¸æ˜¯å•èº«å•Š',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/24538634bc36496590b550293a1e1804',
      comment: 'å¸…å“¥ä¸»æŒäºº ï¼Œå£æ‰å¥½ã€‚å¸¦åŠ¨å…¨åœºæ°›å›´ ï¼Œæ°”æ°›çƒ­çƒˆ æ£’æ£’å“’ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/737274a082e04f24bbf7d66b5c318cf6',
      comment: 'å¸ä»ªå°å“¥ä»¬ä¹Ÿå¾ˆè¾›è‹¦.è°¢è°¢ä½ ä»¬å•¦',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d1ea0bf1211845ada3c1a1a80481e62f',
      comment: 'ä¸çŸ¥é“è¯´ä»€ä¹ˆï¼Œå°±è¯´ä½ å¥½å¸…å§',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/eeb8733b8aa64223bb01b34c4a71d892',
      comment: 'ä»Šå¤©çš„å©šå®´å¾ˆå¤§æ°”ï¼Œæ°”æ°›æ²»è·ƒï¼Œå¤šæ‰å¤šè‰ºï¼Œä¸»æŒäººå¸…ï¼Œè¿™å®¶å©šå®´å…å¥½ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/dbc6a6e5d79d4ac4b832bcae96bcd796',
      comment: 'å¸ä»ªå°å“¥å¸…æ°”ï¼Œæœ‰äº²å’ŒåŠ›å’Œæ„ŸæŸ“åŠ›ï¼Œå…¨éƒ¨æ£’æ£’å“’',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/28be0f623f264d93bd5c8a06887fa9df',
      comment: 'ä¸»æŒäººå¹½é»˜é£è¶£ï¼Œç°åœºæ°”æ°›æçš„å¾ˆæ´»è·ƒï¼Œæ¼‚äº®',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/95be2fa6d35246329a2dd95bee69241b',
      comment: 'å£æ‰æƒŠäººï¼Œå–œåº†è¿è¿ï¼Œå¹½é»˜é£è¶£ï¼Œé˜³å…‰å¸…æ°”',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/06b3b9a5e2594a8a930a5d49607e5dfd',
      comment: 'ç¥ç¦æ»¡æ»¡ï¼Œé‡‘ç‰Œä¸»æŒï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/1170b9843cd349ab8cd321caeaf3d8c7',
      comment: 'å¸ä»ªå¸…å“¥ğŸ¤µâ€â™‚ï¸è¾›è‹¦äº†ï¼Œä½ çš„äº’åŠ¨ç²¾ç¥æ´»è·ƒæ°”æ°›å¤šæ‰å¤šè‰ºçš„è¡¨æ¼”ä»¤äººæ„Ÿå—æ·±åˆ»ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/6c0663970696460e81167e6f80f810e8',
      comment: 'ä¸»æŒäººæˆ‘æ˜¯ä½ çš„å°è¿·å¦¹ï¼Œå“ˆå“ˆå“ˆ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/2a26b1c3aeff45c18d47262cb537e9bf',
      comment: 'å¸ä»ªå¾ˆè®¤çœŸå–åŠ› ç»™ğŸ‘ ğŸ‘ ğŸ‘ ğŸ‘ ğŸ‘ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/fe269bc93d1a439c9426129a8a03fac4',
      comment: 'å–œæ¬¢ä½ è¿™é£æ ¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/e16bba0fd96949b59c3667abc062848d',
      comment: 'æœ‰å£°ï¼Œæœ‰è‰²ï¼Œç²¾å½©ç»ä¼¦ï¼Œåˆ›æ„ç‹¬æ–°ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/8ee2e4e7010a4d1d9bdf37294ca6eee0',
      comment: 'ä¸»æŒäººå¸…å»å£°éŸ³æ•ˆæœæ£’æ°”æ°›æ´»è·ƒäº§ä¸»æŒäººè¾›è‹¦å•¦ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/365f720d73db4ee5b7462e1d6edacc46',
      comment: 'å¸ä»ªå°å“¥å¸…æ°”çˆ†æ£šï¼Œç°åœºæ°”æ°›æ£’æ£’çš„',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/fc53a06c05df4d4f836f542c061b3e46',
      comment: 'ä¸»æŒçš„ä¸é”™ï¼Œå¯æƒœæˆ‘æ²¡æ‹¿åˆ°å¥–ğŸ˜‚ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/1e83c099552d421398959025aa2695d8',
      comment: 'å¸ä»ªå°å“¥çœŸæ˜¯å¤šæ‰å¤šè‰ºï¼Œæœ‰æœºä¼šæ¨èç»™æˆ‘çš„äº²æœ‹å¥½å‹ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d9772c5871724f13b6c731806f3ec44a',
      comment: 'ä¸»æŒå¾ˆå¥½ï¼Œæˆ‘å®¶å„¿å­ç»“å©šä¹Ÿé€‰ä½ å®¶å…¬å¸',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/6b57e181f666456e8f134ffb43baf815',
      comment: 'ä¸é”™ä¸é”™ï¼Œè¿˜æœ‰çœ¼ç¥ç¤ºæ„',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/623d84fc9caa495fb5b3b73f2dd95d20',
      comment: 'ç°åœºå¸¦åŠ¨æ°”æ°›ï¼Œä¼šåœºæ•´ä¸ªå—¨èµ·æ¥å•¦ï¼Œç®€ç›´å°±æ˜¯party å°ç‹å­ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/63a3d4b04cea4fd48c2c8f57ac82ae58',
      comment: 'å®Œç¾ï¼Œå¾ˆå–œæ¬¢è¿™ä¸ªä¸»æŒäºº',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/c824ffa7586c4979b62f4f06f3fcfc0a',
      comment: 'å‚åŠ æ‰€æœ‰å©šç¤¼ä¸­æœ€æ£’çš„ä¸»æŒ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/3aeb0adf007947cda011e4d9da8d9036,',
      comment: 'å¸ä»ªå°å“¥å“¥å¸…æ°”åˆå¤šå½©ï¼Œå¿…é¡»äº”æ˜Ÿå¥½è¯„ï¼ï¼ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/b5aad85f6d0b496bbb0ebb33b3db41dd',
      comment: 'ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ä¹ˆæ£’çš„ä¸»æŒäººï¼Œç¥äº‹ä¸šè’¸è’¸æ—¥ä¸Š',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/72e6885f0ad843ee9b4eafe36b1bb9cd',
      comment: 'è¿™æ˜¯ç¬¬äºŒæ¬¡é‡è§ä¸»æŒäººäº†ï¼Œå®åŠ›æ´¾ã€‚',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/f6a16ba18b124898bcf5881c05d7bede',
      comment: 'ä¸»æŒäººå¾ˆæ£’  èƒ½ç…§é¡¾åˆ°å„ä¸ªå¹´é¾„æ®µçš„æœ‹å‹',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/72ba753c9a0a41218a06c288c1abf276',
      comment: 'æˆ‘çš„å©šç¤¼ä¹Ÿæ˜¯ä½ ä¸»æŒå“’ å¾ˆå¥½ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/968842b689b84846be31506fc83b80ca',
      comment: 'ä¸»æŒäººå¾ˆç”¨å¿ƒäº† ä¸»æŒä¸€åœºå©šç¤¼ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/8383e05679074a4eaeae051518c32947',
      comment: 'æ£’ï¼å°±æ˜¯åŠç»“å©šæ—©äº†åŠå¹´ï¼Œä¸ç„¶å°±é€‰ä½ å•¦',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/4b6bc47bc5684fbbb878f114cc08f5c2',
      comment: 'ä½ ä¸»æŒå©šç¤¼èƒ½æ„ŸåŠ¨å…¨åœºï¼Œèƒ½æŠŠæ‰€æœ‰å¹´é¾„æ®µçš„äººå¸¦åŠ¨èµ·æ¥ï¼æ•ˆæœæ æ çš„ï¼ŒæœŸå¾…ä½ ä¸‹æ¬¡æ›´ç²¾å½©çš„åœºé¢ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/cde04dbc070b4615a037d31d1cb69683',
      comment: 'æœç„¶å‰å®³ï¼Œæ˜¯åœ¨ä¸‹è¾“äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d71738a2c5d34c08b40fd8423299ec75',
      comment: 'è¿™åœºå©šç¤¼æ˜¯æˆ‘ç›®å‰çœ‹åˆ°çš„æœ€æ£’çš„ä¸€åœºï¼Œæ°”æ°›ç‰¹åˆ«å¥½',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/12fe9e9202cf4bb1aa2bd76abdc37143',
      comment: 'ä¸‹æ¬¡ç»“å©šå¯ä»¥æ‰¾ä½ ä¸»æŒå—?',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/25df74f75bf64f00bc65a90d933e7556',
      comment: 'ä¸‹æ¬¡è§é¢å¤šå‘å‡ ä¸ªçº¢åŒ…ï¼Œå“ˆå“ˆ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/a9e9ac9a22894ff6b6c0d4605fde7bf4',
      comment: 'ä¸€ä¸ªå­—å¸…ï¼ŒäºŒä¸ªå­—ç‰¹å¸…ï¼Œä¸‰ä¸ªå­—å¸…å‘†äº†ï¼ï¼ï¼ï¼šäº”æ˜Ÿçº§',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/2081aec05e714ea3aba0036ad45a5af1',
      comment: 'ä¸»æŒäººé•¿çš„å¸…ï¼Œå£°éŸ³å¥½å¬ï¼Œä¸»è¦ç»™æˆ‘çš„å°çº¢åŒ…å¤šå¤šğŸ‘ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/52263a11a5bf44808687dcc55f41f4da',
      comment: 'å¤ªæ£’äº†ï¼Œå‚åŠ è¿‡çš„å©šç¤¼å½“ä¸­æœ€ç»™åŠ›çš„ä¸€ä½ä¸»æŒäººï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/650b2878e77049d5b8ab963f28ba2747',
      comment: 'ä¸»æŒå¸…å“¥å£°éŸ³å“äº®ï¼Œå©šç¤¼ç­–åˆ’åˆ°ä½ï¼Œæ°”æ°›ç²¾å½©å¹½é»˜ã€‚ä¸ºä½ ç‚¹èµï¼Œå€¼çš„äº”æ˜Ÿå¥½è¯„',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/f6c74dca1d1e4d17b96da780f35b12aa',
      comment: 'æƒ…å•†å¾ˆé«˜çš„å¸…å“¥ä¸»æŒ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/b796ab1e2e2f4011b54c9626f0f4e485',
      comment: 'å°å“¥å“¥å¾ˆæœ‰ç¤¼è²Œ æ˜¯æˆ‘ç†æƒ³ä¸­çš„å©šç¤¼å¸ä»ª',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/dcc05cb0a0124cb89e4f1dd797580a5a',
      comment: 'ç»™82åˆ†æ€•ä¸»æŒäººéª„å‚²ï¼Œå‰©ä¸‹çš„18åˆ†ä»¥666çš„å½¢å¼ç»™ä½ â€¦',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/37d6447e489f47648cb13fa31f4211d3',
      comment: 'ä»Šå¤©çš„å©šç¤¼è®©äººéš¾å¿˜ï¼Œä¸»æŒäººéå¸¸ä¼˜ç§€ï¼Œä¸»æŒæ°´å¹³å¾ˆé«˜',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/383e367501394873bf03a22261b7765e',
      comment: 'æ•´åœºå©šç¤¼æ°”æ°›éå¸¸çƒ­é—¹ï¼Œä¸»æŒäººå’Œå˜‰å®¾åœ¨äº’åŠ¨ç¯èŠ‚åˆæ‹ï¼Œæœ€åè¯´ä¸€å¥ï¼Œä¸»æŒäººå¾ˆå¸…ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/2963116d6c544f79a21639d3f970e6d9',
      comment: 'ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°ä»€ä¹ˆæ ·çš„å©šç¤¼å«åšæ¸…æ–°è„±ä¿—ï¼Œå¾ˆå–œæ¬¢ä»Šå¤©çš„ä¸»æŒäººï¼Œå¤šæ‰å¤šè‰ºï¼Œç¤¼è²Œå‹å¥½ï¼Œä»Šå¤©è¾›è‹¦å•¦ï¼å¸Œæœ›ä»¥åç»“å©šä¹Ÿèƒ½è¯·ä»–å½“ä¸»æŒ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/fccd0c18d27d42d99a2182865d6eabf1',
      comment: 'è¶…çº§æœ‰æ°”åœºï¼Œæ´»åŠ¨ä¸»æŒçš„ä¹ŸæŒºæ£’ï¼Œæœ‰æ˜¯ä»Šå¤©è¿æ°”ç‹ï¼Œæ‹¿äº†ä¸¤ä¸ªå¤§å¥–å“¦ï¼ï¼ï¼',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/280df1261d5b48f6bd4f6f0febedadc0',
      comment: 'ä¸»æŒäººè¾›è‹¦äº†ï¼Œä¸‹æ¬¡æˆ‘å„¿å­ç»“å©šæœ‰æœºä¼šé‚€è¯·ä½ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d7cf7d5eb8d54fe0b781c7d2c448b969',
      comment: 'å¾ˆ6çš„Ck',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/6968d2f3ee94416c98e0f0ef80c7d10f',
      comment: 'å¸…å¸…ä¸»æŒï¼Œå©šç¤¼ç°åœºæ°”æ°›æ´»è·ƒï¼ŒæŠŠæ§æœ‰æ–¹ï¼Œå¸Œæœ›æœ‰ç¼˜å†è§ï¼ä¸ºä½ ç‚¹èµèµèµğŸ‘',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/9aca5214763348c58b2fdde0fa0aa1c0',
      comment: 'ä¸»æŒäººå¸…çš„ä¸€æ¯”',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/9aca5214763348c58b2fdde0fa0aa1c0',
      comment: 'ä»Šå¤©å‚åŠ å©šç¤¼ï¼Œæ˜¯æˆ‘ç¬¬ä¸€æ¬¡é‡è§ä¸»æŒäººè¿™ä¹ˆçš„å¸…æ°”ï¼Œå¤šæ‰å¤šè‰º',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/5afee876c4cb4570a0ef705c363db011',
      comment: 'æŒºæ£’çš„ï¼Œæ¥è§¦è¿‡çš„è¿™ä¹ˆå¤šä¸»æŒä¸­æ˜¯å‡ºç±»æ‹”èƒçš„äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/417257aa80134b9a930d4791c73c9093',
      comment: 'ä¸»æŒäººå¸…Bäº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/fac898fc909e47898570912dea8b72e6',
      comment: 'è¯´çš„å¤ªå¥½äº†ï¼Œéƒ½æ„ŸåŠ¨çš„å“­äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/1a280c8e5e9f4eb7a1fa2ef984cf0332',
      comment: 'åŠ ä¸ªå¾®ä¿¡æˆ‘é©¬ä¸Šç»“å©šäº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/c4229f93572f43318e0a8b090b2de434',
      comment: 'æ£’æ£’å“’ï½ä¸‹æ¬¡ç»“å©šæˆ‘ä¹Ÿæ‰¾ä½ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/8471484eadfc417caccd1318dcebd3b8',
      comment: 'äººå¸…å£°éŸ³æ£’ï¼Œä»¥åè‡ªå·±çš„å­©å­ç»“å©šä¹Ÿæ‰¾ä»–',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/73c32c96d380441ca6e3bf2a4cfcbdd3',
      comment: 'å¸ä»ªå°å“¥ç»ç»å­ï¼Œç­‰æˆ‘ç»“å©šæ‰¾ä½ ',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/aafe6fabe3c44f7d985e5916b2cf65da',
      comment: 'ä¸»æŒäººç¬¬äºŒæ¬¡é‡è§äº†ï¼Œå“ˆå“ˆï¼Œç¬¬ä¸€æ¬¡æˆ‘å”å”å„¿å­ç»“å©šï¼Œè¿™æ¬¡æ˜¯èˆ…èˆ…å„¿å­ç»“å©šï¼Œå¤ªæœ‰ç¼˜äº†ï¼Œä¸é”™ï¼Œäº’åŠ¨ç²¾å½©ï¼Œä¸»æŒäººå£°éŸ³æ•ˆæœç‰¹æ£’ï¼Œè›®å¥½çš„',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/e1ba7b0ca085463ab7395899b0219c69',
      comment: 'æœ‰æœºä¼šçš„ï¼Œæˆ‘å„¿å­æ˜å¹´ä¹Ÿè¦ç»“å©šäº†ï¼Œä¸æ™“å¾—å®šçš„æ˜¯å“ªå®¶ğŸ¥°ğŸ¥°',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/f589128aa97e45fea0752df15838c9f3',
      comment: 'å¯æƒœç»“å©šæ—©äº†',
    },
    {
      avator:
        'https://ustatic.hudongmiao.com/miao/comment/d7b7c167ace04f1fb264cb72546da461',
      comment: 'ç•™ä¸ªç”µè¯ï¼Œä¸‹å›æœ‰æ´»æ‰¾ä½ ï¼',
    },
  ],
  defaultAvatars: [
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/1.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/2.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/3.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/4.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/5.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/6.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/7.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/8.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/9.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/10.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/11.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/12.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/13.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/14.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/15.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/16.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/17.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/18.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/19.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/20.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/21.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/22.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/23.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/24.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/25.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/26.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/27.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/28.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/29.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/30.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/31.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/32.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/33.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/34.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/35.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/36.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/37.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/38.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/39.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/40.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/41.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/42.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/43.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/44.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/45.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/46.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/47.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/48.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/49.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/50.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/51.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/52.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/53.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/54.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/55.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/56.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/57.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/58.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/59.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/60.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/61.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/62.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/63.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/64.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/65.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/66.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/67.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/68.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/69.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/70.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/71.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/72.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/73.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/74.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/75.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/76.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/77.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/78.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/79.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/80.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/81.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/82.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/83.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/84.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/85.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/86.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/87.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/88.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/89.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/90.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/91.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/92.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/93.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/94.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/95.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/96.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/97.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/98.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/99.png',
    'https://ustatic.hudongmiao.com/joymewMp/defaultAvatar/100.png',
  ]
};
````

## File: components/feedbackEntry/feedbackEntry.js
````javascript
Component({
    /**
     * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
     */
    properties: {
        userId: {
            value: '',
            type: String
        },
        openId: {
            value: '',
            type: String
        },
    },
    observers: {
    },
    data: {
    },
    /**
     * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
     */
    methods: {
        // è·³è½¬åˆ°åé¦ˆé¡µé¢
        toFeedback() {
            wx.navigateTo({
                url: '/packageC/pages/feedback/feedback?userId=' + this.data.userId + '&openId=' + this.properties.openId,
            });
        },
    }
})
````

## File: components/feedbackEntry/feedbackEntry.json
````json
{
    "component": true
}
````

## File: components/feedbackEntry/feedbackEntry.wxml
````
<view class="feedbackEntry" bindtap="toFeedback">
    <image src="https://static.hudongmiao.com/joymewMp/img/recharge/kefuIcon.png" class="kefuIcon" />
    åé¦ˆæŠ•è¯‰
</view>
````

## File: components/feedbackEntry/feedbackEntry.wxss
````
.feedbackEntry {
    width: 147rpx;
    height: 58rpx;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    border-top-left-radius: 25rpx;
    border-bottom-left-radius: 25rpx;
    position: fixed;
    top: 48rpx;
    right: 0;
    font-size: 24rpx;
    color: #ffe2ce;
    padding: 0 8rpx 0 13rpx;
    /* æœ€é«˜å±‚çº§ */
    z-index: 9999;
}

.feedbackEntry>.kefuIcon {
    width: 24rpx;
    height: 24rpx;
    margin-right: 4rpx;
}
````

## File: components/imageCropper/cropper/cropper.js
````javascript
Component({
    properties: {
        /**     
         * å›¾ç‰‡è·¯å¾„
         */
        'imgSrc': {
            type: String
        },
        /**
         * è£å‰ªæ¡†é«˜åº¦
         */
        'height': {
            type: Number,
            value: 200
        },
        /**
         * è£å‰ªæ¡†å®½åº¦
         */
        'width': {
            type: Number,
            value: 200
        },
        /**
         * è£å‰ªæ¡†æœ€å°å°ºå¯¸
         */
        'min_width': {
            type: Number,
            value: 100
        },
        'min_height': {
            type: Number,
            value: 100
        },
        /**
         * è£å‰ªæ¡†æœ€å¤§å°ºå¯¸
         */
        'max_width': {
            type: Number,
            value: 300
        },
        'max_height': {
            type: Number,
            value: 300
        },
        /**
         * è£å‰ªæ¡†ç¦æ­¢æ‹–åŠ¨
         */
        'disable_width': {
            type: Boolean,
            value: false
        },
        'disable_height': {
            type: Boolean,
            value: false
        },
        /**
         * é”å®šè£å‰ªæ¡†æ¯”ä¾‹
         */
        'disable_ratio': {
            type: Boolean,
            value: false
        },
        /**
         * ç”Ÿæˆçš„å›¾ç‰‡å°ºå¯¸ç›¸å¯¹å‰ªè£æ¡†çš„æ¯”ä¾‹
         */
        'export_scale': {
            type: Number,
            value: 3
        },
        /**
         * ç”Ÿæˆçš„å›¾ç‰‡è´¨é‡0-1
         */
        'quality': {
            type: Number,
            value: 1
        },
        'cut_top': {
            type: Number,
            value: null
        },
        'cut_left': {
            type: Number,
            value: null
        },
        /**
         * canvasä¸Šè¾¹è·ï¼ˆä¸è®¾ç½®é»˜è®¤ä¸æ˜¾ç¤ºï¼‰
         */
        'canvas_top': {
            type: Number,
            value: null
        },
        /**
         * canvaså·¦è¾¹è·ï¼ˆä¸è®¾ç½®é»˜è®¤ä¸æ˜¾ç¤ºï¼‰
         */
        'canvas_left': {
            type: Number,
            value: null
        },
        /**
         * å›¾ç‰‡å®½åº¦
         */
        'img_width': {
            type: null,
            value: null
        },
        /**
         * å›¾ç‰‡é«˜åº¦
         */
        'img_height': {
            type: null,
            value: null
        },
        /**
         * å›¾ç‰‡ç¼©æ”¾æ¯”
         */
        'scale': {
            type: Number,
            value: 1
        },
        /**
         * å›¾ç‰‡æ—‹è½¬è§’åº¦
         */
        'angle': {
            type: Number,
            value: 0
        },
        /**
         * æœ€å°ç¼©æ”¾æ¯”
         */
        'min_scale': {
            type: Number,
            value: 0.5
        },
        /**
         * æœ€å¤§ç¼©æ”¾æ¯”
         */
        'max_scale': {
            type: Number,
            value: 2
        },
        /**
         * æ˜¯å¦ç¦ç”¨æ—‹è½¬
         */
        'disable_rotate': {
            type: Boolean,
            value: false
        },
        /**
         * æ˜¯å¦é™åˆ¶ç§»åŠ¨èŒƒå›´(å‰ªè£æ¡†åªèƒ½åœ¨å›¾ç‰‡å†…)
         */
        'limit_move': {
            type: Boolean,
            value: false
        }
    },
    data: {
        el: 'image-cropper', //æš‚æ—¶æ— ç”¨
        info: wx.getSystemInfoSync(),
        MOVE_THROTTLE: null, //è§¦æ‘¸ç§»åŠ¨èŠ‚æµsettimeout
        MOVE_THROTTLE_FLAG: true, //èŠ‚æµæ ‡è¯†
        INIT_IMGWIDTH: 0, //å›¾ç‰‡è®¾ç½®å°ºå¯¸,æ­¤å€¼ä¸å˜ï¼ˆè®°å½•æœ€åˆè®¾å®šçš„å°ºå¯¸ï¼‰
        INIT_IMGHEIGHT: 0, //å›¾ç‰‡è®¾ç½®å°ºå¯¸,æ­¤å€¼ä¸å˜ï¼ˆè®°å½•æœ€åˆè®¾å®šçš„å°ºå¯¸ï¼‰
        TIME_BG: null, //èƒŒæ™¯å˜æš—å»¶æ—¶å‡½æ•°
        TIME_CUT_CENTER: null,
        _touch_img_relative: [{
            x: 0,
            y: 0
        }], //é¼ æ ‡å’Œå›¾ç‰‡ä¸­å¿ƒçš„ç›¸å¯¹ä½ç½®
        _flag_cut_touch: false, //æ˜¯å¦æ˜¯æ‹–åŠ¨è£å‰ªæ¡†
        _hypotenuse_length: 0, //åŒæŒ‡è§¦æ‘¸æ—¶æ–œè¾¹é•¿åº¦
        _flag_img_endtouch: false, //æ˜¯å¦ç»“æŸè§¦æ‘¸
        _flag_bright: true, //èƒŒæ™¯æ˜¯å¦äº®
        _canvas_overflow: true, //canvasç¼©ç•¥å›¾æ˜¯å¦åœ¨å±å¹•å¤–é¢
        _canvas_width: 200,
        _canvas_height: 200,
        origin_x: 0.5, //å›¾ç‰‡æ—‹è½¬ä¸­å¿ƒ
        origin_y: 0.5, //å›¾ç‰‡æ—‹è½¬ä¸­å¿ƒ
        _cut_animation: false, //æ˜¯å¦å¼€å¯å›¾ç‰‡å’Œè£å‰ªæ¡†è¿‡æ¸¡
        _img_top: wx.getSystemInfoSync().windowHeight / 2, //å›¾ç‰‡ä¸Šè¾¹è·
        _img_left: wx.getSystemInfoSync().windowWidth / 2, //å›¾ç‰‡å·¦è¾¹è·
        watch: {
            //ç›‘å¬æˆªå–æ¡†å®½é«˜å˜åŒ–
            width(value, that) {
                    if (value < that.data.min_width) {
                        that.setData({
                            width: that.data.min_width
                        });
                    }
                    that._computeCutSize();
                },
                height(value, that) {
                    if (value < that.data.min_height) {
                        that.setData({
                            height: that.data.min_height
                        });
                    }
                    that._computeCutSize();
                },
                angle(value, that) {
                    //åœæ­¢å±…ä¸­è£å‰ªæ¡†ï¼Œç»§ç»­ä¿®æ”¹å›¾ç‰‡ä½ç½®
                    that._moveStop();
                    if (that.data.limit_move) {
                        if (that.data.angle % 90) {
                            that.setData({
                                angle: Math.round(that.data.angle / 90) * 90
                            });
                            return;
                        }
                    }
                },
                _cut_animation(value, that) {
                    //å¼€å¯è¿‡æ¸¡300æ¯«ç§’ä¹‹åè‡ªåŠ¨å…³é—­
                    clearTimeout(that.data._cut_animation_time);
                    if (value) {
                        that.data._cut_animation_time = setTimeout(() => {
                            that.setData({
                                _cut_animation: false
                            });
                        }, 300)
                    }
                },
                limit_move(value, that) {
                    if (value) {
                        if (that.data.angle % 90) {
                            that.setData({
                                angle: Math.round(that.data.angle / 90) * 90
                            });
                        }
                        that._imgMarginDetectionScale();
                        !that.data._canvas_overflow && that._draw();
                    }
                },
                canvas_top(value, that) {
                    that._canvasDetectionPosition();
                },
                canvas_left(value, that) {
                    that._canvasDetectionPosition();
                },
                imgSrc(value, that) {
                    that.pushImg();
                },
                cut_top(value, that) {
                    that._cutDetectionPosition();
                    if (that.data.limit_move) {
                        !that.data._canvas_overflow && that._draw();
                    }
                },
                cut_left(value, that) {
                    that._cutDetectionPosition();
                    if (that.data.limit_move) {
                        !that.data._canvas_overflow && that._draw();
                    }
                }
        }
    },
    attached() {
        this.data.info = wx.getSystemInfoSync();
        //å¯ç”¨æ•°æ®ç›‘å¬
        this._watcher();
        this.data.INIT_IMGWIDTH = this.data.img_width;
        this.data.INIT_IMGHEIGHT = this.data.img_height;
        this.setData({
            _canvas_height: this.data.height,
            _canvas_width: this.data.width,
        });
        this._initCanvas();
        this.data.imgSrc && (this.data.imgSrc = this.data.imgSrc);
        //æ ¹æ®å¼€å‘è€…è®¾ç½®çš„å›¾ç‰‡ç›®æ ‡å°ºå¯¸è®¡ç®—å®é™…å°ºå¯¸
        this._initImageSize();
        //è®¾ç½®è£å‰ªæ¡†å¤§å°>è®¾ç½®å›¾ç‰‡å°ºå¯¸>ç»˜åˆ¶canvas
        this._computeCutSize();
        //æ£€æŸ¥è£å‰ªæ¡†æ˜¯å¦åœ¨èŒƒå›´å†…
        this._cutDetectionPosition();
        //æ£€æŸ¥canvasæ˜¯å¦åœ¨èŒƒå›´å†…
        this._canvasDetectionPosition();
        //åˆå§‹åŒ–å®Œæˆ
        this.triggerEvent('load', {
            cropper: this
        });
    },
    methods: {
        /**
         * ä¸Šä¼ å›¾ç‰‡
         */
        upload() {
                let that = this;
                wx.chooseImage({
                    count: 1,
                    sizeType: ['original', 'compressed'],
                    sourceType: ['album', 'camera'],
                    success(res) {
                        const tempFilePaths = res.tempFilePaths[0];
                        that.pushImg(tempFilePaths);
                        wx.showLoading({
                            title: 'åŠ è½½ä¸­...'
                        })
                    }
                })
            },
            /**
             * è¿”å›å›¾ç‰‡ä¿¡æ¯
             */
            getImg(getCallback) {
                this._draw(() => {
                    wx.canvasToTempFilePath({
                        width: this.data.width * this.data.export_scale,
                        height: Math.round(this.data.height * this.data.export_scale),
                        destWidth: this.data.width * this.data.export_scale,
                        destHeight: Math.round(this.data.height) * this.data.export_scale,
                        fileType: 'png',
                        quality: this.data.quality,
                        canvasId: this.data.el,
                        success: (res) => {
                            getCallback({
                                url: res.tempFilePath,
                                width: this.data.width * this.data.export_scale,
                                height: this.data.height * this.data.export_scale
                            });
                        }
                    }, this)
                });
            },
            /**
             * è®¾ç½®å›¾ç‰‡åŠ¨ç”»
             * {
             *    x:10,//å›¾ç‰‡åœ¨åŸæœ‰åŸºç¡€ä¸Šå‘ä¸‹ç§»åŠ¨10px
             *    y:10,//å›¾ç‰‡åœ¨åŸæœ‰åŸºç¡€ä¸Šå‘å³ç§»åŠ¨10px
             *    angle:10,//å›¾ç‰‡åœ¨åŸæœ‰åŸºç¡€ä¸Šæ—‹è½¬10deg
             *    scale:0.5,//å›¾ç‰‡åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ 0.5å€
             * }
             */
            setTransform(transform) {
                if (!transform) return;
                if (!this.data.disable_rotate) {
                    this.setData({
                        angle: transform.angle ? this.data.angle + transform.angle : this.data.angle
                    });
                }
                var scale = this.data.scale;
                if (transform.scale) {
                    scale = this.data.scale + transform.scale;
                    scale = scale <= this.data.min_scale ? this.data.min_scale : scale;
                    scale = scale >= this.data.max_scale ? this.data.max_scale : scale;
                }
                this.data.scale = scale;
                let cutX = this.data.cut_left;
                let cutY = this.data.cut_top;
                if (transform.cutX) {
                    this.setData({
                        cut_left: cutX + transform.cutX
                    });
                    this.data.watch.cut_left(null, this);
                }
                if (transform.cutY) {
                    this.setData({
                        cut_top: cutY + transform.cutY
                    });
                    this.data.watch.cut_top(null, this);
                }
                this.data._img_top = transform.y ? this.data._img_top + transform.y : this.data._img_top;
                this.data._img_left = transform.x ? this.data._img_left + transform.x : this.data._img_left;
                //å›¾åƒè¾¹ç¼˜æ£€æµ‹,é˜²æ­¢æˆªå–åˆ°ç©ºç™½
                this._imgMarginDetectionScale();
                //åœæ­¢å±…ä¸­è£å‰ªæ¡†ï¼Œç»§ç»­ä¿®æ”¹å›¾ç‰‡ä½ç½®
                this._moveDuring();
                this.setData({
                    scale: this.data.scale,
                    _img_top: this.data._img_top,
                    _img_left: this.data._img_left
                });
                !this.data._canvas_overflow && this._draw();
                //å¯ä»¥å±…ä¸­è£å‰ªæ¡†äº†
                this._moveStop(); //ç»“æŸæ“ä½œ
            },
            /**
             * è®¾ç½®å‰ªè£æ¡†ä½ç½®
             */
            setCutXY(x, y) {
                this.setData({
                    cut_top: y,
                    cut_left: x
                });
            },
            /**
             * è®¾ç½®å‰ªè£æ¡†å°ºå¯¸
             */
            setCutSize(w, h) {
                this.setData({
                    width: w,
                    height: h
                });
                this._computeCutSize();
            },
            /**
             * è®¾ç½®å‰ªè£æ¡†å’Œå›¾ç‰‡å±…ä¸­
             */
            setCutCenter() {
                let cut_top = (this.data.info.windowHeight - this.data.height) * 0.5;
                let cut_left = (this.data.info.windowWidth - this.data.width) * 0.5;
                //é¡ºåºä¸èƒ½å˜
                this.setData({
                    _img_top: this.data._img_top - this.data.cut_top + cut_top,
                    cut_top: cut_top, //æˆªå–çš„æ¡†ä¸Šè¾¹è·
                    _img_left: this.data._img_left - this.data.cut_left + cut_left,
                    cut_left: cut_left, //æˆªå–çš„æ¡†å·¦è¾¹è·
                });
            },
            _setCutCenter() {
                let cut_top = (this.data.info.windowHeight - this.data.height) * 0.5;
                let cut_left = (this.data.info.windowWidth - this.data.width) * 0.5;
                this.setData({
                    cut_top: cut_top, //æˆªå–çš„æ¡†ä¸Šè¾¹è·
                    cut_left: cut_left, //æˆªå–çš„æ¡†å·¦è¾¹è·
                });
            },
            /**
             * è®¾ç½®å‰ªè£æ¡†å®½åº¦-å³å°†åºŸå¼ƒ
             */
            setWidth(width) {
                this.setData({
                    width: width
                });
                this._computeCutSize();
            },
            /**
             * è®¾ç½®å‰ªè£æ¡†é«˜åº¦-å³å°†åºŸå¼ƒ
             */
            setHeight(height) {
                this.setData({
                    height: height
                });
                this._computeCutSize();
            },
            /**
             * æ˜¯å¦é”å®šæ—‹è½¬
             */
            setDisableRotate(value) {
                this.data.disable_rotate = value;
            },
            /**
             * æ˜¯å¦é™åˆ¶ç§»åŠ¨
             */
            setLimitMove(value) {
                this.setData({
                    _cut_animation: true,
                    limit_move: !!value
                });
            },
            /**
             * åˆå§‹åŒ–å›¾ç‰‡ï¼ŒåŒ…æ‹¬ä½ç½®ã€å¤§å°ã€æ—‹è½¬è§’åº¦
             */
            imgReset() {
                this.setData({
                    scale: 1,
                    angle: 0,
                    _img_top: wx.getSystemInfoSync().windowHeight / 2,
                    _img_left: wx.getSystemInfoSync().windowWidth / 2,
                })
            },
            /**
             * åŠ è½½ï¼ˆæ›´æ¢ï¼‰å›¾ç‰‡
             */
            pushImg(src) {
                if (src) {
                    this.setData({
                        imgSrc: src
                    });
                    //å‘ç°æ˜¯æ‰‹åŠ¨èµ‹å€¼ç›´æ¥è¿”å›ï¼Œäº¤ç»™watchå¤„ç†
                    return;
                }

                // getImageInfoæ¥å£ä¼ å…¥ src: '' ä¼šå¯¼è‡´å†…å­˜æ³„æ¼

                if (!this.data.imgSrc) return;
                wx.getImageInfo({
                    src: this.data.imgSrc,
                    success: (res) => {
                            this.data.imageObject = res;
                            //å›¾ç‰‡éæœ¬åœ°è·¯å¾„éœ€è¦æ¢æˆæœ¬åœ°è·¯å¾„
                            if (this.data.imgSrc.search(/tmp/) == -1) {
                                this.setData({
                                    imgSrc: res.path
                                });
                            }
                            //è®¡ç®—æœ€åå›¾ç‰‡å°ºå¯¸
                            this._imgComputeSize();
                            if (this.data.limit_move) {
                                //é™åˆ¶ç§»åŠ¨ï¼Œä¸ç•™ç©ºç™½å¤„ç†
                                this._imgMarginDetectionScale();
                            }
                            this._draw();
                        },
                        fail: (err) => {
                            this.setData({
                                imgSrc: ''
                            });
                        }
                });
            },
            imageLoad(e) {
                setTimeout(() => {
                    this.triggerEvent('imageload', this.data.imageObject);
                }, 1000)
            },
            /**
             * è®¾ç½®å›¾ç‰‡æ”¾å¤§ç¼©å°
             */
            setScale(scale) {
                if (!scale) return;
                this.setData({
                    scale: scale
                });
                !this.data._canvas_overflow && this._draw();
            },
            /**
             * è®¾ç½®å›¾ç‰‡æ—‹è½¬è§’åº¦
             */
            setAngle(angle) {
                if (!angle) return;
                this.setData({
                    _cut_animation: true,
                    angle: angle
                });
                this._imgMarginDetectionScale();
                !this.data._canvas_overflow && this._draw();
            },
            _initCanvas() {
                //åˆå§‹åŒ–canvas
                if (!this.data.ctx) {
                    this.data.ctx = wx.createCanvasContext("image-cropper", this);
                }
            },
            /**
             * æ ¹æ®å¼€å‘è€…è®¾ç½®çš„å›¾ç‰‡ç›®æ ‡å°ºå¯¸è®¡ç®—å®é™…å°ºå¯¸
             */
            _initImageSize() {
                //å¤„ç†å®½é«˜ç‰¹æ®Šå•ä½ %>px
                if (this.data.INIT_IMGWIDTH && typeof this.data.INIT_IMGWIDTH == "string" && this.data.INIT_IMGWIDTH.indexOf("%") != -1) {
                    let width = this.data.INIT_IMGWIDTH.replace("%", "");
                    this.data.INIT_IMGWIDTH = this.data.img_width = this.data.info.windowWidth / 100 * width;
                }
                if (this.data.INIT_IMGHEIGHT && typeof this.data.INIT_IMGHEIGHT == "string" && this.data.INIT_IMGHEIGHT.indexOf("%") != -1) {
                    let height = this.data.img_height.replace("%", "");
                    this.data.INIT_IMGHEIGHT = this.data.img_height = this.data.info.windowHeight / 100 * height;
                }
            },
            /**
             * æ£€æµ‹å‰ªè£æ¡†ä½ç½®æ˜¯å¦åœ¨å…è®¸çš„èŒƒå›´å†…(å±å¹•å†…)
             */
            _cutDetectionPosition() {
                let _cutDetectionPositionTop = () => {
                        //æ£€æµ‹ä¸Šè¾¹è·æ˜¯å¦åœ¨èŒƒå›´å†…
                        if (this.data.cut_top < 0) {
                            this.setData({
                                cut_top: 0
                            });
                        }
                        if (this.data.cut_top > this.data.info.windowHeight - this.data.height) {
                            this.setData({
                                cut_top: this.data.info.windowHeight - this.data.height
                            });
                        }
                    },
                    _cutDetectionPositionLeft = () => {
                        //æ£€æµ‹å·¦è¾¹è·æ˜¯å¦åœ¨èŒƒå›´å†…
                        if (this.data.cut_left < 0) {
                            this.setData({
                                cut_left: 0
                            });
                        }
                        if (this.data.cut_left > this.data.info.windowWidth - this.data.width) {
                            this.setData({
                                cut_left: this.data.info.windowWidth - this.data.width
                            });
                        }
                    };
                //è£å‰ªæ¡†åæ ‡å¤„ç†ï¼ˆå¦‚æœåªå†™ä¸€ä¸ªå‚æ•°åˆ™å¦ä¸€ä¸ªé»˜è®¤ä¸º0ï¼Œéƒ½ä¸å†™é»˜è®¤å±…ä¸­ï¼‰
                if (this.data.cut_top == null && this.data.cut_left == null) {
                    this._setCutCenter();
                } else if (this.data.cut_top != null && this.data.cut_left != null) {
                    _cutDetectionPositionTop();
                    _cutDetectionPositionLeft();
                } else if (this.data.cut_top != null && this.data.cut_left == null) {
                    _cutDetectionPositionTop();
                    this.setData({
                        cut_left: (this.data.info.windowWidth - this.data.width) / 2
                    });
                } else if (this.data.cut_top == null && this.data.cut_left != null) {
                    _cutDetectionPositionLeft();
                    this.setData({
                        cut_top: (this.data.info.windowHeight - this.data.height) / 2
                    });
                }
            },
            /**
             * æ£€æµ‹canvasä½ç½®æ˜¯å¦åœ¨å…è®¸çš„èŒƒå›´å†…(å±å¹•å†…)å¦‚æœåœ¨å±å¹•å¤–åˆ™ä¸å¼€å¯å®æ—¶æ¸²æŸ“
             * å¦‚æœåªå†™ä¸€ä¸ªå‚æ•°åˆ™å¦ä¸€ä¸ªé»˜è®¤ä¸º0ï¼Œéƒ½ä¸å†™é»˜è®¤è¶…å‡ºå±å¹•å¤–
             */
            _canvasDetectionPosition() {
                if (this.data.canvas_top == null && this.data.canvas_left == null) {
                    this.data._canvas_overflow = false;
                    this.setData({
                        canvas_top: -5000,
                        canvas_left: -5000
                    });
                } else if (this.data.canvas_top != null && this.data.canvas_left != null) {
                    if (this.data.canvas_top < -this.data.height || this.data.canvas_top > this.data.info.windowHeight) {
                        this.data._canvas_overflow = true;
                    } else {
                        this.data._canvas_overflow = false;
                    }
                } else if (this.data.canvas_top != null && this.data.canvas_left == null) {
                    this.setData({
                        canvas_left: 0
                    });
                } else if (this.data.canvas_top == null && this.data.canvas_left != null) {
                    this.setData({
                        canvas_top: 0
                    });
                    if (this.data.canvas_left < -this.data.width || this.data.canvas_left > this.data.info.windowWidth) {
                        this.data._canvas_overflow = true;
                    } else {
                        this.data._canvas_overflow = false;
                    }
                }
            },
            /**
             * å›¾ç‰‡è¾¹ç¼˜æ£€æµ‹-ä½ç½®
             */
            _imgMarginDetectionPosition(scale) {
                if (!this.data.limit_move) return;
                let left = this.data._img_left;
                let top = this.data._img_top;
                var scale = scale || this.data.scale;
                let img_width = this.data.img_width;
                let img_height = this.data.img_height;
                if (this.data.angle / 90 % 2) {
                    img_width = this.data.img_height;
                    img_height = this.data.img_width;
                }
                left = this.data.cut_left + img_width * scale / 2 >= left ? left : this.data.cut_left + img_width * scale / 2;
                left = this.data.cut_left + this.data.width - img_width * scale / 2 <= left ? left : this.data.cut_left + this.data.width - img_width * scale / 2;
                top = this.data.cut_top + img_height * scale / 2 >= top ? top : this.data.cut_top + img_height * scale / 2;
                top = this.data.cut_top + this.data.height - img_height * scale / 2 <= top ? top : this.data.cut_top + this.data.height - img_height * scale / 2;
                this.setData({
                    _img_left: left,
                    _img_top: top,
                    scale: scale
                })
            },
            /**
             * å›¾ç‰‡è¾¹ç¼˜æ£€æµ‹-ç¼©æ”¾
             */
            _imgMarginDetectionScale() {
                if (!this.data.limit_move) return;
                let scale = this.data.scale;
                let img_width = this.data.img_width;
                let img_height = this.data.img_height;
                if (this.data.angle / 90 % 2) {
                    img_width = this.data.img_height;
                    img_height = this.data.img_width;
                }
                if (img_width * scale < this.data.width) {
                    scale = this.data.width / img_width;
                }
                if (img_height * scale < this.data.height) {
                    scale = Math.max(scale, this.data.height / img_height);
                }
                this._imgMarginDetectionPosition(scale);
            },
            _setData(obj) {
                let data = {};
                for (var key in obj) {
                    if (this.data[key] != obj[key]) {
                        data[key] = obj[key];
                    }
                }
                this.setData(data);
                return data;
            },
            /**
             * è®¡ç®—å›¾ç‰‡å°ºå¯¸
             */
            _imgComputeSize() {
                let img_width = this.data.img_width,
                    img_height = this.data.img_height;
                if (!this.data.INIT_IMGHEIGHT && !this.data.INIT_IMGWIDTH) {
                    //é»˜è®¤æŒ‰å›¾ç‰‡æœ€å°è¾¹ = å¯¹åº”è£å‰ªæ¡†å°ºå¯¸
                    img_width = this.data.imageObject.width;
                    img_height = this.data.imageObject.height;
                    if (img_width / img_height > this.data.width / this.data.height) {
                        img_height = this.data.height;
                        img_width = this.data.imageObject.width / this.data.imageObject.height * img_height;
                    } else {
                        img_width = this.data.width;
                        img_height = this.data.imageObject.height / this.data.imageObject.width * img_width;
                    }
                } else if (this.data.INIT_IMGHEIGHT && !this.data.INIT_IMGWIDTH) {
                    img_width = this.data.imageObject.width / this.data.imageObject.height * this.data.INIT_IMGHEIGHT;
                } else if (!this.data.INIT_IMGHEIGHT && this.data.INIT_IMGWIDTH) {
                    img_height = this.data.imageObject.height / this.data.imageObject.width * this.data.INIT_IMGWIDTH;
                }
                this.setData({
                    img_width: img_width,
                    img_height: img_height
                });
            },
            //æ”¹å˜æˆªå–æ¡†å¤§å°
            _computeCutSize() {
                if (this.data.width > this.data.info.windowWidth) {
                    this.setData({
                        width: this.data.info.windowWidth,
                    });
                } else if (this.data.width + this.data.cut_left > this.data.info.windowWidth) {
                    this.setData({
                        cut_left: this.data.info.windowWidth - this.data.cut_left,
                    });
                };
                if (this.data.height > this.data.info.windowHeight) {
                    this.setData({
                        height: this.data.info.windowHeight,
                    });
                } else if (this.data.height + this.data.cut_top > this.data.info.windowHeight) {
                    this.setData({
                        cut_top: this.data.info.windowHeight - this.data.cut_top,
                    });
                }!this.data._canvas_overflow && this._draw();
            },
            //å¼€å§‹è§¦æ‘¸
            _start(event) {
                this.data._flag_img_endtouch = false;
                if (event.touches.length == 1) {
                    //å•æŒ‡æ‹–åŠ¨
                    this.data._touch_img_relative[0] = {
                        x: (event.touches[0].clientX - this.data._img_left),
                        y: (event.touches[0].clientY - this.data._img_top)
                    }
                } else {
                    //åŒæŒ‡æ”¾å¤§
                    let width = Math.abs(event.touches[0].clientX - event.touches[1].clientX);
                    let height = Math.abs(event.touches[0].clientY - event.touches[1].clientY);
                    this.data._touch_img_relative = [{
                        x: (event.touches[0].clientX - this.data._img_left),
                        y: (event.touches[0].clientY - this.data._img_top)
                    }, {
                        x: (event.touches[1].clientX - this.data._img_left),
                        y: (event.touches[1].clientY - this.data._img_top)
                    }];
                    this.data._hypotenuse_length = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));
                }!this.data._canvas_overflow && this._draw();
            },
            _move_throttle() {
                //å®‰å“éœ€è¦èŠ‚æµ
                if (this.data.info.platform == 'android') {
                    clearTimeout(this.data.MOVE_THROTTLE);
                    this.data.MOVE_THROTTLE = setTimeout(() => {
                        this.data.MOVE_THROTTLE_FLAG = true;
                    }, 1000 / 40)
                    return this.data.MOVE_THROTTLE_FLAG;
                } else {
                    this.data.MOVE_THROTTLE_FLAG = true;
                }
            },
            _move(event) {
                if (this.data._flag_img_endtouch || !this.data.MOVE_THROTTLE_FLAG) return;
                this.data.MOVE_THROTTLE_FLAG = false;
                this._move_throttle();
                this._moveDuring();
                if (event.touches.length == 1) {
                    //å•æŒ‡æ‹–åŠ¨
                    let left = (event.touches[0].clientX - this.data._touch_img_relative[0].x),
                        top = (event.touches[0].clientY - this.data._touch_img_relative[0].y);
                    //å›¾åƒè¾¹ç¼˜æ£€æµ‹,é˜²æ­¢æˆªå–åˆ°ç©ºç™½
                    this.data._img_left = left;
                    this.data._img_top = top;
                    this._imgMarginDetectionPosition();
                    this.setData({
                        _img_left: this.data._img_left,
                        _img_top: this.data._img_top
                    });
                } else {
                    //åŒæŒ‡æ”¾å¤§
                    let width = (Math.abs(event.touches[0].clientX - event.touches[1].clientX)),
                        height = (Math.abs(event.touches[0].clientY - event.touches[1].clientY)),
                        hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)),
                        scale = this.data.scale * (hypotenuse / this.data._hypotenuse_length),
                        current_deg = 0;
                    scale = scale <= this.data.min_scale ? this.data.min_scale : scale;
                    scale = scale >= this.data.max_scale ? this.data.max_scale : scale;
                    //å›¾åƒè¾¹ç¼˜æ£€æµ‹,é˜²æ­¢æˆªå–åˆ°ç©ºç™½
                    this.data.scale = scale;
                    this._imgMarginDetectionScale();
                    //åŒæŒ‡æ—‹è½¬(å¦‚æœæ²¡ç¦ç”¨æ—‹è½¬)
                    let _touch_img_relative = [{
                        x: (event.touches[0].clientX - this.data._img_left),
                        y: (event.touches[0].clientY - this.data._img_top)
                    }, {
                        x: (event.touches[1].clientX - this.data._img_left),
                        y: (event.touches[1].clientY - this.data._img_top)
                    }];
                    if (!this.data.disable_rotate) {
                        let first_atan = 180 / Math.PI * Math.atan2(_touch_img_relative[0].y, _touch_img_relative[0].x);
                        let first_atan_old = 180 / Math.PI * Math.atan2(this.data._touch_img_relative[0].y, this.data._touch_img_relative[0].x);
                        let second_atan = 180 / Math.PI * Math.atan2(_touch_img_relative[1].y, _touch_img_relative[1].x);
                        let second_atan_old = 180 / Math.PI * Math.atan2(this.data._touch_img_relative[1].y, this.data._touch_img_relative[1].x);
                        //å½“å‰æ—‹è½¬çš„è§’åº¦
                        let first_deg = first_atan - first_atan_old,
                            second_deg = second_atan - second_atan_old;
                        if (first_deg != 0) {
                            current_deg = first_deg;
                        } else if (second_deg != 0) {
                            current_deg = second_deg;
                        }
                    }
                    this.data._touch_img_relative = _touch_img_relative;
                    this.data._hypotenuse_length = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));
                    //æ›´æ–°è§†å›¾
                    this.setData({
                        angle: this.data.angle + current_deg,
                        scale: this.data.scale
                    });
                }!this.data._canvas_overflow && this._draw();
            },
            //ç»“æŸæ“ä½œ
            _end(event) {
                this.data._flag_img_endtouch = true;
                this._moveStop();
            },
            //ç‚¹å‡»ä¸­é—´å‰ªè£æ¡†å¤„ç†
            _click(event) {
                if (!this.data.imgSrc) {
                    //è°ƒèµ·ä¸Šä¼ 
                    this.upload();
                    return;
                }
                this._draw(() => {
                    let x = event.detail ? event.detail.x : event.touches[0].clientX;
                    let y = event.detail ? event.detail.y : event.touches[0].clientY;
                    if ((x >= this.data.cut_left && x <= (this.data.cut_left + this.data.width)) && (y >= this.data.cut_top && y <= (this.data.cut_top + this.data.height))) {
                        //ç”Ÿæˆå›¾ç‰‡å¹¶å›è°ƒ
                        wx.canvasToTempFilePath({
                            width: this.data.width * this.data.export_scale,
                            height: Math.round(this.data.height * this.data.export_scale),
                            destWidth: this.data.width * this.data.export_scale,
                            destHeight: Math.round(this.data.height) * this.data.export_scale,
                            fileType: 'png',
                            quality: this.data.quality,
                            canvasId: this.data.el,
                            success: (res) => {
                                this.triggerEvent('tapcut', {
                                    url: res.tempFilePath,
                                    width: this.data.width * this.data.export_scale,
                                    height: this.data.height * this.data.export_scale
                                });
                            }
                        }, this)
                    }
                });
            },
            //æ¸²æŸ“
            _draw(callback) {
                if (!this.data.imgSrc) return;
                let draw = () => {
                    //å›¾ç‰‡å®é™…å¤§å°
                    let img_width = this.data.img_width * this.data.scale * this.data.export_scale;
                    let img_height = this.data.img_height * this.data.scale * this.data.export_scale;
                    //canvaså’Œå›¾ç‰‡çš„ç›¸å¯¹è·ç¦»
                    var xpos = this.data._img_left - this.data.cut_left;
                    var ypos = this.data._img_top - this.data.cut_top;
                    //æ—‹è½¬ç”»å¸ƒ
                    this.data.ctx.translate(xpos * this.data.export_scale, ypos * this.data.export_scale);
                    this.data.ctx.rotate(this.data.angle * Math.PI / 180);
                    this.data.ctx.drawImage(this.data.imgSrc, -img_width / 2, -img_height / 2, img_width, img_height);
                    this.data.ctx.draw(false, () => {
                        callback && callback();
                    });
                }
                if (this.data.ctx.width != this.data.width || this.data.ctx.height != this.data.height) {
                    //ä¼˜åŒ–æ‹–åŠ¨è£å‰ªæ¡†ï¼Œæ‰€ä»¥å¿…é¡»æŠŠå®½é«˜è®¾ç½®æ”¾åœ¨ç¦»ç”¨æˆ·è§¦å‘æ¸²æŸ“æœ€è¿‘çš„åœ°æ–¹
                    this.setData({
                        _canvas_height: this.data.height,
                        _canvas_width: this.data.width,
                    }, () => {
                        //å»¶è¿Ÿ40æ¯«ç§’é˜²æ­¢ç‚¹å‡»è¿‡å¿«å‡ºç°æ‹‰ä¼¸æˆ–è£å‰ªè¿‡å¤š
                        setTimeout(() => {
                            draw();
                        }, 40);
                    });
                } else {
                    draw();
                }
            },
            //è£å‰ªæ¡†å¤„ç†
            _cutTouchMove(e) {
                if (this.data._flag_cut_touch && this.data.MOVE_THROTTLE_FLAG) {
                    if (this.data.disable_ratio && (this.data.disable_width || this.data.disable_height)) return;
                    //èŠ‚æµ
                    this.data.MOVE_THROTTLE_FLAG = false;
                    this._move_throttle();
                    let width = this.data.width,
                        height = this.data.height,
                        cut_top = this.data.cut_top,
                        cut_left = this.data.cut_left,
                        size_correct = () => {
                            width = width <= this.data.max_width ? width >= this.data.min_width ? width : this.data.min_width : this.data.max_width;
                            height = height <= this.data.max_height ? height >= this.data.min_height ? height : this.data.min_height : this.data.max_height;
                        },
                        size_inspect = () => {
                            if ((width > this.data.max_width || width < this.data.min_width || height > this.data.max_height || height < this.data.min_height) && this.data.disable_ratio) {
                                size_correct();
                                return false;
                            } else {
                                size_correct();
                                return true;
                            }
                        };
                    height = this.data.CUT_START.height + ((this.data.CUT_START.corner > 1 && this.data.CUT_START.corner < 4 ? 1 : -1) * (this.data.CUT_START.y - e.touches[0].clientY));
                    switch (this.data.CUT_START.corner) {
                    case 1:
                        width = this.data.CUT_START.width + this.data.CUT_START.x - e.touches[0].clientX;
                        if (this.data.disable_ratio) {
                            height = width / (this.data.width / this.data.height)
                        }
                        if (!size_inspect()) return;
                        cut_left = this.data.CUT_START.cut_left - (width - this.data.CUT_START.width);
                        break
                    case 2:
                        width = this.data.CUT_START.width + this.data.CUT_START.x - e.touches[0].clientX;
                        if (this.data.disable_ratio) {
                            height = width / (this.data.width / this.data.height)
                        }
                        if (!size_inspect()) return;
                        cut_top = this.data.CUT_START.cut_top - (height - this.data.CUT_START.height)
                        cut_left = this.data.CUT_START.cut_left - (width - this.data.CUT_START.width)
                        break
                    case 3:
                        width = this.data.CUT_START.width - this.data.CUT_START.x + e.touches[0].clientX;
                        if (this.data.disable_ratio) {
                            height = width / (this.data.width / this.data.height)
                        }
                        if (!size_inspect()) return;
                        cut_top = this.data.CUT_START.cut_top - (height - this.data.CUT_START.height);
                        break
                    case 4:
                        width = this.data.CUT_START.width - this.data.CUT_START.x + e.touches[0].clientX;
                        if (this.data.disable_ratio) {
                            height = width / (this.data.width / this.data.height)
                        }
                        if (!size_inspect()) return;
                        break
                    }
                    if (!this.data.disable_width && !this.data.disable_height) {
                        this.setData({
                            width: width,
                            cut_left: cut_left,
                            height: height,
                            cut_top: cut_top,
                        })
                    } else if (!this.data.disable_width) {
                        this.setData({
                            width: width,
                            cut_left: cut_left
                        })
                    } else if (!this.data.disable_height) {
                        this.setData({
                            height: height,
                            cut_top: cut_top
                        })
                    }
                    this._imgMarginDetectionScale();
                }
            },
            _cutTouchStart(e) {
                let currentX = e.touches[0].clientX;
                let currentY = e.touches[0].clientY;
                let cutbox_top4 = this.data.cut_top + this.data.height - 30;
                let cutbox_bottom4 = this.data.cut_top + this.data.height + 20;
                let cutbox_left4 = this.data.cut_left + this.data.width - 30;
                let cutbox_right4 = this.data.cut_left + this.data.width + 30;

                let cutbox_top3 = this.data.cut_top - 30;
                let cutbox_bottom3 = this.data.cut_top + 30;
                let cutbox_left3 = this.data.cut_left + this.data.width - 30;
                let cutbox_right3 = this.data.cut_left + this.data.width + 30;

                let cutbox_top2 = this.data.cut_top - 30;
                let cutbox_bottom2 = this.data.cut_top + 30;
                let cutbox_left2 = this.data.cut_left - 30;
                let cutbox_right2 = this.data.cut_left + 30;

                let cutbox_top1 = this.data.cut_top + this.data.height - 30;
                let cutbox_bottom1 = this.data.cut_top + this.data.height + 30;
                let cutbox_left1 = this.data.cut_left - 30;
                let cutbox_right1 = this.data.cut_left + 30;
                if (currentX > cutbox_left4 && currentX < cutbox_right4 && currentY > cutbox_top4 && currentY < cutbox_bottom4) {
                    this._moveDuring();
                    this.data._flag_cut_touch = true;
                    this.data._flag_img_endtouch = true;
                    this.data.CUT_START = {
                        width: this.data.width,
                        height: this.data.height,
                        x: currentX,
                        y: currentY,
                        corner: 4
                    }
                } else if (currentX > cutbox_left3 && currentX < cutbox_right3 && currentY > cutbox_top3 && currentY < cutbox_bottom3) {
                    this._moveDuring();
                    this.data._flag_cut_touch = true;
                    this.data._flag_img_endtouch = true;
                    this.data.CUT_START = {
                        width: this.data.width,
                        height: this.data.height,
                        x: currentX,
                        y: currentY,
                        cut_top: this.data.cut_top,
                        cut_left: this.data.cut_left,
                        corner: 3
                    }
                } else if (currentX > cutbox_left2 && currentX < cutbox_right2 && currentY > cutbox_top2 && currentY < cutbox_bottom2) {
                    this._moveDuring();
                    this.data._flag_cut_touch = true;
                    this.data._flag_img_endtouch = true;
                    this.data.CUT_START = {
                        width: this.data.width,
                        height: this.data.height,
                        cut_top: this.data.cut_top,
                        cut_left: this.data.cut_left,
                        x: currentX,
                        y: currentY,
                        corner: 2
                    }
                } else if (currentX > cutbox_left1 && currentX < cutbox_right1 && currentY > cutbox_top1 && currentY < cutbox_bottom1) {
                    this._moveDuring();
                    this.data._flag_cut_touch = true;
                    this.data._flag_img_endtouch = true;
                    this.data.CUT_START = {
                        width: this.data.width,
                        height: this.data.height,
                        cut_top: this.data.cut_top,
                        cut_left: this.data.cut_left,
                        x: currentX,
                        y: currentY,
                        corner: 1
                    }
                }
            },
            _cutTouchEnd(e) {
                this._moveStop();
                this.data._flag_cut_touch = false;
            },
            //åœæ­¢ç§»åŠ¨æ—¶éœ€è¦åšçš„æ“ä½œ
            _moveStop() {
                //æ¸…ç©ºä¹‹å‰çš„è‡ªåŠ¨å±…ä¸­å»¶è¿Ÿå‡½æ•°å¹¶æ·»åŠ æœ€æ–°çš„
                clearTimeout(this.data.TIME_CUT_CENTER);
                this.data.TIME_CUT_CENTER = setTimeout(() => {
                        //åŠ¨ç”»å¯åŠ¨
                        if (!this.data._cut_animation) {
                            this.setData({
                                _cut_animation: true
                            });
                        }
                        this.setCutCenter();
                    }, 1000)
                    //æ¸…ç©ºä¹‹å‰çš„èƒŒæ™¯å˜åŒ–å»¶è¿Ÿå‡½æ•°å¹¶æ·»åŠ æœ€æ–°çš„
                clearTimeout(this.data.TIME_BG);
                this.data.TIME_BG = setTimeout(() => {
                    if (this.data._flag_bright) {
                        this.setData({
                            _flag_bright: false
                        });
                    }
                }, 2000)
            },
            //ç§»åŠ¨ä¸­
            _moveDuring() {
                //æ¸…ç©ºä¹‹å‰çš„è‡ªåŠ¨å±…ä¸­å»¶è¿Ÿå‡½æ•°
                clearTimeout(this.data.TIME_CUT_CENTER);
                //æ¸…ç©ºä¹‹å‰çš„èƒŒæ™¯å˜åŒ–å»¶è¿Ÿå‡½æ•°
                clearTimeout(this.data.TIME_BG);
                //é«˜äº®èƒŒæ™¯
                if (!this.data._flag_bright) {
                    this.setData({
                        _flag_bright: true
                    });
                }
            },
            //ç›‘å¬å™¨
            _watcher() {
                Object.keys(this.data).forEach(v => {
                    this._observe(this.data, v, this.data.watch[v]);
                })
            },
            _observe(obj, key, watchFun) {
                var val = obj[key];
                Object.defineProperty(obj, key, {
                    configurable: true,
                    enumerable: true,
                    set: (value) => {
                            val = value;
                            watchFun && watchFun(val, this);
                        },
                        get() {
                            if (val && '_img_top|img_left||width|height|min_width|max_width|min_height|max_height|export_scale|cut_top|cut_left|canvas_top|canvas_left|img_width|img_height|scale|angle|min_scale|max_scale'.indexOf(key) != -1) {
                                let ret = parseFloat(parseFloat(val).toFixed(3));
                                if (typeof val == "string" && val.indexOf("%") != -1) {
                                    ret += '%';
                                }
                                return ret;
                            }
                            return val;
                        }
                })
            },
            _preventTouchMove() {}
    }
})
````

## File: components/imageCropper/cropper/cropper.json
````json
{
	"component": true
}
````

## File: components/imageCropper/cropper/cropper.wxml
````
<view class='image-cropper' catchtouchmove='_preventTouchMove'>
    <view class='main' bindtouchend="_cutTouchEnd" bindtouchstart="_cutTouchStart" bindtouchmove="_cutTouchMove" bindtap="_click">
        <view class='content'>
            <view class='content_top bg_gray {{_flag_bright?"":"bg_black"}}' style="height:{{cut_top}}px;transition-property:{{_cut_animation?'':'background'}}"></view>
            <view class='content_middle' style="height:{{height}}px;">
                <view class='content_middle_left bg_gray {{_flag_bright?"":"bg_black"}}' style="width:{{cut_left}}px;transition-property:{{_cut_animation?'':'background'}}"></view>
                <view class='content_middle_middle' style="width:{{width}}px;height:{{height}}px;transition-duration: .3s;transition-property:{{_cut_animation?'':'background'}};">
                    <view class="border border-top-left"></view>
                    <view class="border border-top-right"></view>
                    <view class="border border-right-top"></view>
                    <view class="border border-right-bottom"></view>
                    <view class="border border-bottom-right"></view>
                    <view class="border border-bottom-left"></view>
                    <view class="border border-left-bottom"></view>
                    <view class="border border-left-top"></view>
                </view>
                <view class='content_middle_right bg_gray {{_flag_bright?"":"bg_black"}}' style="transition-property:{{_cut_animation?'':'background'}}"></view>
            </view>
            <view class='content_bottom bg_gray {{_flag_bright?"":"bg_black"}}' style="transition-property:{{_cut_animation?'':'background'}}"></view>
        </view>
        <image bindload="imageLoad" bindtouchstart="_start" bindtouchmove="_move" bindtouchend="_end" style="width:{{img_width ? img_width + 'px' : 'auto'}};height:{{img_height ? img_height + 'px' : 'auto'}};transform:translate3d({{_img_left-img_width/2}}px,{{_img_top-img_height/2}}px,0) scale({{scale}}) rotate({{angle}}deg);transition-duration:{{_cut_animation?.4:0}}s;" class='img' src='{{imgSrc}}'></image>
    </view>
    <canvas canvas-id='image-cropper' disable-scroll="true" style="width:{{_canvas_width * export_scale}}px;height:{{_canvas_height * export_scale}}px;left:{{canvas_left}}px;top:{{canvas_top}}px" class='image-cropper-canvas'></canvas>
</view>
````

## File: components/imageCropper/cropper/cropper.wxss
````
.image-cropper {
    background: rgba(14, 13, 13, .8);
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1;
}

.image-cropper .main {
    position: absolute;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.image-cropper .content {
    z-index: 9;
    position: absolute;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    pointer-events: none;
}

.image-cropper .bg_black {
    background: rgba(0, 0, 0, 0.8) !important;
}

.image-cropper .bg_gray {
    background: rgba(0, 0, 0, 0.45);
    transition-duration: .35s;
}

.image-cropper .content>.content_top {
    pointer-events: none;
}

.image-cropper .content>.content_middle {
    display: flex;
    height: 200px;
    width: 100%;
}

.image-cropper .content_middle_middle {
    width: 200px;
    box-sizing: border-box;
    position: relative;
    transition-duration: .3s;
}

.image-cropper .content_middle_right {
    flex: auto;
}

.image-cropper .content>.content_bottom {
    flex: auto;
}

.image-cropper .img {
    z-index: 2;
    top: 0;
    left: 0;
    position: absolute;
    border: none;
    width: 100%;
    backface-visibility: hidden;
    transform-origin: center;
}

.image-cropper .image-cropper-canvas {
    position: fixed;
    background: white;
    width: 150px;
    height: 150px;
    z-index: 10;
    top: -200%;
    pointer-events: none;
}

.image-cropper .border {
    background: white;
    pointer-events: auto;
    position: absolute;
}

.image-cropper .border-top-left {
    left: -2.5px;
    top: -2.5px;
    height: 2.5px;
    width: 33rpx;
}

.image-cropper .border-top-right {
    right: -2.5px;
    top: -2.5px;
    height: 2.5px;
    width: 33rpx;
}

.image-cropper .border-right-top {
    top: -1px;
    width: 2.5px;
    height: 30rpx;
    right: -2.5px;
}

.image-cropper .border-right-bottom {
    width: 2.5px;
    height: 30rpx;
    right: -2.5px;
    bottom: -1px;
}

.image-cropper .border-bottom-left {
    height: 2.5px;
    width: 33rpx;
    bottom: -2.5px;
    left: -2.5px;
}

.image-cropper .border-bottom-right {
    height: 2.5px;
    width: 33rpx;
    bottom: -2.5px;
    right: -2.5px;
}

.image-cropper .border-left-top {
    top: -1px;
    width: 2.5px;
    height: 30rpx;
    left: -2.5px;
}

.image-cropper .border-left-bottom {
    width: 2.5px;
    height: 30rpx;
    left: -2.5px;
    bottom: -1px;
}
````

## File: components/imageCropper/index.js
````javascript
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    avatarUncropped: {
      type: String,
      value: '',
    },
  },
  observers: {
    avatarUncropped: function(newVal) {
      if (newVal) {
        wx.nextTick(() => {
          this.cropper = this.selectComponent('#imageCropper');
          this.setData({
            src: newVal,
          });
        });
      }
    },
  },
  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    src: '',
    width: 250, //å®½åº¦
    height: 250, //é«˜åº¦
    max_width: 300,
    max_height: 300,
    disable_rotate: true, //æ˜¯å¦ç¦ç”¨æ—‹è½¬
    disable_ratio: false, //é”å®šæ¯”ä¾‹
    limit_move: true, //æ˜¯å¦é™åˆ¶ç§»åŠ¨
  },
  lifetimes: {
    attached() {},
  },
  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    cropperload(e) {
      console.log('cropperåŠ è½½å®Œæˆ', e);
    },
    loadimage(e) {
      console.log('å›¾ç‰‡åŠ è½½å®Œæˆ', e);
      wx.hideLoading();
      this.cropper.imgReset();
    },
    clickcut(e) {
      console.log(e.detail);
      //å›¾ç‰‡é¢„è§ˆ
      wx.previewImage({
        current: e.detail.url, // å½“å‰æ˜¾ç¤ºå›¾ç‰‡çš„httpé“¾æ¥
        urls: [e.detail.url], // éœ€è¦é¢„è§ˆçš„å›¾ç‰‡httpé“¾æ¥åˆ—è¡¨
      });
    },
    cancelCropper() {
      this.triggerEvent('cancelEvent');
    },
    confirmCropper() {
      this.cropper.getImg(obj => {
        this.triggerEvent('confirmEvent', obj.url);
      });
    },
    rotate() {
      //åœ¨ç”¨æˆ·æ—‹è½¬çš„åŸºç¡€ä¸Šæ—‹è½¬90Â°
      this.cropper.setAngle((this.cropper.data.angle += 90));
    },
  },
});
````

## File: components/imageCropper/index.json
````json
{
  "component": true,
  "usingComponents": {
    "cropper": "./cropper/cropper"
  }
}
````

## File: components/imageCropper/index.wxml
````
<view class="cropperContainer" wx:if="{{avatarUncropped}}">
  <view style="width:100%;height:500rpx;">
    <cropper id="imageCropper" bindload="cropperload" bindimageload="loadimage" bindtapcut="clickcut" limit_move="{{false}}" disable_rotate="{{true}}" width="{{width}}" height="{{height}}" imgSrc="{{src}}" disable_width="{{true}}" max_width="{{max_width}}" max_height="{{max_height}}" disable_height="{{true}}" disable_ratio="{{true}}"></cropper>
  </view>
  <text class="hint">ç‚¹å‡»ä¸­é—´è£å‰ªæ¡†å¯æŸ¥çœ‹è£å‰ªåçš„å›¾ç‰‡</text>
  <view class='bottom'>
    <text class="btnText" catchtap='cancelCropper'>å–æ¶ˆ</text>
    <text class="btnText" catchtap='rotate'>æ—‹è½¬</text>
    <text class="btnText" catchtap='confirmCropper'>ç¡®è®¤</text>
  </view>
</view>
````

## File: components/imageCropper/index.wxss
````
.cropperContainer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: black;
  z-index: 99999;
}
.cropperContainer .hint {
  position: absolute;
  top: 10rpx;
  width: 100%;
  font-size: 33rpx;
  text-align: center;
  color: white;
  z-index: 10;
}

.cropperContainer .bottom {
  position: absolute;
  width: 100%;
  bottom: 50rpx;
  display: flex;
  z-index: 10;
  justify-content: space-around;
  align-items: center;
  flex-wrap: wrap;
  height: 120rpx;
}

.cropperContainer .btnText {
  font-size: 42rpx;
  color: #ffffff;
}
````

## File: components/privacyAuthorize/privacyAuthorize.json
````json
{
  "component": true
}
````

## File: components/privacyAuthorize/privacyAuthorize.wxss
````
.privacyAuthorize {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 99999;
  display: flex;
  justify-content: center;
  align-items: center;
}

.shade {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
}

.box {
  width: 480rpx;
  min-height: 450rpx;
  position: relative;
  background-color: #ffffff;
  border-radius: 20rpx;
  padding: 20rpx;
}

.box .platformInfo {
  display: flex;
  align-items: center;
  font-size: 32rpx;
  color: #000000;
}

.box .platformInfo .avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  margin-right: 20rpx;
}

.box .content {
  margin-top: 20rpx;
  font-size: 28rpx;
  color: #000000;
  line-height: 45rpx;
}
.box .content .link {
  color: rgba(10,142,238, 1);
}

.box .btnGroup {
  display: flex;
  margin-top: 40rpx;
  gap: 20rpx;
}

.box .btnGroup .btn {
  width: 200rpx;
  height: 80rpx;
  font-size: 28rpx;
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
}
.box .btnGroup .btn::after {
  border: none;
}
.box .btnGroup .refuseBtn {
  background-color: rgba(242,242,242,1);
  color: rgba(83,190,107,1);
}

.box .btnGroup .agreeBtn {
  background-color: rgba(83,190,107,1);
  color: #ffffff;
}
````

## File: packageA/api/hbkdRecharge.js
````javascript
import { request } from "../../utils/request";
import { reqWxPay } from "../../api/pay";

/** çº¢åŒ…å£è¢‹å……å€¼æ’è¡Œæ¦œåˆ—è¡¨
 * @param {string} splid æ´»åŠ¨id
 */
export const reqGetHbkdRankList = (splid) => {
  return request("hbkd/shenLuoTianZheng6", "POST", {
    splid,
  });
};

/** å……å€¼çº¢åŒ…å£è¢‹
 * @param {string} splid æ´»åŠ¨id
 */
export const reqRechargeHbkd = async ({ splid, total, userId, openId }) => {
  const res = await request(
    "hmWxmoney/chongZhiRedB",
    "POST",
    {
      splid,
      totalfee: total,
      USER_ID: userId,
      openid: openId,
    },
    {
      needAppId: true,
      cancelLoading: true,
    }
  );
  return reqWxPay(res);
};
````

## File: packageA/pages/hbkdRecharge/hbkdRecharge.json
````json
{
  "navigationBarTitleText": "çº¢åŒ…å£è¢‹"
}
````

## File: packageA/pages/hbkdRecharge/styles/commonMode.wxss
````
.hbkdRechargeContainer.commonMode {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/bg2-01.png");
  background-size: 100% 100vh;
  background-repeat: no-repeat;
}

/* çº¢åŒ…å£è¢‹ä½™é¢ */
.hbkdRechargeContainer.commonMode .remainArea {
  width: 100%;
  height: 435rpx;
  background-image: url(https://static.hudongmiao.com/joymewMp/hbkdRecharge/rainbow-01.png);
  background-size: 100% 100%;
  margin-top: 80rpx;
  color: #ffffff;
  font-weight: 400;
  text-align: center;
  line-height: 1.5;
  padding-top: 80rpx;
  position: relative;
}

.hbkdRechargeContainer.commonMode .remainArea .moneyInfo .moneyValue::before {
  content: "çº¢åŒ…å£è¢‹";
  display: block;
  font-size: 34rpx;
}

.hbkdRechargeContainer.commonMode .remainArea .moneyInfo .moneyValue {
  font-size: 66rpx;
  font-weight: 700;
}

.hbkdRechargeContainer.commonMode .remainArea .moneyInfo .moneyTip {
  font-size: 20rpx;
}

/* çº¢åŒ…å£è¢‹å……å€¼åŒºåŸŸ */
.hbkdRechargeContainer.commonMode .rechargeArea {
  width: 660rpx;
  height: 746rpx;
  background: #ffffff;
  border-radius: 72rpx;
  margin: 0 auto;
  margin-top: -230rpx;
  padding-top: 220rpx;
}
.hbkdRechargeContainer.commonMode .rechargeArea.mTop {
  margin-top: 40rpx;
  padding-top: 40rpx;
  height: 500rpx;
}
.hbkdRechargeContainer.commonMode .rechargeArea .rechargeBox {
  display: grid;
  grid-template-columns: repeat(3, min-content);
  grid-template-rows: repeat(3, min-content);
  justify-content: center;
  column-gap: 20rpx;
  row-gap: 20rpx;
  color: #fff;
  font-size: 32rpx;
}

.hbkdRechargeContainer.commonMode .rechargeArea .rechargeBox .rechargeItem {
  width: 191rpx;
  height: 124rpx;
  background-size: 100% 100%;
  line-height: 1.5;
}

.rechargeItem:nth-child(1),
.rechargeItem:nth-child(7) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon6.png");
}

.rechargeItem:nth-child(2),
.rechargeItem:nth-child(8) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon5.png");
}

.rechargeItem:nth-child(3),
.rechargeItem:nth-child(9) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon1.png");
}

.rechargeItem:nth-child(4) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon2.png");
}

.rechargeItem:nth-child(5) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon3.png");
}

.rechargeItem:nth-child(6) {
  background-image: url("https://static.hudongmiao.com/joymewMp/hbkdRecharge/coupon4.png");
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .staticMod {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .staticMod
  .value {
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .staticMod
  .value
  .unit {
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .staticMod
  .name {
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod {
  height: 100%;
  flex-direction: column;
  display: flex;
  justify-content: center;
  align-items: center;
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod.inputMod {
    text-align: center;
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod
  .customTxt1 {
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod
  .customTxt2 {
  font-size: 21rpx;
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod
  input {
}

.hbkdRechargeContainer.commonMode
  .rechargeArea
  .rechargeBox
  .rechargeItem
  .customMod
  .unit {
}

/* å……å€¼æ’è¡Œæ¦œåŒºåŸŸ */
.hbkdRechargeContainer.commonMode .rankArea {
  margin-top: 40rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .agreement {
  font-size: 24rpx;
  font-weight: 400;
  color: #ffd027;
  text-align: center;
}

.hbkdRechargeContainer.commonMode .rankArea .countPrize {
  display: flex;
  justify-content: center;
  color: #ffffff;
  font-size: 36rpx;
  font-weight: 500;
  margin-top: 20rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .countPrize::before,
.hbkdRechargeContainer.commonMode .rankArea .countPrize::after {
  width: 30rpx;
  height: 26rpx;
  background-size: 100% 100%;
}

.hbkdRechargeContainer.commonMode .rankArea .countPrize::before {
  background-image: url("https://static.hudongmiao.com/joymewMp/recharge/loveIcon.png");
}

.hbkdRechargeContainer.commonMode .rankArea .countPrize::after {
  background-image: url("https://static.hudongmiao.com/joymewMp/recharge/loveIcon.png");
}

.hbkdRechargeContainer.commonMode .rankArea .countPrize .countValue {
  margin: 0 30rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox {
  width: 695rpx;
  margin: 0 auto;
  margin-top: 40rpx;
  background-color: #8a1dd3;
  overflow: hidden;
  border-radius: 20rpx;
  margin: 40rpx auto;
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem {
  display: flex;
  align-items: center;
  color: #fff;
  font-size: 28rpx;
  margin: 30rpx 20rpx;
}
.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem .topThreeIcon {
  width: 39rpx;
  height: 50rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem .num {
  width: 39rpx;
  height: 50rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem .headImg {
  width: 64rpx;
  height: 64rpx;
  border-radius: 50%;
  margin: 0 22rpx 0 17rpx;
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem .name {
}

.hbkdRechargeContainer.commonMode .rankArea .rankBox .rankItem .wish {
  color: #FFF32E;
  flex: 1;
  text-align: right;
}
````

## File: packageA/pages/hbkdRecharge/styles/templateMode.wxss
````
.hbkdRechargeContainer.templateMode {
    background-color: #FFDEB5;
}
/* çº¢åŒ…å£è¢‹ä½™é¢åŒºåŸŸ */
.hbkdRechargeContainer.templateMode .remainArea {
    width: 100%;
    height: 926rpx;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/rechargeNew/remainBg.png');
    background-size: 100% 100%;
    display: flex;
    justify-content: center;
    padding-top: 90rpx;
  }
  
  .hbkdRechargeContainer.templateMode .remainArea .moneyInfo {
    width: 442rpx;
    height: 200rpx;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/rechargeNew/dialog.png');
    background-size: 100% 100%;
  }
  
  .hbkdRechargeContainer.templateMode .remainArea .moneyInfo .moneyValue {
    background: -webkit-linear-gradient(180deg, #ff4425, #ff9180 0%, #ff4425 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 96rpx;
    text-align: center;
  }
  
  .hbkdRechargeContainer.templateMode .remainArea .moneyInfo .moneyValue .unit {
    background: -webkit-linear-gradient(180deg, #ff4425, #ff9180 0%, #ff4425 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 32rpx;
  }
  
  .hbkdRechargeContainer.templateMode .remainArea .moneyInfo .moneyTip {
    font-size: 24rpx;
    font-weight: 400;
    color: #ffffff;
    text-align: center;
    line-height: 75rpx;
  }
  /* çº¢åŒ…å£è¢‹å……å€¼åŒºåŸŸ */
  .hbkdRechargeContainer.templateMode .rechargeArea {
    display: flex;
    justify-content: center;
    margin-top: -390rpx;
  }
  .hbkdRechargeContainer.templateMode .rechargeArea.mTop {
    margin-top: 40rpx;
  }
  .hbkdRechargeContainer.templateMode .rechargeArea.remainHidden {
    margin-top: 100rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox {
    width: 712rpx;
    height: 788rpx;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/rechargeNew/rechargeBg.png');
    background-size: 100% 100%;
    display: grid;
    grid-template-columns: repeat(3, min-content);
    grid-template-rows: repeat(3, min-content);
    justify-content: center;
    column-gap: 12rpx;
    row-gap: 24rpx;
    align-content: center;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem {
    width: 214rpx;
    height: 224rpx;
    border-radius: 24rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .staticMod {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .staticMod .value {
    font-size: 58rpx;
    font-weight: 700;
    color: #ffffff;
    white-space: nowrap;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .staticMod .value .unit {
    font-size: 20rpx;
    font-weight: 400;
    color: #ffffff;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .staticMod .name {
    font-size: 36rpx;
    font-weight: 600;
    color: #ffffff;
    margin-top: 15rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod .customTxt1 {
    font-size: 48rpx;
    font-weight: 400;
    color: #ffffff;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod .customTxt2 {
    font-size: 28rpx;
    font-weight: 400;
    color: #FDFFA7;
    margin-top: 30rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod input {
    width: 180rpx;
    height: 80rpx;
    color: #FFFFFF;
    font-size: 64rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod .unit {
    font-size: 20rpx;
    font-weight: 400;
    color: #ffffff;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem .customMod.inputMod {
    flex-direction: unset;
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(1),
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(7) {
    background: #d9d9d9 linear-gradient(224deg, #ffbf5f 0%, #fe5655 100%);
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(2),
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(8) {
    background: #d9d9d9 linear-gradient(224deg, #64bfe7 0%, #3211fd 100%);
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(3),
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(9) {
    background: #d9d9d9 linear-gradient(224deg, #feb7bb 0%, #fe154d 100%);
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(4) {
    background: #d9d9d9 linear-gradient(224deg, #9dbfff 0%, #d16efa 100%);
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(5) {
    background: #d9d9d9 linear-gradient(224deg, #fdcb89 0%, #fb966e 100%);
  }
  
  .hbkdRechargeContainer.templateMode .rechargeArea .rechargeBox .rechargeItem:nth-child(6) {
    background: #d9d9d9 linear-gradient(224deg, #f3a6f4 0%, #9e11fd 100%);
  }
  /* å……å€¼æ’è¡Œæ¦œåŒºåŸŸ */
  .hbkdRechargeContainer.templateMode .rankArea {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 12rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rankArea .agreement {
    font-size: 24rpx;
    font-weight: 400;
    color: #fe3a14;
  }
  
  .hbkdRechargeContainer.templateMode .rankArea .countPrize {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 46rpx;
  }
  .hbkdRechargeContainer.templateMode .rankArea .countPrize::before,  .hbkdRechargeContainer.templateMode .rankArea .countPrize::after {
    content: '';
    display: block;
    width: 96rpx;
    height: 96rpx;
    background-size: 100% 100%;
  }
  .hbkdRechargeContainer.templateMode .rankArea .countPrize::before {
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/rechargeNew/loveIonLeft.png');
  }
  .hbkdRechargeContainer.templateMode .rankArea .countPrize::after {
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/rechargeNew/loveIonLeft.png');
    transform: rotateY(180deg);
  }

  .hbkdRechargeContainer.templateMode .rankArea .countPrize .countValue {
    font-size: 56rpx;
    font-weight: 500;
    color: #ffffff;
    text-shadow: 0px 8rpx 8rpx 0rpx rgba(250, 116, 45, 1);
    margin: 0 24rpx;
  }
  
  
  .hbkdRechargeContainer.templateMode .rankArea .rankBox {
    width: 708rpx;
    height: 760rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(180deg, #ff9643, #ffc590 100%);
    border-radius: 24rpx;
    margin-top: 34rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner {
    width: 668rpx;
    height: 720rpx;
    background: #ffffff;
    border-radius: 24rpx;
    overflow-y: scroll;
    padding: 40rpx 20rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem {
    display: flex;
    align-items: center;
    margin-bottom: 32rpx;
  }
  
  .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem .topThreeIcon {
    width: 46rpx;
    height: 64rpx;
  }
  
   .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem .num {
    width: 46rpx;
    font-size: 48rpx;
    font-weight: 500;
    color: #333333;
    text-align: center;
  }
  
   .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem .headImg {
    width: 80rpx;
    height: 80rpx;
    border-radius: 94rpx;
    margin-left: 28rpx;
  }
  
   .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem .name {
    font-size: 32rpx;
    font-weight: 400;
    color: #000000;
    width: 220rpx;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin-left: 18rpx;
  }
  
   .hbkdRechargeContainer.templateMode .rankArea .rankBox .rankInner .rankItem .wish {
    font-size: 28rpx;
    font-weight: 400;
    color: #ff476f;
    width: 210rpx;
    text-align: right;
    white-space: nowrap;
  }
````

## File: packageA/pages/recharge/recharge.json
````json
{
  "navigationBarTitleText": "å……å€¼ä¸­å¿ƒ"
}
````

## File: packageA/pages/recharge/recharge.wxml
````
<view class="rechargeContainer">
    <image src="https://static.joymew.com/joymewMp/recharge/rechargeBg.png" class="bg" mode="widthFix"></image>
    <view class="userInfo">
        <view class="avatorBox" bindtap="showEditPopup">
            <image src="{{formData.avator}}" class="headImg"></image>
            <image src="https://static.hudongmiao.com/joymewMp/img/recharge/pencil.png" class="pencilImg"></image>
        </view>
        <view class="info">
            <view class="nickname">{{formData.wx_name}}</view>
            <view class="remain" wx:if="{{!isCloseCoin}}">
                ä½™é¢ï¼š
                <image src="https://static.hudongmiao.com/joymewMp/recharge/diamonds.png" class="diamondIcon"></image>
                <view class="remainVal">{{remainMoney}}</view>
            </view>
        </view>
        <view class="editInfo" bindtap="showEditPopup">
            ä¿®æ”¹ä¿¡æ¯
            <image src="https://static.joymew.com/joymewMp/recharge/arrowRight.png" class="arrowRight"></image>
        </view>
    </view>
    <view class="rechargeArea" wx:if="{{!isCloseCoin}}">
        <view class="customRechargeArea">
            <view class="title">å……å€¼é‡‘é¢</view>
            <input placeholder="è‡ªå®šä¹‰å……å€¼é‡‘é¢" type="number" maxlength="6" value="{{moneyInput}}" bindinput="handleMoneyInput" />
        </view>
        <view class="limitRechargeArea">
            <view class="rechargeItem" style="background-image:url('{{activeDesc === item ? activeCouponUrl : couponUrl}}')" wx:for="{{rechargeList}}" wx:key="index" data-desc="{{item}}" bindtap="chooseMoney">
                <image src="https://static.hudongmiao.com/joymewMp/recharge/diamonds.png" class="diamondIcon"></image>
                <view class="num {{activeDesc === item?'active':''}}">{{item}}</view>
            </view>
        </view>
    </view>
    <view class="rechargeBtn" bindtap="handleRecharge" wx:if="{{!isCloseCoin}}">ç«‹å³å……å€¼</view>
    <view class="agreement" bindtap="toAgreement" wx:if="{{!isCloseCoin}}">é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
    <view class="wishSheetTitle">
        <image src="https://static.hudongmiao.com/joymewMp/recharge/loveIcon.png" class="loveIcon"></image>
        <view class="title">ç¥ç¦æ¦œå•</view>
        <image src="https://static.hudongmiao.com/joymewMp/recharge/loveIcon.png" class="loveIcon"></image>
    </view>
    <view class="wishSheetList">
        <view class="item" wx:for="{{giftRankList}}" wx:key="index">
            <view class="leftCt">
                <image src="https://static.hudongmiao.com/joymewMp/recharge/firstMedal.png" class="medalImg" wx:if="{{index === 0}}"></image>
                <image src="https://static.hudongmiao.com/joymewMp/recharge/secondMedal.png" class="medalImg" wx:if="{{index === 1}}"></image>
                <image src="https://static.hudongmiao.com/joymewMp/recharge/thirdMedal.png" class="medalImg" wx:if="{{index === 2}}"></image>
                <view class="num" wx:if="{{index > 2}}">{{item.num}}</view>
                <image src="{{item.avator}}" class="headImg"></image>
                <view class="name">{{item.wx_name}}</view>
            </view>
            <view class="wish">é€å‡ºä»·å€¼{{item.size}}ä¸ªé’»ç¤¼ç‰©</view>
        </view>
    </view>
    <!-- å¼¹å‡ºåŒºåŸŸ -->
    <view class="popupArea" wx:if="{{editPopupVisible}}">
        <view class="shade" bindtap="hideEditPopup"></view>
        <view class="infoForm {{editPopupAni?'show':'hide'}}">
            <view class="formItem">
                <view class="key">å¤´åƒ</view>
                <view class="formCt">
                    <image src="{{formData.avator}}" class="headImg" bindtap='upload'></image>
                    <image src="https://static.hudongmiao.com/joymewMp/img/recharge/arrowRight.png" class="arrowRight"></image>
                </view>
            </view>
            <view class="formItem">
                <view class="key">å§“å</view>
                <view class="formCt">
                    <input bindblur="handleNameBlur" value="{{formData.wx_name}}" placeholder="è¯·è¾“å…¥å§“å" placeholder-style="color:#5B5E63;font-size: 32rpx" class="nameIpt" maxlength="12" />
                </view>
            </view>
            <view class="formConfirmItem">
                <view class="confirmBtn" bindtap="confirmEdit">ç¡®è®¤ä¿®æ”¹</view>
                <view class="editTip">ç¡®è®¤ä¿®æ”¹éœ€è¦æ¶ˆè€—{{editUserInfoPrice}}ä¸ªå–µé’»</view>
            </view>
        </view>
    </view>
</view>
<!-- éšç§æˆæƒç»„ä»¶ -->
<privacyAuthorize />

<!-- å¤´åƒè£å‰ªç»„ä»¶ -->
<imageCropper avatarUncropped="{{avatarUncropped}}" bind:cancelEvent="onCancelCropper" bind:confirmEvent="onConfirmCropper" />
````

## File: packageA/pages/recharge/recharge.wxss
````
.rechargeContainer {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.rechargeContainer > .bg {
  position: absolute;
  width: 100%;
}
.rechargeContainer > .userInfo {
  display: flex;
  position: relative;
  width: 100%;
  padding: 0 32rpx;
  margin-top: 92rpx;
  display: flex;
  align-items: center;
}
.userInfo > .avatorBox {
  width: 114rpx;
  height: 114rpx;
  background-color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  position: relative;
}
.userInfo > .avatorBox > .headImg {
  width: 108rpx;
  height: 108rpx;
  border-radius: 50%;
}
.userInfo > .avatorBox > .pencilImg {
  width: 40rpx;
  height: 40rpx;
  position: absolute;
  top: -10rpx;
  right: -2rpx;
}
.userInfo > .info {
  position: relative;
  margin-left: 35rpx;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.userInfo > .info > .nickname {
  width: 150rpx;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  font-size: 36rpx;
  font-weight: 400;
  color: #ffffff;
}
.userInfo > .info > .remain {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  display: flex;
  align-items: center;
  margin-top: 15rpx;
}
.userInfo > .info > .remain > .diamondIcon {
  width: 40rpx;
  height: 32rpx;
  margin-right: 13rpx;
}
.userInfo > .info > .remain > .remainVal {
  font-size: 34rpx;
  font-weight: 500;
  color: #ffffff;
}
.userInfo > .editInfo {
  display: flex;
  align-items: center;
  font-size: 24rpx;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.8);
  position: absolute;
  right: 32rpx;
}
.userInfo > .editInfo > .arrowRight {
  width: 16rpx;
  height: 28rpx;
  margin-left: 18rpx;
}

.rechargeContainer > .rechargeArea {
  width: 100%;
  height: 699rpx;
  background-image: url('https://static.joymew.com/joymewMp/recharge/rechargeCard.png');
  background-size: 100% 100%;
  position: relative;
  margin-top: 50rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.customRechargeArea {
  width: 648rpx;
  height: 184rpx;
  display: flex;
  justify-content: center;
  flex-direction: column;
  padding-left: 35rpx;
}
.customRechargeArea > .title {
  font-size: 24rpx;
  font-weight: 400;
  color: #a24935;
}

.customRechargeArea > input {
  width: 572rpx;
  height: 66rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #a24935;
  border-bottom: 1rpx solid #ffffff;
  margin-top: 20rpx;
}

.limitRechargeArea {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  width: 641rpx;
  margin-top: 25rpx;
}

.limitRechargeArea > .rechargeItem {
  width: 187rpx;
  height: 180rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin: 32rpx 0;
  background-size: 100% 100%;
}

.limitRechargeArea > .rechargeItem > .diamondIcon {
  width: 69rpx;
  height: 55rpx;
}

.limitRechargeArea > .rechargeItem > .num {
  font-size: 55rpx;
  font-weight: 500;
  color: #9c2cf3;
  margin-top: 6rpx;
}

.limitRechargeArea > .rechargeItem > .num.active {
  color: #ffffff;
}

.rechargeBtn {
  width: 500rpx;
  height: 79rpx;
  border-radius: 6rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/recharge/btn.png');
  background-size: 100% 100%;
  text-align: center;
  line-height: 79rpx;
  font-size: 34rpx;
  font-weight: 500;
  color: #a24935;
  margin-top: 55rpx;
  position: relative;
}

.rechargeContainer > .agreement {
  font-size: 24rpx;
  font-weight: 500;
  color: #efdaff;
  margin-top: 25rpx;
  position: relative;
}
.rechargeContainer > .wishSheetTitle {
  display: flex;
  align-items: center;
  margin-top: 47rpx;
  font-size: 36rpx;
  font-weight: 500;
  color: #ffffff;
  position: relative;
}

.rechargeContainer > .wishSheetTitle > .loveIcon {
  width: 30rpx;
  height: 26rpx;
  margin: 0 30rpx;
}

.rechargeContainer > .wishSheetList {
  position: relative;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: #8a1dd3;
  margin-top: 25rpx;
}

.rechargeContainer > .wishSheetList > .item {
  width: 695rpx;
  height: 114rpx;
  background: rgba(84, 59, 144, 0.3);
  border-radius: 8rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 35rpx 0 28rpx;
  margin-bottom: 10rpx;
}

.rechargeContainer > .wishSheetList > .item > .leftCt {
  display: flex;
  align-items: center;
}

.rechargeContainer > .wishSheetList > .item > .leftCt > .medalImg {
  width: 39rpx;
  height: 50rpx;
}

.rechargeContainer > .wishSheetList > .item > .leftCt > .headImg {
  width: 64rpx;
  height: 64rpx;
  border-radius: 50%;
  margin: 0 22rpx 0 17rpx;
}

.rechargeContainer > .wishSheetList > .item > .leftCt > .name {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
}

.rechargeContainer > .wishSheetList > .item > .leftCt > .num {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
}

.rechargeContainer > .wishSheetList > .item > .wish {
  font-size: 28rpx;
  font-weight: 400;
  color: #fff32e;
}

.popupArea {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
}

.popupArea > .shade {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.3);
  top: 0;
  left: 0;
}

.popupArea > .infoForm {
  width: 750rpx;
  height: 550rpx;
  background: #ffffff;
  position: absolute;
  bottom: 0;
  border-top-right-radius: 20rpx;
  border-top-left-radius: 20rpx;
  padding: 0 50rpx;
  padding-top: 30rpx;
  transition: all 0.3s ease-out;
}

.popupArea > .infoForm.hide {
  transform: translateY(550rpx);
}

.popupArea > .infoForm.show {
  transform: translateY(0rpx);
}

.infoForm > .formItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 138rpx;
}
.infoForm > .formItem > .key {
  font-size: 32rpx;
  font-weight: 400;
  color: #8f9297;
}

.infoForm > .formItem > .formCt {
  display: flex;
  align-items: center;
  position: relative;
}

.infoForm > .formItem > .formCt > .headImg {
  width: 76rpx;
  height: 76rpx;
  border-radius: 50%;
}

.infoForm > .formItem > .formCt > .arrowRight {
  width: 28rpx;
  height: 28rpx;
  margin-left: 30rpx;
}

.infoForm > .formItem > .formCt > .nameIpt {
  font-weight: 400;
  color: #5b5e63;
  font-size: 32rpx;
  text-align: right;
  width: 256rpx;
}

.formConfirmItem {
  flex-direction: column;
  display: flex;
  align-items: center;
  margin-top: 32rpx;
}

.formConfirmItem > .confirmBtn {
  width: 418rpx;
  height: 90rpx;
  background: linear-gradient(300deg, #c76bfb 0%, #ea1775 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32rpx;
  font-weight: 400;
  color: #ffffff;
}

.formConfirmItem > .editTip {
  font-size: 24rpx;
  font-weight: 400;
  color: #e14d4d;
  margin-top: 42rpx;
}
@keyframes zoomIn {
  from {
    opacity: 0;
    -webkit-transform: scale3d(0.3, 0.3, 0.3);
    transform: scale3d(0.3, 0.3, 0.3);
  }

  50% {
    opacity: 1;
  }
}

@keyframes zoomOut {
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
    -webkit-transform: scale3d(0.3, 0.3, 0.3);
    transform: scale3d(0.3, 0.3, 0.3);
  }

  to {
    opacity: 0;
  }
}
````

## File: packageA/pages/rechargeWedding/rechargeWedding.json
````json
{
  "navigationBarTitleText": "å……å€¼ä¸­å¿ƒ"
}
````

## File: packageA/pages/wishRank/wishRank.json
````json
{
  "navigationBarTitleText": "ç­¾åˆ°æ’å",
  "usingComponents": {}
}
````

## File: packageA/pages/wishRank/wishRank.scss
````scss
.container {
  width: 100vw;
  height: 100vh;
  background-color: #FAFAFA;
  position: relative;

  .tip {
    height: 60rpx;
    text-align: center;
    line-height: 60rpx;
    font-size: 24rpx;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.40)
  }

  .rankWrap {
    height: calc(100% - 160rpx);
    padding-bottom: 80rpx;
    background-color: #fff;
    overflow-y: scroll;

    .rankItem {
      display: flex;
      align-items: center;
      margin-bottom: 30rpx;
    }
  }

  .myWrap {
    position: fixed;
    bottom: 0rpx;
    width: 100%;
    background-color: #fff;
    box-shadow: 0rpx -2rpx 4rpx 0rpx rgba(0, 0, 0, 0.1);

    .myInfo {
      display: flex;
      align-items: center;
      height: 128rpx;
    }
  }
}

.rankNum {
  font-size: 32rpx;
  font-weight: 500;
  color: #b3b3b3;
  width: 94rpx;
  display: flex;
  justify-content: center;

  &.rankindex0 {
    color: #ea4240;
  }

  &.rankindex1 {
    color: #ed6e38;
  }

  &.rankindex2 {
    color: #e9b23c;
  }
}

// åˆ—è¡¨é¡¹å…¬å…±æ ·å¼
.avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
}

.nickname {
  margin-left: 20rpx;
  font-size: 30rpx;
  font-weight: 500;
  color: #333333;
  max-width: 300rpx;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

.mark {
  width: 100rpx;
  height: 30rpx;
  background: #fa97bb;
  border-radius: 62rpx;
  font-size: 16rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 16rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.position {
  width: 100rpx;
  height: 32rpx;
  border-radius: 18rpx;
  font-size: 20rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 16rpx;
  display: flex;
  justify-content: center;
  align-items: center;

  &.man {
    background: linear-gradient(266deg, #31a3fd 0%, #565ef5 100%);
  }

  &.woman {
    background: linear-gradient(266deg, #fd31f7 0%, #f55670 100%);
  }
}
````

## File: packageB/api/photoWall.js
````javascript
import { request } from "../../utils/request";

/** ä¸Šä¼ ç…§ç‰‡å¢™æ•°æ®
 * @param {string} images å›¾ç‰‡åœ°å€
 * @param {string} constant ç¥ç¦è¯­
 * @param {string} splid æ´»åŠ¨id
 */
export const reqUploadPhotoWall = (images, constant, splid) => {
  return request("pair/uploadPhoto", "POST", {
    images,
    constant,
    splid,
  });
};

/** è·å–ç…§ç‰‡å¢™åˆ—è¡¨
 * @param {string} splid æ´»åŠ¨id
 */
export const reqGetPhotoWallList = (splid) => {
  return request(`pair/photoList?splid=${splid}`, "GET", {});
};
````

## File: packageB/pages/photoWallIndex/photoWallIndex.js
````javascript
import {
  reqGetPhotoWallList
} from '../../api/photoWall'
import defaultContent from '../../../assets/constant/default'

Page({
  data: {
    photoWallList: [], // ç…§ç‰‡å¢™æ•°æ®
    // å½“å‰å±•ç¤ºçš„æ•°æ®
    currentData: {
      user_id: '',
      user_name: '',
      user_avator: '',
      type: '', // 1ä¸ºç”·æ–¹ï¼›2ä¸ºå¥³æ–¹
      bless: '',
      date: '',
      time: '',
      photos: []
    },
    defaultDialogData: {
      user_id: '',
      user_name: '',
      user_avator: '',
      type: '',
      bless: '',
      date: '',
      time: '',
      photos: []
    },
    currentPhotoIndex: 1, // å½“å‰è¯¦æƒ…å±•ç¤ºçš„ç…§ç‰‡
    isShowDetail: false, // æ˜¯å¦æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—
  },
  onLoad() {
    this.getDataList();
    wx.removeStorageSync('isNeedFreshList');
  },
  onShow() {
    const isNeedFresh = wx.getStorageSync('isNeedFreshList');
    if (isNeedFresh) {
      console.log('åˆ·æ–°äº†');
      this.getDataList();
      wx.removeStorageSync('isNeedFreshList');
    }
  },
  /** è·³è½¬è‡³ä¸Šä¼ ç…§ç‰‡å¢™é¡µ */
  turnToUpload() {
    wx.navigateTo({
      url: '/packageB/pages/photoWallUpload/photoWallUpload',
    })
  },
  /** è·å–ç…§ç‰‡å¢™æ•°æ® */
  async getDataList() {
    const liveId = wx.getStorageSync('liveId');
    const res = await reqGetPhotoWallList(liveId);
    console.log('ç…§ç‰‡å¢™æ•°æ®ï¼š', res);
    if (res && res.data && res.data.list) {
      const list = res.data.list;
      let target = list.map(item => {
        const targetObj = JSON.parse(item);
        const {
          images,
          avator,
          constant,
          wxName,
          userId,
          dateTime,
          type
        } = targetObj;
        return {
          user_id: userId || '',
          user_avator: avator || defaultContent.defaultJoymewAvatar,
          user_name: wxName || '',
          bless: constant || '',
          type: type || '',
          photos: images ? images.split(',').filter(item => item !== '') : [],
          date: dateTime ? String(dateTime).split(' ')[0] : '',
          time: dateTime ? String(dateTime).split(' ')[1] : '',
        }
      })
      target = target.filter(item => item.photos.length > 0)
      this.setData({
        'photoWallList': target
      })
    }
  },
  /** å±•ç¤ºè¯¦æƒ… */
  showDetail(e) {
    const index = e.currentTarget.dataset.index;
    const targetItem = this.data.photoWallList[index];
    this.setData({
      'currentData': targetItem,
      'isShowDetail': true
    })
  },
  /** å…³é—­å¼¹çª— */
  closeDialog() {
    this.setData({
      'isShowDetail': false,
      'currentData': this.data.defaultDialogData
    })
  },
  /** å¼¹çª—è½®æ’­å›¾å˜åŒ–å›è°ƒ */
  changeSwiper(e) {
    const index = e.detail.current;
    this.setData({
      'currentPhotoIndex': index + 1
    })
  }
})
````

## File: packageB/pages/photoWallIndex/photoWallIndex.json
````json
{
  "usingComponents": {},
  "navigationBarTitleText": "å¹¸ç¦ç¬é—´"
}
````

## File: packageB/pages/photoWallIndex/photoWallIndex.wxml
````
<view class="page-container">
  <!-- é¡¶éƒ¨æµ·æŠ¥ -->
  <image src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/banner-img.png" mode="widthFix" class="banner-img" />
  <view class="main-container">
    <!-- å†…å®¹åŒºèƒŒæ™¯ -->
    <image src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/page-bg.png" mode="widthFix" class="container-bg" />
    <view class="main-content">
      <view class="photo-container">
        <view class="photo-item" wx:for="{{photoWallList}}" wx:key="user_id" data-index="{{index}}" bind:tap="showDetail">
          <image src="{{item.photos[0]}}" mode="aspectFill" class="item-img" />
          <view class="other-info">
            <view class="item-bless">{{item.bless}}</view>
            <view class="uploader">
              <image src="{{item.user_avator}}" mode="aspectFill" class="user-avator" />
              <view class="user-name">{{item.user_name || 'å—¨å–µç”¨æˆ·'}}</view>
              <view class="upload-time">
                <view class="date">{{item.date}}</view>
                <view class="time">{{item.time}}</view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <!-- ä¸Šä¼ æŒ‰é’® -->
  <image class="upload-btn" src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/upload-icon.png" mode="aspectFill" bind:tap="turnToUpload"></image>
  <!-- è¯¦æƒ…å¼¹çª— -->
  <view class="detail-dialog" wx:if="{{isShowDetail}}" catch:touchmove>
    <view class="detail-header">{{currentPhotoIndex + '/' + currentData.photos.length}}</view>
    <image bind:tap="closeDialog" src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/delete-icon.png" mode="aspectFill" class="close-icon"/>
    <view class="user-info">
      <image src="{{currentData.user_avator}}" mode="aspectFill" class="user-avator" />
      <view class="user-name">{{currentData.user_name || 'å—¨å–µç”¨æˆ·'}}</view>
      <view class="{{currentData.type === '1' ? 'user-relationship male' : 'user-relationship female'}}" wx:if="{{currentData.type}}">{{ currentData.type === '1' ? 'ç”·æ–¹äº²å‹' : 'å¥³æ–¹äº²å‹' }}</view>
    </view>
    <swiper style="width: 100%; height: 500px;" current="{{currentPhotoIndex - 1}}" bindchange="changeSwiper" circular>
      <swiper-item wx:for="{{currentData.photos}}" wx:key="item" class="swiper-img-item">
        <image src="{{item}}" mode="aspectFit" class="swiper-img"/>
      </swiper-item>
    </swiper>
    <view class="bless" wx:if="{{currentData.bless}}">{{currentData.bless}}</view>
  </view>
</view>
````

## File: packageB/pages/photoWallIndex/photoWallIndex.wxss
````
.page-container {
  width: 100vw;
  min-height: 100vh;
  height: 100%;
}
.page-container::before,
.page-container::after {
  content: '';
  display: table;
  clear: both;
}
.page-container .banner-img {
  width: 100%;
  height: 330.77rpx;
  position: fixed;
  z-index: -1;
}
.page-container .main-container {
  width: 100%;
  margin-top: 263.77rpx;
  padding: 38.46rpx 19.23rpx;
  padding-bottom: 0;
  box-sizing: border-box;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 1;
  overflow: hidden;
}
.page-container .main-container .container-bg {
  width: 100%;
  height: 100vh;
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
}
.page-container .main-container .main-content {
  width: 100%;
  height: 100vh;
  padding: 96.15rpx 0;
  box-sizing: border-box;
  overflow: hidden;
}
.page-container .main-container .main-content .photo-container {
  width: 100%;
  height: 100%;
  overflow-y: scroll;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
}
.page-container .main-container .main-content .photo-container .photo-item {
  width: 49%;
  margin-top: 19.23rpx;
  border-radius: 11.54rpx;
  background-color: #fff;
  overflow: hidden;
}
.page-container .main-container .main-content .photo-container .photo-item .item-img {
  width: 100%;
  height: 444.23rpx;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info {
  padding: 15.38rpx;
  padding-bottom: 23.08rpx;
  box-sizing: border-box;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .item-bless {
  width: 100%;
  margin-bottom: 15.38rpx;
  color: #333;
  line-height: 34.62rpx;
  font-size: 26.92rpx;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader .user-avator {
  width: 36.54rpx;
  height: 36.54rpx;
  flex-shrink: 0;
  margin-right: 11.54rpx;
  border-radius: 50%;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader .user-name {
  flex: 1;
  margin-right: 9.62rpx;
  color: rgba(0, 0, 0, 0.4);
  font-size: 23.08rpx;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader .upload-time {
  width: fit-content;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  color: rgba(0, 0, 0, 0.4);
}
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader .upload-time .date,
.page-container .main-container .main-content .photo-container .photo-item .other-info .uploader .upload-time .time {
  font-size: 19.23rpx;
}
.page-container .main-container .main-content .photo-container .photo-item:nth-of-type( -n + 2) {
  margin-top: 0;
}
.page-container .upload-btn {
  width: 192.31rpx;
  height: 190.38rpx;
  position: fixed;
  bottom: 100rpx;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
}
.page-container .detail-dialog {
  width: 100vw;
  min-height: 100vh;
  height: 100%;
  padding: 23.08rpx 32.69rpx;
  box-sizing: border-box;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  flex-direction: column;
  align-items: center;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 4;
  color: #fff;
}
.page-container .detail-dialog .detail-header {
  margin-bottom: 9.62rpx;
  font-size: 40.38rpx;
}
.page-container .detail-dialog .close-icon {
  width: 40.38rpx;
  height: 40.38rpx;
  position: absolute;
  top: 32.69rpx;
  right: 32.69rpx;
}
.page-container .detail-dialog .user-info {
  width: 100%;
  margin-bottom: 32.69rpx;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}
.page-container .detail-dialog .user-info .user-avator {
  width: 80.77rpx;
  height: 80.77rpx;
  flex-shrink: 0;
  margin-right: 23.08rpx;
  border-radius: 50%;
}
.page-container .detail-dialog .user-info .user-name {
  margin-right: 15.38rpx;
  font-size: 40.38rpx;
}
.page-container .detail-dialog .user-info .user-relationship {
  width: fit-content;
  flex-shrink: 0;
  padding: 7.69rpx 23.08rpx;
  box-sizing: border-box;
  border-radius: 42.31rpx;
  font-size: 25rpx;
}
.page-container .detail-dialog .user-info .male {
  background-image: linear-gradient(to right, #565EF5, #31A3FD);
}
.page-container .detail-dialog .user-info .female {
  background-image: linear-gradient(to right, #F55670, #FD31F7);
}
.swiper-img-item {
  width: 100%;
  height: 100%;
  display: flex;
  border-radius: 7.69rpx;
  background-color: rgba(0, 0, 0, 0.6);
  overflow: hidden;
  align-content: center;
  justify-content: center;
}
.page-container .detail-dialog .swiper-img {
  width: 100%;
  height: 100%;
  border-radius: 7.69rpx;
  overflow: hidden;
}
.page-container .detail-dialog .bless {
  margin-top: 32.69rpx;
  width: 100%;
  font-size: 40.38rpx;
  text-align: left;
  overflow: hidden;
  word-wrap: break-word;
}
````

## File: packageB/pages/photoWallUpload/photoWallUpload.js
````javascript
import constant from '../../../assets/constant/default';
import qiniu from '../../../utils/qiniu/index';
import { reqUploadPhotoWall } from '../../api/photoWall';

Page({
  data: {
    userInfo: {
      avatarUrl: '',
      nickName: ''
    },
    uploadForm: {
      bless: '',
      photos: [],
    },
    defaultAvatar: constant.defaultJoymewAvatar,
  },
  onLoad() {
    const avatarUrl = wx.getStorageSync('avatar');
    const nickname = wx.getStorageSync('nickname');

    this.setData({
      'userInfo.avatarUrl': avatarUrl,
      'userInfo.nickName': nickname,
    })
    // åˆå§‹åŒ–ä¸ƒç‰›äº‘
    qiniu.init();
  },
  /** ä¿®æ”¹ç¥ç¦è¯­ */
  changeBless(e) {
    const target = e.detail.value;
    this.setData({
      'uploadForm.bless': target
    })
  },
  /** é€‰æ‹©å›¾ç‰‡ */
  choosePhoto() {
    wx.chooseMedia({
      count: 3 - this.data.uploadForm.photos.length,
      mediaType: ['image'],
      sourceType: ['album'],
      sizeType: ['compressed'],
      success: (res) => {
        console.log('é€‰æ‹©çš„å›¾ç‰‡', res);
        const imgs = res.tempFiles.map(item => item.tempFilePath);
        this.setData({
          'uploadForm.photos': [...this.data.uploadForm.photos, ...imgs]
        })
      },
      fail: (err) => {
        console.log('é”™è¯¯ä¿¡æ¯', err);
      },
    })
  },
  /** åˆ é™¤é€‰ä¸­çš„å›¾ç‰‡ */
  removeChoosedImg(e) {
    const index = e.currentTarget.dataset.index;
    const copy = this.data.uploadForm.photos;
    copy.splice(index, 1)
    this.setData({
      'uploadForm.photos': copy
    })
  },
  /** æäº¤ */
  async confirmHandler() {
    if (!this.data.uploadForm.bless) {
      wx.showToast({
        icon: 'none',
        title: 'è¯·è¾“å…¥ä½ çš„ç¥ç¦',
      });
      return;
    }
    if (!this.data.uploadForm.photos.length) {
      wx.showToast({
        icon: 'none',
        title: 'è¯·ä¸Šä¼ ç…§ç‰‡',
      });
      return;
    }
    // ä¸Šä¼ å›¾ç‰‡
    const uploadRes = await qiniu.uploadFiles(this.data.uploadForm.photos);
    const imgUrls = uploadRes.map(item => item.imageURL);
    this.setData({
      'uploadForm.photos': imgUrls
    })
    // ä¸Šä¼ æ•°æ®
    const splid = wx.getStorageSync('liveId');
    const uploadDataRes = await reqUploadPhotoWall(this.data.uploadForm.photos.join(','), this.data.uploadForm.bless, splid);
    console.log('ä¸Šä¼ ç»“æœ', uploadDataRes);
    if (uploadDataRes && uploadDataRes.msg && String(uploadDataRes.msg) === 'ok') {
      wx.showToast({
        icon: 'none',
        title: 'ä¸Šä¼ æˆåŠŸï¼Œè¯·ç­‰å¾…å®¡æ ¸ï¼Œå®¡æ ¸åè‡ªåŠ¨å‘å¸ƒ',
        success: () => {
          wx.setStorageSync('isNeedFreshList', true);
          setTimeout(() => {
            wx.navigateBack();
          }, 1500)
        }
      })
    } else {
      wx.showToast({
        icon: 'none',
        title: 'ç½‘ç»œé”™è¯¯',
      });
      return;
    }
  }
})
````

## File: packageB/pages/photoWallUpload/photoWallUpload.json
````json
{
  "usingComponents": {},
  "navigationBarTitleText": "å¹¸ç¦ä¸Šä¼ "
}
````

## File: packageB/pages/photoWallUpload/photoWallUpload.wxml
````
<view class="upload-page">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info-part">
    <image src="{{userInfo.avatarUrl || defaultAvatar}}" mode="aspectFill" class="user-avatar"/>
    <view class="user-name">{{ userInfo.nickName || 'å—¨å–µç”¨æˆ·' }}</view>
  </view>
  <!-- æ ‡è¯­ -->
  <view class="slogn">è®°å½•ç°åœºçš„å¹¸ç¦ç¬é—´</view>
  <!-- è¾“å…¥æ¡† -->
  <view class="input-part">
    <textarea value="{{uploadForm.bless}}" bindinput="changeBless" class="bless-input" placeholder="å†™ä¸‹ä½ å¯¹æ­¤åˆ»çš„ç¥ç¦~" maxlength="50"/>
    <view class="len">{{ uploadForm.bless.length + ' / 50' }}</view>
  </view>
  <!-- ä¸Šä¼ ç…§ç‰‡ -->
  <view class="upload-photo">
    <view class="upload-btn" bindtap="choosePhoto" wx:if="{{uploadForm.photos.length < 3}}">
      <image src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/camera-icon.png" mode="aspectFill" class="camera-icon"/>
      <text class="sub-txt">ï¼ˆæœ€å¤š3å¼ ï¼‰</text>
    </view>
    <view class="photo" wx:for="{{uploadForm.photos}}" wx:key="item">
      <image src="{{item}}" mode="aspectFill" class="photo-img"/>
      <image data-index="{{index}}" src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/delete-icon.png" mode="aspectFill" class="delete-icon" bindtap="removeChoosedImg"/>
    </view>
  </view>
  <!-- æç¤º -->
  <view class="tip">Psï¼šå¹¸ç¦ç¬é—´ç…§ç‰‡ä¸ä¼šåœ¨å¤§å±å¹•ä¸Šå‡ºç°å“¦ï¼</view>
  <!-- æäº¤æŒ‰é’® -->
  <view class="confirm-btn" bind:tap="confirmHandler">æäº¤</view>
    <!-- éšç§æˆæƒå¼¹çª— -->
    <privacyAuthorize></privacyAuthorize>
</view>
````

## File: packageB/pages/photoWallUpload/photoWallUpload.wxss
````
.upload-page {
  width: 100vw;
  min-height: 100vh;
  height: 100%;
  padding: 32.69rpx;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.upload-page .user-info-part {
  width: 100%;
  margin-bottom: 19.23rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.upload-page .user-info-part .user-avatar {
  width: 80.77rpx;
  height: 80.77rpx;
  margin-right: 23.08rpx;
  border-radius: 50%;
}
.upload-page .user-info-part .user-name {
  flex: 1;
  overflow: hidden;
  font-size: 40.38rpx;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.upload-page .slogn {
  width: 100%;
  height: 65.38rpx;
  margin-bottom: 32.69rpx;
  background-image: linear-gradient(to left, rgba(250, 69, 252, 0.1), rgba(252, 77, 136, 0.1));
  border-radius: 7.69rpx;
  text-align: center;
  line-height: 65.38rpx;
  color: #FA45FC;
  font-size: 23.08rpx;
}
.upload-page .input-part {
  width: 100%;
  height: 192.31rpx;
  margin-bottom: 65.38rpx;
  box-sizing: border-box;
  border-bottom: 1.92rpx solid #EFEFEF;
  position: relative;
}
.upload-page .input-part .bless-input {
  width: 100%;
  height: 100%;
}
.upload-page .input-part .len {
  color: rgba(0, 0, 0, 0.4);
  font-size: 23.08rpx;
  position: absolute;
  bottom: 17.31rpx;
  right: 0;
}
.upload-page .upload-photo {
  width: 100%;
  margin-bottom: 32.69rpx;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}
.upload-page .upload-photo .upload-btn {
  width: 163.46rpx;
  height: 163.46rpx;
  margin-right: 32.69rpx;
  border: 1.92rpx dashed #7E7E7E;
  box-sizing: border-box;
  border-radius: 11.54rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.upload-page .upload-photo .upload-btn .camera-icon {
  width: 44.23rpx;
  height: 38.46rpx;
  margin-bottom: 11.54rpx;
}
.upload-page .upload-photo .upload-btn .sub-txt {
  color: rgba(0, 0, 0, 0.4);
  font-size: 23.08rpx;
}
.upload-page .upload-photo .photo {
  width: 163.46rpx;
  height: 163.46rpx;
  margin-right: 32.69rpx;
  border-radius: 11.54rpx;
  position: relative;
}
.upload-page .upload-photo .photo .photo-img {
  width: 100%;
  height: 100%;
  border-radius: 11.54rpx;
}
.upload-page .upload-photo .photo .delete-icon {
  width: 40.38rpx;
  height: 40.38rpx;
  position: absolute;
  right: 0;
  top: 0;
  transform: translate(50%, -50%);
}
.upload-page .upload-photo .photo:last-of-type {
  margin-right: 0;
}
.upload-page .tip {
  margin-bottom: 192.31rpx;
  color: #FA45FC;
  font-size: 23.08rpx;
}
.upload-page .confirm-btn {
  width: 100%;
  height: 92.31rpx;
  border-radius: 11.54rpx;
  background-image: linear-gradient(90deg, #fc4d88, #fa45fc 100%);
  color: #fff;
  line-height: 92.31rpx;
  font-size: 32.69rpx;
  font-weight: 500;
  text-align: center;
}
````

## File: packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.js
````javascript
Component({
  properties: {
    award: {
      type: String,
      value: '',
    },
    name: {
      type: String,
      value: '',
    },
    img: {
      type: String,
      value: '',
    },
  },
  data: {
    isShow: false,
  },
  methods: {
    show() {
      this.setData({
        isShow: true,
      });
    },
    hide() {
      this.setData({
        isShow: false,
      });
    },
    stopPropagation() {},
  },
});
````

## File: packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.json
````json
{
  "component": true
}
````

## File: packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.scss
````scss
.container {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 100;
  width: 100vw;
  height: 100vh;

  background-color: rgba($color: #000000, $alpha: 0.6);

  padding-top: 20px;
  display: grid;
  grid-template:
    '.' 1fr
    'title' min-content
    'popup-body' min-content
    'close-btn' min-content
    '.' 3fr
    / 1fr;
  place-items: center;

  .title {
    width: 239px;
    height: 104px;

    animation: popup 0.3s ease-in-out;

    @keyframes popup {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  .popup-body {
    grid-area: popup-body;
    box-sizing: border-box;
    width: 74.6667vw;
    height: 98.6667vw;

    border-radius: 12px;
    overflow: hidden;

    position: relative;

    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;

    animation: popup 0.3s ease-in-out;

    @keyframes popup {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .bg {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;

      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: top;
    }

    .award {
      width: 80%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      text-align: center;
      font-size: 20px;
      color: #333333;
    }

    .name {
      margin-top: 4px;
      width: 80%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;

      text-align: center;

      font-size: 24px;
      color: #333333;
    }

    .img-area {
      margin-top: 16px;

      width: 164px;
      height: 164px;
      background: #f2f2f2;
      border-radius: 2px;

      display: flex;
      align-items: center;
      justify-content: center;

      .img {
        width: 80%;
        height: 80%;
      }
    }

    .btn {
      margin-top: 24px;
      width: 220px;
      height: 52px;
      background: linear-gradient(180deg, #fd1d19, #fe9743 100%);
      border-radius: 30px;

      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 20px;
      color: #ffffff;
    }
  }

  .close-btn {
    grid-area: close-btn;
    margin-top: 24px;
    width: 34px;
    height: 34px;
  }
}
````

## File: packageB/pages/winningRecord/components/congratulationWinningPopup/congratulationWinningPopup.wxml
````
<view
  class="container"
  wx:if="{{ isShow }}"
  bind:tap="hide"
>
  <image
    src="https://static.hudongmiao.com/joymewMp/img/winningRecord/congratulation-winning.svg"
    class="title"
  ></image>
  <view
    class="popup-body"
    catch:tap="stopPropagation"
  >
    <image
      class="bg"
      src="https://static.hudongmiao.com/joymewMp/img/winningRecord/popup-board.svg"
    ></image>
    <view class="award">{{ award }}</view>
    <view class="name">{{ name }}</view>
    <view class="img-area">
      <image
        class="img"
        src="{{ img }}"
        mode="aspectFit"
      ></image>
    </view>
    <view
      class="btn"
      bind:tap="hide"
    >
      æˆ‘çŸ¥é“äº†
    </view>
  </view>
  <image
    class="close-btn"
    src="https://static.hudongmiao.com/joymewMp/img/recharge/close.svg"
  ></image>
</view>
````

## File: packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.js
````javascript
Component({
  data: {
    isShow: false,
  },
  methods: {
    show() {
      this.setData({
        isShow: true,
      });
    },
    hide() {
      this.setData({
        isShow: false,
      });
    },
    stopPropagation() {},
  },
});
````

## File: packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.json
````json
{
  "component": true
}
````

## File: packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.scss
````scss
.container {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 100;
  width: 100vw;
  height: 100vh;

  background-color: rgba($color: #000000, $alpha: 0.6);

  padding-top: 20px;
  display: grid;
  grid-template:
    '.' 1fr
    'title' min-content
    'popup-body' min-content
    'close-btn' min-content
    '.' 3fr
    / 1fr;
  place-items: center;

  .title {
    width: 239px;
    height: 104px;

    animation: popup 0.3s ease-in-out;

    @keyframes popup {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  .popup-body {
    grid-area: popup-body;
    box-sizing: border-box;
    width: 74.6667vw;
    height: 98.6667vw;

    border-radius: 12px;
    overflow: hidden;

    position: relative;

    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;

    animation: popup 0.3s ease-in-out;

    @keyframes popup {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .bg {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;

      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: top;
    }

    .face {
      width: 140px;
      height: 140px;
    }

    .unfortunately {
      font-size: 20px;
      color: #6a0d0b;
    }

    .thank {
      margin-top: 10px;
      font-size: 16px;
      color: #6a0d0b;
    }

    .btn {
      margin-top: 62px;
      width: 220px;
      height: 52px;
      background: #c2c2c2;
      border-radius: 30px;

      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 20px;
      color: #ffffff;
    }
  }

  .close-btn {
    grid-area: close-btn;
    margin-top: 24px;
    width: 34px;
    height: 34px;
  }
}
````

## File: packageB/pages/winningRecord/components/notWonYetPopup/notWonYetPopup.wxml
````
<view
  class="container"
  wx:if="{{ isShow }}"
  bind:tap="hide"
>
  <image
    src="https://static.hudongmiao.com/joymewMp/img/winningRecord/not-win.svg"
    class="title"
  ></image>
  <view
    class="popup-body"
    catch:tap="stopPropagation"
  >
    <image
      class="bg"
      src="https://static.hudongmiao.com/joymewMp/img/winningRecord/popup-board.svg"
    ></image>
    <image
      class="face"
      src="https://static.hudongmiao.com/joymewMp/img/winningRecord/face.svg"
      mode="aspectFit"
    ></image>
    <view class="unfortunately">å¾ˆé—æ†¾ï¼Œæœ¬è½®å¹¶æœªè·å¥–</view>
    <view class="thank">è°¢è°¢å‚ä¸ï¼Œç­‰å¾…ä¸‹æ¬¡æŠ½å¥–å§ï½</view>
    <view
      class="btn"
      bind:tap="hide"
    >
      æˆ‘çŸ¥é“äº†
    </view>
  </view>
  <image
    class="close-btn"
    src="https://static.hudongmiao.com/joymewMp/img/recharge/close.svg"
  ></image>
</view>
````

## File: packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.js
````javascript
Component({
  properties: {
    award: {
      type: String,
      value: '',
    },
    winnerList: {
      type: Array,
      value: [],
    },
  },
  data: {
    isShow: false,
  },
  methods: {
    show() {
      this.setData({
        isShow: true,
      });
    },
    hide() {
      this.setData({
        isShow: false,
      });
    },
    stopPropagation() {},
  },
});
````

## File: packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.json
````json
{
  "component": true
}
````

## File: packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.scss
````scss
.container {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 100;
  width: 100vw;
  height: 100vh;

  background-color: rgba($color: #000000, $alpha: 0.6);

  padding-top: 20px;
  display: grid;
  grid-template:
    '.' 1fr
    'popup-body' min-content
    'close-btn' min-content
    '.' 3fr
    / 1fr;
  row-gap: 20px;
  place-items: center;

  .popup-body {
    grid-area: popup-body;
    width: calc(100% - 48px);

    background: #ffffff;
    border-radius: 12px;
    overflow: hidden;

    padding-bottom: 20px;
    display: flex;
    flex-direction: column;

    animation: popup 0.3s ease-in-out;

    @keyframes popup {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .title {
      width: 100%;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 20px;
      color: #ff457a;
    }

    .content {
      width: 100%;
      max-height: 70vh;
      overflow-y: scroll;

      box-sizing: border-box;

      display: flex;
      flex-direction: column;
      align-items: center;

      .item {
        width: 100%;
        // XXX ç›´æ¥ä½¿ç”¨height: 40px;ä¼šå¯¼è‡´é«˜åº¦è¢«å‹ç¼©ï¼ŒåŸå› æœªçŸ¥
        min-height: 40px;

        background: #ffffff;

        &:nth-child(odd) {
          background: #ffecec;
        }

        display: flex;
        align-items: center;
        justify-content: center;
        column-gap: 8px;

        .avatar {
          width: 18px;
          height: 18px;
          border-radius: 50%;
        }

        .nickname {
          font-size: 14px;
          color: #333333;
        }
      }
    }
  }

  .close-btn {
    grid-area: close-btn;
    width: 34px;
    height: 34px;
  }
}
````

## File: packageB/pages/winningRecord/components/winnerListPopup/winnerListPopup.wxml
````
<view
  class="container"
  wx:if="{{ isShow }}"
  bind:tap="hide"
>
  <view
    class="popup-body"
    catch:tap="stopPropagation"
  >
    <view class="title">{{ award }}è·å¥–åå•</view>
    <view class="content">
      <view
        class="item"
        wx:for="{{ winnerList }}"
        wx:key="index"
      >
        <image
          class="avatar"
          src="{{ item.avatar }}"
          mode="aspectFill"
        ></image>
        <view class="name">{{ item.nickname }}</view>
      </view>
    </view>
  </view>
  <image
    class="close-btn"
    src="https://static.hudongmiao.com/joymewMp/img/recharge/close.svg"
  ></image>
</view>
````

## File: packageC/api/brides.js
````javascript
import { request, uploadFileRequest } from "../../utils/request";

/**
 * ä¸Šä¼ ä¼´éƒä¼´å¨˜ä¿¡æ¯
 */
export function reqSavePlayer({
  data_json,
  number_info,
  player_name,
  img_url,
  splid,
  token,
}) {
  return request("player/savePlayer", "POST", {
    player_name,
    img_url,
    splid,
    number_info,
    data_json,
    kind: "2",
    token,
  },{
    host: "WWW"
  });
}

/**
 * ç¼–è¾‘ä¼´éƒä¼´å¨˜ä¿¡æ¯
 */
export function reqEditPlayer({
  data_json,
  number_info,
  player_name,
  img_url,
  player_id,
  splid,
  token,
}) {
  return request("player/editPlayer", "POST", {
    player_id,
    player_name,
    img_url,
    splid,
    number_info,
    data_json,
    kind: "2",
    token,
  }, {
    host: "WWW"
  });
}

/**
 * è·å–ä¼´éƒä¼´å¨˜ä¿¡æ¯
 */
export function reqGetPlayerList(splid) {
  return request("player/getPlayerList", "POST", {
    splid,
    kind: "2",
  }, {
    host: "WWW"
  });
}

/**
 * è·å–ä¼´éƒä¼´å¨˜ä¿¡æ¯
 */
export function reqGetPlayer({ token, playerId }) {
  return request("player/getPlayer", "POST", {
    player_id: playerId,
    token,
  }, {
    host: "WWW"
  });
}

/**
 * è·å–Token
 */
export function reqGetToken(code) {
  return request("wxScan/oauth_user_jm", "GET", {
    code,
  });
}

// æ–‡æœ¬å†…å®¹éªŒè¯
export function reqSecurityMsgCheck(ct, token) {
  return request("subscribeController/msg_sec_check2", "POST", {
    content: ct,
    token,
  });
}

// æ–‡æœ¬å†…å®¹éªŒè¯
export function reqSecurityTpCheck(path, token) {
  return uploadFileRequest("subscribeController/tp_sec_check", path, {
    token
  });
}
````

## File: packageC/api/draw.js
````javascript
import { request } from "../../utils/request";

/**
 * è·å–æŠ½å¥–åˆ—è¡¨
 */
export function reqGetLotteryInfo() {
  return request(
    "kpComment/getLotteryInfo",
    "POST",
    {
      lotteryId: "1",
    },
    {
      host: "WWW",
    }
  );
}

/*
 * è·å–æŠ½å¥–è¯¦æƒ…
 */
export function reqGetLotteryDetail(lotteryId) {
  return request(
    "kpComment/getLotteryInfoById",
    "POST",
    {
      lotteryId,
    },
    {
      host: "WWW",
    }
  );
}

/**
 * å‚ä¸æŠ½å¥–
 */
export function reqSaveLotteryInfo(lotteryId) {
  return request(
    "kpComment/saveLotteryInfo",
    "POST",
    {
      lotteryId,
    },
    {
      host: "WWW",
    }
  );
}
````

## File: packageC/api/feedback.js
````javascript
import { request } from "../../utils/request";

/**
 * æäº¤åé¦ˆ
 */
export function reqSubmitFeedback({userId, desc, phone, type, imgurl, liveId}) {
    return request('wxScan/commandInfo6', 'POST', {
        userId,
        content: desc,
        phone_number: phone,
        reason: type,
        splid: liveId,
        piclink: imgurl,
    });
}
````

## File: packageC/pages/agreement/agreement.js
````javascript
import { H5_HOST } from '../../../assets/constant/host';

Page({
    data: {
        h5Url: ''
    },
    onLoad() {
        this.setData({
            h5Url: `${H5_HOST}agreement/index.html?time=${Date.now()}`,
        })
    },
});
````

## File: packageC/pages/agreement/agreement.json
````json
{
    "navigationBarTitleText": "å……å€¼æœåŠ¡åè®®"
}
````

## File: packageC/pages/agreement/agreement.wxml
````
<web-view src="{{h5Url}}">
</web-view>
````

## File: packageC/pages/agreement/agreement.wxss
````
view {
    margin: 20rpx 0;
}
````

## File: packageC/pages/brides/bride.wxs
````
function indexOf(arr, value) {
  if (arr.indexOf(value) < 0) {
  return false;
  } else {
  return true;
  }
  }
module.exports.indexOf = indexOf;
````

## File: packageC/pages/brides/brides.js
````javascript
import {
  getRandom
} from "../../../utils/index";
import {
  reqEditPlayer,
  reqGetPlayer,
  reqSavePlayer,
  reqSecurityMsgCheck,
  reqSecurityTpCheck,
} from "../../api/brides";
import qiniu from "../../../utils/qiniu/index";

const app = getApp();
Page({
  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {
    playerId: null,
    splid: "",
    bride_token: "",
    bride: {
      type: "",
      name: "",
      wordCatergoy: "",
      phone: "",
      img: "",
    },
    StatusBar: "",
    CustomBar: "",
    activeRealtionShip: [],
    activeWork: [],
    step: 0,
    realtionShipAList: ["æœ‹å‹", "é—ºèœœ", "åŒäº‹", "åŒå­¦", "å‘å°", "äº²æˆš", "å…¶ä»–"],
    workAList: [
      "å¹¸ç¦ä¼ é€’",
      "å‡ºè°‹åˆ’ç­–",
      "æ°”æ°›æ‹…å½“",
      "é¢œå€¼æ‹…å½“",
      "è¡¬æ‰˜æ–°å¨˜",
      "ç…§é¡¾æ–°å¨˜",
      "å µé—¨æ¸¸æˆç‹è€…",
      "ç¥ç¦ä»£è¡¨",
      "æ‰“ç¤¼ç‚®",
      "æˆ‘å•¥ä¹Ÿæ²¡å¹²",
    ],
    realtionShipBList: ["æœ‹å‹", "å…„å¼Ÿ", "åŒäº‹", "åŒå­¦", "å‘å°", "äº²æˆš", "å…¶ä»–"],
    workBList: [
      "æˆ‘æ˜¯é…’ç¥",
      "è‹¦åŠ›åŠ³æ¨¡",
      "æ°”æ°›æ‹…å½“",
      "é¢œå€¼æ‹…å½“",
      "è¡¬æ‰˜æ–°éƒ",
      "æ–°éƒç®¡å®¶",
      "å µé—¨æ¸¸æˆç‹è€…",
      "å©šç¤¼ä»ªå¼é—¨ç¥",
      "æ‰“ç¤¼ç‚®",
      "æˆ‘å•¥ä¹Ÿæ²¡å¹²",
    ],
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad(options) {
    const info = wx.getSystemInfoSync();
    const StatusBar = info.statusBarHeight;
    let CustomBar = info.statusBarHeight;
    let capsule = wx.getMenuButtonBoundingClientRect();
    if (capsule) {
      CustomBar = capsule.bottom + capsule.top - info.statusBarHeight;
    }
    this.setData({
      StatusBar,
      CustomBar,
    });
    if (options.splid) {
      this.setData({
        splid: options.splid,
      });
    }
    if (options.playerId) {
      this.setData({
        playerId: options.playerId,
      });
    }
    console.log('å…¨å±€æ•°æ®ï¼š');
    console.log(app.globalData);
    this.Login();
  },
  /**
   * ç™»å½• å¹¶è¯·æ±‚åŸºæœ¬ä¿¡æ¯
   */
  async Login() {
    const loginData = await app.userInfo_authLogin();
    console.log('ç™»å½•æ•°æ®ï¼š', loginData);
    this.setData({
      bride_token: loginData.data.token
    })
    // åˆå§‹åŒ–ä¸ƒç‰›äº‘
    qiniu.init();
    const {
      playerId
    } = this.data;
    if (playerId) {
      this.initPlayer();
    }
  },
  /**
   * åˆå§‹åŒ– ä¼´éƒä¼´å¨˜ä¿¡æ¯
   */
  initPlayer() {
    reqGetPlayer({
      playerId: this.data.playerId,
      token: this.data.bride_token,
    }).then((res) => {
      console.log(res);
      const target = res.data;
      if (target) {
        console.log(target);
        const {
          data_json
        } = target;

        const bride = JSON.parse(data_json);
        const {
          work,
          realtionship
        } = bride;
        this.setData({
          bride,
          activeWork: work.split(","),
          activeRealtionShip: realtionship.split(","),
        });
      }
    });
  },
  /**
   * æ­¥éª¤å˜åŒ–
   */
  stepChange(e) {
    console.log(e);
  },
  catchTouch(e) {
    console.log(e);
  },
  chooseBrideType(e) {
    const {
      type
    } = e.currentTarget.dataset;
    console.log(e);
    this.setData({
      ["bride.type"]: type,
      activeRealtionShip: [],
      activeWork: [],
    });
  },
  toTagStep() {
    const {
      type
    } = this.data.bride;
    if (type !== "1" && type !== "2") {
      wx.showToast({
        title: "è¯·ç‚¹å‡»å¡ç‰‡é€‰æ‹©æ‚¨çš„èº«ä»½",
        icon: "none",
      });
      return;
    }
    this.setData({
      step: 1,
    });
  },
  changeRealtionShip(e) {
    const {
      item
    } = e.currentTarget.dataset;
    const {
      activeRealtionShip
    } = this.data;
    const index = activeRealtionShip.findIndex(
      (realtionship) => realtionship === item
    );
    if (index > -1) {
      this.setData({
        activeRealtionShip: [],
      });
    } else {
      this.setData({
        activeRealtionShip: [item],
      });
    }
  },
  changeWork(e) {
    const {
      item
    } = e.currentTarget.dataset;
    const {
      activeWork,
      workAList,
      workBList,
      bride
    } = this.data;
    const workList = bride.type === "1" ? workBList : workAList;
    const index = activeWork.findIndex((work) => work === item);
    if (index > -1) {
      activeWork.splice(index, 1);
      this.setData({
        activeWork: activeWork,
      });
    } else {
      if (activeWork.length >= 3) {
        wx.showToast({
          title: "æœ€å¤šé€‰æ‹©3ä¸ª",
          icon: "none",
        });
      } else {
        activeWork.push(item);
        this.setData({
          activeWork: activeWork,
        });
      }
    }
    console.log(item);
  },
  ToFinalStep() {
    this.setData({
      step: 2,
    });
  },
  bindKeyInput: function (e) {
    console.log(e);
    const inputValueName = e.currentTarget.dataset.value;
    this.setData({
      [inputValueName]: e.detail.value,
    });
  },
  changeWordCatergoy() {
    const catergoyList = ["è¿˜è¯·å¤§å®¶æŠ•æˆ‘ä¸€ç¥¨ã€‚"];
    const index = getRandom(0, catergoyList.length);
    // console.log(index)
    this.setData({
      ["bride.wordCatergoy"]: catergoyList[index],
    });
  },
  uploadImg() {
    wx.chooseMedia({
      count: 1,
      mediaType: ["image"],
      sourceType: ["album"],
      success: (res) => {
        console.log(res);
        let tempFilePath = res.tempFiles[0].tempFilePath;
        let size = res.tempFiles[0].size;
        if (size > 1024 * 1024) {
          wx.showToast({
            title: "å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡1MB",
            icon: "none",
            duration: 3000,
          });
          return;
        }
        console.log(tempFilePath, this.data.bride_token);
        wx.showLoading({
          title: "ä¸Šä¼ ä¸­",
        });
        reqSecurityTpCheck(tempFilePath, this.data.bride_token)
          .then((res) => {
            console.log('3333', res);
            let {
              data: {
                msg_sec_check
              },
            } = JSON.parse(res.data);
            msg_sec_check = JSON.parse(msg_sec_check);
            wx.hideLoading({});
            if (msg_sec_check.errmsg === "ok") {
              this.setData({
                ["bride.img"]: tempFilePath,
              });
            } else if (msg_sec_check.errmsg !== "risky content") {
              wx.showToast({
                title: msg_sec_check.errmsg,
                icon: "none",
                duration: 3000,
              });
            } else {
              wx.showToast({
                title: "å›¾ç‰‡å†…å®¹éæ³•!",
                icon: "none",
                duration: 3000,
              });
            }
          })
          .catch((err) => {
            console.log(err);
            wx.hideLoading({});

            wx.showToast({
              title: "ä¸Šä¼ å¤±è´¥",
              icon: "none",
              duration: 3000,
            });
          });
      },
      fail: (err) => {
        console.log(err);
      }
    });
  },
  submit() {
    const {
      bride,
      activeWork,
      activeRealtionShip,
      bride_token
    } = this.data;
    const {
      type,
      name,
      wordCatergoy,
      phone,
      img
    } = bride;
    console.log(bride, activeWork, activeRealtionShip);
    if (!type) {
      wx.showToast({
        title: "è¯·é€‰æ‹©æ‚¨çš„èº«ä»½",
        icon: "noen",
      });
      this.setData({
        step: 0,
      });
      return;
    }
    if (!name) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ‚¨çš„å§“å",
        icon: "none",
      });
      return;
    }
    if (!wordCatergoy) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ‚¨çš„ä¸ªäººä»‹ç»",
        icon: "none",
      });
      return;
    }
    if (!phone) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ‚¨çš„è”ç³»æ–¹å¼",
        icon: "none",
      });
      return;
    }
    if (!img) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ‚¨çš„å›¾ç‰‡",
        icon: "none",
      });
      return;
    }
    if (activeRealtionShip.length === 0) {
      wx.showToast({
        title: "è¯·é€‰æ‹©æ‚¨ä¸æ–°äººçš„å…³ç³»",
        icon: "none",
      });
      this.setData({
        step: 1,
      });
      return;
    }
    if (activeWork.length === 0) {
      wx.showToast({
        title: "è¯·é€‰æ‹©æ‚¨çš„å½“æ—¥å·¥ä½œ",
        icon: "none",
      });
      this.setData({
        step: 1,
      });
      return;
    }

    reqSecurityMsgCheck(`${wordCatergoy} ${name}`, bride_token)
      .then((res) => {
        const tmpResult = JSON.parse(res.data.msg_sec_check);
        if (tmpResult.result.suggest === "pass") {
          this.submitRequest();
        } else {
          wx.showToast({
            title: "å†…å®¹éæ³•!",
            icon: "none",
            duration: 3000,
          });
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  async submitRequest() {
    const {
      bride,
      activeWork,
      activeRealtionShip,
      playerId,
      splid,
      bride_token,
    } = this.data;
    let {
      type,
      name,
      wordCatergoy,
      phone,
      img
    } = bride;
    let fetchAPI = playerId ? reqEditPlayer : reqSavePlayer;
    if (img.indexOf("https://") === -1) {
      console.log(img);
      const res = await qiniu.upload(img);
      console.log(res);
      if (res.imageURL) {
        this.setData({
          ["bride.img"]: res.imageUR,
        });
      } else {
        wx.showToast({
          title: "ä¸Šä¼ å¤±è´¥",
          icon: "none",
        });
        return;
      }
    }
    const data_json = {
      ...bride,
      realtionship: activeRealtionShip.join(","),
      work: activeWork.join(","),
    };
    const params = {
      number_info: type,
      player_name: name,
      img_url: img,
      splid,
      data_json: JSON.stringify(data_json),
      token: bride_token,
    };
    if (playerId) {
      params.player_id = playerId;
    }

    console.log(params);
    // return ;
    fetchAPI(params).then((res) => {
      console.log(res);
      if (res.data && res.data.player_id) {
        this.setData({
          playerId: res.data.player_id,
        });
        wx.showToast({
          title: "ä¿å­˜æˆåŠŸ",
          icon: "none",
        });
      }
      if (playerId && res.data === null) {
        wx.showToast({
          title: "ä¿®æ”¹æˆåŠŸ",
          icon: "none",
        });
      }
    });
  },
});
````

## File: packageC/pages/brides/brides.json
````json
{
  "navigationStyle": "custom",
  "usingComponents": {}
}
````

## File: packageC/pages/brides/brides.less
````
/* pages/share/brides/brides.wxss */
.bride {
  width: 100vw;
  min-height: 100vh;
  padding-bottom: 160rpx;
  background-image: url(https://ustatic.hudongmiao.com/joymewApp/hd/brides/bg.png);
  background-size: 100% 100%;
  backdrop-filter: blur(32px);
  .tip {
    text-align: center;
    margin: 0 auto;
    font-size: 32rpx;
    color: #fff;
  }

  .boxSwiper {
    margin-top: 36rpx;
    height: 1172rpx;
    height: 1272rpx;

    .formBox {
      width: 686rpx;
      margin: 0 auto;
      margin-top: 36rpx;
      height: 1172rpx;
      border: 2rpx solid #fff;
      /* border-left: 2rpx solid #fff; */
      border-radius: 40rpx;
      box-sizing: border-box;
     

      &.step1 {

        .nextTip {
          margin-top: 348rpx;
        }
      }

      .nextTip {
        margin: 0 auto;

        width: 524rpx;
        height: 90rpx;
        background: #ff2452;
        border-radius: 106rpx;

        display: flex;
        justify-content: center;
        align-items: center;
        color: #ffffff;
        font-size: 32rpx;
        position: relative;

        .dotWrap {
          position: absolute;
          top: -80rpx;
          display: flex;
          justify-content: center;
          align-items: center;
          .dot {
            width: 12rpx;
            height: 12rpx;
            opacity: 0.4;
            background: #ffffff;
            border-radius: 50%;
            margin-right: 12rpx;
            &.active{
              opacity: 0.8;
            }
          }
        }

        &.step2 {
          margin-top: 104rpx;
        }

        &.step3 {
          margin-top: 120rpx;
        }
      }

      .label {

        margin-left: 40rpx;
        color: #333333;
        font-size: 28rpx;
        display: flex;
        align-items: center;

        .label-text {
          color: rgba(0, 0, 0, 0.30);
          font-size: 24rpx;
        }

        &.sf {
          margin-top: 284rpx;
        }

        &.realtionship {
          margin-top: 48rpx;

        }

        &.work {
          margin-top: 48rpx;

        }
      }


      .infoWrap {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        padding: 0 124rpx;
        box-sizing: border-box;

        .brideCard {
          margin-top: 96rpx;
          width: 192rpx;
          height: 240rpx;

          border: 2rpx solid rgba(255, 255, 255, 0.60);
          border-radius: 16rpx;
          display: flex;
          justify-content: center;
          flex-direction: column;
          align-items: center;
          flex-direction: center;
          color: #fff;
          font-size: 28rpx;
          opacity: .4;

          &.activeCard,
          &.choosed {
            opacity: 1;
            // background: red;
          }

          .icon {
            width: 84rpx;
            height: 68rpx;
            background-size: 100% 100%;
          }

          .name {
            margin-top: 24rpx;
          }

          &.man {
            background: #4380f7;

            .icon {
              background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/tie.png");

            }

          }

          &.woman {
            background: #EB567B;

            .icon {
              background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/shoe.png");

            }

          }
        }
      }
    }

  }
}







.tag-group {
  padding: 30rpx;
  display: flex;
  justify-content: flex-start;
  flex-wrap: wrap;
  color: #fff;
}

.tag.rTag {
  padding: 16rpx 32rpx;
  background: rgba(255, 255, 255, 0.20);
  border-radius: 66rpx;
  font-size: 32rpx;
  margin-left: 24rpx;
  margin-top: 24rpx;

}

.tag.rTag:nth-child(5n),
.tag.rTag:nth-child(1) {
  margin-left: 0;
}

.tag.wTag {
  padding: 16rpx 32rpx;
  background: rgba(255, 255, 255, 0.20);
  border-radius: 66rpx;
  font-size: 32rpx;
  margin: 0 auto;
  margin-top: 24rpx;
}

.tag.wTag:nth-child(1),
.tag.wTag:nth-child(4) {
  margin-left: 0;
}

.tag.active {
  background-color: #FF2452;
}

.upImgWrap {
  width: 192rpx;
  height: 256rpx;
  background: #573ba2;
  border-radius: 8rpx;
  margin: 0 auto;
  margin-top: 40rpx;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  color: rgba(255, 255, 255, .4);

  .imgUrl {
    width: 78rpx;
    height: 72rpx;
    // border: 1rpx solid red;
    background-size: 100% 100%;
    background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/empty.png");
    margin-top: 46rpx;
  }

  .upTip1 {
    margin-top: 33rpx;
    font-size: 28rpx;
  }

  .upTip2 {
    margin-top: 4rpx;
    font-size: 24rpx;
  }
}

.nameWrap {
  padding: 0 32rpx;
  margin-top: 56rpx;
  display: flex;
  justify-content: flex-start;

  .label {
    color: #333333;
    font-size: 28rpx;

  }

  .name {
    width: 426rpx;
    flex-grow: 1;
    margin-left: 20rpx;
    border-bottom: 2rpx solid rgba(255, 255, 255, 0.6);
    padding-left: 20rpx;

  }
}

.intrdouceWrap {
  margin-top: 38rpx;

  .label {
    color: #333333;
    font-size: 28rpx;
  }

  padding: 0 32rpx;
  position: relative;
  box-sizing: border-box;

  .wish-input {
    margin-top: 32rpx;
    width: 622rpx;
    height: 188rpx;
    border: 2rpx solid #ffffff;
    border-radius: 8rpx;
    // background: #ffffff;
    // border-radius: 16rpx;
    box-sizing: border-box;
    padding: 32rpx 46rpx;
    font-size: 28rpx;

  }

  .wish-input-unactive {
    color: rgba(255, 255, 255, .6);
    font-size: 28rpx;
  }

  .yulu-btn-wrap {
    position: absolute;
    bottom: 32rpx;
    right: 64rpx;
    z-index: 10;


    .btn {
      width: 88rpx;
      height: 48rpx;
      background: #ff2452;
      border-radius: 10rpx;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28rpx;
      color: #fff;
      box-sizing: border-box;
      padding: 0;
    }
  }
}



.phoneWrap {
  padding: 0 32rpx;
  margin-top: 28rpx;

  .label {
    color: #333333;
    font-size: 28rpx;
  }

  .phone {
    width: 622rpx;
    height: 72rpx;
    margin-top: 32rpx;
    padding-left: 32rpx;
    box-sizing: border-box;
    // opacity: 0.6;
    border: 2rpx solid rgba(255, 255, 255, 0.6);
    border-radius: 8rpx;
  }
}


.error{
  width: 750rpx;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background-image: url(https://ustatic.hudongmiao.com/joymewApp/hd/brides/bg.png);
  background-size: 100% 100%;
  .img{
    width: 320rpx;
    height: 320rpx;

  } 
  .tips{
    color:#969799;
    margin-top: 32rpx;

    font-size: 32rpx;
    color:#969799;
  }
  .button{
    width: 320rpx;
    height: 80rpx;
    background-color: #ee0a24;
    margin-top: 40rpx;
    font-size: 28rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
    border-radius: 0;
  }
}
````

## File: packageC/pages/brides/brides.min.wxss
````
/* pages/share/brides/brides.wxss */
.bride {
  width: 100vw;
  min-height: 100vh;
  padding-bottom: 160rpx;
  background-image: url(https://ustatic.hudongmiao.com/joymewApp/hd/brides/bg.png);
  background-size: 100% 100%;
  backdrop-filter: blur(32px);
}
.bride .tip {
  text-align: center;
  margin: 0 auto;
  font-size: 32rpx;
  color: #fff;
}
.bride .boxSwiper {
  margin-top: 36rpx;
  height: 1172rpx;
  height: 1272rpx;
}
.bride .boxSwiper .formBox {
  width: 686rpx;
  margin: 0 auto;
  margin-top: 36rpx;
  height: 1172rpx;
  border: 2rpx solid #fff;
  /* border-left: 2rpx solid #fff; */
  border-radius: 40rpx;
  box-sizing: border-box;
}
.bride .boxSwiper .formBox.step1 .nextTip {
  margin-top: 348rpx;
}
.bride .boxSwiper .formBox .nextTip {
  margin: 0 auto;
  width: 524rpx;
  height: 90rpx;
  background: #ff2452;
  border-radius: 106rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #ffffff;
  font-size: 32rpx;
  position: relative;
}
.bride .boxSwiper .formBox .nextTip .dotWrap {
  position: absolute;
  top: -80rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.bride .boxSwiper .formBox .nextTip .dotWrap .dot {
  width: 12rpx;
  height: 12rpx;
  opacity: 0.4;
  background: #ffffff;
  border-radius: 50%;
  margin-right: 12rpx;
}
.bride .boxSwiper .formBox .nextTip .dotWrap .dot.active {
  opacity: 0.8;
}
.bride .boxSwiper .formBox .nextTip.step2 {
  margin-top: 104rpx;
}
.bride .boxSwiper .formBox .nextTip.step3 {
  margin-top: 120rpx;
}
.bride .boxSwiper .formBox .label {
  margin-left: 40rpx;
  color: #333333;
  font-size: 28rpx;
  display: flex;
  align-items: center;
}
.bride .boxSwiper .formBox .label .label-text {
  color: rgba(0, 0, 0, 0.3);
  font-size: 24rpx;
}
.bride .boxSwiper .formBox .label.sf {
  margin-top: 284rpx;
}
.bride .boxSwiper .formBox .label.realtionship {
  margin-top: 48rpx;
}
.bride .boxSwiper .formBox .label.work {
  margin-top: 48rpx;
}
.bride .boxSwiper .formBox .infoWrap {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0 124rpx;
  box-sizing: border-box;
}
.bride .boxSwiper .formBox .infoWrap .brideCard {
  margin-top: 96rpx;
  width: 192rpx;
  height: 240rpx;
  border: 2rpx solid rgba(255, 255, 255, 0.6);
  border-radius: 16rpx;
  display: flex;
  justify-content: center;
  flex-direction: column;
  align-items: center;
  flex-direction: center;
  color: #fff;
  font-size: 28rpx;
  opacity: 0.4;
}
.bride .boxSwiper .formBox .infoWrap .brideCard.activeCard,
.bride .boxSwiper .formBox .infoWrap .brideCard.choosed {
  opacity: 1;
}
.bride .boxSwiper .formBox .infoWrap .brideCard .icon {
  width: 84rpx;
  height: 68rpx;
  background-size: 100% 100%;
}
.bride .boxSwiper .formBox .infoWrap .brideCard .name {
  margin-top: 24rpx;
}
.bride .boxSwiper .formBox .infoWrap .brideCard.man {
  background: #4380f7;
}
.bride .boxSwiper .formBox .infoWrap .brideCard.man .icon {
  background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/tie.png");
}
.bride .boxSwiper .formBox .infoWrap .brideCard.woman {
  background: #EB567B;
}
.bride .boxSwiper .formBox .infoWrap .brideCard.woman .icon {
  background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/shoe.png");
}
.tag-group {
  padding: 30rpx;
  display: flex;
  justify-content: flex-start;
  flex-wrap: wrap;
  color: #fff;
}
.tag.rTag {
  padding: 16rpx 32rpx;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 66rpx;
  font-size: 32rpx;
  margin-left: 24rpx;
  margin-top: 24rpx;
}
.tag.rTag:nth-child(5n),
.tag.rTag:nth-child(1) {
  margin-left: 0;
}
.tag.wTag {
  padding: 16rpx 32rpx;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 66rpx;
  font-size: 32rpx;
  margin: 0 auto;
  margin-top: 24rpx;
}
.tag.wTag:nth-child(1),
.tag.wTag:nth-child(4) {
  margin-left: 0;
}
.tag.active {
  background-color: #FF2452;
}
.upImgWrap {
  width: 192rpx;
  height: 256rpx;
  background: #573ba2;
  border-radius: 8rpx;
  margin: 0 auto;
  margin-top: 40rpx;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  color: rgba(255, 255, 255, 0.4);
}
.upImgWrap .imgUrl {
  width: 78rpx;
  height: 72rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymew-mp/hd/brides/empty.png");
  margin-top: 46rpx;
}
.upImgWrap .upTip1 {
  margin-top: 33rpx;
  font-size: 28rpx;
}
.upImgWrap .upTip2 {
  margin-top: 4rpx;
  font-size: 24rpx;
}
.nameWrap {
  padding: 0 32rpx;
  margin-top: 56rpx;
  display: flex;
  justify-content: flex-start;
}
.nameWrap .label {
  color: #333333;
  font-size: 28rpx;
}
.nameWrap .name {
  width: 426rpx;
  flex-grow: 1;
  margin-left: 20rpx;
  border-bottom: 2rpx solid rgba(255, 255, 255, 0.6);
  padding-left: 20rpx;
}
.intrdouceWrap {
  margin-top: 38rpx;
  padding: 0 32rpx;
  position: relative;
  box-sizing: border-box;
}
.intrdouceWrap .label {
  color: #333333;
  font-size: 28rpx;
}
.intrdouceWrap .wish-input {
  margin-top: 32rpx;
  width: 622rpx;
  height: 188rpx;
  border: 2rpx solid #ffffff;
  border-radius: 8rpx;
  box-sizing: border-box;
  padding: 32rpx 46rpx;
  font-size: 28rpx;
}
.intrdouceWrap .wish-input-unactive {
  color: rgba(255, 255, 255, 0.6);
  font-size: 28rpx;
}
.intrdouceWrap .yulu-btn-wrap {
  position: absolute;
  bottom: 32rpx;
  right: 64rpx;
  z-index: 10;
}
.intrdouceWrap .yulu-btn-wrap .btn {
  width: 88rpx;
  height: 48rpx;
  background: #ff2452;
  border-radius: 10rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28rpx;
  color: #fff;
  box-sizing: border-box;
  padding: 0;
}
.phoneWrap {
  padding: 0 32rpx;
  margin-top: 28rpx;
}
.phoneWrap .label {
  color: #333333;
  font-size: 28rpx;
}
.phoneWrap .phone {
  width: 622rpx;
  height: 72rpx;
  margin-top: 32rpx;
  padding-left: 32rpx;
  box-sizing: border-box;
  border: 2rpx solid rgba(255, 255, 255, 0.6);
  border-radius: 8rpx;
}
.error {
  width: 750rpx;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background-image: url(https://ustatic.hudongmiao.com/joymewApp/hd/brides/bg.png);
  background-size: 100% 100%;
}
.error .img {
  width: 320rpx;
  height: 320rpx;
}
.error .tips {
  margin-top: 32rpx;
  font-size: 32rpx;
  color: #969799;
}
.error .button {
  width: 320rpx;
  height: 80rpx;
  background-color: #ee0a24;
  margin-top: 40rpx;
  font-size: 28rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
  border-radius: 0;
}
````

## File: packageC/pages/brides/brides.wxml
````
<!--pages/share/brides/brides.wxml-->
<wxs src="./bride.wxs" module="tools" />
<view class="bride" wx:if="{{bride_token}}">

  <view class="header" style="height:{{CustomBar}}px; width:100vw;padding-top: {{StatusBar}}px;"></view>

  <view class="tip">æ¬¢è¿å‚ä¸ä¼´éƒä¼´å¨˜æŠ•ç¥¨æ´»åŠ¨ï¼Œè¯·å®Œå–„ä¸ªäººä¿¡æ¯</view>

  <swiper class="boxSwiper" bindchange="stepChange" current="{{step}}">
    <swiper-item catchtouchmove="catchTouch">
      <view class="formBox step1">
        <view class="label sf">æ‚¨çš„èº«ä»½æ˜¯ï¼š</view>
        <view class="infoWrap">
          <view class="brideCard man {{bride.type==='1'?'choosed':''}}" hover-class="activeCard" hover-start-time="50" hover-stay-time="800" bindtap="chooseBrideType" data-type="1">
            <view class="icon"></view>
            <view class="name">æˆ‘æ˜¯ä¼´éƒ</view>
          </view>
          <view class="brideCard woman {{bride.type==='2'?'choosed':''}}" hover-class="activeCard" hover-stay-time="800" bindtap="chooseBrideType" data-type="2">
            <view class="icon"></view>

            <view class="name">æˆ‘æ˜¯ä¼´å¨˜</view>

          </view>
        </view>
        <view class="step1 nextTip" bindtap="toTagStep">
          <view class="dotWrap" catchtap="foo">
            <view class="dot active"></view>
            <view class="dot"></view>
            <view class="dot"></view>
          </view>
          ä¸‹ä¸€æ­¥
        </view>
      </view>
    </swiper-item>
    <swiper-item>
      <view class="formBox step2">
        <view class="label realtionship">æ‚¨ä¸æ–°äººçš„å…³ç³»æ˜¯ï¼š</view>

        <view class="tag-group" wx:if="{{bride.type==='1'}}">
          <view class="tag rTag {{tools.indexOf(activeRealtionShip,item)?'active':''}}" wx:for="{{realtionShipBList}}" bindtap="changeRealtionShip" data-item="{{item}}">{{item}}</view>
        </view>
        <view class="tag-group" wx:if="{{bride.type==='2'}}">
          <view class="tag rTag {{tools.indexOf(activeRealtionShip,item)?'active':''}}" wx:for="{{realtionShipAList}}" bindtap="changeRealtionShip" data-item="{{item}}">{{item}}</view>
        </view>
        <view class="label work">æ‚¨çš„å½“æ—¥å·¥ä½œæ˜¯ <view class="label-text">ï¼ˆæœ€å¤š3ä¸ªï¼‰ï¼š</view>
        </view>
        <view class="tag-group" wx:if="{{bride.type==='1'}}">
          <view class="tag wTag {{tools.indexOf(activeWork,item)?'active':''}}" wx:for="{{workBList}}" bindtap="changeWork" data-item="{{item}}">{{item}}</view>
        </view>
        <view class="tag-group" wx:if="{{bride.type==='2'}}">
          <view class="tag wTag {{tools.indexOf(activeWork,item)?'active':''}}" wx:for="{{workAList}}" bindtap="changeWork" data-item="{{item}}">{{item}}</view>
        </view>
        <view class="nextTip step2" bindtap="ToFinalStep">
          <view class="dotWrap" catchtap="foo">
            <view class="dot "></view>
            <view class="dot active"></view>
            <view class="dot"></view>
          </view>
          ä¸‹ä¸€æ­¥
        </view>
      </view>
    </swiper-item>

    <swiper-item>
      <view class="formBox step3">
        <view class="upImgWrap" wx:if="{{!bride.img}}" bindtap="uploadImg">
          <view class="imgUrl"></view>
          <view class="upTip1">ç‚¹å‡»ä¸Šä¼ </view>
          <view class="upTip2">æ¨èæ¯”ä¾‹3:4</view>
        </view>
        <image class="upImgWrap" wx:else src="{{bride.img}}" bindtap="uploadImg"></image>

        <view class="nameWrap">
          <view class="lable">å§“å:</view>
          <input type="text" class="name" value="{{bride.name}}" bindinput="bindKeyInput" data-value="bride.name" />
        </view>
        <view class="intrdouceWrap">
          <view class="lable">ä¸ªäººä»‹ç»:</view>
          <textarea name="" id="" cols="30" rows="10" class="wish-input" value="{{bride.wordCatergoy}}" data-value="bride.wordCatergoy" bindinput="bindKeyInput" placeholder-class="wish-input-unactive" placeholder="ä¾‹ï¼šè¿˜è¯·å¤§å®¶æŠ•æˆ‘ä¸€ç¥¨">

    </textarea>
          <view class="yulu-btn-wrap">
            <view class="btn" bindtap="changeWordCatergoy">è¯­å½•</view>
          </view>
        </view>

        <view class="phoneWrap">
          <view class="lable">è”ç³»æ–¹å¼:</view>
          <input type="text" class="phone" value="{{bride.phone}}" bindinput="bindKeyInput" data-value="bride.phone" />
        </view>
        <view class="nextTip step3" bindtap="submit">
          <view class="dotWrap" catchtap="foo">
            <view class="dot "></view>
            <view class="dot "></view>
            <view class="dot active"></view>
          </view>
          æäº¤
        </view>
      </view>
    </swiper-item>
  </swiper>
</view>

<view class="error" wx:else>
  <image class="img" src="https://ustatic.hudongmiao.com/joymew-mp/brides/empty-image-error.png" alt="" srcset="" />
  <text class="tips" class="tips">ç½‘ç»œé”™è¯¯ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®é‡æ–°æˆæƒã€‚</text>

  <view class="button" bindtap="Login">æˆæƒ</view>
</view>
  <!-- éšç§æˆæƒå¼¹çª— -->
  <privacyAuthorize></privacyAuthorize>
````

## File: packageC/pages/brides/brides.wxss
````
@import './brides.min.wxss';
````

## File: packageC/pages/draw/draw.js
````javascript
import {
  reqGetLotteryInfo
} from '../../api/draw'

const app = getApp();

Page({
  data: {
    drawList: []
  },
  onLoad() {
    this.initData();
  },
  initData() {
    reqGetLotteryInfo().then(res => {
      console.log(res);
      if (res.data.list) {
        let drawList = res.data.list.map(this.handleRawDrawItem);
        this.setData({
          drawList: drawList,
        });
      }
    }).catch((err) => {
      if(err === '401') {
        app.userInfo_authLogin(this.initData.bind(this));
      }
    });
  },
  toDrawPage(e) {
    let id = e.currentTarget.dataset.id;
    console.log(id);
    // æ´»åŠ¨æŠ½å¥–é¡µé¢
    wx.navigateTo({
      url: `/packageC/pages/draw/drawPage/drawPage?id=${id}`,
    });
  },
  handleRawDrawItem(e) {
    const {
      flag,
      sort,
      info,
      icon
    } = e;
    const joinUsers = icon.split(',');
    const detailInfo = JSON.parse(info);
    console.log(detailInfo);
    return {
      flag,
      sort,
      joinUsers,
      ...detailInfo,
    }
  },
})
````

## File: packageC/pages/draw/draw.json
````json
{
 
  "navigationBarTitleText": "æ´»åŠ¨æŠ½å¥–",
  "navigationBarBackgroundColor":"#DC2244",
  "navigationBarTextStyle": "white"
}
````

## File: packageC/pages/draw/draw.wxml
````
<view class="draw">
  <view class="draw-card" wx:for="{{drawList}}" wx:for-item="item" bindtap="toDrawPage" wx:for-index="index" wx:key="index" data-index="{{index}}" bindtap="toDrawPage" data-id="{{item.lotteryId}}">
    <view class="thing">
      <view class="slogn" style="background-image:url({{item.img1}});"></view>
      <view class="draw-obj" style="background-image:url({{item.img2}});"></view>
    </view>
    <view class="line"></view>
    <view class="info-wrap">
      <view class="title">{{item.prize}}</view>
      <view class="bottom-say">
        <view class="store">
          <view class="storeImg" style="background-image:url({{item.img3}});"></view>
          <view class="name">{{item.desc3}}</view>
        </view>
        <view class="btn-join">ç‚¹å‡»å‚ä¸</view>
      </view>
    </view>
  </view>
</view>
````

## File: packageC/pages/draw/draw.wxss
````
.draw {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  background: #EDEEEE;
  padding-bottom: 120rpx;
  overflow: hidden;
}
.draw-card {
  width: 686rpx;
  min-height: 560rpx;
  background: #fff;
  margin-top: 20rpx;
}
.thing {
  height: 396rpx;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}
.slogn {
  position: absolute;
  top: 18rpx;
  left: 30rpx;
  width: 82rpx;
  height: 76rpx;
  background-size: 100% 100%;
}
.draw-obj {
  width: 312rpx;
  min-height: 312rpx;
  background-size: 100% 100%;
}
.line {
  width: 688rpx;
  height: 2rpx;
  background-color: #EEEEEE;
}
.info-wrap {
  min-height: 162rpx;
  padding: 0rpx 40rpx;
}
.title {
  font-size: 34rpx;
  font-weight: 600;
  color: #333;
  min-height: 40rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin-top: 30rpx;
}
.bottom-say {
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 94rpx;
}
.store {
  display: flex;
  align-items: center;
}
.storeImg {
  width: 48rpx;
  height: 48rpx;
  background-size: 100% 100%;
  border-radius: 50%;
  margin-right: 16rpx;
}
.name {
  font-size: 24rpx;
  font-weight: 400;
  color: #999999;
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.btn-join {
  width: 160rpx;
  height: 56rpx;
  background: linear-gradient(165deg, #FF869C 0%, #DC2244 100%);
  border-radius: 28rpx;
  font-size: 24rpx;
  font-weight: 400;
  color: #FFFFFF;
  display: flex;
  justify-content: center;
  align-items: center;
}
````

## File: packageC/pages/draw/drawPage/drawPage.js
````javascript
import { reqGetLotteryDetail, reqSaveLotteryInfo } from "../../../api/draw";

let videoAd = null;
const app = getApp();
Page({
  data: {
    flag: "0",
    id: null,
    joinSuccess: false,
    currentIndex: 0,
    joinUsers: [],
    time: "",
    outdate: false,
    drawItem: {},
    adCompleted: false,
    needAuth: false,
  },

  onLoad(options) {
    if (options.id) {
      this.setData({
        id: options.id,
      });
    }
    this.initData();
  },
  onShow() {},
  initData() {
    reqGetLotteryDetail(String(this.data.id)).then((res) => {
      console.log(res);
      if (res.data) {
        this.handleRawDrawItem(res.data);
        this.initVideo();
      }
    });
  },
  handleRawDrawItem(e) {
    const { openLotteryTime, flag, info, icon } = e;
    const joinUsers = icon.split(",");
    const detailInfo = JSON.parse(info);
    let time = openLotteryTime + " " + detailInfo.time;
    let today = new Date();
    let tomorrow = new Date(time.replace(/\-/g, "/"));
    let outdate = false;
    if (today.getTime() > tomorrow.getTime()) {
      outdate = true;
    }
    if (detailInfo.desc1) {
      detailInfo.imgList = detailInfo.desc1.split(",");
    } else {
      detailInfo.imgList = [];
    }
    console.log(detailInfo);
    this.setData({
      flag: String(flag),
      drawItem: detailInfo,
      joinUsers,
      time,
      outdate,
    });
  },
  saveDraw() {
    this.setData({
      flag: "1",
      joinSuccess: true,
    });
    reqSaveLotteryInfo(String(this.data.id))
      .then((res) => {
        console.log(res);
        this.setData({
          ["drawItem.flag"]: "1",
          joinSuccess: true,
        });
        this.getDraw();
        wx.showToast({
          title: "å‚ä¸æˆåŠŸ!",
          icon: "none",
        });
      })
      .catch((err) => {
        wx.showToast({
          title: "å‚ä¸å¤±è´¥!",
          icon: "none",
        });
        console.log(err);
      });
  },
  initVideo() {
    if (videoAd) {
      return;
    }
    if (wx.createRewardedVideoAd) {
      wx.showLoading({
        title: "åŠ è½½ä¸­...",
        mask: true,
      });
      const adUnitId = app.globalData.accountInfo_ad.inspire;
      videoAd = wx.createRewardedVideoAd({
        adUnitId,
      });
      videoAd.onLoad(() => {
        console.log("onLoad");
        wx.hideLoading();
      });
      videoAd.onError(() => {
        console.log("onError");
        console.log("å¹¿å‘Šè§†é¢‘åŠ è½½å‡ºé”™");
        wx.hideLoading();
      });
      videoAd.onClose((res) => {
        console.log("onClose");
        if ((res && res.isEnded) || res === undefined) {
          console.log("é¢†å–å¥–åŠ±");
          this.setData({
            adCompleted: true,
          });
          this.saveDraw();
        } else {
          console.log("ä¸­é€”é€€å‡ºï¼Œæ²¡æœ‰å¥–åŠ±!");
        }
      });
    }
  },
  join() {
    if (videoAd) {
      console.log("videoAd");
      videoAd.show().catch(() => {
        // å¤±è´¥é‡è¯•
        videoAd
          .load()
          .then((res) => {
            videoAd.show();
            console.log("videoAd show");
          })
          .catch((err) => {
            console.log(err);
            console.log("æ¿€åŠ±è§†é¢‘ å¹¿å‘Šæ˜¾ç¤ºå¤±è´¥");
          });
      });
    }
  },
  showtip() {
    wx.showToast({
      title: "å¾ˆé—æ†¾!æ‚¨æœªä¸­å¥–",
      icon: "none",
    });
  },
  wait() {
    this.setData({
      joinSuccess: true,
    });
  },
  hide() {
    this.setData({
      joinSuccess: false,
    });
  },
  onUnload() {
    if (videoAd) {
      videoAd.destroy();
      videoAd = null;
    }
  },
});
````

## File: packageC/pages/draw/drawPage/drawPage.json
````json
{
  "usingComponents": {},
  "navigationBarTitleText": "æŠ½å¥–åŠ©æ‰‹",
  "navigationBarTextStyle": "white",
  "navigationBarBackgroundColor":"#DC2244"
}
````

## File: packageC/pages/draw/drawPage/drawPage.wxml
````
<view class="drawPage">
  <view class="draw-basic-card">
    <view class="show-card">
      <view class="draw-slogn" style="background-image:url({{drawItem.img1}})"></view>
      <view class="draw-obj" style="background-image:url({{drawItem.img2}})"></view>
    </view>
    <view class="line"></view>
    <view class="basic-card">
      <view class="reward">{{drawItem.prize}}</view>
      <view class="date">{{time}}  è‡ªåŠ¨å¼€å¥–</view>
      <view class="decorate">
        <view class="d1">å•†åŸå¥–å“</view>
        <view class="d2">å›¢</view>
      </view>
    </view>
  </view>
  <view class="draw-desc-card">
    <view class="swiper-toggle">
      <view class="swiper-toggle1 swiper-active" bindtap="initVideo">å›¾æ–‡ä»‹ç»</view>
    </view>
    <view class="swiper-item desc1">
      <image wx:for="{{drawItem.imgList}}" wx:for-item="img" src="{{img}}" mode="widthFix" class="img" wx:key="index"></image>
    </view>
  </view>
  <view class="join-card">
    <view class="join-btn-wrap" bindtap="showtip" wx:if="{{outdate}}">
      <view class="join-bk-wrap"></view>
      <view class="join-btn">
        <view> å·² </view>
        <view>å¼€å¥–</view>
      </view>
    </view>  
    <view class="join-btn-wrap" bindtap="join" wx:if="{{!outdate && flag === '0'}}">
      <view class="po"> è§‚çœ‹è§†é¢‘å¹¿å‘Š å‚ä¸æŠ½å¥–</view>
      <view class="join-bk-wrap"></view>
      <view class="join-btn">
        <view>ç‚¹å‡»</view>
        <view>æŠ½å¥–</view>
      </view>
    </view>
    <view class="join-btn-wrap"  bindtap="wait"  wx:if="{{!outdate && flag !== '0'}}">
      <view class="join-bk-wrap"></view>
      <view class="join-btn">
        <view>ç­‰å¾…</view>
        <view>å¼€å¥–</view>
      </view>
    </view>    
    <view class="join-status">
      <view class="join-number">å·²æœ‰{{drawItem.person}}ä½ç”¨æˆ·å‚ä¸æ´»åŠ¨</view>
      <view class="join-people">
        <view class="user" wx:for="{{joinUsers}}" wx:for-item="user" style="background-image:url({{user}})" wx:key="index"></view>
      </view>
    </view>
  </view>
</view>
<view class="success-wrap" wx:if="{{joinSuccess}}" bindtap="hide">
  <view class="success-card">
    <view class="content">
      <view class="success-date">å¼€å¥–æ—¶é—´ä¸º{{time}}</view>
      <view class="success-tip">è¯·ç•™æ„å¼€å¥–é€šçŸ¥ï¼Œä¸è¦é”™è¿‡å“¦ï½</view>
      <view class="react-btn-group">
        <view class="react-ok">å¥½çš„</view>
      </view>
    </view>
  </view>
</view>
<authDialogNew dialogVisible="{{needAuth}}" isJoymewIndex="{{false}}" bind:authSuccess="handleAuthSuccess" bind:authFail="handleAuthFail"></authDialogNew>
````

## File: packageC/pages/draw/drawPage/drawPage.wxss
````
.drawPage {
  width: 100vw;
  min-height: 100vh;
  background: #edeeee;
  padding-top: 20rpx;
  padding-bottom: 40rpx;
  overflow: hidden;
}
.draw-basic-card {
  width: 686rpx;
  min-height: 590rpx;
  background: #ffffff;
  border-radius: 12rpx;
  margin: 0 auto;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  flex-direction: column;
}
.show-card {
  width: 100%;
  min-height: 396rpx;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}
.draw-obj {
  width: 312rpx;
  height: 312rpx;
  background-size: 100% 100%;
}
.draw-slogn {
  position: absolute;
  background-size: 100% 100%;
  width: 82rpx;
  height: 76rpx;
  top: 18rpx;
  left: 30rpx;
}
.line {
  width: 100%;
  height: 2rpx;
  background-color: #eeeeee;
}
.basic-card {
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: space-around;
  align-items: flex-start;
  flex-direction: column;
  padding: 15rpx 40rpx;
}
.reward {
  width: 100%;
  padding: 20rpx 0;
  color: #333333;
  font-weight: 600;
  font-size: 34rpx;
}
.date {
  width: 100%;
  color: #999;
  font-size: 24rpx;
}
.decorate {
  width: 100%;
  margin-top: 20rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.decorate .d1 {
  color: #ea5f79;
  font-size: 20rpx;
  width: 100rpx;
  height: 36rpx;
  border-radius: 6rpx;
  border: 2rpx solid #e53b5a;
  display: flex;
  justify-content: center;
  align-items: center;
}
.decorate .d2 {
  width: 40rpx;
  height: 40rpx;
  background: linear-gradient(165deg, #ff869c 0%, #dc2244 100%);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20rpx;
  color: #fff;
}
.draw-desc-card {
  width: 686rpx;
  margin: 0 auto;
  margin-top: 20rpx;
  background: #fff;
  border-radius: 12rpx;
}
.swiper-toggle {
  border-bottom: 2rpx solid #eeeeee;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 102rpx;
}
.swiper-toggle1,
.swiper-toggle2 {
  width: 50%;
  height: 100%;
  font-size: 32rpx;
  color: #666666;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: 600;
}
.swiper-active {
  color: #dc2244;
}
.join-card {
  width: 100%;
  margin: 0 auto;
  margin-top: 58rpx;
  margin-top: 60rpx;
  display: flex;
  justify-content: center;
  align-items: center;

  flex-direction: column;
}
.join-btn-wrap {
  width: 182rpx;
  height: 182rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  position: relative;
}
.po {
  width: 400rpx;
  height: 50rpx;
  background: #fff;
  z-index: 10;
  position: absolute;
  top: -30rpx;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24rpx;
  color: #dc2244;
  letter-spacing: 2rpx;
}
.po::after {
  z-index: 12;
  content: ' ';
  position: absolute;
  width: 0rpx;
  height: 0rpx;
  top: 50rpx;
  left: 50%;
  border: 12rpx solid #fff;
  border-left-color: transparent;
  border-right-color: transparent;
  border-bottom-color: transparent;
  transform: translateX(-50%);
}
.join-bk-wrap {
  opacity: 0.2;
  width: 182rpx;
  height: 182rpx;
  background: linear-gradient(165deg, #ff869c 0%, #dc2244 100%);
  border-radius: 50%;
  position: absolute;
  animation: zoomInOut 1.5s infinite linear;
}
@keyframes zoomInOut {
  0% {
    width: 182rpx;
    height: 182rpx;
  }
  50% {
    width: 160rpx;
    height: 160rpx;
  }
  100% {
    width: 182rpx;
    height: 182rpx;
  }
}
.join-btn {
  position: absolute;
  width: 150rpx;
  height: 150rpx;
  background: linear-gradient(165deg, #ff869c 0%, #dc2244 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  flex-direction: column;
  font-size: 32rpx;
  font-weight: 600;
  color: #ffffff;
}
.join-status {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.join-number {
  font-size: 24rpx;
  font-weight: 400;
  color: #abaaaa;
}
.join-people {
  margin-top: 26rpx;
  display: flex;
  width: 750rpx;
  margin-right: 30rpx;
  justify-content: flex-start;
  overflow-x: scroll;
}
.user {
  width: 52rpx;
  height: 52rpx;
  background-size: 100% 100%;
  border-radius: 50%;
  margin-left: 12rpx;
  flex-shrink: 0;
}
.success-wrap {
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.4);
  position: fixed;
  top: 0;
  left: 0;
}
.success-card {
  position: absolute;
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
  width: 686rpx;
  height: 742rpx;
  background-size: 100% 100%;
  background-image: url("https://static.hudongmiao.com/joymewMp/draw/attendSuccess.png");
}
.content {
  position: absolute;
  bottom: 0;
  width: 592rpx;
  height: 371rpx;
  left: 22px;
}
.success-date {
  font-size: 28rpx;
  color: #fff;
  width: 100%;
  text-align: center;
  margin: 20rpx 0;
}
.success-tip {
  font-size: 28rpx;
  color: #fff;
  width: 100%;
  text-align: center;
  margin: 20rpx 0;
}
.success-result {
  font-size: 28rpx;
  color: #fff664;
  width: 100%;
  text-align: center;
  margin: 20rpx 0;
  text-decoration: underline;
}
.react-btn-group {
  margin: 20rpx 0;
  width: 100%;
  display: flex;
  justify-content: space-around;
  align-items: center;
  position: absolute;
  bottom: 0;
  font-size: 32rpx;
}
.react-share {
  width: 304rpx;
  height: 72rpx;
  background: linear-gradient(180deg, #f6fff9 0%, #ffd4d7 100%);
  box-shadow: 0px 4rpx 18rpx 0px rgba(210, 33, 83, 1);
  border-radius: 50rpx;
  color: #a42c21;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32rpx;
  margin: 0;
}
.react-ok {
  width: 162rpx;
  height: 72rpx;
  background: linear-gradient(180deg, #f6fff9 0%, #ffd4d7 100%);
  box-shadow: 0px 4rpx 18rpx 0rpx rgba(210, 33, 83, 1);
  border-radius: 50rpx;
  color: #a42c21;
  display: flex;
  justify-content: center;
  align-items: center;
}
.desc1,
.desc2 {
  padding: 30rpx 20rpx;
  min-height: 320rpx;
}
.desc1 .img {
  width: 100%;
}
````

## File: packageC/pages/feedback/feedback.js
````javascript
import {
  reqSubmitFeedback,
} from '../../api/feedback';
import { reqSecurityMsgCheck } from '../../../api/message';
import {
  timeoutTask,
} from '../../../utils/index';

Page({
  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {
    txtVal: 0,
    typeList: [
      {
        name: 'æ”¯ä»˜æœªåˆ°è´¦',
        isActive: false,
      },
      {
        name: 'è¯¯ç‚¹å‡»æ”¯ä»˜',
        isActive: false,
      },
      {
        name: 'ä¸æ˜çš„æ‰£æ¬¾',
        isActive: false,
      },
      {
        name: 'çº¢åŒ…æœªåˆ°è´¦',
        isActive: false,
      },
      {
        name: 'å…¶ä»–åŸå› ',
        isActive: false,
      },
    ],
    activeTypeStr: '',
    desc: '',
    phone: '',
    uploaderList: [],
    uploadImgUrlList: [],
    uploaderNum: 0,
    showUpload: true,
    userId: '',
    openId: '',
  },

  onLoad(options) {
    this.setData({
      userId: options.userId,
      openId: options.openId,
    });
  },
  phoneInput(e) {
    this.setData({
      phone: e.detail.value,
    });
  },
  descInput(e) {
    this.setData({
      txtVal: e.detail.value.length,
      desc: e.detail.value,
    });
    if (this.data.txtVal >= 120) {
      wx.showToast({
        title: 'é—®é¢˜å†…å®¹ä¸èƒ½è¶…è¿‡120å­—å“¦!',
        icon: 'none',
      });
      this.setData({
        desc: this.data.desc.slice(0, 120),
      });
    }
  },
  chooseType(e) {
    if (e.currentTarget.dataset.active) {
      this.resetTypeList();
    } else {
      let tmpCount = this.getTypeListActiveNum();
      if (tmpCount == 0) {
        this.updateTypeList(e.currentTarget.dataset.name);
      } else {
        this.resetTypeList();
        this.updateTypeList(e.currentTarget.dataset.name);
      }
    }
  },
  getTypeListActiveNum() {
    let tmpTypeList = this.data.typeList;
    let tmpCount = 0;
    for (let i = 0; i < tmpTypeList.length; i++) {
      if (tmpTypeList[i].isActive) {
        tmpCount++;
      }
    }
    return tmpCount;
  },
  updateTypeList(name) {
    let tmpTypeList = this.data.typeList;
    for (let i = 0; i < tmpTypeList.length; i++) {
      if (tmpTypeList[i].name == name) {
        tmpTypeList[i].isActive = !tmpTypeList[i].isActive;
        break;
      }
    }
    this.setData({
      typeList: tmpTypeList,
    });
  },
  resetTypeList() {
    let tmpTypeList = this.data.typeList;
    for (let i = 0; i < tmpTypeList.length; i++) {
      if (tmpTypeList[i].isActive) {
        tmpTypeList[i].isActive = false;
      }
    }
    this.setData({
      typeList: tmpTypeList,
    });
  },
  submit() {
    this.setData({
      activeTypeStr: '',
    });
    let tmpActiveTypeStr = '';
    let tmpImgUrlStr = '';
    let tmpImgUrlList = this.data.uploadImgUrlList;
    let tmpImgUrlListSub = [];
    let tmpTypeList = this.data.typeList;
    for (let i = 0; i < tmpImgUrlList.length; i++) {
      tmpImgUrlListSub.push(tmpImgUrlList[i].value);
    }
    for (let i = 0; i < tmpTypeList.length; i++) {
      if (tmpTypeList[i].isActive) {
        tmpActiveTypeStr += tmpTypeList[i].name + ' ';
      }
    }
    this.setData({
      activeTypeStr: tmpActiveTypeStr,
    });
    if (!this.data.activeTypeStr) {
      wx.showToast({
        title: 'è‡³å°‘é€‰æ‹©ä¸€ä¸ªé—®é¢˜ç±»å‹å“¦!',
        icon: 'none',
      });
      return;
    }
    if (!this.data.desc) {
      wx.showToast({
        title: 'è¯·å¡«å†™é—®é¢˜æè¿°å“¦!',
        icon: 'none',
      });
      return;
    }
    if (!this.data.phone) {
      wx.showToast({
        title: 'è¯·å¡«å†™æ‰‹æœºå·å“¦!',
        icon: 'none',
      });
      return;
    }

    if (!(this.data.phone.length == 11)) {
      wx.showToast({
        title: 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®!',
        icon: 'none',
      });
      return;
    }
    if (tmpImgUrlListSub.length > 0) {
      tmpImgUrlStr = tmpImgUrlListSub.join(',');
    }

    console.log(this.data.desc);
    console.log(this.data.phone);
    console.log(this.data.activeTypeStr);
    console.log(tmpImgUrlStr);
    reqSecurityMsgCheck(this.data.desc)
      .then(res => {
        const tmpResult = JSON.parse(res.data.msg_sec_check);
        if (tmpResult.result.suggest === 'pass') {
          reqSubmitFeedback({
            desc: this.data.desc,
            phone: this.data.phone,
            type: this.data.activeTypeStr,
            imgurl: tmpImgUrlStr,
            userId: this.data.userId,
            liveId: wx.getStorageSync('liveId'),
          })
            .then(res => {
              console.log(res);
              wx.showToast({
                title: 'æŠ•è¯‰ä¿¡æ¯æäº¤æˆåŠŸ',
                icon: 'none',
              });
              timeoutTask(() => {
                wx.navigateBack();
              }, 1000);
            })
            .catch(err => {
              console.log(err);
              wx.showToast({
                title: 'æŠ•è¯‰ä¿¡æ¯æäº¤å¤±è´¥',
                icon: 'none',
              });
            });
        } else {
          wx.showToast({
            title: 'å†…å®¹éæ³•!',
            icon: 'none',
            duration: 3000,
          });
        }
      })
      .catch(err => {
        console.log(err);
        reqSubmitFeedback({
          desc: this.data.desc,
          phone: this.data.phone,
          type: this.data.activeTypeStr,
          imgurl: tmpImgUrlStr,
          userId: this.data.userId,
          liveId: wx.getStorageSync('liveId'),
        })
          .then(res => {
            console.log(res);
            wx.showToast({
              title: 'æŠ•è¯‰ä¿¡æ¯æäº¤æˆåŠŸ',
              icon: 'none',
            });
            timeoutTask(() => {
              wx.navigateBack();
            }, 1000);
          })
          .catch(err => {
            console.log(err);
            wx.showToast({
              title: 'æŠ•è¯‰ä¿¡æ¯æäº¤å¤±è´¥',
              icon: 'none',
            });
          });
      });
  },
});
````

## File: packageC/pages/feedback/feedback.json
````json
{
  "navigationBarTitleText": "åé¦ˆæŠ•è¯‰"
}
````

## File: packageC/pages/photographerWall/photographerWall.js
````javascript
import  { H5_HOST } from '../../../assets/constant/host';

Page({
  data: {
    h5Url: '',
  },
  onLoad() {
    this.initData();
  },
  initData() {
    const h5Url = this.getH5Url();
    console.log(h5Url);
    this.setData({
      h5Url,
    });
  },
  getH5Url() {
    const liveId = wx.getStorageSync('liveId');
    const token = wx.getStorageSync('token');
    const time = Date.now();
    return `${H5_HOST}?liveId=${liveId}&token=${token}&time=${time}#/photographerWall`
  },
})
````

## File: packageC/pages/photographerWall/photographerWall.json
````json
{
  "navigationBarTitleText": "ç°åœºç…§ç‰‡"
}
````

## File: packageC/pages/photographerWall/photographerWall.wxml
````
<web-view wx:if="{{h5Url}}" src="{{h5Url}}"></web-view>
````

## File: packageC/pages/photographerWall/photographerWall.wxss
````
page {
  background: linear-gradient(139deg, #fec84e 0%, #feaf40 100%);
}
````

## File: packageGame/api/guessHb.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from "../../api/pay";

/**
 * è·å–çŒœçº¢åŒ…çŠ¶æ€
 */
export function reqGetGuessInfo({cancelLoading} = {}) {
    return request('guessRedPackage/getGuessInfo', 'POST', {
        splid: wx.getStorageSync('liveId'),
    },{
        cancelLoading,
    });
}

/**
 * å‚ä¸çŒœçº¢åŒ…
 * @param {String} sort å½“å‰ç¬¬å‡ è½®
 * @param {String} robSort ç•Œé¢ä¸Šå±•ç¤ºçš„æ–‡æœ¬
 * @param {String} guessMoney çŒœçš„é‡‘é¢
 * @param {String} hbId çº¢åŒ…id
 */
export function reqAttendGuess({sort,robSort,guessMoney,hbId}) {
    return request('guessRedPackage/robRedPackage', 'POST', {
        splid: wx.getStorageSync('liveId'),
        sort: sort,
        rob_sort: robSort,
        guess_money: guessMoney,
        red_package_id: hbId,
    });
}

/**
 * çŒœçº¢åŒ…å……å€¼
 */
export async function reqGuessHbRecharge({userId,openid,money}) {
    const res = await request('hmWxmoney/chongzhiKbx', 'POST', {
        splid: wx.getStorageSync('liveId'),
        giftId: 'guess',
        userId,
        openid,
        total: money,
    }, {
        needAppId: true
    });
    return reqWxPay(res);
}
````

## File: packageGame/api/nyn.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from "../../api/pay";

/**
 *è·å–å¥–æ± é‡‘é¢
 */
export function reqGetPoolMoney() {
    return request('jianLai/luckyDbList6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    },{
      cancelLoading: true
    });
}
/**
 * è·å–æ‰­ä¸€æ‰­ç›¸å…³ä¿¡æ¯
 */
export function reqGetNynInfo() {
    return request('jianLai/getLuckyId6', 'GET', {
        splid: wx.getStorageSync('liveId')
    });
}
/**
 * è·å–æ‰­ä¸€æ‰­æ’è¡Œæ¦œåˆ—è¡¨
 */
export function reqGetNynRank() {
    return request('jianLai/luckyDbRank6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    });
}

/**
 * æ‰­ä¸€æ‰­å……å€¼
 */
export async function reqNynRecharge({ userId, openId, dzp_kind }) {
    const tmpParam = { splid: wx.getStorageSync('liveId'), giftId: 'one', USER_ID: userId, openid: openId};
    const res = await request('hmWxmoney/chongzhiNyn', 'POST', tmpParam, {
        needAppId: true,
    });
    return reqWxPay(res);
}
/**
 * å¼€å§‹æ‰­ä¸€æ‰­
 */
export function reqStartNyn({ turnId }) {
    const tmpParam = { splid: wx.getStorageSync('liveId'), id: turnId };
    return request('jianLai/niuyiniu6', 'POST', tmpParam);
}
/**
 * æ‰­ä¸€æ‰­å‘é€ä¸­å¥–ä¿¡æ¯
 */
export function reqSendPrizeInfo({gold,remainCoin, turnId}) {
    return request('jianLai/luoXuanWan6', 'POST', {
        type: '2',
        gold,
        balance: remainCoin,
        splid: wx.getStorageSync('liveId'),
        id: turnId,
    });
}
/**
 * å‘é€å¹¿æ’­
 */
export function reqSendBroadCast({c}) {
    return request('sendMsgController/duxin6', 'POST', {
        splid: wx.getStorageSync('liveId'),
        ykq_info: c
    });
}
````

## File: packageGame/api/zfdm.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from "../../api/pay";

/**
 * äº‰åˆ†å¤ºç§’å……å€¼
 */
export async function reqZfdmRecharge({userId, openId}) {
    const res = await request('hmWxmoney/chongzhiRace', 'POST', {
        splid: wx.getStorageSync('liveId'),
        USER_ID: userId,
        openid: openId,
    }, {
        needAppId: true,
    });
    return reqWxPay(res);
}

/**
 * è·å–äº‰åˆ†å¤ºç§’ä¿¡æ¯
 */
export function reqGetZfdmInfo(isLoop) {
    return request('race/getRaceInfo', 'GET', {
        splid: wx.getStorageSync('liveId'),
    }, {
        cancelLoading: isLoop,
    });
}

/**
 * äº‰åˆ†å¤ºç§’å¼€å§‹æ¸¸æˆ
 */
export function reqStartZfdm({guessInfoId, raceTime}) {
    return request('race/robRace', 'POST', {
        splid: wx.getStorageSync('liveId'),
        guess_info_id: guessInfoId,
        raceTime,
    });
}

/**
 * è·å–æ’è¡Œæ¦œ
 */
export function reqGetZfdmRankList(redpackageId) {
    return request('race/getRaceRankList', 'GET', {
        splid: wx.getStorageSync('liveId'),
        red_package_id: redpackageId,
    });
}

/**
 * è·å–äº‰åˆ†å¤ºç§’æ¶ˆæ¯åˆ—è¡¨
 */
export function reqGetZfdmMessageList(redpackageId) {
    return request('race/getRaceLxList', 'GET', {
        splid: wx.getStorageSync('liveId'),
        red_package_id: redpackageId,
    }, {
        cancelLoading: true,
    });
}
````

## File: packageGame/api/zyz.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from "../../api/pay";

/**
 *è·å–å¥–æ± é‡‘é¢
 */
export function reqGetPoolMoney() {
    return request('jianLai/luckyDbList6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    }, {
      cancelLoading: true,
    });
}
/**
 * è·å–è½¬ä¸€è½¬ç›¸å…³ä¿¡æ¯
 */
export function reqGetZyzInfo() {
    return request('jianLai/getLuckyId6', 'GET', {
        splid: wx.getStorageSync('liveId')
    });
}
/**
 * è·å–è½¬ä¸€è½¬æ’è¡Œæ¦œåˆ—è¡¨
 */
export function reqGetZyzRank() {
    return request('jianLai/luckyDbRank6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    });
}

/**
 * è½¬ä¸€è½¬å……å€¼
 * dzp_kind:'2' å¹¸è¿å°è½¬ç›˜ç‹¬æœ‰å‚æ•°
 */
export async function reqZyzRecharge({ userId, openId, dzp_kind }) {
    const tmpParam = { splid: wx.getStorageSync('liveId'), giftId: 'one', USER_ID: userId, openid: openId};
    if (dzp_kind) {
        tmpParam.dzp_kind = dzp_kind;
    }
    const res = await request('hmWxmoney/chongzhiNyn', 'POST', tmpParam, {
        needAppId: true,
    });
    return reqWxPay(res);
}
/**
 * å¼€å§‹è½¬ä¸€è½¬
 * turnId è½®æ¬¡id è¡¨ç¤ºç¬¬å‡ è½® dzp_kind:'2' å¹¸è¿å°è½¬ç›˜ç‹¬æœ‰å‚æ•°
 */
export function reqStartZyz({ turnId, dzp_kind }) {
    const tmpParam = { splid: wx.getStorageSync('liveId'), id: turnId };
    if (dzp_kind) {
        tmpParam.dzp_kind = dzp_kind;
    }

    return request('jianLai/luckyDb6', 'POST', tmpParam);
}
/**
 * è½¬ä¸€è½¬å‘é€ä¸­å¥–ä¿¡æ¯
 */
export function reqSendPrizeInfo({gold,remainCoin, turnId}) {
    return request('jianLai/luoXuanWan6', 'POST', {
        type: '2',
        gold,
        balance: remainCoin,
        splid: wx.getStorageSync('liveId'),
        id: turnId,
    });
}
/**
 * å‘é€å¹¿æ’­
 */
export function reqSendBroadCast({c}) {
    return request('sendMsgController/duxin6', 'POST', {
        splid: wx.getStorageSync('liveId'),
        ykq_info: c
    });
}
````

## File: packageGame/pages/guessHb/guessHb.js
````javascript
import { timeoutTask } from "../../../utils/index";
import {
  reqGetGuessInfo,
  reqAttendGuess,
  reqGuessHbRecharge,
} from "../../api/guessHb";

let robLock = false;
let endLoop = false;
const IDENTITYLIST = [
  {
    id: "1",
    name: "æ–°éƒ",
  },
  {
    id: "2",
    name: "æ–°å¨˜",
  },
  {
    id: "3",
    name: "äº²å‹",
  },
];
let DMLIST = [];
let danmuIndex = 0;
const convertNumToText = (numStr) => {
  // ä¸€åˆ°äºŒå
  const TextArr = ["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å","åä¸€","åäºŒ","åä¸‰","åå››","åäº”","åå…­","åä¸ƒ","åå…«","åä¹","äºŒå"];
  return TextArr[numStr - 1]; 
}

Page({
  data: {
    inputVal: "", // è¾“å…¥çš„æœ€ç»ˆå€¼
    interArray: [], // æ•´æ•°
    decimalArray: [], // å°æ•°
    resultNum: "",
    targetVal: "", // ç­”æ¡ˆ
    hbVisible: false,
    hasHbPop: false, // é™åˆ¶çº¢åŒ…æ¯è½®åªå¼¹å‡ºä¸€æ¬¡
    // çº¢åŒ…åŠ¨ç”»æ§åˆ¶
    isHbOpen: false,
    isLidUpAniStart: false,
    isLidDownAniStart: false,
    isPShowAniStart: false,
    isRobBtnAniStart: false,
    // 0: ç­‰å¾… 1ï¼šæ¸¸æˆç•Œé¢
    guessStatus: 0,
    hbId: "",
    sort: "",
    sortUnuse: "",
    sortText: "",
    guessMoney: "",
    attendNum: 0,
    remainNum: 0,
    purchaseMoney: 0,
    userId: "",
    openId: "",
    isAnnounce: false, // æ˜¯å¦å¯ä»¥æ­æ™“
    hasPrize: false, // æ˜¯å¦çŒœä¸­
    prizeMoney: "", // ä¸­å¥–é‡‘é¢
    hasPrizeRounds: false, // æœ¬è½®æ˜¯å¦æœ‰çŒœä¸­çš„äºº
    rankList: [],
    rankListVisible: false,
    isFocus: false,
    gapMax: "",
    gapMin: "",
    boxShowAni: false,
    boxShow: false,
    textShowAni: false,
    iptShowAni: false,
    activeShine: "",
    shineShow: false,
    danmuAniShow: false,
    activeDanmuCt: "",
    payUser: {
      avator: "",
      identity: "",
    },
    hasClickGoOn: false,
    hasClickShow: false,
    hasAutoPopHb: false,
  },
  onLoad: function (options) {
    robLock = false;
    this.setData({
      userId: options.userId,
      openId: options.openId,
    });
    this.initGuessInfo();
  },
  onShow: function () {},
  onUnload: function () {
    endLoop = true;
  },
  robHb: function () {
    if (robLock) {
      return;
    }
    robLock = true;
    this.openHbAniStart().then(() => {
      timeoutTask(() => {
        robLock = false;
      }, 1500);
      this.setData({
        isHbOpen: true,
      });
    });
  },
  openHbAniStart() {
    return new Promise((resolve, reject) => {
      try {
        // æŒ‰é’®åŠ¨ç”»å¼€å§‹
        this.setData({
          isRobBtnAniStart: true,
        });
        timeoutTask(() => {
          // æŒ‰é’®åŠ¨ç”»ç»“æŸ
          this.setData({
            isRobBtnAniStart: false,
          });
          // çº¢åŒ…ç›–å­æ‰“å¼€
          this.setData({
            isLidUpAniStart: true,
          });
          resolve(1);
          timeoutTask(() => {
            // å¥–é¡¹éœ²å‡º
            this.setData({
              isPShowAniStart: true,
            });
            // çº¢åŒ…ç›–å­å…³é—­
            this.setData({
              isLidDownAniStart: true,
            });
          }, 500);
        }, 1000);
      } catch (err) {
        reject(err);
      }
    });
  },
  handleInterDecimalInput(e) {
    const tmpInterArray = this.data.interArray;
    const tmpDecimalArray = this.data.decimalArray;
    const InterArrayLen = tmpInterArray.length;
    const DecimalArrayLen = tmpDecimalArray.length;
    for (let i = 0; i < InterArrayLen; i += 1) {
      tmpInterArray[i] = e.detail.value.charAt(i) || "";
    }
    for (let i = 0; i < DecimalArrayLen; i += 1) {
      tmpDecimalArray[i] = e.detail.value.charAt(i + InterArrayLen) || "";
    }

    this.setData({
      interArray: tmpInterArray,
      decimalArray: tmpDecimalArray,
    });
  },
  convertEmptyToZero() {
    const tmpInterArray = this.data.interArray;
    const tmpDecimalArray = this.data.decimalArray;
    const InterArrayLen = tmpInterArray.length;
    const DecimalArrayLen = tmpDecimalArray.length;
    for (let i = 0; i < InterArrayLen; i += 1) {
      if (tmpInterArray[i] === "") {
        tmpInterArray[i] = 0;
      }
    }
    for (let i = 0; i < DecimalArrayLen; i += 1) {
      if (tmpDecimalArray[i] === "") {
        tmpDecimalArray[i] = 0;
      }
    }
    this.setData({
      interArray: tmpInterArray,
      decimalArray: tmpDecimalArray,
    });
  },
  removeHeadZero() {
    let tmpResultNum = this.data.resultNum;
    tmpResultNum = "";
    let firstUnZeroInterIndex = -1; // è®°å½•ç¬¬ä¸€ä¸ªé0æ•°å­—çš„æ•´æ•°æ•°ç»„ç´¢å¼•
    const tmpInterArray = this.data.interArray;
    const tmpDecimalArray = this.data.decimalArray;
    const InterArrayLen = tmpInterArray.length;
    const DecimalArrayLen = tmpDecimalArray.length;
    for (let i = 0; i < InterArrayLen; i += 1) {
      if (tmpInterArray[i] !== 0 && tmpInterArray[i] !== "0") {
        firstUnZeroInterIndex = i;
        break;
      }
    }
    console.log(firstUnZeroInterIndex);
    if (firstUnZeroInterIndex === -1) {
      // æ•´æ•°éƒ½ä¸º0
      tmpResultNum += "0";
    } else {
      tmpResultNum += tmpInterArray
        .slice(firstUnZeroInterIndex, InterArrayLen)
        .join("");
    }
    if (tmpDecimalArray.length === 2) {
      if (tmpDecimalArray[0] !== 0 && tmpDecimalArray[1] === 0) {
        tmpResultNum += `.${tmpDecimalArray[0]}`;
      } else if (tmpDecimalArray[0] === 0 && tmpDecimalArray[1] !== 0) {
        tmpResultNum += `.0${tmpDecimalArray[1]}`;
      } else if (tmpDecimalArray[0] !== 0 && tmpDecimalArray[1] !== 0) {
        tmpResultNum += `.${tmpDecimalArray[0]}${tmpDecimalArray[1]}`;
      }
    } else if (tmpDecimalArray.length === 1) {
      if (tmpDecimalArray[0] !== 0) {
        tmpResultNum += `.${tmpDecimalArray[0]}`;
      }
    }
    this.setData({
      resultNum: tmpResultNum,
    });
  },
  Tap(e) {
    console.log(e);
    this.setData({
      isFocus: true,
    });
  },
  parseTargetVal(targetVal) {
    let tmpInterArray = [];
    let tmpDecimalArray = [];
    if (targetVal.indexOf(".") > -1) {
      tmpInterArray = targetVal.split(".")[0].split("");
      tmpDecimalArray = targetVal.split(".")[1].split("");
    } else {
      tmpInterArray = targetVal.split("");
    }
    tmpInterArray = tmpInterArray.map(() => {
      return "";
    });
    tmpDecimalArray = tmpDecimalArray.map(() => {
      return "";
    });
    this.setData({
      interArray: tmpInterArray,
      decimalArray: tmpDecimalArray,
    });
  },
  parseMyVal(myVal) {
    let tmpInterArray = [];
    let tmpDecimalArray = [];
    if (myVal.indexOf(".") > -1) {
      tmpInterArray = myVal.split(".")[0].split("");
      tmpDecimalArray = myVal.split(".")[1].split("");
    } else {
      tmpInterArray = myVal.split("");
    }
    this.setData({
      interArray: tmpInterArray,
      decimalArray: tmpDecimalArray,
    });
  },
  handleAttend() {
    // ç©ºå­—ç¬¦ä¸²è½¬æˆ0
    this.convertEmptyToZero();
    // æ•´æ•°å‰é¢ï¼Œå°æ•°åé¢å»0
    this.removeHeadZero();
    if (this.data.resultNum === "0") {
      wx.showToast({
        title: "é‡‘é¢ä¸èƒ½ä¸º0",
        icon: "none",
      });
      return;
    }
    console.log(this.data.resultNum);
    if (robLock) {
      return;
    }
    robLock = true;
    reqAttendGuess({
      sort: this.data.sortUnuse,
      robSort: this.data.sort,
      guessMoney: this.data.resultNum,
      hbId: this.data.hbId,
    })
      .then((res) => {
        console.log(res);
        if (res.data.code === "200") {
          wx.showToast({
            title: "è´­ä¹°æˆåŠŸ!",
            icon: "none",
          });

          robLock = false;
          this.updateGuessInfo();
        } else if (res.data.code === "202") {
          wx.showToast({
            title: "å·²ç»è´­ä¹°è¿‡å•¦!",
            icon: "none",
          });

          robLock = false;
          this.updateGuessInfo();
        } else if (res.data.code === "203") {
          wx.showToast({
            title: "32ä¸ªåé¢å·²ç»æ²¡å•¦!ç­‰å¾…ä¸‹ä¸€è½®!",
            icon: "none",
          });

          robLock = false;
        } else if (res.data.code === "204") {
          console.log("å–µå¸ä¸è¶³");
          this.recharge();
        } else if (res.data.code === "201") {
          console.log("æœªå¼€å§‹æˆ–å·²ç»“æŸ");
          robLock = false;
          wx.showToast({
            title: "æ¸¸æˆå°šæœªå¼€å§‹æˆ–å·²ç»ç»“æŸ!",
            icon: "none",
          });
        } else if (res.data.code === "205") {
          robLock = false;
          wx.showToast({
            title: "æœ¬è½®å·²ç»æ­æ™“!ç­‰å¾…ä¸‹ä¸€è½®!",
            icon: "none",
          });
        }
      })
      .catch((err) => {
        console.log(res);
        robLock = false;
      });
  },
  initGuessInfo() {
    if (robLock) {
      return;
    }
    robLock = true;
    reqGetGuessInfo()
      .then((res) => {
        console.log(res);
        robLock = false;
        if (res.data.code === "201") {
          wx.showToast({
            title: "æ¸¸æˆå°šæœªå¼€å§‹æˆ–å·²ç»ç»“æŸ!",
            icon: 'none'
          });
        } else if (
          res.data.code === "200" ||
          res.data.code === "202" ||
          res.data.code === "203" ||
          res.data.code === "204" ||
          res.data.code === "205"
        ) {
          let tmpPayUser = this.data.payUser;
          let tmpPayUser2 = JSON.parse(res.data.guess_data_json);
          tmpPayUser.avator = tmpPayUser2.headimgurl;
          tmpPayUser.identity = IDENTITYLIST.find(
            (item) => item.id === tmpPayUser2.shen_fen
          ).name;
          this.setData({
            guessStatus: 1,
            sort: res.data.rob_sort,
            sortUnuse: res.data.sort,
            sortText: convertNumToText(res.data.rob_sort),
            hbId: res.data.red_package_id,
            guessMoney:
              res.data.guess_status === "0" ? "" : res.data.guess_status,
            targetVal: res.data.guess_balance,
            attendNum: res.data.CanYuSize,
            remainNum: res.data.RemainCanYuSize,
            purchaseMoney: res.data.purchase_amount_val,
            payUser: tmpPayUser,
          });
          if (res.data.guess_status === "0") {
            // è¿˜æ²¡çŒœ
            // æ ‡å‡†ç­”æ¡ˆè§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
            this.parseTargetVal(this.data.targetVal);
            this.resetBoxAni();
            this.showBoxAni();
          } else {
            // å·²ç»çŒœè¿‡äº†
            // è‡ªå·±çŒœçš„é‡‘é¢è§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
            this.parseMyVal(this.data.guessMoney);
          }
          endLoop = false;
          // è½®è¯¢è·å–ä¿¡æ¯
          this.loopGetGuessInfo();
        }
      })
      .catch((err) => {
        console.log(err);
        robLock = false;
      });
  },
  updateGuessInfo() {
    reqGetGuessInfo()
      .then((res) => {
        console.log(res);
        if (
          res.data.code === "200" ||
          res.data.code === "202" ||
          res.data.code === "203" ||
          res.data.code === "204" ||
          res.data.code === "205"
        ) {
          this.setData({
            sort: res.data.rob_sort,
            sortUnuse: res.data.sort,
            sortText: convertNumToText(res.data.rob_sort),
            hbId: res.data.red_package_id,
            guessMoney:
              res.data.guess_status === "0" ? "" : res.data.guess_status,
            targetVal: res.data.guess_balance,
            attendNum: res.data.CanYuSize,
            remainNum: res.data.RemainCanYuSize,
            purchaseMoney: res.data.purchase_amount_val,
          });
          if (this.data.guessMoney === "0") {
            // è¿˜æ²¡çŒœ
            // æ ‡å‡†ç­”æ¡ˆè§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
            this.parseTargetVal(this.data.targetVal);
          } else {
            // å·²ç»çŒœè¿‡äº†
            // è‡ªå·±çŒœçš„é‡‘é¢è§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
            this.parseMyVal(this.data.guessMoney);
          }
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // è½®è¯¢è·å–å‚ä¸è€…ä¿¡æ¯
  loopGetGuessInfo() {
    if (endLoop) {
      return;
    }
    reqGetGuessInfo({ cancelLoading: true })
      .then((res) => {
        console.log(res);
        if (
          res.data.code === "200" ||
          res.data.code === "202" ||
          res.data.code === "203" ||
          res.data.code === "204" ||
          res.data.code === "205"
        ) {
          if (res.data.rob_sort !== this.data.sort) {
            // æ–°çš„ä¸€è½®
            this.setData({
              isLidUpAniStart: false,
              isLidDownAniStart: false,
              isPShowAniStart: false,
              isRobBtnAniStart: false,
              hasHbPop: false,
              isHbOpen: false,
              hbVisible: false,
              rankListVisible: false,
              hasClickGoOn: false,
              hasClickShow: false,
              interArray: [],
              decimalArray: [],
              hasAutoPopHb: false,
            });
            danmuIndex = 0;
            DMLIST = [];
            if (res.data.guess_status === "0") {
              // è¿˜æ²¡çŒœ
              // æ ‡å‡†ç­”æ¡ˆè§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
              this.resetBoxAni();
              this.showBoxAni();
              this.parseTargetVal(this.data.targetVal);
            } else {
              // å·²ç»çŒœè¿‡äº†
              // è‡ªå·±çŒœçš„é‡‘é¢è§£æä¸ºæ•´æ•°æ•°ç»„å’Œå°æ•°æ•°ç»„
              this.parseMyVal(this.data.guessMoney);
            }
          }
          if (this.data.hasClickGoOn) {
            this.setData({
              guessMoney: "",
            });
            if (!this.data.hasClickShow) {
              this.setData({
                hasClickShow: true,
              });
              this.resetBoxAni();
              this.showBoxAni();
            }

            timeoutTask(() => {
              this.loopGetGuessInfo();
            }, 2000);
            return;
          }
          if (res.data.robRecordList) {
            console.log("showDanmuAni");
            console.log(danmuIndex);
            DMLIST = res.data.robRecordList.list.map((item) => {
              let tmpName =
                item.wx_name.length > 4
                  ? item.wx_name.slice(0, 4) + "......"
                  : item.wx_name;
              return tmpName + "çŒœ" + item.guess_money;
            });
            this.showDanmuAni();
          }
          this.setData({
            sort: res.data.rob_sort,
            sortUnuse: res.data.sort,
            sortText: convertNumToText(res.data.rob_sort),
            hbId: res.data.red_package_id,
            guessMoney:
              res.data.guess_status === "0" ? "" : res.data.guess_status,
            targetVal: res.data.guess_balance,
            attendNum: res.data.CanYuSize,
            remainNum: res.data.RemainCanYuSize,
            isAnnounce: res.data.play_status === "1" ? true : false,
            purchaseMoney: res.data.purchase_amount_val,
          });

          this.gapHandle(res.data.min_max_json);
          if (res.data.code === "205") {
            if (res.data.robInfo.luckyJson[this.data.userId]) {
              // çŒœä¸­
              this.setData({
                hasPrize: true,
                prizeMoney: res.data.robInfo.luckyJson.luckyLotteryMoney,
              });
            } else {
              // æ²¡çŒœä¸­
              this.setData({
                hasPrize: false,
                prizeMoney: "",
              });
            }
            // æ˜ç»†åˆ—è¡¨
            this.setData({
              rankList: res.data.robInfo.infoList,
              hasPrizeRounds: res.data.robInfo.luckyJson.lottery_size >= 1,
            });
          }
          if (this.data.isAnnounce) {
            this.autoAnnounceHb();
          }
        } else if (res.data.code === "201") {
          this.setData({
            guessStatus: 0,
            isLidUpAniStart: false,
            isLidDownAniStart: false,
            isPShowAniStart: false,
            isRobBtnAniStart: false,
            hasHbPop: false,
            isHbOpen: false,
          });
          endLoop = true;
        }
        timeoutTask(() => {
          this.loopGetGuessInfo();
        }, 2000);
      })
      .catch((err) => {
        console.log(err);
        endLoop = true;
      });
  },
  async recharge() {
    try {
      await reqGuessHbRecharge({
        money: this.data.purchaseMoney,
        userId: this.data.userId,
        openid: this.data.openId,
      });
      wx.showToast({
        title: "å……å€¼æˆåŠŸ!",
        icon: "none",
      });
      timeoutTask(() => {
        this.handleAttend();
      }, 500);
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "none",
      });
    }
  },
  // è‡ªåŠ¨æ­æ™“çº¢åŒ…
  autoAnnounceHb() {
    if (this.data.hasAutoPopHb) {
      return;
    }
    this.setData({
      hasAutoPopHb: true,
    });
    if (!this.data.hasHbPop) {
      this.setData({
        hbVisible: true,
      });
    } else {
      this.setData({
        rankListVisible: true,
      });
    }
  },
  // æ­æ™“çº¢åŒ…
  announceHb() {
    if (!this.data.isAnnounce) {
      wx.showToast({
        title: "ç­‰å¾…æ­æ™“ï¼",
        icon: "none",
      });
      return;
    }
    if (!this.data.hasHbPop) {
      this.setData({
        hbVisible: true,
      });
    } else {
      this.setData({
        rankListVisible: true,
      });
    }
  },
  // ç»§ç»­å‚ä¸
  contiAttend() {
    this.resetBoxAni();
    this.setData({
      rankListVisible: false,
      hbVisible: false,
      hasHbPop: true,
      hasClickGoOn: true,
    });
  },
  checkResult() {
    this.setData({
      hbVisible: false,
      hasHbPop: true,
      rankListVisible: true,
    });
  },
  closeHb() {
    this.setData({
      hbVisible: false,
      hasHbPop: true,
    });
  },
  closeRank() {
    this.setData({
      rankListVisible: false,
    });
  },
  gapHandle(gapStr) {
    if (!gapStr) {
      return;
    }
    const gapObj = JSON.parse(gapStr);
    Object.keys(gapObj).forEach((item) => {
      if (
        parseInt(item.split("_")[1], 10) ===
        parseInt(this.data.sort, 10) - 1
      ) {
        if (item.split("_")[0] === "shang") {
          this.setData({
            gapMax: gapObj[item] === "0" ? "5000" : gapObj[item],
          });
        } else if (item.split("_")[0] === "xia") {
          this.setData({
            gapMin: gapObj[item] === "0" ? "0" : gapObj[item],
          });
        }
      }
    });
  },
  showBoxAni() {
    this.setData({
      boxShowAni: true,
    });
    timeoutTask(() => {
      this.setData({
        boxShowAni: false,
        boxShow: true,
        iptShowAni: true,
      });
      timeoutTask(() => {
        this.shineAni();
        timeoutTask(() => {
          this.setData({
            isFocus: true,
          });
        }, 2000);
      }, 500);
    }, 2000);
    timeoutTask(() => {
      this.setData({
        textShowAni: true,
      });
    }, 1000);
  },
  resetBoxAni() {
    this.setData({
      boxShowAni: false,
      boxShow: false,
      textShowAni: false,
      iptShowAni: false,
      isFocus: false,
    });
  },
  shineAni() {
    this.setData({
      shineShow: true,
    });
    timeoutTask(() => {
      this.setData({
        shineShow: false,
      });
    }, 1000);
  },
  showDanmuAni() {
    if (danmuIndex >= DMLIST.length) {
      return;
    }
    console.log(DMLIST[danmuIndex]);
    this.setData({
      activeDanmuCt: DMLIST[danmuIndex],
      danmuAniShow: true,
    });
    timeoutTask(() => {
      this.setData({
        danmuAniShow: false,
      });
      timeoutTask(() => {
        danmuIndex += 1;
        this.showDanmuAni();
      }, 1000);
    }, 3000);
  },
});
````

## File: packageGame/pages/guessHb/guessHb.json
````json
{
    "navigationBarTitleText": "çŒœçº¢åŒ…",
    "disableScroll": true
  }
````

## File: packageGame/pages/guessHb/guessHb.wxml
````
<view class="guessHbContainer">
    <!-- ç­‰å¾…ç•Œé¢ -->
    <view class="waitMod" wx:if="{{guessStatus === 0}}">
        <view class="mainBox">
            <image src="https://static.hudongmiao.com/joymewMp/guessHb/guessHbRuleTitle.png" class="guessHbRuleTitle"></image>
            <view class="ruleList">
                <view class="ruleItem">
                    <view class="num">1.</view>
                    ç­‰å¾…æ–°äººå……å€¼çº¢åŒ…æ‰å¯å¼€å¯æ¸¸æˆ
                </view>
                <view class="ruleItem">
                    <view class="num">2.</view>
                    æ¯è½®å‚ä¸äººæ•°æœ€å¤šä¸º32åæ¥å®¾
                </view>
                <view class="ruleItem">
                    <view class="num">3.</view>
                    æ¯è½®å‚ä¸é‡‘é¢ä¸åŒï¼Œè¶Šå¾€åå‚ä¸é‡‘é¢è¶Šé«˜
                </view>
                <view class="ruleItem">
                    <view class="num">4.</view>
                    æ¯è½®ç«çŒœéƒ½ä¼šæ˜¾ç¤ºçŒœä¸­æˆ–æœªçŒœä¸­ï¼Œå¦‚æœ¬è½® æœªçŒœä¸­ä¼šæ˜¾ç¤ºæœ€æ¥è¿‘çš„åŒºé—´èŒƒå›´
                </view>
                <view class="ruleItem">
                    <view class="num">5.</view>
                    å¦‚æœæœ¬è½®æœ‰å¤šåæ¥å®¾çŒœä¸­ï¼Œå°†å¹³åˆ†çº¢åŒ…
                </view>
                <view class="ruleItem">
                    <view class="num">6.</view>
                    çŒœä¸­çº¢åŒ…ç›´æ¥åˆ°è´¦æ‚¨çš„å¾®ä¿¡é›¶é’±
                </view>
            </view>
            <view class="attendBtn" bindtap="initGuessInfo">ç«‹å³å‚ä¸</view>
        </view>
    </view>
    <!-- ç«çŒœç•Œé¢ -->
    <view class="guessMod" wx:if="{{guessStatus === 1 && !guessMoney}}">
        <!-- ç«çŒœå¼¹å¹•æ¨¡å— -->
        <view class="danmuModule">
            <view class="danmu {{danmuAniShow ? 'danmuAni' : ''}}">{{activeDanmuCt}}</view>
        </view>
        <image src="{{payUser.avator}}" class="avator"></image>
        <view class="gameTip">{{payUser.identity}}é‚€è¯·ä½ ç«çŒœçº¢åŒ…</view>
        <view class="mainBox {{boxShowAni ? 'boxShowAni' : ''}} {{boxShow ? 'boxShow' : ''}} {{textShowAni ? 'textShowAni' : ''}} {{iptShowAni ? 'iptShowAni' : ''}}">
            <image src="https://static.joymew.com/joymewMp/guessHb/shineAni.webp" class="shineImg {{shineShow ? 'active' : ''}}" />
            <view class="roundsNum">ç¬¬{{sortText}}è½®</view>
            <view class="guessTip" wx:if="{{sort === '1'}}">å°æç¤ºï¼šæœ‰å‡ ä¸ªæ¡†å³ä¸ºå‡ ä½æ•°å­—</view>
            <view class="guessTip" wx:if="{{sort !== '1'}}">ä¸Šä¸€è½®ç«çŒœåŒºé—´ä¸ºï¼š{{gapMin}}~{{gapMax}}</view>
            <view class="iptGroup {{interArray.length + decimalArray.length === 1 || interArray.length + decimalArray.length === 2 || interArray.length + decimalArray.length === 3 || interArray.length + decimalArray.length === 4 ? 'one': ''}} {{interArray.length + decimalArray.length === 5? 'two': ''}}" wx:if="{{!hbVisible && !rankListVisible}}">
                <input type="number" value="{{item}}" wx:for="{{interArray}}" wx:key="index" data-index="{{index}}" catchtap='Tap' disabled="{{true}}" />
                <view class="dot" wx:if="{{decimalArray.length > 0}}"></view>
                <input type="number" value="{{item}}" wx:for="{{decimalArray}}" wx:key="index" data-index="{{index}}" catchtap='Tap' disabled="{{true}}" />
            </view>
            <input class="hideIpt" focus="{{isFocus}}" bindinput="handleInterDecimalInput" maxlength="{{interArray.length + decimalArray.length}}" type="number"/>
            <view class="attendInfo">
                æœ¬è½®å·²æœ‰
                <view class="num">{{attendNum}}</view>
                äººå‚ä¸ï¼Œå‰©ä½™
                <view class="num">{{remainNum - attendNum}}</view>
                ä¸ªåé¢
            </view>
            <view class="attendTip">æŠ“ç´§æ—¶é—´å‚ä¸å§~</view>
            <view class="confirmBtn" bindtap="handleAttend">ç«‹å³å‚ä¸</view>
            <view class="price">æœ¬è½®ç«çŒœé‡‘é¢ï¼š{{purchaseMoney}}å…ƒ</view>
        </view>
    </view>
    <!-- ç«çŒœç»“æŸï¼Œç­‰å¾…æ­æ™“ç•Œé¢ -->
    <view class="guessResultWaitMod" wx:if="{{guessStatus === 1 && guessMoney}}">
        <!-- ç«çŒœå¼¹å¹•æ¨¡å— -->
        <view class="danmuModule">
            <view class="danmu {{danmuAniShow ? 'danmuAni' : ''}}">{{activeDanmuCt}}</view>
        </view>
        <image src="{{payUser.avator}}" class="avator"></image>
        <view class="gameTip">{{payUser.identity}}é‚€è¯·ä½ ç«çŒœçº¢åŒ…</view>
        <view class="mainBox">
            <view class="myGuessTitle">æˆ‘çš„ç«çŒœæ•°å­—</view>
            <view class="iptGroup {{interArray.length + decimalArray.length === 1 || interArray.length + decimalArray.length === 2 || interArray.length + decimalArray.length === 3 || interArray.length + decimalArray.length === 4 ? 'one': ''}} {{interArray.length + decimalArray.length === 5? 'two': ''}}" wx:if="{{!hbVisible && !rankListVisible}}" wx:if="{{!hbVisible && !rankListVisible}}">
                <input type="number" value="{{item}}" wx:for="{{interArray}}" wx:key="index" data-index="{{index}}" disabled="{{true}}" />
                <view class="dot" wx:if="{{decimalArray.length > 0}}"></view>
                <input type="number" value="{{item}}" wx:for="{{decimalArray}}" wx:key="index" data-index="{{index}}" disabled="{{true}}" />
            </view>
            <view class="waitResultTip">ç«çŒœç»“æœç­‰å¾…ä¸»æŒäººæ­æ™“</view>
            <view class="attendInfo">
                å·²ç«çŒœäººæ•°ï¼š
                <view class="num">{{attendNum}}/{{remainNum}}</view>
                äºº
            </view>
            <view class="waitOpenBtn {{isAnnounce?'active':''}}" bindtap="announceHb">
                {{isAnnounce ? 'æŸ¥çœ‹ç»“æœ' : 'ç­‰å¾…æ­æ™“'}}
            </view>
        </view>
    </view>
    <!-- å¼¹å‡ºçº¢åŒ…æ¨¡å— -->
    <view class="hbModule" wx:if="{{hbVisible}}">
        <view class="shade" bindtap="closeHb"></view>
        <view class="hbBox">
            <view class="lidArea {{isLidUpAniStart?'up':''}} {{isLidDownAniStart?'down':''}}">
                <view class="wish">å¤§å‰å¤§åˆ©</view>
                <view class="wish2">ç¥æ‚¨ä¸€çŒœå°±å¯¹ï½</view>
            </view>
            <view class="prizeArea {{isPShowAniStart?'show':'' }}">
                <view class="prized" wx:if="{{hasPrize}}">
                    <view class="guessNum">ç²¾å‡†æ•°å­—{{targetVal}}</view>
                    <view class="congratuTip">æ­å–œæ‚¨è·å¾—ç«çŒœçº¢åŒ…</view>
                    <view class="money">
                        {{prizeMoney}}
                        <view class="unit">å…ƒ</view>
                    </view>
                    <view class="getMoneyTip1">çº¢åŒ…å·²åˆ°è´¦æ‚¨çš„å¾®ä¿¡é›¶é’±</view>
                    <view class="getMoneyTip2">æ„Ÿè°¢æ‚¨çš„å‚ä¸</view>
                    <view class="continueBtn" bindtap="contiAttend">ç»§ç»­å‚ä¸</view>
                    <view class="checkDetail" bindtap="checkResult">æŸ¥çœ‹ç«çŒœç»“æœ</view>
                </view>
                <view class="unprized" wx:if="{{!hasPrize}}">
                    <view class="pityTip">å¾ˆé—æ†¾</view>
                    <view class="pityTip2">åªå·®ä¸€ç‚¹ç‚¹ï¼Œæœ¬è½®æ²¡æœ‰çŒœä¸­</view>
                    <view class="continueBtn" bindtap="contiAttend">ç»§ç»­å‚ä¸</view>
                    <view class="checkDetail" bindtap="checkResult">æŸ¥çœ‹ç«çŒœç»“æœ</view>
                </view>
            </view>
            <view class="openBtn {{!isRobBtnAniStart?'commonActive':''}} {{isRobBtnAniStart?'active':''}}" wx:if="{{!isHbOpen}}" bindtap="robHb">
                å¼€
            </view>
        </view>
    </view>
    <!-- å¼¹å‡ºç«çŒœç»“æœæ¨¡å— -->
    <view class="resultModule" wx:if="{{rankListVisible}}">
        <view class="shade" bindtap="closeRank"></view>
        <view class="resultBox">
            <image src="https://static.hudongmiao.com/joymewMp/guessHb/guessResultTitle.png" class="guessResultTitle"></image>
            <view class="resultTip">{{hasPrizeRounds ? 'æœ¬è½®çº¢åŒ…å·²è¢«çŒœä¸­' : 'æœ¬è½®æ— äººçŒœä¸­ï¼Œæ’åæŒ‰æœ€æ¥è¿‘å±•ç¤º'}}</view>
            <view class="guessList">
                <view class="guessItem" wx:for="{{rankList}}" wx:key="index">
                    <view class="num">{{index + 1}}</view>
                    <view class="avator">
                        <image class="avatorImg" src="{{item.avator}}"></image>
                    </view>
                    <view class="nickname">{{item.wx_name}}</view>
                    <view class="guessVal">{{item.guess_money}}</view>
                    <view class="guessRt {{item.lucky_dog === '1' ? 'right' : ''}}">
                        {{item.lucky_dog === '1' ? 'å·²çŒœä¸­' : 'æœªçŒœä¸­'}}
                    </view>
                </view>
            </view>
            <view class="continueBtn" bindtap="contiAttend">ç»§ç»­å‚ä¸</view>
        </view>
    </view>
</view>
````

## File: packageGame/pages/guessHb/guessHb.wxss
````
.guessHbContainer {
  position: absolute;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/guessHbBg2.png');
  background-size: 100% 100%;
}
/* ç­‰å¾…ç•Œé¢ */
.waitMod {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.waitMod > .mainBox {
  width: 630rpx;
  height: 1000rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/guessHbBox2.png');
  background-size: 100% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 66rpx;
}
.waitMod > .mainBox > .guessHbRuleTitle {
  width: 422rpx;
  height: 88rpx;
}
.waitMod > .mainBox > .ruleList {
  width: 528rpx;
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  line-height: 60rpx;
  margin-top: 40rpx;
}
.waitMod > .mainBox > .ruleList > .ruleItem {
  width: 100%;
  position: relative;
  padding-left: 32rpx;
}
.waitMod > .mainBox > .ruleList > .ruleItem > .num {
  position: absolute;
  left: 0rpx;
}
.waitMod > .mainBox > .attendBtn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 462rpx;
  height: 80rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/confirmBg.png');
  background-size: 100% 100%;
  margin-top: 164rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #8d592f;
}
/* ç«çŒœç•Œé¢ */
.guessMod {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 40rpx;
}
.guessMod > .danmuModule {
  width: 100%;
  height: 16%;
  position: absolute;
  top: 0;
  left: 0;
}
.guessMod > .danmuModule > .danmu {
  border-radius: 35rpx;
  text-align: center;
  width: 237rpx;
  padding: 0 20rpx;
  height: 65rpx;
  line-height: 65rpx;
  font-size: 23rpx;
  font-weight: 400;
  color: #ffffff;
  position: absolute;
  left: -235rpx;
  top: 50rpx;
  background-color: rgba(0, 0, 0, 0.6);
}
.guessMod > .danmuModule > .danmu.danmuAni {
  animation-name: danmuShowAni;
  animation-duration: 3s;
  animation-iteration-count: 1;
  animation-timing-function: ease-in;
}
.guessMod > .avator {
  width: 138rpx;
  height: 138rpx;
  border-radius: 50%;
}
.guessMod > .gameTip {
  font-size: 36rpx;
  font-weight: 500;
  color: #ffffff;
  margin-top: 16rpx;
}
.guessMod > .mainBox {
  width: 630rpx;
  height: 1000rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/guessHbBox2.png');
  background-size: 100% 100%;
  margin-top: 28rpx;
  padding-top: 40rpx;
  transform: scale(0.4) translateY(3056rpx);
  position: relative;
}
.guessMod > .mainBox > .shineImg {
  position: absolute;
  width: 119%;
  height: 136%;
  bottom: -4%;
  left: -10%;
  opacity: 0;
}
.guessMod > .mainBox > .shineImg.active {
  opacity: 1;
}
.guessMod > .mainBox > .roundsNum {
  width: 100%;
  text-align: center;
  font-size: 48rpx;
  color: #fdf1ac;
  font-weight: 500;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox > .guessTip {
  width: 100%;
  text-align: center;
  font-size: 24rpx;
  color: #ffffff;
  margin-top: 32rpx;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox > .iptGroup {
  width: 95%;
  margin: 0 auto;
  margin-top: 60rpx;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox > .iptGroup > input {
  width: 72rpx;
  height: 72rpx;
  background-color: #ffffff;
  border: none;
  outline: none;
  font-size: 32rpx;
  font-weight: 400;
  color: #8d592f;
  text-align: center;
  margin: 0 12rpx;
}
.guessMod > .mainBox > .iptGroup.one > input {
  width: 119rpx;
  height: 119rpx;
  font-size: 72rpx;
}
.guessMod > .mainBox > .iptGroup.two > input {
  width: 88rpx;
  height: 88rpx;
  font-size: 36rpx;
}
.guessMod > .mainBox > .hideIpt {
  width: 0;
  height: 0;
}
.guessMod > .mainBox > .iptGroup > .dot {
  width: 8rpx;
  height: 8rpx;
  background: #ffffff;
  border-radius: 50%;
}
.guessMod > .mainBox > .attendInfo {
  width: 100%;
  margin-top: 114rpx;
  font-size: 28rpx;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox > .attendInfo > .num {
  font-size: 48rpx;
  color: #fdf1ac;
  margin: 0 6rpx;
}
.guessMod > .mainBox > .attendTip {
  font-size: 28rpx;
  color: #ffffff;
  margin-top: 24rpx;
  padding-left: 102rpx;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox > .confirmBtn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 462rpx;
  height: 80rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/confirmBg.png');
  background-size: 100% 100%;
  margin: 0 auto;
  margin-top: 190rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #8d592f;
  opacity: 0;
  transition: all 1s ease-out;
  position: relative;
  z-index: 1;
}
.guessMod > .mainBox > .price {
  width: 100%;
  text-align: center;
  font-size: 28rpx;
  color: #ffffff;
  font-weight: 400;
  margin-top: 26rpx;
  opacity: 0;
  transition: all 1s ease-out;
}
.guessMod > .mainBox.boxShowAni {
  animation-name: boxShowAni;
  animation-duration: 2s;
  animation-iteration-count: 1;
  animation-timing-function: ease-in;
}
.guessMod > .mainBox.textShowAni > .roundsNum {
  opacity: 1;
}
.guessMod > .mainBox.textShowAni > .guessTip {
  opacity: 1;
}
.guessMod > .mainBox.textShowAni > .attendInfo {
  opacity: 1;
}
.guessMod > .mainBox.textShowAni > .attendTip {
  opacity: 1;
}
.guessMod > .mainBox.textShowAni > .confirmBtn {
  opacity: 1;
}
.guessMod > .mainBox.textShowAni > .price {
  opacity: 1;
}
.guessMod > .mainBox.iptShowAni > .iptGroup {
  opacity: 1;
}
.guessMod > .mainBox.boxShow {
  transform: scale(1) translateY(0rpx);
}
/* ç«çŒœç»“æŸï¼Œç­‰å¾…æ­æ™“ç•Œé¢ */
.guessResultWaitMod {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 40rpx;
}
.guessResultWaitMod > .danmuModule {
  width: 100%;
  height: 16%;
  position: absolute;
  top: 0;
  left: 0;
}
.guessResultWaitMod > .danmuModule > .danmu {
  border-radius: 35rpx;
  text-align: center;
  width: 237rpx;
  padding: 0 20rpx;
  height: 65rpx;
  line-height: 65rpx;
  font-size: 23rpx;
  font-weight: 400;
  color: #ffffff;
  position: absolute;
  left: -235rpx;
  top: 50rpx;
  background-color: rgba(0, 0, 0, 0.6);
}
.guessResultWaitMod > .danmuModule > .danmu.danmuAni {
  animation-name: danmuShowAni;
  animation-duration: 3s;
  animation-iteration-count: 1;
  animation-timing-function: ease-in;
}
.guessResultWaitMod > .avator {
  width: 138rpx;
  height: 138rpx;
  border-radius: 50%;
}
.guessResultWaitMod > .gameTip {
  font-size: 36rpx;
  font-weight: 500;
  color: #ffffff;
  margin-top: 16rpx;
}
.guessResultWaitMod > .mainBox {
  width: 630rpx;
  height: 1000rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/guessHbBox2.png');
  background-size: 100% 100%;
  margin-top: 28rpx;
  padding-top: 112rpx;
}
.guessResultWaitMod > .mainBox > .shineImg {
  position: absolute;
  width: 119%;
  height: 136%;
  bottom: -4%;
  left: -10%;
  opacity: 0;
}
.guessResultWaitMod > .mainBox > .shineImg.active {
  opacity: 1;
}
.guessResultWaitMod > .mainBox > .myGuessTitle {
  width: 100%;
  text-align: center;
  font-size: 48rpx;
  color: #ffffff;
}
.guessResultWaitMod > .mainBox > .iptGroup {
  width: 90%;
  margin: 0 auto;
  margin-top: 109rpx;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
.guessResultWaitMod > .mainBox > .iptGroup.one > input {
  width: 119rpx;
  height: 119rpx;
  font-size: 72rpx;
}
.guessResultWaitMod > .mainBox > .iptGroup.two > input {
  width: 88rpx;
  height: 88rpx;
  font-size: 36rpx;
}
.guessResultWaitMod > .mainBox > .iptGroup > input {
  width: 72rpx;
  height: 72rpx;
  background-color: #ffffff;
  border: none;
  outline: none;
  font-size: 32rpx;
  font-weight: 400;
  color: #8d592f;
  text-align: center;
  margin: 0 12rpx;
}
.guessResultWaitMod > .mainBox > .iptGroup > .dot {
  width: 8rpx;
  height: 8rpx;
  background: #ffffff;
  border-radius: 50%;
}
.guessResultWaitMod > .mainBox > .waitResultTip {
  font-size: 28rpx;
  color: #ffffff;
  margin-top: 118rpx;
  width: 100%;
  text-align: center;
}
.guessResultWaitMod > .mainBox > .attendInfo {
  width: 100%;
  margin-top: 40rpx;
  font-size: 28rpx;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: flex-end;
}
.guessResultWaitMod > .mainBox > .attendInfo > .num {
  font-size: 48rpx;
  color: #fdf1ac;
  margin: 0 6rpx;
}
.guessResultWaitMod > .mainBox > .waitOpenBtn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 462rpx;
  height: 80rpx;
  background-color: #a0a0a0;
  margin: 0 auto;
  margin-top: 158rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #ffffff;
  border-radius: 8rpx;
}
.guessResultWaitMod > .mainBox > .waitOpenBtn.active {
  background-color: #fadaab;
  color: #8d592f;
}
.guessResultWaitMod > .mainBox.boxShowAni {
  animation-name: boxShowAni;
  animation-duration: 2s;
  animation-iteration-count: 1;
  animation-timing-function: ease-in;
}
.guessResultWaitMod > .mainBox.textShowAni > .myGuessTitle {
  opacity: 1;
}
.guessResultWaitMod > .mainBox.textShowAni > .waitResultTip {
  opacity: 1;
}
.guessResultWaitMod > .mainBox.textShowAni > .attendInfo {
  opacity: 1;
}
.guessResultWaitMod > .mainBox.textShowAni > .waitOpenBtn {
  opacity: 1;
}
.guessResultWaitMod > .mainBox.iptShowAni > .iptGroup {
  opacity: 1;
}
.guessResultWaitMod > .mainBox.boxShow {
  transform: scale(1) translateY(0rpx);
}
/* å¼¹å‡ºçº¢åŒ…æ¨¡å— */
.hbModule {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.6);
}
.hbModule > .shade {
  position: absolute;
  width: 100%;
  height: 100%;
}
.hbModule > .hbBox {
  width: 560rpx;
  height: 734rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/hbBg.png');
  background-size: 100% 100%;
  position: absolute;
  top: 320rpx;
  perspective: 400rpx;
}
.hbModule > .hbBox > .lidArea {
  width: 560rpx;
  height: 548rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/hbLid.png');
  background-size: 100% 100%;
  transition: all linear 0.5s;
  transform: translateY(0rpx);
  z-index: 2;
  padding-top: 94rpx;
}
.hbModule > .hbBox > .lidArea.up {
  transform: translateY(-240rpx);
  z-index: 1;
}
.hbModule > .hbBox > .lidArea.down {
  transform: translateY(0rpx);
  z-index: 1;
}
.hbModule > .hbBox > .lidArea > .wish {
  width: 100%;
  text-align: center;
  font-size: 48rpx;
  font-weight: 400;
  color: #ffffff;
}
.hbModule > .hbBox > .lidArea > .wish2 {
  width: 100%;
  text-align: center;
  font-size: 48rpx;
  font-weight: 400;
  color: #ffffff;
  margin-top: 126rpx;
}
.hbModule > .hbBox > .openBtn {
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/openBtnBg.png');
  background-size: 100% 100%;
  width: 328rpx;
  height: 320rpx;
  position: absolute;
  left: 112.5rpx;
  top: 390rpx;
  font-size: 88rpx;
  font-weight: 500;
  color: #9a5804;
  padding-top: 12vw;
  z-index: 2;
  display: flex;
  justify-content: center;
}
.hbModule > .hbBox > .openBtn.active {
  animation-name: rotateY;
  animation-duration: 1s;
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
}
.hbModule > .hbBox > .openBtn.commonActive {
  animation-name: scaleAni;
  animation-duration: 2s;
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
}
.hbModule > .hbBox > .prizeArea {
  width: 528rpx;
  height: 620rpx;
  position: absolute;
  top: -70rpx;
  left: 15rpx;
  z-index: 1;
  transition: all linear 0.1s;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/prizeBg.png');
  background-size: 100% 100%;
  opacity: 0;
}
.hbModule > .hbBox > .prizeArea.show {
  opacity: 1;
}
.hbModule > .hbBox > .prizeArea > .unprized {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 178rpx;
}
.hbModule > .hbBox > .prizeArea > .unprized > .pityTip {
  font-size: 56rpx;
  color: #c87a3a;
  font-weight: 500;
}
.hbModule > .hbBox > .prizeArea > .unprized > .pityTip2 {
  font-size: 36rpx;
  color: #c87a3a;
  font-weight: 500;
  margin-top: 36rpx;
}

.hbModule > .hbBox > .prizeArea > .unprized > .continueBtn {
  width: 320rpx;
  height: 68rpx;
  background: linear-gradient(90deg, #fffeec, #ffde8d 100%);
  border-radius: 54rpx;
  font-size: 36rpx;
  font-weight: 500;
  color: #ca2e1b;
  position: absolute;
  bottom: -100rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.hbModule > .hbBox > .prizeArea > .unprized > .checkDetail {
  position: absolute;
  font-size: 28rpx;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  bottom: -155rpx;
  left: 200rpx;
  padding-bottom: 4rpx;
}
.hbModule > .hbBox > .prizeArea > .unprized > .checkDetail::after {
  content: '';
  display: block;
  width: 100%;
  height: 2px;
  background-color: #ffffff;
  position: absolute;
  bottom: 0;
}

.hbModule > .hbBox > .prizeArea > .prized {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 94rpx;
}
.hbModule > .hbBox > .prizeArea > .prized > .guessNum {
  font-size: 36rpx;
  color: #c87a3a;
  font-weight: 500;
}
.hbModule > .hbBox > .prizeArea > .prized > .congratuTip {
  font-size: 36rpx;
  color: #c87a3a;
  font-weight: 500;
  margin-top: 64rpx;
}
.hbModule > .hbBox > .prizeArea > .prized > .money {
  margin-top: 28rpx;
  font-size: 56rpx;
  color: #f61e28;
  font-weight: 500;
  display: flex;
  align-items: flex-end;
}
.hbModule > .hbBox > .prizeArea > .prized > .money > .unit {
  font-size: 36rpx;
  color: #c87a3a;
  margin-left: 6rpx;
}
.hbModule > .hbBox > .prizeArea > .prized > .getMoneyTip1 {
  font-size: 28rpx;
  font-weight: 500;
  color: #c87a3a;
  margin-top: 106rpx;
}
.hbModule > .hbBox > .prizeArea > .prized > .getMoneyTip2 {
  font-size: 28rpx;
  font-weight: 500;
  color: #c87a3a;
}
.hbModule > .hbBox > .prizeArea > .prized > .continueBtn {
  width: 320rpx;
  height: 68rpx;
  background: linear-gradient(90deg, #fffeec, #ffde8d 100%);
  border-radius: 54rpx;
  font-size: 36rpx;
  font-weight: 500;
  color: #ca2e1b;
  position: absolute;
  bottom: -100rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.hbModule > .hbBox > .prizeArea > .prized > .checkDetail {
  position: absolute;
  font-size: 28rpx;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  bottom: -155rpx;
  left: 200rpx;
  padding-bottom: 4rpx;
}
.hbModule > .hbBox > .prizeArea > .prized > .checkDetail::after {
  content: '';
  display: block;
  width: 100%;
  height: 2px;
  background-color: #ffffff;
  position: absolute;
  bottom: 0;
}
/* å¼¹å‡ºç«çŒœç»“æœæ¨¡å— */
.resultModule {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.6);
}
.resultModule > .shade {
  position: absolute;
  width: 100%;
  height: 100%;
}
.resultModule > .resultBox {
  width: 630rpx;
  height: 1000rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/guessHb/guessHbBox2.png');
  background-size: 100% 100%;
  position: absolute;
  top: 148rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 32rpx;
}
.resultModule > .resultBox > .continueBtn {
  width: 320rpx;
  height: 68rpx;
  background: linear-gradient(90deg, #fffeec, #ffde8d 100%);
  border-radius: 54rpx;
  font-size: 36rpx;
  font-weight: 500;
  color: #ca2e1b;
  position: absolute;
  bottom: -24rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.resultModule > .resultBox > .guessResultTitle {
  width: 140rpx;
  height: 36rpx;
}
.resultModule > .resultBox > .resultTip {
  font-size: 32rpx;
  font-weight: 400;
  color: #fdf1ac;
  margin-top: 22rpx;
}
.resultModule > .resultBox > .guessList {
  width: 100%;
  margin-top: 30rpx;
  height: 809rpx;
  overflow-y: scroll;
}
.resultModule > .resultBox > .guessList > .guessItem {
  display: flex;
  align-items: center;
  padding: 0 32rpx;
  margin-bottom: 18rpx;
}
.resultModule > .resultBox > .guessList > .guessItem > .num {
  width: 49rpx;
  font-size: 36rpx;
  font-weight: 400;
  color: #ffffff;
}
.resultModule > .resultBox > .guessList > .guessItem > .avator {
  width: 64rpx;
  height: 64rpx;
  border-radius: 50%;
  background-color: #f8d9b5;
  margin-left: 15rpx;
}
.resultModule > .resultBox > .guessList > .guessItem > .avator > .avatorImg {
  width: 100%;
  height: 100%;
  border-radius: 50%;
}
.resultModule > .resultBox > .guessList > .guessItem > .nickname {
  width: 167rpx;
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-left: 14rpx;
}
.resultModule > .resultBox > .guessList > .guessItem > .guessVal {
  width: 112rpx;
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 15rpx;
}
.resultModule > .resultBox > .guessList > .guessItem > .guessRt {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 30rpx;
}
.resultModule > .resultBox > .guessList > .guessItem > .guessRt.right {
  color: #26e900;
}
.resultModule > .resultBox > .guessList > .guessItem.meInfo > .nickname {
  color: #fdf1ac;
}
.resultModule > .resultBox > .guessList > .guessItem.meInfo > .guessVal {
  color: #fdf1ac;
}
.resultModule > .resultBox > .guessList > .guessItem.meInfo > .guessRt {
  color: #fdf1ac;
}
@keyframes rotateY {
  0% {
    transform: rotateY(0deg) translateZ(10px);
    opacity: 1;
  }

  70% {
    transform: rotateY(720deg) translateZ(10px);
    opacity: 1;
  }

  100% {
    transform: rotateY(720deg) translateZ(-400px);
    opacity: 0;
  }
}
@keyframes scaleAni {
  0% {
    transform: scale(1);
  }

  70% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1);
  }
}
@keyframes boxShowAni {
  0% {
    transform: scale(0.4) translateY(6112.5px);
  }
  60% {
    transform: scale(0.4) translateY(120px);
  }
  100% {
    transform: scale(1) translateY(0px);
  }
}

@keyframes danmuShowAni {
  0% {
    transform: translate(0, 0);
    opacity: 1;
  }
  10% {
    transform: translate(292rpx, 0);
    opacity: 1;
  }
  80% {
    transform: translate(292rpx, 0);
    opacity: 1;
  }
  100% {
    transform: translate(292rpx, -80rpx);
    opacity: 0;
  }
}
````

## File: packageGame/pages/hbWall/hbWall.js
````javascript
import {
  timeoutTask,
  getRandom,
  generateRandomAvatarAndNickname,
  generateRandomId
} from "../../../utils/index";
import {
  reqGetGameState,
  reqSendBroadCast,
  reqGetHbList,
  reqBuyHb,
  reqHbqRecharge,
  reqGetHbRankList,
} from "../../api/kbx";
import defaultContent from "../../../assets/constant/default";

// ç¤¼ç‰©æ•°ç»„
const giftList = [{
    id: 1,
    gift: "rocket1",
    name: "å°å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket1.png",
  },
  {
    id: 2,
    gift: "rocket2",
    name: "ä¸­å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket2.png",
  },
  {
    id: 3,
    gift: "rocket3",
    name: "å¤§å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket3.png",
  },
];
const wishList = [
  "é†‰é…’é¥±å¾·ï¼Œä¸èƒœæ„Ÿæ¿€",
  "ç¾é…’ä½³è‚´,ä¸ç”šè£å¹¸",
  "æ„Ÿè°¢æ‹›å¾…,ç¥æ„¿å®‰åº·",
  "å°å°çº¢åŒ…,æ„Ÿè°¢æ‹›å¾…",
];
let requestLock = false;
// é™åˆ¶åªæœ‰ä¸€ä¸ªè½®è¯¢å­˜åœ¨
let tmpInterval = null; // åˆšè¿›å…¥çº¢åŒ…å¢™çš„è½®è¯¢
let tmpInterval2 = null; // ç‚¹å‡»å¼€å§‹æ¸¸æˆä¸­çš„è½®è¯¢
let baseMoney = 0;
Page({
  data: {
    gameStatus: 1, // æ¸¸æˆçŠ¶æ€(æ§åˆ¶é¡µé¢æ˜¾ç¤º)
    myHbsVisible: false,
    isLuckyShow: false,
    luckyAni: "",
    hbs: [],
    chooseHbIds: [],
    remain: 3,
    activeGiftIndex: -1,
    gift_show: {
      //å½“å‰æ˜¾ç¤ºçš„ç¤¼ç‰©
      id: 3,
      gift: "rocket3",
      name: "å¤§å·ç«ç®­",
      imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket3.png",
      price: 0,
    },
    userId: "",
    openId: "",
    name: "",
    headImg: "",
    isForbidBuyHbq: false,
    luckyHbs: [],
    sort: "",
    rankList1: [],
    rankList2: [],
    defaultHeadImg: defaultContent.defaultJoymewAvatar,
  },
  onLoad: function (options) {
    requestLock = false;
    tmpInterval = null;
    tmpInterval2 = null;
    baseMoney = 0;
    this.setData({
      userId: options.userId,
      openId: options.openId,
      name: options.name,
      headImg: options.headImg,
      isForbidBuyHbq: options.isForbidBuyHbq === "true" ? true : false,
    });
  },
  onShow: function () {
    reqGetGameState({
      userId: this.data.userId
    }).then((res) => {
      console.log(res);
      if (res.success) {
        if (res.data.status === "1") {
          if (this.data.hbs.length === 0) {
            this.getHbs();
          }
          clearInterval(tmpInterval2);
          tmpInterval2 = null;
          if (!tmpInterval) {
            // è½®è¯¢æ›´æ–°çº¢åŒ…åˆ—è¡¨
            tmpInterval = setInterval(() => {
              this.updateHbs(true);
            }, 4000);
          }
        } else if (res.data.status === "2") {
          wx.showToast({
            title: "æœ¬è½®çº¢åŒ…å¢™å·²ç»ç»“æŸ",
            icon: "none",
          });
          timeoutTask(() => {
            wx.navigateBack();
          }, 1500);
        }
      }
    });
  },
  onHide: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    clearInterval(tmpInterval2);
    tmpInterval = null;
    tmpInterval2 = null;
  },
  onUnload: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    clearInterval(tmpInterval2);
    tmpInterval = null;
    tmpInterval2 = null;
  },
  enterGame: function () {
    reqGetGameState({
        userId: this.data.userId
      })
      .then((res) => {
        console.log("***è·å–æ¸¸æˆçŠ¶æ€***");
        console.log(res);
        if (res.success) {
          if (res.data.status === "0") {
            wx.showToast({
              title: "è¯·ç­‰å¾…å¤§å±å¼€å¯æ¸¸æˆ",
              icon: "none",
            });
          } else if (res.data.status === "1") {
            // æ¸¸æˆè¿›è¡Œä¸­
            console.log("***è·å–çº¢åŒ…åˆ—è¡¨***");
            this.getHbs();
            clearInterval(tmpInterval);
            tmpInterval = null;
            if (!tmpInterval2) {
              // è½®è¯¢æ›´æ–°çº¢åŒ…åˆ—è¡¨
              tmpInterval2 = setInterval(() => {
                this.updateHbs(true);
              }, 4000);
            }
          } else if (res.data.status === "2") {
            wx.showToast({
              title: "æœ¬è½®å¼€çº¢åŒ…å·²ç»ç»“æŸ",
              icon: "none",
            });
            timeoutTask(() => {
              wx.navigateBack();
            }, 1500);
          } else {
            wx.showToast({
              title: "è¯·ç­‰å¾…å¤§å±å¼€å¯æ¸¸æˆ",
              icon: "none",
            });
          }
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  chooseHbs: function (e) {
    console.log('é€‰æ‹©çº¢åŒ…ï¼š', e.currentTarget.dataset.id);
    const index = this.findHbIndexByHbId(e.currentTarget.dataset.id);
    const hbs = this.data.hbs;
    console.log('index:', index);
    console.log('hbs:', hbs);
    if (hbs[index].isOpen) {
      wx.showToast({
        title: "è¿™ä¸ªçº¢åŒ…å·²ç»è¢«æ‹†å¼€å•¦ï¼",
        icon: "none",
      });
      return;
    }
    if (hbs[index].isBuyed) {
      wx.showToast({
        title: "è¿™ä¸ªçº¢åŒ…å·²ç»è¢«æŠ¢èµ°å•¦ï¼",
        icon: "none",
      });
      return;
    }
    if (hbs[index].canBuy) {
      // å¦‚æœé€‰ä¸­ å–æ¶ˆé€‰ä¸­
      if (hbs[index].isChoosed) {
        hbs[index].isChoosed = false;
        this.setData({
          hbs,
        });
        this.updateGift();
        return;
      }
      // æœ€å¤š3ä¸ªçº¢åŒ… åŒ…æ‹¬å·²ç»è´­ä¹°çš„
      const hasChoosedNum = this.getChoosedHbsNum(true);
      if (hasChoosedNum >= 3) {
        wx.showToast({
          title: "æœ€å¤šåªèƒ½é€‰æ‹©ä¸‰ä¸ªçº¢åŒ…å“¦",
          icon: "none",
        });

        return;
      }
      if (!hbs[index].isChoosed) {
        hbs[index].isChoosed = true;
        this.setData({
          hbs,
        });
        this.updateGift();
      }
    }
  },
  // è·å–çº¢åŒ…åˆ—è¡¨
  getHbs: function () {
    reqGetHbList()
      .then((res) => {
        if (res.success) {
          console.log("***çº¢åŒ…åˆ—è¡¨***");
          console.log(res);
          const tmpLen = res.data.list.length;
          const tmpHbs = [];
          let tmpNum = -1;
          let tmpState;
          let tmpIsOpen;
          let tmpIsBuyed;
          let tmpCanBuy;
          let tmpUserId;
          let tmpName;
          let tmpHeadImg;
          for (let i = 0; i < tmpLen; i += 1) {
            if (i < 3) {
              // +1
              tmpNum = i + 1;
            } else if (i < 12) {
              // +2
              tmpNum = i + 2;
            } else if (i < 21) {
              // +3
              tmpNum = i + 3;
            } else {
              // +4
              tmpNum = i + 4;
            }
            tmpIsOpen = false;
            tmpIsBuyed = false;
            tmpCanBuy = false;
            tmpState = res.data.list[i].userId;
            tmpUserId = "";
            tmpName = "";
            tmpHeadImg = "";
            if (tmpState === "0") {
              if (res.data.list[i].userInfo) {
                // æœªæ‰“å¼€å·²è´­ä¹°
                tmpIsBuyed = true;
                tmpUserId = res.data.list[i].userInfo.USER_ID;
                tmpName = res.data.list[i].userInfo.wx_name;
                tmpHeadImg = res.data.list[i].userInfo.avator;
              } else {
                // æœªæ‰“å¼€æœªè´­ä¹°
                tmpCanBuy = true;
              }
            } else if (tmpState === "100") {
              // çº¢åŒ…å·²ç»åœ¨å¤§å±è¢«æ‹†å¼€
              tmpIsOpen = true;
              // ä¸”è¢«äººè´­ä¹°
              if (res.data.list[i].userInfo) {
                tmpIsBuyed = true;
                tmpUserId = res.data.list[i].userInfo.USER_ID;
                tmpName = res.data.list[i].userInfo.wx_name;
                tmpHeadImg = res.data.list[i].userInfo.avator;
              }
            } else {
              // çº¢åŒ…å·²ç»è¢«åˆ«äººè´­ä¹°
              tmpIsBuyed = true;
              tmpUserId = res.data.list[i].userInfo.USER_ID;
              tmpName = res.data.list[i].userInfo.wx_name;
              tmpHeadImg = res.data.list[i].userInfo.avator;
            }
            tmpHbs.push({
              id: res.data.list[i].eggId,
              gold: res.data.list[i].money,
              isOpen: tmpIsOpen,
              isBuyed: tmpIsBuyed,
              canBuy: tmpCanBuy,
              isChoosed: false,
              userId: tmpUserId,
              name: tmpName,
              headImg: tmpHeadImg,
              num: tmpNum,
            });
          }
          baseMoney = parseFloat(res.data.hbqMoney);
          this.setData({
            hbs: tmpHbs,
            gameStatus: 2,
            sort: res.data.sort,
          });
          this.updateGift();
        } else {
          wx.showToast({
            title: "è·å–çº¢åŒ…ä¿¡æ¯å¤±è´¥",
            icon: "none",
          });
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // æ›´æ–°çº¢åŒ…åˆ—è¡¨
  updateHbs: function (cancelLoading) {
    return new Promise((resolve, reject) => {
      reqGetHbList({
        cancelLoading
      }).then((res) => {
        console.log('updateHbs res:', res);
        if (res.success && res.data) {
          console.log("***çº¢åŒ…åˆ—è¡¨***");
          console.log(res);
          if (res.data.finished === "1") {
            console.log("***ç»“æŸé€’å½’***");
            clearInterval(tmpInterval2);
            clearInterval(tmpInterval);
            tmpInterval2 = null;
            tmpInterval = null;
            this.handleGameEnd();
            resolve();
            return;
          }
          const tmpLen = res.data.list.length;
          const tmpHbs = this.data.hbs;
          let tmpNum = -1;
          let tmpState;
          let tmpIsOpen;
          let tmpIsBuyed;
          let tmpCanBuy;
          let tmpUserId;
          let tmpName;
          let tmpHeadImg;
          for (let i = 0; i < tmpLen; i += 1) {
            if (i < 3) {
              // +1
              tmpNum = i + 1;
            } else if (i < 12) {
              // +2
              tmpNum = i + 2;
            } else if (i < 21) {
              // +3
              tmpNum = i + 3;
            } else {
              // +4
              tmpNum = i + 4;
            }
            tmpIsOpen = false;
            tmpIsBuyed = false;
            tmpCanBuy = false;
            tmpState = res.data.list[i].userId;
            tmpUserId = "";
            tmpName = "";
            tmpHeadImg = "";
            if (tmpState === "0") {
              if (res.data.list[i].userInfo) {
                // æœªæ‰“å¼€å·²è´­ä¹°
                tmpIsBuyed = true;
                tmpUserId = res.data.list[i].userInfo.USER_ID;
                tmpName = res.data.list[i].userInfo.wx_name;
                tmpHeadImg = res.data.list[i].userInfo.avator;
              } else {
                // æœªæ‰“å¼€æœªè´­ä¹°
                tmpCanBuy = true;
              }
            } else if (tmpState === "100") {
              tmpIsOpen = true;
              if (res.data.list[i].userInfo) {
                // æ‰“å¼€å·²è´­ä¹°
                tmpIsBuyed = true;
                tmpUserId = res.data.list[i].userInfo.USER_ID;
                tmpName = res.data.list[i].userInfo.wx_name;
                tmpHeadImg = res.data.list[i].userInfo.avator;
              } else {
                // æ‰“å¼€æœªè´­ä¹°
                // ç©ºæ“ä½œ
              }
            }
            if (tmpHbs[i]) {
              tmpHbs[i].isOpen = tmpIsOpen;
              tmpHbs[i].isBuyed = tmpIsBuyed;
              tmpHbs[i].canBuy = tmpCanBuy;
              if (!tmpCanBuy && tmpHbs[i].isChoosed) {
                // é€‰ä¸­çš„çº¢åŒ…å·²ç»ä¸å¯ä»¥è´­ä¹°äº†
                tmpHbs[i].isChoosed = false;
                this.updateGift();
              }
              tmpHbs[i].userId = tmpUserId;
              tmpHbs[i].name = tmpName;
              tmpHbs[i].headImg = tmpHeadImg;
              tmpHbs[i].gold = res.data.list[i].money;
            }
          }
          this.setData({
            hbs: tmpHbs,
            sort: res.data.sort,
          });
          console.log(this.data.hbs);
          resolve();
        } else {
          reject();
        }
      });
    });
  },
  // ç»“æŸæ¸¸æˆè·å–æ’è¡Œæ¦œ
  handleGameEnd: function () {
    reqGetHbRankList()
      .then((res2) => {
        console.log("***æ’è¡Œæ¦œ****", res2);
        let tmpResultList = res2.data.list;
        let rankList1 = tmpResultList.slice(0, 3);
        let rankList2 = tmpResultList.slice(3, 10);
        // æ¸¸æˆå·²ç»ç»“æŸ
        this.setData({
          gameStatus: 3,
          rankList1,
          rankList2,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // è·å–é€‰æ‹©çš„çº¢åŒ…æ•°ç›®æ—¶æ›´æ–°ç¥ç¦åˆ—è¡¨
  updateGift: function () {
    const hasChoosedNum = this.getChoosedHbsNum(false);
    this.hbsMapGift(hasChoosedNum);
  },
  // è·å–å·²ç»é€‰æ‹©çš„çº¢åŒ…idæ•°ç»„
  getChoosedHbIds: function () {
    const hbs = this.data.hbs;
    const len = hbs.length;
    const tmpChoosedHbIds = [];
    for (let i = 0; i < len; i += 1) {
      if (hbs[i].isChoosed) {
        tmpChoosedHbIds.push(hbs[i].id);
      }
    }
    return tmpChoosedHbIds;
  },
  // è·å–é€‰å¥½çš„çº¢åŒ…æ•°ç›®
  getChoosedHbsNum: function (isIncludeBuyed) {
    let tmpHbList = this.data.hbs;
    let tmpLen = tmpHbList.length;
    let tmpCount = 0;
    if (isIncludeBuyed) {
      for (let i = 0; i < tmpLen; i += 1) {
        if (
          tmpHbList[i].isChoosed ||
          tmpHbList[i].userId === this.data.userId
        ) {
          tmpCount += 1;
        }
      }
    } else {
      for (let i = 0; i < tmpLen; i += 1) {
        if (tmpHbList[i].isChoosed) {
          tmpCount += 1;
        }
      }
    }
    return tmpCount;
  },
  // æ‰“å¼€æˆ‘çš„çº¢åŒ…é¡µé¢
  toMyHbs: function () {
    this.setData({
      myHbsVisible: true,
    });
  },
  // æ‰“å¼€çº¢åŒ…è´­ä¹°é¡µé¢
  toBuyHbs: function () {
    this.setData({
      myHbsVisible: false,
    });
  },
  // çº¢åŒ…é€‰æ‹©ä¸ªæ•°æ˜ å°„ç¤¼ç‰©
  hbsMapGift: function (choosedNum) {
    const tmpMoney = baseMoney;
    giftList[0].price = tmpMoney.toFixed(2);
    giftList[1].price = (tmpMoney * 2).toFixed(2);
    giftList[2].price = (tmpMoney * 3).toFixed(2);
    if (choosedNum == 3) {
      //é€‰äº†3ä¸ªçº¢åŒ…<--->å¤§ç«ç®­
      this.setData({
        gift_show: giftList[2],
      });
    } else if (choosedNum == 2) {
      //é€‰äº†2ä¸ªçº¢åŒ…<--->ä¸­ç«ç®­
      this.setData({
        gift_show: giftList[1],
      });
    } else {
      //é€‰äº†1ä¸ªçº¢åŒ…æˆ–è€…è¿˜æ²¡æœ‰é€‰çº¢åŒ…<--->å°ç«ç®­
      this.setData({
        gift_show: giftList[0],
      });
    }
  },
  // é€šè¿‡hbIdæŸ¥æ‰¾çº¢åŒ…æ‰€åœ¨æ•°ç»„çš„ç´¢å¼•
  findHbIndexByHbId: function (hbId) {
    let tmpIndex = -1;
    const tmpLen = this.data.hbs.length;
    for (let i = 0; i < tmpLen; i += 1) {
      if (this.data.hbs[i].id === hbId) {
        tmpIndex = i;
        break;
      }
    }
    return tmpIndex;
  },
  showLucky() {
    this.setData({
      luckyAni: "showLuckyAni",
      isLuckyShow: true,
    });
    // 4såæ¶ˆå¤±
    timeoutTask(() => {
      this.setData({
        luckyAni: "hideLuckyAni",
      });
      timeoutTask(() => {
        this.setData({
          isLuckyShow: false,
        });
      }, 100);
    }, 4000);
  },
  // ä¹°çº¢åŒ…
  buy: function () {
    if (this.data.isForbidBuyHbq) {
      wx.showToast({
        title: "å¾ˆé—æ†¾æ‚¨é€‰æ‹©çš„çº¢åŒ…éƒ½è¢«æŠ¢èµ°äº†",
        icon: "none",
      });
      return;
    }
    let choosed;
    this.updateHbs(false)
      .then(() => {
        // è·å–é€‰ä¸­çš„çº¢åŒ…
        choosed = this.getChoosedHbIds();
        console.log("***choosed***");
        console.log(choosed);
        if (choosed.length == 0) {
          wx.showToast({
            title: "è¯·å…ˆé€‰ä¸€ä¸ªçº¢åŒ…",
            icon: "none",
          });

          return;
        }
        if (requestLock) {
          return;
        }
        requestLock = true;
        const chooseIdsStr = choosed.join(",");
        return this.robHb(chooseIdsStr, this.data.sort);
      })
      .then((res) => {
        console.log(res);
        if (!res) {
          return;
        }
        if (res.code === "200") {
          // å–µé’»è¶³æ­£å¸¸æŠ¢çº¢åŒ…
          if (res.resultList.length == 0) {
            // ä¸€ä¸ªçº¢åŒ…éƒ½æ²¡æŠ¢åˆ°
            wx.showModal({
              showCancel: false,
              title: "æ¸©é¦¨æç¤º",
              content: "å¾ˆé—æ†¾æ‚¨é€‰æ‹©çš„çº¢åŒ…éƒ½è¢«æŠ¢èµ°äº†\r\nå·²é€€å›è‡³æ‚¨çš„è´¦æˆ·ä¸­",
              confirmText: "ç¡®å®š",
              success: () => {
                this.updateHbs(false);
              },
            });
          } else {
            // è‡³å°‘æŠ¢åˆ°äº†ä¸€ä¸ª
            if (choosed.length > res.resultList.length) {
              wx.showModal({
                showCancel: false,
                title: "æ¸©é¦¨æç¤º",
                content: "æ­å–œæ‚¨,æˆåŠŸæŠ¢åˆ°äº†" +
                  res.resultList.length +
                  "ä¸ªçº¢åŒ…ï¼ \r\n æœªæŠ¢åˆ°çš„çº¢åŒ…ï¼Œå·²é€€å›è‡³æ‚¨çš„è´¦æˆ·ä¸­",
                confirmText: "ç¡®å®š",
                success: () => {
                  this.updateHbs(false);
                },
              });
            } else {
              wx.showModal({
                showCancel: false,
                title: "æ¸©é¦¨æç¤º",
                content: "æ­å–œæ‚¨,æˆåŠŸæŠ¢åˆ°äº†" + res.resultList.length + "ä¸ªçº¢åŒ…!",
                confirmText: "ç¡®å®š",
                success: () => {
                  this.updateHbs(false);
                },
              });
            }
            console.log(res.resultList);
            let tmpCode = "";
            if (this.data.gift_show.id === 3) {
              tmpCode = 7002;
            } else if (this.data.gift_show.id === 2) {
              tmpCode = 6002;
            } else if (this.data.gift_show.id === 1) {
              tmpCode = 5002;
            }
            let c = JSON.stringify({
              code: tmpCode,
              param: {
                headImg: this.data.headImg,
                nickname: this.data.name,
                wish: wishList[getRandom(0, 4)],
              },
            });
            // å‘é€å¹¿æ’­
            reqSendBroadCast({
              c,
            });
          }
          requestLock = false;
        } else if (res.code === "304") {
          // å–µé’»ä¸è¶³
          if (res.NeedMoney) {
            // è°ƒèµ·æ”¯ä»˜
            return this.recharge(res.NeedMoney);
          } else {
            wx.showToast({
              title: "è´­ä¹°å¤±è´¥",
              icon: "none",
            });
          }
        } else if (res.code === "303") {
          // ç”¨æˆ·ä¿¡æ¯å¼‚å¸¸
          wx.showToast({
            title: "ç”¨æˆ·ä¿¡æ¯å¼‚å¸¸",
            icon: "none",
          });
          requestLock = false;
        } else if (res.code === "302") {
          // ä¸€ä¸ªäººæœ€å¤šæŠ¢åˆ°3ä¸ªçº¢åŒ…
          wx.showToast({
            title: "ä¸€ä¸ªäººæœ€å¤šæŠ¢åˆ°3ä¸ªçº¢åŒ…",
            icon: "none",
          });
          requestLock = false;
        } else if (res.code === "301") {
          // ä¸æ˜¯æœ€æ–°çš„è½®æ¬¡
          wx.showToast({
            title: "ä¸æ˜¯æœ€æ–°çš„è½®æ¬¡",
            icon: "none",
          });
          requestLock = false;
        } else {
          wx.showToast({
            title: "è´­ä¹°å¤±è´¥",
            icon: "none",
          });
          requestLock = false;
        }
      })
      .catch((err) => {
        console.log(err);
        requestLock = false;
      });
  },
  // æŠ¢çº¢åŒ…
  robHb: function (pHbIdStr, pSort) {
    return new Promise((resolve, reject) => {
      wx.showLoading({
        title: "å¥‹åŠ›äº‰æŠ¢ä¸­...",
        mask: true,
      });
      reqBuyHb({
          hbIds: pHbIdStr,
          sort: pSort,
        })
        .then((res) => {
          console.log(res);
          wx.hideLoading();
          resolve(res);
        })
        .catch((err) => {
          console.log(err);
          reject(err);
          wx.hideLoading();
          wx.showToast({
            title: "æŠ¢è´­å¤±è´¥",
            icon: "none",
          });
        });
    });
  },
  // æ”¯ä»˜
  recharge(money) {
    return new Promise((resolve, reject) => {
      reqHbqRecharge({
          userId: this.data.userId,
          openid: this.data.openId,
          money,
        })
        .then((res) => {
          console.log(res);
          wx.showToast({
            title: "å……å€¼æˆåŠŸ",
            icon: "none",
          });
          resolve(res);
          requestLock = false;
          // å……å€¼å®Œæˆ ç­‰å¾…åå°åŠ å—¨å¸é€»è¾‘å®Œæˆå å»ä¹°çº¢åŒ…
          timeoutTask(() => {
            this.buy();
          }, 500);
        })
        .catch((err) => {
          console.log(err);
          reject(err);
        });
    });
  },
  toAgreement: function () {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
});
````

## File: packageGame/pages/hbWall/hbWall.json
````json
{
    "navigationBarTitleText": "çº¢åŒ…å¢™",
    "disableScroll":true
  }
````

## File: packageGame/pages/hbWall/hbWall.wxml
````
<view class="hbWallContainer">
  <view class="bgArea">
    <image src="https://static.hudongmiao.com/joymewMp/hbWall/waitBg.png" class="waitBg" mode="widthFix" wx:if="{{gameStatus === 1}}"></image>
    <image src="https://static.hudongmiao.com/joymewMp/zyz/zyzBg2.png" class="bg" mode="widthFix" wx:if="{{gameStatus === 2}}"></image>
    <image src="https://static.joymew.com/joymewMp/hbWall/rankBg.png" class="bg" mode="widthFix" wx:if="{{gameStatus === 3}}"></image>
    <image src="https://static.joymew.com/joymewMp/hbWall/shine.png" class="shine" mode="widthFix" wx:if="{{gameStatus === 3}}"></image>
    <view class="shade" wx:if="{{gameStatus === 2}}"></view>
  </view>
  <!-- ç­‰å¾…ç•Œé¢ -->
  <view class="waitContainer" wx:if="{{gameStatus === 1}}">
    <view class="ruleBox">
      <view class="title">
        <image src="https://static.hudongmiao.com/joymewMp/hbWall/cs.png" class="csImg" mode="widthFix"></image>
        <view class="text">æ´»åŠ¨è§„åˆ™</view>
      </view>
      <view class="ruleContent">
        <view class="para">1ã€åªéœ€é€å‡ºå¼¹å¹•ç¤¼ç‰©ï¼Œå…è´¹è·å¾—ä¸€æ¬¡å¤ºå–å®ç®±çš„æœºä¼šï¼›</view>
        <view class="para">2ã€é€å‡ºå°ç«ç®­ï¼šè·å–ä¸€ä¸ªçº¢åŒ…;é€å‡ºä¸­ç«ç®­ï¼šè·å–äºŒä¸ªçº¢åŒ…;é€å‡ºå¤§ç«ç®­ï¼šè·å–ä¸‰ä¸ªçº¢åŒ…ã€‚</view>
        <view class="para">3ã€å¦‚æœçº¢åŒ…è¢«æŠ¢å®Œï¼Œæ‚¨æ”¯ä»˜å¾—é‡‘é¢å°†åŸè·¯é€€å›æ‚¨å¾—è´¦æˆ·</view>
      </view>
    </view>
    <view class="startBtn" bindtap="enterGame"></view>
  </view>
  <!-- æ¸¸æˆç•Œé¢ -->
  <view class="gameContainer" wx:if="{{gameStatus === 2}}">
    <view class="wall">
      <view class="hbListWrap">
        <view class="hbItem {{item.isChoosed?'choosed':''}} {{item.isOpen?'reverse':''}}" wx:for="{{hbs}}" data-id="{{item.id}}" wx:key="index" bindtap="chooseHbs">
          <view class="FM">
            <view class="num">{{ item.num}}</view>
            <image src="{{item.headImg}}" class="headImg" wx-if="{{item.isBuyed}}"></image>
          </view>
          <view class="ZM">
            <view class="headImgBox">
              <image src="{{item.headImg}}" class="headImg" wx-if="{{item.isBuyed}}"></image>
              <image src="{{defaultHeadImg}}" class="headImg" wx-if="{{!item.isBuyed}}"></image>
            </view>
            <view class="name" wx-if="{{item.isBuyed}}">{{item.name}}</view>
            <view class="name" wx-if="{{!item.isBuyed}}">è™šä½ä»¥å¾…</view>
            <view class="money">ï¿¥{{item.gold}}</view>
          </view>
        </view>
      </view>
    </view>
    <view class="agreement" bindtap='toAgreement'>é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
    <!-- <view class="csTip">
            <image src="https://static.hudongmiao.com/joymewMp/hbWall/cs.png" class="csImg" mode="widthFix"></image>
            <view class="text">é€å‡ºå°ç«ç®­:è·å–ä¸€ä¸ªçº¢åŒ…;é€å‡ºä¸­ç«ç®­:è·å–äºŒä¸ªçº¢åŒ…;é€å‡ºå¤§ç«ç®­:è·å–ä¸‰ä¸ªçº¢åŒ…ã€‚</view>
        </view> -->
    <!-- ä¸­å¥–ç»“æœ -->
    <view class="luckyWrap {{luckyAni}}" wx:if="{{isLuckyShow}}">
      <view class="tit">ä¸­å¥–å•¦</view>
      <view class="congragulations">
        æ­å–œä½ ! è·å¾—
        <text>{{luckyMoney}}</text>
        å…ƒçº¢åŒ…!
      </view>
      <view class="wechatTip">å¾®ä¿¡å·²å®æ—¶åˆ°è´¦</view>
      <view class="money">{{luckyMoney}}å…ƒ</view>
    </view>
    <view class="giftListWrap">
      <view class="giftItem">
        <view class="fudai"></view>
        <image src="{{gift_show.imgUrl}}" class="giftImg g{{gift_show.id}}"></image>
      </view>
      <view class="money">ï¿¥{{gift_show.price}}</view>
    </view>
    <view class="startBtn">
      <view class="text" bindtap='buy'>è·å–çº¢åŒ…</view>
    </view>
  </view>
  <!-- æ’è¡Œæ¦œç•Œé¢ -->
  <view class="rankContainer" wx:if="{{gameStatus === 3}}">
    <view class="rankTitle">ç¦è¿æ¦œ</view>
    <view class="first" wx:if="{{rankList1[0]}}">
      <view class="num">ç¬¬ä¸€å</view>
      <view class="headImgBox">
        <image src="{{rankList1[0].avator}}" class="headImg"></image>
        <view class="leftDesc"></view>
        <view class="rightDesc"></view>
      </view>
      <view class="name">
        <view class="text">{{rankList1[0].wx_name}}</view>
      </view>
      <view class="money">{{rankList1[0].totalGold}}å…ƒ</view>
    </view>
    <view class="topThree">
      <view class="ttItem" wx:if="{{rankList1[0]}}">
        <image src="https://static.joymew.com/joymewMp/hbWall/gold.png" class="goldImg"></image>
        <view class="headImgBox">
          <image src="{{rankList1[0].avator}}" class="headImg"></image>
        </view>
        <view class="name">{{rankList1[0].wx_name}}</view>
        <view class="money">{{rankList1[0].totalGold}}å…ƒ</view>
      </view>
      <view class="ttItem" wx:if="{{rankList1[1]}}">
        <image src="https://static.joymew.com/joymewMp/hbWall/silver.png" class="silverImg"></image>
        <view class="headImgBox">
          <image src="{{rankList1[1].avator}}" class="headImg"></image>
        </view>
        <view class="name">{{rankList1[1].wx_name}}</view>
        <view class="money">{{rankList1[1].totalGold}}å…ƒ</view>
      </view>
      <view class="ttItem" wx:if="{{rankList1[2]}}">
        <image src="https://static.joymew.com/joymewMp/hbWall/cron.png" class="cronImg"></image>
        <view class="headImgBox">
          <image src="{{rankList1[2].avator}}" class="headImg"></image>
        </view>
        <view class="name">{{rankList1[2].wx_name}}</view>
        <view class="money">{{rankList1[2].totalGold}}å…ƒ</view>
      </view>
    </view>
    <view class="otherLuckyList">
      <view class="item" wx:for="{{rankList2}}" wx:key="index">
        <view class="headImgBox">
          <image src="{{item.avator}}" class="headImg"></image>
          <view class="num">{{ index + 4}}</view>
        </view>
        <view class="name">
          <view class="text">{{item.wx_name}}</view>
        </view>
        <view class="money">{{item.totalGold}}å…ƒ</view>
      </view>
    </view>
  </view>
</view>
````

## File: packageGame/pages/hbWall/hbWall.wxss
````
.hbWallContainer {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}
/* å…¬å…±èƒŒæ™¯åŒºåŸŸ */
.hbWallContainer>.bgArea {
    position: absolute;
    width: 100%;
    height: 100%;
}

.hbWallContainer>.bgArea>.waitBg {
    position: absolute;
    width: 100%;
}

.hbWallContainer>.bgArea>.bg {
    position: absolute;
    width: 105%;
    height: 100%;
    position: absolute;
    left: -2%;
}

.hbWallContainer>.bgArea>.shade {
    width: 100vw;
    height: 100vh;
    opacity: 0.6;
    background-color: #000000;
    position: absolute;
    top: 0;
    left: 0;
}

.hbWallContainer>.bgArea>.shine {
    width: 595rpx;
    height: 691rpx;
    position: absolute;
    left: 78rpx;
    z-index: 1;
}

/* ç­‰å¾…ç•Œé¢ */
.hbWallContainer>.waitContainer {
    position: absolute;
    width: 100%;
    height: 100%;
}

.waitContainer>.ruleBox {
    width: 389rpx;
    height: 689rpx;
    position: absolute;
    top: 307rpx;
    left: 320rpx;
}

.waitContainer>.ruleBox>.title {
    width: 258rpx;
    height: 64rpx;
    background: #C41321;
    border-radius: 32rpx;
    position: absolute;
    left: 20rpx;
    top: -36rpx;
    display: flex;
    align-items: center;
    padding-left: 98rpx;
}

.waitContainer>.ruleBox>.title>.text {
    font-size: 30rpx;
    font-weight: normal;
    color: #7A0A0E;
    text-shadow: 0px 5rpx 5rpx rgba(132, 0, 15, 0.75);
    background: linear-gradient(0deg, #EFD178 0%, #FBF9B8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.waitContainer>.ruleBox>.title>.csImg {
    width: 123rpx;
    height: 103rpx;
    position: absolute;
    left: -27rpx;
    top: -39rpx;
}

.waitContainer>.ruleBox>.ruleContent {
    position: absolute;
    width: 100%;
    top: 65rpx;
}

.waitContainer>.ruleBox>.ruleContent>.para {
    font-size: 28rpx;
    font-weight: 400;
    color: #FFFFDA;
    width: 100%;
    margin: 20rpx 0;
    line-height: 44rpx;
}

.waitContainer>.startBtn {
    width: 390rpx;
    height: 114rpx;
    background-image: url('https://static.joymew.com/joymewMp/zyz/startBtn.png');
    background-size: 100% 100%;
    position: absolute;
    bottom: 0rpx;
    left: 322rpx;
}

/* æ¸¸æˆç•Œé¢ */
.hbWallContainer>.gameContainer {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.gameContainer>.wall {
    position: absolute;
    width: 100%;
    height: 785rpx;
    top: 0rpx;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/wall.png');
    background-size: 100% 100%;
    display: flex;
    justify-content: center;
}

.gameContainer>.wall>.hbListWrap {
    width: 660rpx;
    height: 650rpx;
    position: absolute;
    top: 100rpx;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
}

.hbListWrap>.hbItem {
    position: relative;
    width: 90rpx;
    height: 131rpx;
    cursor: pointer;
    user-select: none;
}
.hbListWrap>.hbItem>.FM,
.hbListWrap>.hbItem>.ZM {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-in-out;
    backface-visibility: hidden;
}

.hbListWrap>.hbItem>.FM {
    transform: rotateY(0deg);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-image: url('https://static.hudongmiao.com/joymewMp/hbWall/hbF.png');
    background-size: 100% 100%;
}

.hbListWrap>.hbItem>.FM>.headImg {
    left: 0;
    width: 58rpx;
    height: 58rpx;
    border-radius: 50%;
    position: absolute;
    top: 25rpx;
}

.hbListWrap>.hbItem>.FM>.num {
    font-size: 28rpx;
    font-weight: bold;
    color: #EDD890;
    position: absolute;
    right: 12rpx;
    top: 6rpx;
}

.hbListWrap>.hbItem>.ZM {
    transform: rotateY(-180deg);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-image: url('https://static.hudongmiao.com/joymewMp/hbWall/hbZ.png');
    background-size: 100% 100%;
}

.hbListWrap>.hbItem.reverse>.FM {
    transform: rotateY(180deg);
}

.hbListWrap>.hbItem.reverse>.ZM {
    transform: rotateY(0deg);
}

.hbListWrap>.hbItem.reverse>.ZM>.headImgBox {
    width: 61rpx;
    height: 61rpx;
    background: #650C15;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.hbListWrap>.hbItem.reverse>.ZM>.headImgBox>.headImg {
    width: 58rpx;
    height: 58rpx;
    border-radius: 50%;
}

.hbListWrap>.hbItem.reverse>.ZM>.name {
    font-size: 18rpx;
    font-weight: bold;
    color: #870F18;
    margin-top: 5rpx;
}

.hbListWrap>.hbItem.reverse>.ZM>.money {
    font-size: 18rpx;
    font-weight: bold;
    color: #870F18;
    margin-top: 5rpx;
}

.hbListWrap>.hbItem.choosed {
    transform: translateY(-40rpx) scale(1.1);
    z-index: 1;
}

.gameContainer>.agreement {
    font-size: 24rpx;
    font-weight: 400;
    color: #ffffff;
    position: absolute;
    bottom: 150rpx;
}

.gameContainer>.csTip {
    position: absolute;
    top: 824rpx;
    width: 584rpx;
    height: 78rpx;
    background: rgba(255, 238, 202, 0);
    border: 2rpx solid #D16239;
    border-radius: 10rpx;
    display: flex;
    align-items: center;
}

.gameContainer>.csTip>.csImg {
    width: 144rpx;
    position: absolute;
    top: -43rpx;
    left: -82rpx;
}

.gameContainer>.csTip>.text {
    font-size: 24rpx;
    font-weight: normal;
    color: #D96744;
    padding-left: 63rpx;
}

.gameContainer>.luckyWrap {
    width: 548rpx;
    height: 607rpx;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: absolute;
    top: 176rpx;
    left: 85rpx;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/result.png');
    background-size: 100% 100%;
}

.gameContainer>.luckyWrap>.tit {
    font-size: 60rpx;
    font-weight: 400;
    color: #D5261D;
    -webkit-text-stroke: 1px #D32F10;
    text-stroke: 1px #D32F10;
    position: absolute;
    top: 85rpx;
}

.gameContainer>.luckyWrap>.congragulations {
    font-size: 30rpx;
    font-weight: 400;
    color: #5E493D;
    position: absolute;
    top: 188rpx;
}

.gameContainer>.luckyWrap>.congragulations>text {
    color: #D5261D;
    font-size: 48rpx;
}

.gameContainer>.luckyWrap>.wechatTip {
    font-size: 24rpx;
    font-weight: normal;
    color: #8C7E77;
    position: absolute;
    top: 251rpx;
}

.gameContainer>.luckyWrap>.money {
    font-size: 36rpx;
    font-weight: 400;
    color: #FBA140;
    position: absolute;
    bottom: 105rpx;
}

.showLuckyAni {
    animation: zoomIn 0.1s linear;
}

.hideLuckyAni {
    animation: zoomOut 0.1s linear;
}

@keyframes zoomIn {
    from {
        opacity: 0;
        -webkit-transform: scale3d(0.3, 0.3, 0.3);
        transform: scale3d(0.3, 0.3, 0.3);
    }

    50% {
        opacity: 1;
    }
}

@keyframes zoomOut {
    from {
        opacity: 1;
    }

    50% {
        opacity: 0;
        -webkit-transform: scale3d(0.3, 0.3, 0.3);
        transform: scale3d(0.3, 0.3, 0.3);
    }

    to {
        opacity: 0;
    }
}

.gameContainer>.giftListWrap {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 826rpx;
}

.gameContainer>.giftListWrap>.giftItem {
    width: 135rpx;
    height: 158rpx;
    position: relative;
    display: flex;
    justify-content: center;
    opacity: 1;
}

.gameContainer>.giftListWrap>.giftItem>.fudai {
    width: 100%;
    height: 100%;
    position: absolute;
    background-image: url('https://static.joymew.com/joymewMp/zyz/fd1.png');
    background-size: 100% 100%;
}

.gameContainer>.giftListWrap>.giftItem>.giftImg {
    position: absolute;
    top: 41rpx;
}

.gameContainer>.giftListWrap>.giftItem>.giftImg.g1 {
    width: 45rpx;
    height: 108rpx;
}

.gameContainer>.giftListWrap>.giftItem>.giftImg.g2 {
    width: 38rpx;
    height: 109rpx;
}

.gameContainer>.giftListWrap>.giftItem>.giftImg.g3 {
    width: 43rpx;
    height: 110rpx;
}

.gameContainer>.giftListWrap>.money {
    font-size: 48rpx;
    font-weight: bold;
    color: #EDD890;
    position: relative;
}

.gameContainer>.startBtn {
    width: 390rpx;
    height: 114rpx;
    background-image: url('https://static.joymew.com/joymewMp/zyz/startBtn2.png');
    background-size: 100% 100%;
    position: absolute;
    bottom: 0rpx;
    display: flex;
    justify-content: center;
    align-items: center;
}

.gameContainer>.startBtn>.text {
    position: absolute;
    top: 19rpx;
    font-size: 48rpx;
    font-weight: 400;
    color: #C14532;
    background: linear-gradient(177deg, #FCD58E 0%, #F8A65D 99.31640625%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.hbWallContainer>.myHbs {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.hbWallContainer>.myHbs>.myHbTitle {
    font-size: 38rpx;
    font-weight: normal;
    color: #7A0A0E;
    text-shadow: 0px 5rpx 5rpx rgba(132, 0, 15, 0.75);
    background: linear-gradient(0deg, #EFD178 0%, #FBF9B8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: absolute;
    top: 211rpx;
    letter-spacing: 16rpx;
}

.hbWallContainer>.myHbs>.myHbList {
    display: flex;
    width: 80%;
    position: absolute;
    top: 358rpx;
    justify-content: space-around;
}

.myHbList>.hbItem {
    position: relative;
    width: 90rpx;
    height: 131rpx;
    cursor: pointer;
}

.myHbList>.hbItem>.FM,
.myHbList>.hbItem>.ZM {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-in-out;
    backface-visibility: hidden;
}

.myHbList>.hbItem>.FM {
    transform: rotateY(0deg);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-image: url('https://static.hudongmiao.com/joymewMp/hbWall/hbF.png');
    background-size: 100% 100%;
}

.myHbList>.hbItem>.FM>.num {
    font-size: 28rpx;
    font-weight: bold;
    color: #EDD890;
    position: absolute;
    right: 12rpx;
    top: 6rpx;
}

.myHbList>.hbItem>.ZM {
    transform: rotateY(-180deg);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-image: url('https://static.hudongmiao.com/joymewMp/hbWall/hbZ.png');
    background-size: 100% 100%;
    padding-top: 8rpx;
}

.myHbList>.hbItem>.ZM>.headImgBox {
    width: 61rpx;
    height: 61rpx;
    background: #650C15;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.myHbList>.hbItem>.ZM>.headImgBox>.headImg {
    width: 58rpx;
    height: 58rpx;
    border-radius: 50%;
}

.myHbList>.hbItem>.ZM>.name {
    font-size: 18rpx;
    font-weight: bold;
    color: #870F18;
    margin-top: 5rpx;
}

.myHbList>.hbItem>.ZM>.money {
    font-size: 18rpx;
    font-weight: bold;
    color: #870F18;
    margin-top: 5rpx;
}

.myHbList>.hbItem.reverse>.FM {
    transform: rotateY(180deg);
}

.myHbList>.hbItem.reverse>.ZM {
    transform: rotateY(0deg);
}

.myHbList>.hbItem.choosed {
    transform: translate3d(0rpx, -11rpx, 100rpx);
}

.myHbs>.recordList {
    width: 702rpx;
    position: absolute;
    top: 570rpx;
}

.recordList>.recordItem {
    position: relative;
    width: 100%;
    height: 130rpx;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/jx.png');
    background-size: 100% 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-right: 88rpx;
    padding-left: 48rpx;
}

.recordList>.recordItem>.name {
    font-size: 29rpx;
    font-weight: 400;
    color: #FFC683;
}

.recordList>.recordItem>.result {
    font-size: 29rpx;
    font-weight: 400;
    color: #FC2C3D;
    text-shadow: 3rpx 5rpx 9rpx #E13120;
    background: linear-gradient(0deg, #FFFBC6 0%, #FFFFFF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.myHbs>.backBtn {
    width: 390rpx;
    height: 114rpx;
    background-image: url('https://static.joymew.com/joymewMp/zyz/startBtn2.png');
    background-size: 100% 100%;
    position: absolute;
    bottom: 0rpx;
    display: flex;
    justify-content: center;
    align-items: center;
}

.myHbs>.backBtn>.text {
    position: absolute;
    top: 19rpx;
    font-size: 48rpx;
    font-weight: 400;
    color: #C14532;
    background: linear-gradient(177deg, #FCD58E 0%, #F8A65D 99.31640625%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

@keyframes scaleAni {

    0%,
    100% {
        transform: scale(1.1);
    }

    50% {
        transform: scale(1.3);
    }
}

.rankContainer {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.rankContainer>.rankTitle {
    font-size: 62rpx;
    font-weight: normal;
    color: #7A0A0E;
    text-shadow: 0px 5rpx 5rpx rgba(132, 0, 15, 0.75);
    background: linear-gradient(0deg, #EFD178 0%, #FBF9B8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: absolute;
    top: 199rpx;
    letter-spacing: 16rpx;
}

.rankContainer>.first {
    width: 349rpx;
    height: 409rpx;
    position: absolute;
    top: 190rpx;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/firstBg.png');
    background-size: 100% 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.rankContainer>.first>.num {
    font-size: 28rpx;
    font-weight: 400;
    color: #fc2c3d;
    text-shadow: 3rpx 5rpx 9rpx #e13120;
    background: linear-gradient(0deg, #fffbc6 0%, #ffffff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: absolute;
    top: 54rpx;
}

.rankContainer>.first>.headImgBox {
    position: absolute;
    width: 108rpx;
    height: 108rpx;
    background: #fff0ce;
    border: 4rpx solid;
    border-image: linear-gradient(3deg, #d16f39, #fff1ae, #d16f39) 4 4;
    transform: rotate(45deg);
    top: 123rpx;
}

.rankContainer>.first>.headImgBox>.headImg {
    width: 106rpx;
    height: 103rpx;
    position: absolute;
    top: -2rpx;
    left: -1rpx;
}

.rankContainer>.first>.headImgBox>.leftDesc {
    position: absolute;
    width: 36rpx;
    height: 36rpx;
    background: rgba(255, 240, 206, 0);
    border: 4rpx solid;
    border-image: linear-gradient(3deg, #d16f39, #fff1ae, #d16f39) 4 4;
    left: -17rpx;
    top: 86rpx;
}

.rankContainer>.first>.headImgBox>.rightDesc {
    position: absolute;
    width: 36rpx;
    height: 36rpx;
    background: rgba(255, 240, 206, 0);
    border: 4rpx solid;
    border-image: linear-gradient(3deg, #d16f39, #fff1ae, #d16f39) 4 4;
    right: -19rpx;
    top: -21rpx;
}

.rankContainer>.first>.name {
    position: absolute;
    top: 248rpx;
    width: 212rpx;
    height: 88rpx;
    font-size: 30rpx;
    font-weight: 400;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/nameBox.png');
    background-size: 100% 100%;
    color: #ffc683;
    text-shadow: #b53b48 1rpx 0 0, #b53b48 0 1rpx 0, #b53b48 -1rpx 0 0, #b53b48 0 -1rpx 0, #b53b48 2rpx 0 0, #b53b48 0 2rpx 0,
        #b53b48 -2rpx 0 0, #b53b48 0 -2rpx 0, #b53b48 3rpx 0 0, #b53b48 0 3rpx 0, #b53b48 -3rpx 0 0, #b53b48 0 -3rpx 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.rankContainer>.first>.name>.text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.rankContainer>.first>.money {
    font-size: 36rpx;
    font-weight: 400;
    color: #fc2c3d;
    text-shadow: 3rpx 5rpx 9rpx #e13120;
    background: linear-gradient(0deg, #fffbc6 0%, #ffffff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: absolute;
    top: 325rpx;
}

.rankContainer>.topThree {
    width: 702rpx;
    height: 360rpx;
    position: absolute;
    top: 597rpx;
}

.rankContainer>.topThree>.ttItem {
    position: relative;
    width: 100%;
    height: 130rpx;
    background-image: url('https://static.joymew.com/joymewMp/hbWall/jx.png');
    background-size: 100% 100%;
    display: flex;
    align-items: center;
}

.rankContainer>.topThree>.ttItem>.goldImg {
    width: 86rpx;
    height: 75rpx;
    position: absolute;
    left: 59rpx;
}

.rankContainer>.topThree>.ttItem>.silverImg {
    width: 84rpx;
    height: 76rpx;
    position: absolute;
    left: 59rpx;
}

.rankContainer>.topThree>.ttItem>.cronImg {
    width: 83rpx;
    height: 82rpx;
    position: absolute;
    left: 59rpx;
}

.rankContainer>.topThree>.ttItem>.headImgBox {
    width: 83rpx;
    height: 83rpx;
    background: #fff0ce;
    border: 4rpx solid;
    border-image: linear-gradient(3deg, #d16f39, #fff1ae, #d16f39) 4 4;
    position: absolute;
    left: 173rpx;
}

.rankContainer>.topThree>.ttItem>.headImgBox>.headImg {
    width: 79rpx;
    height: 79rpx;
}

.rankContainer>.topThree>.ttItem>.name {
    font-size: 29rpx;
    font-weight: 400;
    color: #ffc683;
    text-shadow: #b53b48 1rpx 0 0, #b53b48 0 1rpx 0, #b53b48 -1rpx 0 0, #b53b48 0 -1rpx 0, #b53b48 2rpx 0 0, #b53b48 0 2rpx 0,
        #b53b48 -2rpx 0 0, #b53b48 0 -2rpx 0, #b53b48 3rpx 0 0, #b53b48 0 3rpx 0, #b53b48 -3rpx 0 0, #b53b48 0 -3rpx 0;
    position: absolute;
    left: 301rpx;
    width: 174rpx;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.rankContainer>.topThree>.ttItem>.money {
    font-size: 29rpx;
    font-weight: 400;
    color: #fc2c3d;
    text-shadow: 3rpx 5rpx 9rpx #e13120;
    background: linear-gradient(0deg, #fffbc6 0%, #ffffff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: absolute;
    left: 491rpx;
    width: 171rpx;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.rankContainer>.otherLuckyList {
    position: absolute;
    top: 1002rpx;
    width: 100%;
    display: flex;
    justify-content: space-around;
}

.rankContainer>.otherLuckyList>.item {
    width: 93rpx;
    flex-direction: column;
    position: relative;
    display: flex;
    align-items: center;
}

.rankContainer>.otherLuckyList>.item>.headImgBox {
    width: 80rpx;
    height: 80rpx;
    border-radius: 50%;
}

.rankContainer>.otherLuckyList>.item>.headImgBox>.headImg {
    width: 100%;
    height: 100%;
    border-radius: 50%;
}

.rankContainer>.otherLuckyList>.item>.headImgBox>.num {
    width: 34rpx;
    height: 34rpx;
    background: #682b1f;
    border-image: linear-gradient(125deg, #b24816, #762e22) 2 2;
    border-radius: 50%;
    font-size: 30rpx;
    font-weight: normal;
    color: #fded9e;
    position: absolute;
    left: -2rpx;
    top: -2rpx;
}

.rankContainer>.otherLuckyList>.item>.name {
    width: 90rpx;
    margin-top: 4rpx;
}

.rankContainer>.otherLuckyList>.item>.name>.text {
    color: #fee4de;
    font-size: 26rpx;
    font-weight: normal;
    background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 90rpx;
    white-space: nowrap;
    text-align: center;
}

.rankContainer>.otherLuckyList>.item>.money {
    font-size: 30rpx;
    font-weight: normal;
    color: #fded9e;
    white-space: nowrap;
}

@media screen and (min-height: 720px) {
    .gameContainer>.wall {
        top: 93rpx;
    }

    .gameContainer>.csTip {
        top: 957rpx;
    }

    .gameContainer>.giftListWrap {
        top: 1086rpx;
    }

    .gameContainer>.dec01 {
        top: 619rpx;
    }
}
````

## File: packageGame/pages/kbx/kbx.json
````json
{
  "navigationBarTitleText": "å¼€å®ç®±",
  "disableScroll": true,
  "usingComponents": {
    "feedbackEntry": "../../../components/feedbackEntry/feedbackEntry"
  }
}
````

## File: packageGame/pages/kbx/kbx.wxml
````
<view class="kbxContainer">
    <!-- ç­‰å¾…ç•Œé¢ -->
    <view class="waitContainer" wx:if="{{gameStatus === 1}}">
        <image src="https://static.hudongmiao.com/joymewMp/img/kbx/kbxWaitBg.png" class="bg"></image>
        <image src="https://static.hudongmiao.com/joymewMp/img/kbx/kbxWaitBx.png" class="kbxWaitBx"></image>
        <view class="tip2">åªéœ€é€å‡ºå¼¹å¹•ç¤¼ç‰©ï¼Œå…è´¹è·å¾—ä¸€æ¬¡å¤ºå–å®ç®±çš„æœºä¼š</view>
        <view class="sendGiftItem item1">é€å‡ºå°å·ç«ç®­ï¼šè·å–ä¸€ä¸ªå®ç®±</view>
        <view class="sendGiftItem item2">é€å‡ºä¸­å·ç«ç®­ï¼šè·å–äºŒä¸ªå®ç®±</view>
        <view class="sendGiftItem item3">é€å‡ºå¤§å·ç«ç®­ï¼šè·å–ä¸‰ä¸ªå®ç®±</view>
        <view class="tip3">ps:å¦‚æœå®ç®±è¢«æŠ¢å®Œï¼Œæ‚¨æ”¯ä»˜å¾—é‡‘é¢å°†åŸè·¯é€€å›æ‚¨å¾—è´¦æˆ·</view>
        <view class="btn" bindtap="enterGame">å¼€å§‹æ¸¸æˆ</view>
    </view>
    <!-- æ¸¸æˆç•Œé¢ -->
    <view class="gameContainer" wx:if="{{gameStatus === 2 && !myBoxesVisible}}">
        <image src="https://static.hudongmiao.com/joymewMp/kbx/bg3-01.png" class="bg"></image>
        <image src="https://static.hudongmiao.com/joymewMp/kbx/title3-01.png" class="title"></image>
        <image src="https://static.hudongmiao.com/joymewMp/kbx/ribbonLeft.png" class="ribbonLeft"></image>
        <image src="https://static.hudongmiao.com/joymewMp/kbx/ribbonRigth.png" class="ribbonRight"></image>
        <view class="bx {{item.isChoosed?'active':''}}" data-id="{{item.id}}" wx:for="{{boxes}}" wx:key="index" style="left:{{item.left}}rpx;top:{{item.top}}rpx" bindtap="chooseBoxes">
            <image src="https://static.hudongmiao.com/joymewMp/kbx/bx3.png" class="bxImg {{item.isBuyed?'buyed':''}}"></image>
            <view class="num">{{item.num}}</view>
        </view>
        <view class="giftListWrap">
            <view class="giftItem">
                <image src="{{gift_show.imgUrl}}" class="giftImg g{{gift_show.id}}"></image>
            </view>
            <view class="money">ï¿¥{{gift_show.price}}</view>
        </view>
        <view class="btn" bindtap='buy'>è·å–å®ç®±</view>
        <view class="myBoxBtn" bindtap="toMyBoxes"></view>
        <view class="agreement" bindtap='toAgreement'>é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
    </view>
    <!-- æˆ‘çš„å®ç®±ç•Œé¢ -->
    <view class="myBoxes" wx:if="{{gameStatus === 2 && myBoxesVisible}}">
        <image src="https://static.hudongmiao.com/joymewMp/kbx/bg4-01.png" class="bg"></image>
        <image src="https://static.hudongmiao.com/joymewMp/kbx/title2-01.png" class="title"></image>
        <view class="myBxList">
            <view class="bx" wx:for="{{luckyBoxes}}" key="index">
                <image src="{{item.open==='0'?'https://static.hudongmiao.com/joymewMp/kbx/bx3.png':'https://static.hudongmiao.com/joymewMp/kbx/bxOpen3.png'}}" class="bxImg"></image>
                <view class="num {{item.open==='0'?'':'active'}}">{{item.num}}</view>
            </view>
        </view>
        <view class="myWinRecord">
            <image src="https://static.hudongmiao.com/joymewMp/kbx/loveIcon.png" class="loveIcon"></image>
            <text>æˆ‘çš„ä¸­å¥–è®°å½•</text>
            <image src="https://static.hudongmiao.com/joymewMp/kbx/loveIcon.png" class="loveIcon"></image>
        </view>
        <view class="winItem item{{index+1}}" wx:for="{{luckyBoxes}}" key="index">
            <view class="bxName">{{item.num}}å·å®ç®±</view>
            <view class="bxStatus">
                {{item.open==='0'?'æœªå¼€å¯':(item.money==='0'?'è°¢è°¢å‚ä¸':item.money)}}
            </view>
        </view>
        <view class="btn" bindtap="toBuyBoxes">è¿”å›</view>
    </view>
    <!-- åé¦ˆå…¥å£ -->
    <feedbackEntry userId="{{userId}}" openId="{{openId}}"></feedbackEntry>
</view>
````

## File: packageGame/pages/kbx/kbx.wxss
````
/* ç­‰å¾…ç•Œé¢ */
.kbxContainer>.waitContainer {
    position: absolute;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease-out;
}

.kbxContainer>.waitContainer>.bg {
    width: 100%;
    height: 100%;
    position: absolute;
}

.kbxContainer>.waitContainer>.kbxWaitBx {
    width: 750rpx;
    height: 780rpx;
    position: absolute;
    top: -102rpx;
    left: 0;
}

.kbxContainer>.waitContainer>.bx {
    width: 536rpx;
    height: 361rpx;
    position: absolute;
    top: 584rpx;
}

.kbxContainer>.waitContainer>.tip2 {
    font-size: 22rpx;
    font-weight: 400;
    color: #FFFFFF;
    position: absolute;
    top: 680rpx;
}

.kbxContainer>.waitContainer>.tip3 {
    font-size: 24rpx;
    font-weight: 400;
    color: #FEFEFE;
    position: absolute;
    top: 1009rpx;
}

.kbxContainer>.waitContainer>.sendGiftItem {
    width: 618rpx;
    height: 70rpx;
    border-radius: 8rpx;
    position: absolute;
    font-size: 28rpx;
    font-weight: 400;
    color: #FFFFFF;
    text-align: center;
    line-height: 70rpx;
}

.kbxContainer>.waitContainer>.btn {
    width: 439rpx;
    height: 106rpx;
    background-image: url('https://static.hudongmiao.com/joymewMp/kbx/btn2.png');
    background-size: 100% 100%;
    position: absolute;
    top: 1060rpx;
    text-align: center;
    font-size: 40rpx;
    font-weight: 400;
    color: #FFFFFF;
    text-shadow: 0px 2px 1px #880C0C;
    line-height: 83rpx;
}

.kbxContainer>.waitContainer>.sendGiftItem.item1 {
    top: 737rpx;
    background: #D1000E;
}

.kbxContainer>.waitContainer>.sendGiftItem.item2 {
    top: 820rpx;
    background: #FCAB0F;
}

.kbxContainer>.waitContainer>.sendGiftItem.item3 {
    top: 909rpx;
    background: #63A8FF;
}

/* æ¸¸æˆç•Œé¢ */
.kbxContainer>.gameContainer {
    position: absolute;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease-out;
}

.kbxContainer>.gameContainer>.bg {
    width: 100%;
    height: 100vh;
    position: absolute;
}

.kbxContainer>.gameContainer>.title {
    width: 327rpx;
    height: 89rpx;
    position: absolute;
    top: 43rpx;
}

.kbxContainer>.gameContainer>.ribbonLeft {
    width: 117rpx;
    height: 124rpx;
    position: absolute;
    left: 51rpx;
    top: 225rpx;
}

.kbxContainer>.gameContainer>.ribbonRight {
    width: 117rpx;
    height: 124rpx;
    position: absolute;
    right: 51rpx;
    top: 225rpx;
}

.kbxContainer>.gameContainer>.bx {
    width: 200rpx;
    height: 139rpx;
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s linear;
}

.kbxContainer>.gameContainer>.bx.active {
    animation-name: bounce;
    transform-origin: center bottom;
    animation-duration: 1s;
    transform: scale(1.2);
}

.kbxContainer>.gameContainer>.bx>.bxImg {
    position: absolute;
    width: 100%;
    height: 100%;
}

.kbxContainer>.gameContainer>.bx>.bxImg.buyed {
    filter: grayscale(100%);
}

.kbxContainer>.gameContainer>.bx>.num {
    font-size: 20rpx;
    color: #B97601;
    position: relative;
    left: -21rpx;
    top: -21rpx;
    font-weight: bold;
}

.kbxContainer>.gameContainer>.giftListWrap {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 937rpx;
}

.kbxContainer>.gameContainer>.giftListWrap>.giftItem {
    width: 78rpx;
    height: 92rpx;
    position: relative;
    display: flex;
    justify-content: center;
    opacity: 1;
}

.kbxContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg {
    position: absolute;
}

.kbxContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g1 {
    width: 45rpx;
    height: 92rpx;
}

.kbxContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g2 {
    width: 39rpx;
    height: 92rpx;
}

.kbxContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g3 {
    width: 43rpx;
    height: 92rpx;
}

.kbxContainer>.gameContainer>.giftListWrap>.money {
    font-size: 48rpx;
    font-weight: bold;
    color: #EDD890;
    position: relative;
}

.kbxContainer>.gameContainer>.btn {
    width: 439rpx;
    height: 106rpx;
    background-image: url('https://static.hudongmiao.com/joymewMp/kbx/btn2.png');
    background-size: 100% 100%;
    position: absolute;
    top: 1037rpx;
    text-align: center;
    font-size: 40rpx;
    font-weight: 400;
    color: #FFFFFF;
    text-shadow: 0px 2px 1px #880C0C;
    line-height: 83rpx;
}

.kbxContainer>.gameContainer>.myBoxBtn {
    width: 103rpx;
    height: 103rpx;
    background-image: url('https://static.hudongmiao.com/joymewMp/kbx/myBoxBtn.png');
    background-size: 100% 100%;
    position: absolute;
    right: 43rpx;
    top: 1037rpx;
    /* animation-name: scaleAni;
    animation-duration: 1s;
    animation-timing-function: ease-out;
    animation-iteration-count: infinite; */
    /* transform-origin: top center;
    animation-name: swing;
    animation-duration: 1s;
    animation-iteration-count: infinite; */
}

.kbxContainer>.gameContainer>.agreement {
    font-size: 24rpx;
    font-weight: 400;
    color: #FFD027;
    position: absolute;
    top: 1143rpx;
}

/* æˆ‘çš„å®ç®±ç•Œé¢ */
.kbxContainer>.myBoxes {
    position: absolute;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease-out;
}

.kbxContainer>.myBoxes>.bg {
    position: absolute;
    width: 100%;
    height: 100%;
}

.kbxContainer>.myBoxes>.title {
    position: absolute;
    width: 458rpx;
    height: 244rpx;
    top: 37rpx;
}

.kbxContainer>.myBoxes>.myBxList {
    position: absolute;
    width: 100%;
    display: flex;
    justify-content: center;
    top: 420rpx;
}

.kbxContainer>.myBoxes>.myBxList>.bx {
    width: 200rpx;
    height: 139rpx;
    position: relative;
}

.kbxContainer>.myBoxes>.myBxList>.bx>.bxImg {
    width: 100%;
    height: 100%;
}

.kbxContainer>.myBoxes>.myBxList>.bx>.num {
    font-size: 20rpx;
    color: #B97601;
    position: absolute;
    left: 69rpx;
    font-weight: bold;
    top: 36rpx;
}

.kbxContainer>.myBoxes>.myBxList>.bx>.num.active {
    top: 46rpx;
    left: 62rpx;
}

.kbxContainer>.myBoxes>.myWinRecord {
    position: absolute;
    top: 571rpx;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 36rpx;
    font-weight: 500;
    color: #FFFFFF;
}

.kbxContainer>.myBoxes>.myWinRecord>.loveIcon {
    width: 29rpx;
    height: 25rpx;
    margin: 20rpx;
}

.kbxContainer>.myBoxes>.winItem {
    width: 596rpx;
    height: 114rpx;
    background: rgba(255, 109, 119, 0.3);
    border-radius: 8rpx;
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 60rpx 0 35rpx;
}

.kbxContainer>.myBoxes>.winItem.item1 {
    top: 716rpx;
}

.kbxContainer>.myBoxes>.winItem.item2 {
    top: 858rpx;
}

.kbxContainer>.myBoxes>.winItem.item3 {
    top: 1002rpx;
}


.kbxContainer>.myBoxes>.winItem>.bxName {
    font-size: 28rpx;
    font-weight: 400;
    color: #FFFFFF;
}

.kbxContainer>.myBoxes>.winItem>.bxStatus {
    font-size: 28rpx;
    font-weight: 400;
    color: #FFF32E;
}

.kbxContainer>.myBoxes>.btn {
    width: 439rpx;
    height: 106rpx;
    background-image: url('https://static.hudongmiao.com/joymewMp/kbx/btn2.png');
    background-size: 100% 100%;
    position: absolute;
    bottom: 12rpx;
    text-align: center;
    font-size: 40rpx;
    font-weight: 400;
    color: #FFFFFF;
    text-shadow: 0px 2px 1px #880C0C;
    line-height: 83rpx;
}


@keyframes bounce {

    from,
    20%,
    53%,
    80%,
    to {
        -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
        animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
    }

    40%,
    43% {
        -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
        animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
        -webkit-transform: translate3d(0, -30px, 0);
        transform: translate3d(0, -30px, 0);
    }

    70% {
        -webkit-animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
        animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
        -webkit-transform: translate3d(0, -15px, 0);
        transform: translate3d(0, -15px, 0);
    }

    90% {
        -webkit-transform: translate3d(0, -4px, 0);
        transform: translate3d(0, -4px, 0);
    }
}

@keyframes scaleAni {

    0%,
    100% {
        transform: scale(1.1);
    }

    50% {
        transform: scale(1.3);
    }
}

@keyframes swing {
    20% {
        -webkit-transform: rotate3d(0, 0, 1, 15deg);
        transform: rotate3d(0, 0, 1, 15deg);
    }

    40% {
        -webkit-transform: rotate3d(0, 0, 1, -10deg);
        transform: rotate3d(0, 0, 1, -10deg);
    }

    60% {
        -webkit-transform: rotate3d(0, 0, 1, 5deg);
        transform: rotate3d(0, 0, 1, 5deg);
    }

    80% {
        -webkit-transform: rotate3d(0, 0, 1, -5deg);
        transform: rotate3d(0, 0, 1, -5deg);
    }

    to {
        -webkit-transform: rotate3d(0, 0, 1, 0deg);
        transform: rotate3d(0, 0, 1, 0deg);
    }
}
````

## File: packageGame/pages/luckyWheel/luckyWheel.json
````json
{
  "navigationBarTitleText": "å¹¸è¿å°è½¬ç›˜",
  "usingComponents": {
    "Wait": "./wait/wait",
    "LuckyWheelMain": "./luckyWheelMain/luckyWheelMain",
    "PrizeSheet": "./prizeSheet/prizeSheet"
  },
  "disableScroll": true
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.less
````
.lucky-wheel-main {
  width: 100%;
  height: 100%;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  background-color: rgba(0, 0, 0, 0.3);

  // å¥–é‡‘æ± æ€»é‡‘é¢
  .total-money {
    width: 100%;
    height: 34.615rpx;

    font-size: 34.615rpx;
    font-family: "Noto Sans SC";
    font-weight: 500;
    color: #fff;
    letter-spacing: 0.69.231rpx;
    text-align: center;
  }

  // è½¬ç›˜åŒºåŸŸ
  .wheel-area {
    width: 732.692rpx;
    height: 801.923rpx;
    margin-top: 9px;

    background-image: url("https://static.joymew.com/joymewMp/miniWheel/wheel-bg.png");
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-position: center;

    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: space-evenly;
    align-content: space-between;

    padding: 37.5rpx;

    .prize-item {
      width: 207.692rpx;
      height: 157.692rpx;
      background-repeat: no-repeat;
      background-size: 100% 100%;
      background-image: url("https://static.joymew.com/joymewMp/miniWheel/prize-item-blue.png");
      border-radius: 28.846rpx;

      font-size: 40rpx;
      line-height: 157.692rpx;
      font-family: impactregular;
      font-weight: 700;
      text-align: center;
      color: #fff;
      letter-spacing: 2.385rpx;

      // äº®èµ·æ¥çš„æ–¹å—
      &.bright {
        background-color: linear-gradient(
          180.23deg,
          rgba(255, 255, 255, 0.5) 0.2%,
          rgba(255, 255, 255, 0.25) 99.8%
        );
        box-shadow: 0px 0px 5px 2px rgba(255, 255, 255, 1),
          0px 0px 10px 5px rgba(255, 255, 255, 1),
          inset 0px 0px 20px 10px rgba(255, 255, 255, 0.9);
      }
      // çº¢è‰²æ–¹å—
      &:nth-child(2),
      &:nth-child(11) {
        background-image: url("https://static.joymew.com/joymewMp/miniWheel/prize-item-red.png");
      }

      // ç»¿è‰²æ–¹å—
      &:nth-child(3),
      &:nth-child(8) {
        background-image: url("https://static.joymew.com/joymewMp/miniWheel/prize-item-green.png");
      }

      // é»„è‰²æ–¹å—
      &:nth-child(4),
      &:nth-child(5),
      &:nth-child(10) {
        background-image: url("https://static.joymew.com/joymewMp/miniWheel/prize-item-yellow.png");
      }
    }

    .count-down {
      width: 209.615rpx;
      height: 334.615rpx;

      font-size: 34.615rpx;
      color: #fff;
      letter-spacing: 0.692rpx;
      // line-height: 319.231rpx;
      text-align: center;

      background-image: url("https://static.joymew.com/joymewMp/miniWheel/count-down-bg.png");
      background-repeat: no-repeat;
      background-size: 100% 100%;
      background-position: center;

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      .i {
        font-style: normal;
        font-size: 69.231rpx;
        font-weight: 700;
        letter-spacing: 0.13844.231rpx;
        margin-top: 30.769rpx;
      }
    }
  }

  // å¼¹å¹•ç¤¼ç‰©åŒºåŸŸ
  .gift-area {
    width: 100%;
    height: 173.077rpx;

    display: flex;
    flex-direction: column;
    align-items: center;

    .gift-tip {
      width: 100%;
      height: 26.923rpx;
      line-height: 26.923rpx;

      font-size: 26.923rpx;
      font-family: "Noto Sans SC";
      color: #fff;
      letter-spacing: 0.53.846rpx;
      text-align: center;

      margin-bottom: 23.077rpx;
    }

    .gift-items {
      width: 586.538rpx;
      height: 121.153rpx;

      display: flex;
      justify-content: space-between;
      align-items: center;

      .gift-item {
        width: 155.769rpx;
        height: 100%;
        background-image: url("https://static.joymew.com/joymewMp/miniWheel/gift-bg.png");
        background-repeat: no-repeat;
        background-size: 100% 100%;
        background-position: center;

        position: relative;

        filter: brightness(0.6);
        &.active {
          filter: brightness(1);
        }
        .gift-item-img {
          height: 150rpx;

          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -40%);
        }
      }
    }
  }

  // å……å€¼æœåŠ¡åè®®
  .agreement {
    margin-top: 30rpx;
    font-size: 24rpx;
    font-weight: 400;
    color: #fff;
  }
  // å‘é€ç¤¼ç‰©
  .send-gift-btn {
    width: 394.231rpx;
    height: 130.769rpx;
    margin-top: 16.908rpx;
    line-height: 120rpx;

    font-size: 34.616rpx;
    font-family: "Noto Sans SC";
    font-weight: 500;
    color: #fff;
    letter-spacing: 0.69.231rpx;
    text-align: center;

    background-image: url("https://static.joymew.com/joymewMp/miniWheel/send-gift-btn.png");
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-position: center;

    transition: 0.05s all;

    // ç‚¹å‡»åçš„å˜åŒ–
    &.clicked {
      transform: scale(0.9);
      filter: brightness(0.8);
    }
  }
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.js
````javascript
Component({
  properties: {
    // ä¸­å¥–é‡‘é¢
    prizeMoney: {
      type: String,
      default: "0",
    },
  },
  methods: {
    // ç‚¹å‡»å…³é—­æŒ‰é’®
    close() {
      this.triggerEvent("close");
    },
    // å†ç©ä¸€é
    playAgain() {
      this.triggerEvent("close");
      this.triggerEvent("playAgain");
    },
  },
});
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.wxml
````
<view class="congratulate">
  <!-- æ­å–œä¸­å¥–æç¤º -->
  <view class="congratulate-tip">
    <view class="bg">
      <image class="shine" mode="" src="https://static.joymew.com/joymewMp/miniWheel/shine.png" alt="shine" />
      <image class="red-packet" mode="widthFix" src="https://static.joymew.com/joymewMp/miniWheel/red-packet.png"
        alt="congratulate" />
    </view>
    <view class="info">
      <view class="info-text">æ­å–œè·å¾—!</view>
      <view class="info-money">
        <text>{{prizeMoney}}</text>
        <text>å…ƒ</text>
      </view>
      <view class="info-tip"><text>å¾®ä¿¡é’±åŒ…å·²å®æ—¶åˆ°è´¦</text></view>
      <view class="info-again-btn" bindtap="playAgain">
        <image class="info-again-btn-img" mode="widthFix"
          src="https://static.joymew.com/joymewMp/miniWheel/play-again.png" alt="again" />
      </view>
    </view>
  </view>
  <!-- å…³é—­æŒ‰é’® -->
  <view class="close-btn" bind:tap="close">
    <image class="close-btn-img" mode="widthFix" src="https://static.joymew.com/joymewMp/miniWheel/close.png"
      alt="close" />
  </view>
</view>
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulate/luckyWheelMainCongratulate.wxss
````
.congratulate {
  z-index: 100;
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
}
.congratulate .congratulate-tip {
  margin-top: 5vh;
  width: 100%;
  height: 961.538rpx;
  animation: popUp 0.2s ease-in-out forwards;
}
@keyframes popUp {
  0% {
    transform: scale(0);
  }
  100% {
    transform: scale(1);
  }
}
.congratulate .congratulate-tip .bg {
  position: absolute;
  width: 100%;
  height: 886.538rpx;
  z-index: -1;
}
.congratulate .congratulate-tip .bg .shine {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
.congratulate .congratulate-tip .bg .red-packet {
  position: absolute;
  top: 92.308rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 651.923rpx;
  height: 809.615rpx;
}
.congratulate .congratulate-tip .info {
  margin-top: 498.077rpx;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: start;
  align-items: center;
}
.congratulate .congratulate-tip .info .info-text {
  font-size: 53.846rpx;
  font-family: Noto sans sc;
  font-weight: 700;
  text-align: center;
  color: #FFFFFF;
}
.congratulate .congratulate-tip .info .info-money {
  margin-top: 32.693rpx;
  font-size: 92.308rpx;
  font-weight: bold;
  text-align: center;
  color: #fffebb;
  text-shadow: -0.904rpx 5.692rpx 13.462rpx 0rpx rgba(168, 33, 33, 0.65);
}
.congratulate .congratulate-tip .info .info-tip {
  margin-top: 26.923rpx;
  height: 23.077rpx;
  font-size: 23.077rpx;
  font-family: Noto sans sc;
  font-weight: bold;
  color: #fff;
  text-shadow: -0.904rpx 5.692rpx 13.462rpx 0rpx rgba(168, 33, 33, 0.65);
}
.congratulate .congratulate-tip .info .info-again-btn {
  margin-top: 28.847rpx;
  width: 392.308rpx;
  height: 80.769rpx;
}
.congratulate .congratulate-tip .info .info-again-btn .info-again-btn-img {
  width: 100%;
  height: 100%;
}
.congratulate .close-btn {
  width: 71.154rpx;
  height: 71.154rpx;
}
.congratulate .close-btn .close-btn-img {
  width: 100%;
  height: 100%;
}
````

## File: packageGame/pages/luckyWheel/prizeSheet/prizeSheet.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: packageGame/pages/luckyWheel/wait/wait.js
````javascript
Component({
  methods: {
    startGame() {
      this.triggerEvent("tryEnterGame");
    },
  },
});
````

## File: packageGame/pages/luckyWheel/wait/wait.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: packageGame/pages/nyn/nyn.json
````json
{
  "navigationBarTitleText": "æ‰­ä¸€æ‰­",
  "disableScroll": true,
  "usingComponents": {
    "feedbackEntry": "../../../components/feedbackEntry/feedbackEntry"
  }
}
````

## File: packageGame/pages/nyn/nyn.wxml
````
<view class="nynContainer {{gameStatus === 3 ? 'rankShow' : ''}}">
    <view class="bgArea">
        <image src="https://static.hudongmiao.com/joymewMp/nyn/bg-01.png" class="bg" mode="widthFix"></image>
        <image src="https://static.hudongmiao.com/joymewMp/nyn/star-01.png" class="star"></image>
        <image src="https://static.hudongmiao.com/joymewMp/nyn/dotFall-01.png" class="dotFall"></image>
    </view>
    <!-- ç­‰å¾…ç•Œé¢ -->
    <view class="waitContainer" wx:if="{{gameStatus === 1}}">
        <view class="prizePool">
            <image src="https://static.hudongmiao.com/joymewMp/nyn/marquee.png" class="bg"></image>
            <view class="ct">
                å¥–æ± æ€»é‡‘é¢
                <text class="money">{{poolMoney}}å…ƒ</text>
            </view>
        </view>
        <image src="https://static.hudongmiao.com/joymewMp/nyn/ruleBox-02.png" class="ruleBox"></image>
        <view class="gameBox">
            <image src="https://static.hudongmiao.com/joymewMp/nyn/stageNew2-01.png" class="gameBoxImg"></image>
            <view class="tip">
                è´­ä¹°ä»»æ„ä¸€æ¬¾å¼¹å¹•ç¤¼ç‰©ï¼Œå°†
                <text class="strong">å…è´¹èµ é€</text>
                ä¸€æ¬¡æŠ½å¥–
            </view>
            <view class="startBtn" bindtap="toGame">å¼€å§‹æ¸¸æˆ</view>
            <image src="https://static.hudongmiao.com/joymewMp/nyn/dmGift.png" class="dmGiftTitle"></image>
            <view class="giftListWrap">
                <view class="giftItem">
                    <image src="https://static.hudongmiao.com/joymewMp/nyn/locat.png" class="locatImg"></image>
                    <view class="giftImgList">
                        <view class="giftImg g{{index+1}}" wx:for="{{giftList}}" wx:key="id">
                            <image src="{{item.imgUrl}}"></image>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
    <!-- æ¸¸æˆç•Œé¢ -->
    <view class="gameContainer" wx:if="{{gameStatus === 2}}">
        <view class="rechargeTipWarp {{rechargeTipAni}}" wx:if="{{isRechargeTipShow}}">
            <span class="star">*</span>
            <span>{{user.nickname}}</span>
            å……å€¼äº†
            <span>{{user.money}}å…ƒ</span>
        </view>
        <view class="eggBoxWrap" style="background-image:url('https://static.hudongmiao.com/joymewMp/nyn/eggBox.png')">
            <view class="prizePool">
                å¥–æ± æ€»é‡‘é¢
                <view class="price">{{poolMoney}}å…ƒ</view>
            </view>
            <view class="countDown">å€’è®¡æ—¶: {{countDownNum}}s</view>
            <view class="eggs">
                <view class="eggItem {{item.isFallAni?'fallAni':''}} {{item.aroundAni}}" wx:for="{{eggList}}" wx:key="index" style="width:{{item.width}}rpx;height:{{item.height}}rpx;left:{{item.left}}rpx;bottom:{{item.bottom}}rpx;animation-delay:{{item.fallAniDelay}}s">
                    <view class="egg {{item.isRotateAni?'rotateAni':''}}" style="animation-delay:{{item.rotateAniDelay}}s">
                        <view class="hb">
                            <text>{{item.prize}}</text>
                        </view>
                        <image src="{{item.imgUrl}}" class="eggImg"></image>
                    </view>
                </view>
            </view>
        </view>
        <view class="gameBox">
            <image src="https://static.hudongmiao.com/joymewMp/nyn/stageNew2-01.png" class="gameBoxImg"></image>
            <view class="agreement" bindtap='toAgreement' wx:if="{{giftListShow}}">
                é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹
            </view>
            <view class="giftListWrap" wx:if="{{giftListShow}}">
                <view class="giftItem">
                    <image src="https://static.hudongmiao.com/joymewMp/nyn/locat.png" class="locatImg"></image>
                    <view class="giftImgList">
                        <view class="giftImg g{{index+1}} {{item.isChoosed?'choosed':''}}" wx:for="{{giftList}}" wx:key="id" data-id="{{item.id}}" bindtap='chooseGift'>
                            <image src="https://static.hudongmiao.com/joymewMp/nyn/light2.png" class="lightImage lightAni" wx:if="{{item.isChoosed}}"></image>
                            <image src="{{item.imgUrl}}" class="giftImage"></image>
                        </view>
                    </view>
                </view>
            </view>
            <view class="startBtn" bindtap="handleStartBtnTap">{{btnText}}</view>
            <image src="https://static.hudongmiao.com/joymewMp/nyn/dmGift.png" class="dmGiftTitle" wx:if="{{giftListShow}}"></image>
            <view class="eggExit" wx:if="{{!giftListShow}}">
                <view class="luckyEggWrap">
                    <view class="luckyEgg {{luckyEgg.isFallLuckyAni?'fallLuckyAni':''}}" style="width: {{luckyEgg.width}}rpx;height: {{luckyEgg.height}}rpx;top: {{luckyEgg.top}}rpx;left: {{luckyEgg.left}}rpx;transform: translateY({{luckyEgg.end}}rpx)">
                        <view class="egg {{luckyEgg.isRotateAni?'rotateAni':''}}">
                            <view class="hb">
                                <text>{{luckyEgg.prize}}</text>
                            </view>
                            <image src="{{luckyEgg.imgUrl}}" class="eggImg"></image>
                        </view>
                    </view>
                </view>
            </view>
        </view>
        <view class="resultTipWarp {{resultTipAni}}" wx:if="{{isResultTipShow}}" style="padding-top:{{resultTipContent.ptVal}}rpx">
            <image class="bg" src="{{resultTipContent.resultImgSrc}}"></image>
            <view class="para1">{{resultTipContent.para1}}</view>
            <view class="para2">{{resultTipContent.para2}}</view>
        </view>
    </view>
    <!-- æ¸¸æˆæ’è¡Œæ¦œç•Œé¢ -->
    <view class="rankContainer" wx:if="{{gameStatus === 3}}">
        <view class="topThree">
            <view class="second" wx:if="{{topRankList[1]}}">
                <image src="https://static.hudongmiao.com/joymewMp/nyn/secondRankBox1.png" class="rkSecond" mode="widthFix"></image>
                <image src="https://static.hudongmiao.com/joymewMp/nyn/rkSecondStage-01.png" class="rkSecondStage" mode="widthFix"></image>
                <view class="headImgBox">
                    <image src="{{topRankList[1].headimgurl}}" class="headImg"></image>
                </view>
                <view class="name">{{topRankList[1].nickname}}</view>
                <view class="money">{{topRankList[1].money}}å…ƒ</view>
            </view>
            <view class="first" wx:if="{{topRankList[0]}}">
                <image src="https://static.hudongmiao.com/joymewMp/nyn/firstRankBox1.png" class="rkFirst" mode="widthFix"></image>
                <image src="https://static.hudongmiao.com/joymewMp/nyn/rkFirstStage-01.png" class="rkFirstStage" mode="widthFix"></image>
                <view class="headImgBox">
                    <image src="{{topRankList[0].headimgurl}}" class="headImg"></image>
                </view>
                <view class="name">{{topRankList[0].nickname}}</view>
                <view class="money">{{topRankList[0].money}}å…ƒ</view>
            </view>
            <view class="third" wx:if="{{topRankList[2]}}">
                <image src="https://static.hudongmiao.com/joymewMp/nyn/thirdRankBox1.png" class="rkThird" mode="widthFix"></image>
                <image src="https://static.hudongmiao.com/joymewMp/nyn/rkThirdStage-01.png" class="rkThirdStage" mode="widthFix"></image>
                <view class="headImgBox">
                    <image src="{{topRankList[2].headimgurl}}" class="headImg"></image>
                </view>
                <view class="name">{{topRankList[2].nickname}}</view>
                <view class="money">{{topRankList[2].money}}</view>
            </view>
        </view>
        <view class="other">
            <view class="otherItem" wx:for="{{otherRankList}}" wx:key="index">
                <view class="num">{{ item.num }}</view>
                <image src="{{item.headimgurl}}" class="headImg" mode="widthFix"></image>
                <view class="name">{{item.nickname}}</view>
                <view class="money">{{item.money}}å…ƒ</view>
            </view>
        </view>
    </view>
    <!-- åé¦ˆå…¥å£ -->
    <feedbackEntry userId="{{userId}}" openId="{{openId}}"></feedbackEntry>
</view>
````

## File: packageGame/pages/nyn/nyn.wxss
````
.nynContainer {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

.nynContainer.rankShow {
  overflow: scroll;
}

/* å…¬å…±èƒŒæ™¯åŒºåŸŸ */
.nynContainer>.bgArea {
  width: 100%;
  position: absolute;
}

.nynContainer>.bgArea>.bg {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nynContainer>.bgArea>.star {
  position: absolute;
  width: 100%;
  height: 267rpx;
  top: 0;
}

.nynContainer>.bgArea>.dotFall {
  position: absolute;
  width: 100%;
  height: 663rpx;
  top: 266rpx;
}

/* ç­‰å¾…ç•Œé¢ */
.nynContainer>.waitContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.nynContainer>.waitContainer>.prizePool {
  position: absolute;
  top: 25rpx;
  width: 529rpx;
  height: 119rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1;
}

.nynContainer>.waitContainer>.prizePool>.bg {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.nynContainer>.waitContainer>.prizePool>.ct {
  font-size: 37rpx;
  font-weight: 500;
  color: #FFFFFF;
  text-shadow: 0px 2px 2px rgba(209, 41, 41, 0.5);
  position: absolute;
}

.nynContainer>.waitContainer>.prizePool>.ct>.money {
  font-size: 37rpx;
  font-weight: 500;
  color: #FFEAC2;
  text-shadow: 0px 2px 2px rgba(209, 41, 41, 0.5);
  margin-left: 22rpx;
}

.nynContainer>.waitContainer>.ruleBox {
  width: 658rpx;
  height: 622rpx;
  position: absolute;
  bottom: 516rpx;
}

.nynContainer>.waitContainer>.gameBox {
  width: 769rpx;
  height: 548rpx;
  position: absolute;
  bottom: -33rpx;
  display: flex;
  justify-content: center;
}

.nynContainer>.waitContainer>.gameBox>.gameBoxImg {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.waitContainer>.gameBox>.tip {
  font-size: 27rpx;
  font-weight: 500;
  color: #FFFDF0;
  position: absolute;
  top: 29rpx;
}

.nynContainer>.waitContainer>.gameBox>.tip>.strong {
  color: #F7D063;
}

.nynContainer>.waitContainer>.gameBox>.startBtn {
  font-size: 38rpx;
  color: #FFFFFF;
  width: 282rpx;
  height: 92rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 64rpx;
}

.nynContainer>.waitContainer>.gameBox>.dmGiftTitle {
  position: absolute;
  top: 277rpx;
  width: 358rpx;
  height: 83rpx;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap {
  position: absolute;
  top: 364rpx;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem {
  width: 512rpx;
  height: 136rpx;
  position: relative;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.locatImg {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg {
  height: 133rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g1 {
  left: 16rpx;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g2 {
  left: 203rpx;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g3 {
  left: 389rpx;
}

.nynContainer>.waitContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg>image {
  width: 108rpx;
  height: 108rpx;
}

/* æ¸¸æˆç•Œé¢ */
.nynContainer>.gameContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.nynContainer>.gameContainer>.rechargeTipWarp {
  position: absolute;
  left: 0;
  top: 20rpx;
  padding-left: 30rpx;
  padding-right: 30rpx;
  height: 64rpx;
  border-radius: 32rpx;
  background-color: #cd2bfb;
  color: #ffe590;
  font-size: 24rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;
}

.nynContainer>.gameContainer>.rechargeTipWarp>.star {
  margin-top: 8rpx;
  margin-right: 8rpx;
}

.nynContainer>.gameContainer>.eggBoxWrap>.prizePool {
  width: 474rpx;
  height: 117rpx;
  background-image: linear-gradient(180deg, #FF908A 0%, #FF7876 6%, #E1525D 100%);
  box-shadow: 0rpx 10rpx 3rpx 0rpx rgba(255, 249, 242, 0.31);
  border-radius: 11rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36rpx;
  font-weight: 500;
  color: #FFFFFF;
  text-shadow: 0px 1rpx 1rpx rgba(209, 41, 41, 0.5);
  top: -122rpx;
  position: absolute;
  z-index: 1;
}

.nynContainer>.gameContainer>.eggBoxWrap>.prizePool>.price {
  font-size: 36rpx;
  font-family: PingFang-SC-Heavy, PingFang-SC;
  font-weight: 800;
  color: #FDEAB0;
  text-shadow: 0px 1rpx 1rpx rgba(209, 41, 41, 0.5);
  margin-left: 10rpx;
}

.nynContainer>.gameContainer>.eggBoxWrap>.countDown {
  width: 264rpx;
  height: 66rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/nyn/marquee.png');
  background-size: 100% 100%;
  position: absolute;
  top: 16rpx;
  font-size: 28rpx;
  font-weight: 800;
  color: #FDEAB0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.nynContainer>.gameContainer>.eggBoxWrap {
  position: relative;
  width: 658rpx;
  height: 611rpx;
  margin-top: -11rpx;
  background-size: 100% 100%;
  position: absolute;
  bottom: 453rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs {
  position: absolute;
  width: 557rpx;
  height: 449rpx;
  top: 81rpx;
  left: 51rpx;
  overflow: hidden;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs>.eggItem {
  position: absolute;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs>.eggItem>.egg {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs>.eggItem>.egg>.hb {
  width: 80rpx;
  height: 94rpx;
  position: absolute;
  left: 29rpx;
  top: 18rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/nyn/hb01.png');
  background-size: 100% 100%;
  display: flex;
  justify-content: center;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs>.eggItem>.egg>.hb>text {
  font-size: 24rpx;
  font-weight: bold;
  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.5);
  color: #ffffff;
  position: absolute;
  top: 24rpx;
  white-space: nowrap;
}

.nynContainer>.gameContainer>.eggBoxWrap>.eggs>.eggItem>.egg>.eggImg {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.gameContainer>.gameBox {
  width: 769rpx;
  height: 548rpx;
  position: absolute;
  bottom: -34rpx;
  display: flex;
  justify-content: center;
}

.nynContainer>.gameContainer>.gameBox>.gameBoxImg {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.gameContainer>.gameBox>.tip {
  font-size: 27rpx;
  font-weight: 500;
  color: #FFFDF0;
  position: absolute;
  top: 30rpx;
}
.nynContainer>.gameContainer>.gameBox>.agreement {
  font-size: 24rpx;
  font-weight: 400;
  color: #fff;
  position: absolute;
  top: 30rpx;
}
.nynContainer>.gameContainer>.gameBox>.tip.strong {
  color: #F7D063;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap {
  position: absolute;
  top: 364rpx;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem {
  width: 512rpx;
  height: 136rpx;
  position: relative;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.locatImg {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList {
  position: absolute;
  width: 100%;
  height: 100%;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg {
  height: 115rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  margin-top: 12rpx;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g1 {
  left: 69rpx;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g2 {
  left: 259rpx;
}

.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.g3 {
  left: 444rpx;
}
.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.choosed {
  background-color: #e04b4e;
  border: 2rpx solid #e04b4e;
}
.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg>.giftImage {
  width: 108rpx;
  height: 108rpx;
  position: absolute;
}
.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg>.lightImage {
  width: 200rpx;
  height: 200rpx;
  position: absolute;
}
.nynContainer>.gameContainer>.gameBox>.giftListWrap>.giftItem>.giftImgList>.giftImg.choosed>.giftImage {
  width: 108rpx;
  height: 108rpx;
  transform: scale(1.4);
}

.nynContainer>.gameContainer>.gameBox>.startBtn {
  font-size: 38rpx;
  color: #FFFFFF;
  width: 282rpx;
  height: 92rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 66rpx;
}

.nynContainer>.gameContainer>.gameBox>.dmGiftTitle {
  position: absolute;
  top: 270rpx;
  width: 358rpx;
  height: 83rpx;
}

.nynContainer>.gameContainer>.gameBox>.eggExit {
  width: 223rpx;
  height: 262rpx;
  position: absolute;
  background-image: url('https://static.hudongmiao.com/joymewMp/nyn/chukou.png');
  background-size: 100% 100%;
  top: 253rpx;
  left: 58rpx;
}

.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap {
  position: absolute;
  width: 177rpx;
  height: 213rpx;
  top: 26rpx;
  left: 22rpx;
  overflow: hidden;
}

.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap>.luckyEgg {
  position: absolute;
  left: 41rpx;
  top: -110rpx;
}

.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap>.luckyEgg>.egg {
  position: absolute;
  width: 100%;
  height: 100%;
}
.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap>.luckyEgg>.egg>.hb {
  width: 53rpx;
  height: 65rpx;
  position: absolute;
  left: 40rpx;
  top: 40rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/nyn/hb01.png');
  background-size: 100% 100%;
  display: flex;
  justify-content: center;
}

.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap>.luckyEgg>.egg>.hb>text {
  font-size: 13rpx;
  font-weight: bold;
  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.5);
  color: #FEDA80;
  position: absolute;
  top: 30rpx;
  white-space: nowrap;
}

.nynContainer>.gameContainer>.gameBox>.eggExit>.luckyEggWrap>.luckyEgg>.egg>.eggImg {
  width: 100%;
  height: 100%;
  position: absolute;
}

.nynContainer>.gameContainer>.resultTipWarp {
  width: 586rpx;
  height: 269rpx;
  position: absolute;
  right: 66rpx;
  top: 342rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  padding-left: 157rpx;
  padding-top: 44rpx;
  z-index: 1;
}

.nynContainer>.gameContainer>.resultTipWarp>.bg {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.nynContainer>.gameContainer>.resultTipWarp>.para1 {
  color: #ffffff;
  font-size: 36rpx;
  font-weight: bold;
  position: relative;
}

.nynContainer>.gameContainer>.resultTipWarp>.para2 {
  color: #ffffff;
  font-size: 32rpx;
  font-weight: bold;
  margin-top: 5rpx;
  position: relative;
}

.nynContainer>.gameContainer .rechargeTipAni {
  animation: rechargeTipAni 4s ease-out;
}

.nynContainer>.gameContainer .resultTipAni {
  animation: resultTipAni 4s ease-out;
}

@keyframes rechargeTipAni {
  0% {
    transform: translate3d(-100rpx, 0, 0);
    opacity: 1;
  }

  25% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  75% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  100% {
    transform: translate3d(0, -80rpx, 0);
    opacity: 0;
  }
}
@keyframes resultTipAni {
  0% {
    transform: translate3d(200rpx, 0, 0);
    opacity: 1;
  }

  25% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  75% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  100% {
    transform: translate3d(0, -80rpx, 0);
    opacity: 0;
  }
}

/* æ’è¡Œæ¦œç•Œé¢ */
.nynContainer>.rankContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.nynContainer>.rankContainer>.topThree {
  width: 100%;
  display: flex;
  justify-content: center;
  margin-top: 0rpx;
}

.nynContainer>.rankContainer>.topThree>.second {
  width: 205rpx;
  height: 377rpx;
  position: relative;
}

.nynContainer>.rankContainer>.topThree>.second>.rkSecond {
  width: 205rpx;
  height: 230rpx;
  position: absolute;
  top: 76rpx;
  z-index: 2;

}

.nynContainer>.rankContainer>.topThree>.second>.rkSecondStage {
  width: 204rpx;
  height: 456rpx;
  position: absolute;
  top: 190rpx;
}

.nynContainer>.rankContainer>.topThree>.second>.headImgBox {
  width: 160rpx;
  height: 160rpx;
  border-radius: 50%;
  overflow: hidden;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  left: 23rpx;
  top: 103rpx;
  z-index: 1;
}

.nynContainer>.rankContainer>.topThree>.second>.headImgBox>.headImg {
  width: 135rpx;
  height: 135rpx;
  border-radius: 50%;
  position: absolute;
  top: 14rpx;
}

.nynContainer>.rankContainer>.topThree>.second>.name {
  font-size: 28rpx;
  color: #FFFFFF;
  width: 100%;
  position: absolute;
  top: 359rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.topThree>.second>.money {
  font-size: 28rpx;
  color: #FFF2B4;
  width: 100%;
  position: absolute;
  top: 413rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.topThree>.first {
  width: 257rpx;
  height: 471rpx;
  position: relative;
}

.nynContainer>.rankContainer>.topThree>.first>.rkFirst {
  width: 250rpx;
  height: 267rpx;
  position: absolute;
  z-index: 2;
}

.nynContainer>.rankContainer>.topThree>.first>.rkFirstStage {
  width: 204rpx;
  height: 593rpx;
  position: absolute;
  left: 26rpx;
  top: 139rpx;
}

.nynContainer>.rankContainer>.topThree>.first>.headImgBox {
  width: 183rpx;
  height: 180rpx;
  border-radius: 50%;
  overflow: hidden;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  left: 36rpx;
  top: 17rpx;
  z-index: 1;
}

.nynContainer>.rankContainer>.topThree>.first>.headImgBox>.headImg {
  width: 156rpx;
  height: 156rpx;
  border-radius: 50%;
  position: absolute;
  top: 27rpx;
}

.nynContainer>.rankContainer>.topThree>.first>.name {
  font-size: 28rpx;
  color: #FFFFFF;
  width: 100%;
  position: absolute;
  top: 304rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.topThree>.first>.money {
  font-size: 28rpx;
  color: #FFF2B4;
  width: 100%;
  position: absolute;
  top: 356rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.topThree>.third {
  width: 191rpx;
  height: 367rpx;
  position: relative;
}

.nynContainer>.rankContainer>.topThree>.third>.rkThird {
  width: 188rpx;
  height: 202rpx;
  position: absolute;
  z-index: 2;
  top: 115rpx;
}

.nynContainer>.rankContainer>.topThree>.third>.rkThirdStage {
  width: 192rpx;
  height: 431rpx;
  position: absolute;
  top: 194rpx;
  left: 0rpx;
}

.nynContainer>.rankContainer>.topThree>.third>.headImgBox {
  width: 160rpx;
  height: 160rpx;
  border-radius: 50%;
  overflow: hidden;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  left: 14rpx;
  top: 103rpx;
  z-index: 1;
}

.nynContainer>.rankContainer>.topThree>.third>.headImgBox>.headImg {
  width: 135rpx;
  height: 135rpx;
  border-radius: 50%;
  position: absolute;
  top: 19rpx;
}

.nynContainer>.rankContainer>.topThree>.third>.name {
  font-size: 28rpx;
  color: #FFFFFF;
  width: 100%;
  position: absolute;
  top: 359rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.topThree>.third>.money {
  font-size: 28rpx;
  color: #FFF2B4;
  width: 100%;
  position: absolute;
  top: 413rpx;
  text-align: center;
}

.nynContainer>.rankContainer>.other {
  width: 670rpx;
  height: 978rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/nyn/rkBox-01.png');
  background-size: 100% 100%;
  position: absolute;
  z-index: 2;
  top:430rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 51rpx;
}

.nynContainer>.rankContainer>.other>.otherItem {
  width: 548rpx;
  height: 112rpx;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.5);
  width: 494rpx;
  align-items: center;
  position: relative;
  display: flex;
}

.nynContainer>.rankContainer>.other>.otherItem>.num {
  font-size: 34rpx;
  color: #FFFFFF;
}

.nynContainer>.rankContainer>.other>.otherItem>.headImg {
  width: 64rpx;
  height: 64rpx;
  margin-left: 15rpx;
  border-radius: 50%;
}

.nynContainer>.rankContainer>.other>.otherItem>.name {
  font-size: 30rpx;
  color: #FFFFFF;
  position: absolute;
  left: 154rpx;
}

.nynContainer>.rankContainer>.other>.otherItem>.money {
  font-size: 28rpx;
  color: #FFF2B4;
  position: absolute;
  right: 16rpx;
}

.fallAni {
  animation: fallAni 1s linear backwards;
}

.fallLuckyAni {
  animation: fallLuckyAni 1s linear backwards;
}

.rotateAni {
  animation: rotateAni 1s linear backwards infinite;
}
.lightAni {
  animation: lightAni 1s linear backwards infinite;
}
.aroundAni1 {
  animation: aroundAni1 2s linear infinite;
}

.aroundAni2 {
  animation: aroundAni2 2s linear infinite;
}

.aroundAni3 {
  animation: aroundAni3 2s linear infinite;
}

.aroundAni4 {
  animation: aroundAni4 2s linear infinite;
}

.aroundAni5 {
  animation: aroundAni5 2s linear infinite;
}

.aroundAni6 {
  animation: aroundAni6 2s linear infinite;
}

.aroundAni7 {
  animation: aroundAni7 2s linear infinite;
}

.aroundAni8 {
  animation: aroundAni8 2s linear infinite;
}
@keyframes fallLuckyAni {
  0% {
    transform: translateY(0);
  }

  40% {
    transform: translateY(208rpx);
  }

  50% {
    transform: translateY(150rpx);
  }

  60% {
    transform: translateY(208rpx);
  }

  70% {
    transform: translateY(175rpx);
  }

  80% {
    transform: translateY(208rpx);
  }

  90% {
    transform: translateY(199rpx);
  }

  100% {
    transform: translateY(208rpx);
  }
}

@keyframes fallAni {
  0% {
    transform: translateY(-300%);
    opacity: 0;
  }

  5% {
    transform: translateY(-300%);
  }

  15% {
    transform: translateY(0);
  }

  30% {
    transform: translateY(-100%);
  }

  40% {
    transform: translateY(0%);
  }

  50% {
    transform: translateY(-60%);
  }

  70% {
    transform: translateY(0%);
  }

  80% {
    transform: translateY(-30%);
  }

  90% {
    transform: translateY(0%);
  }

  95% {
    transform: translateY(-14%);
  }

  97% {
    transform: translateY(0%);
  }

  99% {
    transform: translateY(-6%);
  }

  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes rotateAni {
  0% {
    transform: rotate(0);
  }

  100% {
    transform: rotate(360deg);
  }
}

@keyframes aroundAni1 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(299rpx, -150rpx);
  }

  40% {
    transform: translate(100rpx, -300rpx);
  }

  60% {
    transform: translate(-115rpx, -150rpx);
  }

  80% {
    transform: translate(-85rpx, -52rpx);
  }

  100% {
    transform: translate(185rpx, -152rpx);
  }
}

@keyframes aroundAni2 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(158rpx, -222rpx);
  }

  40% {
    transform: translate(60rpx, -18rpx);
  }

  60% {
    transform: translate(-200rpx, -230rpx);
  }

  80% {
    transform: translate(-255rpx, -32rpx);
  }

  100% {
    transform: translate(0rpx, -132rpx);
  }
}

@keyframes aroundAni3 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(-360rpx, -185rpx);
  }

  40% {
    transform: translate(25rpx, -10rpx);
  }

  60% {
    transform: translate(-125rpx, -210rpx);
  }

  80% {
    transform: translate(-392rpx, -100rpx);
  }

  100% {
    transform: translate(-50rpx, 15rpx);
  }
}

@keyframes aroundAni4 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(416rpx, -162rpx);
  }

  40% {
    transform: translate(120rpx, -180rpx);
  }

  60% {
    transform: translate(0rpx, 20rpx);
  }

  80% {
    transform: translate(416rpx, -163rpx);
  }

  100% {
    transform: translate(216rpx, 76rpx);
  }
}

@keyframes aroundAni5 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(292rpx, -108rpx);
  }

  40% {
    transform: translate(30rpx, 132rpx);
  }

  60% {
    transform: translate(-125rpx, -110rpx);
  }

  80% {
    transform: translate(150rpx, -132rpx);
  }

  100% {
    transform: translate(290rpx, 60rpx);
  }
}

@keyframes aroundAni6 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(152rpx, -85rpx);
  }

  40% {
    transform: translate(-263rpx, 105rpx);
  }

  60% {
    transform: translate(152rpx, -50rpx);
  }

  80% {
    transform: translate(-160rpx, -100rpx);
  }

  100% {
    transform: translate(-263rpx, 105rpx);
  }
}

@keyframes aroundAni7 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(-412rpx, -55rpx);
  }

  40% {
    transform: translate(-190rpx, 196rpx);
  }

  60% {
    transform: translate(6rpx, -40rpx);
  }

  80% {
    transform: translate(-300rpx, -70rpx);
  }

  100% {
    transform: translate(-410rpx, 136rpx);
  }
}

@keyframes aroundAni8 {
  0% {
    transform: translate(0rpx, 0rpx);
  }

  20% {
    transform: translate(300rpx, -44rpx);
  }

  40% {
    transform: translate(408rpx, 90rpx);
  }

  60% {
    transform: translate(70rpx, 170rpx);
  }

  80% {
    transform: translate(270rpx, -40rpx);
  }

  100% {
    transform: translate(408rpx, 136rpx);
  }
}
@keyframes lightAni {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
@media screen and (max-height: 580px) {
  .nynContainer>.waitContainer>.ruleBox {
    bottom: 433rpx;
  }
}

@media screen and (min-height: 720px) {
  .nynContainer>.gameContainer>.title {
    top: 65rpx;
  }
}
````

## File: packageGame/pages/zfdm/zfdm.json
````json
{
  "navigationBarTitleText": "äº‰åˆ†å¤ºç§’",
  "disableScroll": true
}
````

## File: packageGame/pages/zfdm/zfdm.wxml
````
<view class="zfdmContainer">
    <image src="https://static.hudongmiao.com/joymewMp/zfdm/gameTitle.png" class="titleImg"></image>
    <view class="ruleEntry" bindtap="openRuleBox">
        <view class="para">è§„åˆ™</view>
        <view class="para">ä»‹ç»</view>
    </view>
    <view class="targetTime">æœ¬æ¬¡æŒ‘æˆ˜{{raceTime}}ç§’</view>
    <view class="bonusTopThree" wx:if="{{bonusList.length >= 3}}">
        <view class="bItem">ç¬¬ä¸€å: {{bonusList[0]}}å…ƒ</view>
        <view class="bItem">ç¬¬äºŒå: {{bonusList[1]}}å…ƒ</view>
        <view class="bItem">ç¬¬ä¸‰å: {{bonusList[2]}}å…ƒ</view>
    </view>
    <view class="timer">{{timestr}}</view>
    <view class="firstFreeTip" wx:if="{{isFree}}">é¦–æ¬¡æŒ‘æˆ˜å…è´¹</view>
    <view class="challengeBtn" bindtap="handleBtnTap" wx:if="{{raceStatus === '0'}}">
        <image src="https://static.hudongmiao.com/joymewMp/zfdm/cBtnText1.png" class="cBtnText1" wx:if="{{!isOnTimer}}"></image>
        <image src="https://static.hudongmiao.com/joymewMp/zfdm/cBtnText2.png" class="cBtnText2" wx:if="{{isOnTimer}}"></image>
    </view>
    <view class="waitTip" wx:if="{{raceStatus === '2'}}">ç­‰å¾…ä¸»æŒäººå¼€å§‹æ¸¸æˆ......</view>
    <view class="danmuArea">
        <view class="rocket {{tipBoxType === 3 ? 'rocketMoveAni' : ''}}">
            <view class="content">
                æˆç»©ä¸º
                <view class="strong">{{resultTime}}</view>
                ç§’ï¼Œå‡»è´¥äº†å…¨åœº
                <view class="strong">{{koPercentVal}}%</view>
                çš„æ¥å®¾ï¼Œå°†è·å¾—
                <view class="strong">{{koBonus}}</view>
                å…ƒçº¢åŒ…!
            </view>
            <view class="name">{{koOtherName}}</view>
            <image src="{{koOtherAvator}}" class="avator"></image>
        </view>
    </view>
    <!-- æ’è¡Œæ¦œ -->
    <view class="rankWrap" wx:if="{{raceStatus === '1'}}">
        <view class="rankBox">
            <view class="rankItem {{(index === 0 || index === 1 || index === 2)?'topThree':''}}" wx:for="{{rankList}}" wx:key="index">
                <view class="rankNum" wx:if="{{index === 0}}">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/firstMedal.png" class="medal"></image>
                </view>
                <view class="rankNum" wx:if="{{index === 1}}">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/secondMedal.png" class="medal"></image>
                </view>
                <view class="rankNum" wx:if="{{index === 2}}">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/thirdMedal.png" class="medal"></image>
                </view>
                <view class="rankNum" wx:if="{{index > 2}}">{{index + 1}}</view>
                <image src="{{item.avator}}" class="avator"></image>
                <view class="nickname">{{item.wx_name}}</view>
                <view class="cTime">{{item.guess_money}}ç§’</view>
                <view class="money">{{item.lottery_money}}å…ƒ</view>
            </view>
        </view>
    </view>
    <view class="shade" wx:if="{{(tipVisible && tipBoxType !== 3) || ruleBoxVisible}}"></view>
    <!-- è§„åˆ™ -->
    <view class="ruleWrap {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{ruleBoxVisible}}">
        <view class="ruleBox">
            <view class="content">
                <view class="para">1.ç­‰å¾…ä¸»æŒäººå‘ŠçŸ¥å¤§å®¶æŒ‘æˆ˜è®¾ç½®çš„æ—¶é—´ï¼Œå¹¶æ­£å¼å¼€å¯æ¸¸æˆ</view>
                <view class="para">2.æ¥å®¾åœ¨æ¸¸æˆå¼€å§‹åä»¥ç§’è¡¨æè¡¨çš„æ–¹å¼ç«æŠ€æ—¶é—´æˆç»©</view>
                <view class="para">3.å¯¹æˆç»©ä¸æ»¡æ„ï¼Œåœ¨æ¸¸æˆæœªç»“æŸå‰ï¼Œå¯ä»¥å¤šæ¬¡æŒ‘æˆ˜</view>
                <view class="para">4.æ¸¸æˆç»“æŸï¼Œè·ç¦»è®¾ç½®æ—¶é—´æœ€æ¥è¿‘çš„äººè·èƒœï¼Œç³»ç»Ÿä¼šæŒ‰ç…§æ’åå‘é€å¥–åŠ±</view>
                <view class="para">5.è¶…è¿‡1æ¬¡æœºä¼šåæ¯æ¬¡éœ€è¦æ”¯ä»˜é‡‘é¢ï¼Œè¯¥é‡‘é¢è‡ªåŠ¨è¿›å…¥çº¢åŒ…å£è¢‹ï¼Œä¸»æŒäººå¦è¡Œæ´¾å‘</view>
            </view>
            <view class="getItBtn" bindtap="getIt">æˆ‘çŸ¥é“äº†</view>
            <image src="https://static.hudongmiao.com/joymewMp/zfdm/closeBtn.png" class="closeBtn" bindtap="getIt"></image>
        </view>
    </view>
    <!-- ç»“æŸæ¸¸æˆå¤±è´¥çš„æç¤ºæ¡† -->
    <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 6}}">
        <view class="overBox fail">
            <image src="https://static.hudongmiao.com/joymewMp/zfdm/tOverFailText.png" class="failTit"></image>
            <view class="overFWrap">
                <view class="overSItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tos3.png" class="keyImg"></image>
                    {{myGradeStr}}
                </view>
                <view class="overSItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tos4.png" class="keyImg"></image>
                    {{myRankStr}}
                </view>
                <view class="overSItem fail">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tof2.png" class="keyImg2"></image>
                </view>
            </view>
        </view>
        <view class="overCheckRank" bindtap="closeTipBox">æŸ¥çœ‹æ’è¡Œ</view>
        <view class="overBack" bindtap="toHome">è¿”å›</view>
    </view>
    <!-- ç»“æŸæ¸¸æˆæˆåŠŸçš„æç¤ºæ¡† -->
    <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 5}}">
        <view class="overBox">
            <view class="overSWrap">
                <view class="overSItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tos3.png" class="keyImg"></image>
                    {{myGradeStr}}
                </view>
                <view class="overSItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tos4.png" class="keyImg"></image>
                    {{myRankStr}}
                </view>
                <view class="overSItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/tos2.png" class="keyImg"></image>
                    <view class="strong">{{myMoney}}å…ƒ</view>
                </view>
            </view>
        </view>
        <view class="overCheckRank" bindtap="closeTipBox">æŸ¥çœ‹æ’è¡Œ</view>
        <view class="overBack" bindtap="toHome">è¿”å›</view>
    </view>
    <!-- æ¸¸æˆè¿‡ç¨‹ä¸­çš„æˆ‘è¢«koçš„æç¤ºæ¡† -->
    <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 4}}">
        <view class="koBoxMe">
            <view class="koller">{{koOtherName}}</view>
            <view class="para1">è¶…è¶Šäº†ä½ çš„æˆç»©</view>
            <view class="para2">
                å‡»è´¥äº†å…¨åœº
                <view class="strong">{{koPercentVal}}</view>
                %çš„æ¥å®¾
            </view>
            <view class="para3">
                å°†è·å¾—
                <view class="strong">{{koBonus}}</view>
                å…ƒçº¢åŒ…
            </view>
        </view>
        <view class="replayBtn" bindtap="replay">æ‹¿ä¸‹TA({{needPrice}}å…ƒ)</view>
        <view class="confirmBtn" bindtap="closeTipBox">å…³é—­</view>
    </view>
    <!-- æ¸¸æˆè¿‡ç¨‹ä¸­çš„å…¶ä»–äººçš„koæç¤ºæ¡† -->
    <!-- <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 3}}">
        <view class="cd">{{cdTxt}}ç§’</view>
        <view class="koBox">
            <view class="boxHeader">
                <image src="https://static.hudongmiao.com/joymewMp/zfdm/otherKo1.png" class="gx"></image>
                <view class="nameBox">{{koOtherName}}</view>
            </view>
            <view class="boxInfo">
                <view class="p1">
                    ä»–çš„æˆç»©ä¸º
                    <view class="strong">{{resultTime}}</view>
                    ç§’
                </view>
                <view class="p2">
                    å‡»è´¥äº†å…¨åœº
                    <view class="strong">{{koPercentVal}}%</view>
                    çš„æ¥å®¾
                </view>
                <view class="p3">
                    å°†è·å¾—
                    <view class="strong">{{koBonus}}</view>
                    å…ƒçº¢åŒ…
                </view>
            </view>
        </view>
        <view class="replayBtn" bindtap="replay">æ‹¿ä¸‹TA({{needPrice}}å…ƒ)</view>
        <view class="confirmBtn" bindtap="closeTipBox">å…³é—­</view>
    </view> -->
    <!-- æ¸¸æˆè¿‡ç¨‹ä¸­çš„æ”¾å¼ƒæŒ‘æˆ˜æç¤ºæ¡† -->
    <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 2}}">
        <view class="tipBox giveup">
            <image class="closeImg" src="https://static.joymew.com/joymewMp/authDialog/closeIcon.png" bindtap="closeTipBox"></image>
            <image src="https://static.hudongmiao.com/joymewMp/zfdm/giveupt3.png" class="t1"></image>
            <view class="cjWrap">
                <view class="cjItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/giveupt2.png" class="keyImg"></image>
                    {{resultTime}}
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/giveupSecond.png" class="unit"></image>
                </view>
                <view class="cjItem">
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/giveupt1.png" class="keyImg2"></image>
                    {{koDis}}
                    <image src="https://static.hudongmiao.com/joymewMp/zfdm/giveupSecond.png" class="unit"></image>
                </view>
            </view>
        </view>
        <view class="replayBtn" bindtap="replay">ä¸ºçˆ±ç»§ç»­ï¼ˆ{{needPrice}}å…ƒï¼‰</view>
        <view class="confirmBtn" bindtap="closeTipBox">ç¡®å®šæ”¾å¼ƒ</view>
    </view>
    <!-- æ¸¸æˆè¿‡ç¨‹ä¸­çš„æŒ‘æˆ˜æˆåŠŸæç¤ºæ¡† -->
    <view class="onTipPopup {{isShowTipBoxAni ? 'showTipBoxAni' : ''}}" wx:if="{{tipVisible && tipBoxType === 1}}">
        <view class="tipBox">
            <image src="{{avator}}" class="avator"></image>
            <view class="tInfo1">
                <view class="tI1Pra1">
                    å‡»è´¥äº†å…¨åœº
                    <view class="strong">{{koPercentVal}}</view>
                    %çš„æ¥å®¾
                </view>
                <view class="tI1Pra2">
                    è¿˜å·®
                    <view class="strong2">{{koDis}}</view>
                    ç§’å°†è·å¾—
                    <view class="strong">{{koBonus}}</view>
                    å…ƒçº¢åŒ…
                </view>
            </view>
            <view class="tInfo2">
                <image src="https://static.hudongmiao.com/joymewMp/zfdm/scoreKey.png" class="keyImg"></image>
                {{resultTime}}
            </view>
            <view class="tInfo3">
                <view class="tI3Pra1">è¯·å®æ—¶æ³¨æ„å½“å‰æ’åå˜åŒ–</view>
                <view class="tI3Pra2">1-8åå¯è·å¾—æ¸¸æˆå¥–åŠ±</view>
            </view>
        </view>
        <view class="replayBtn" bindtap="replay">ä¸ºçˆ±ç»§ç»­æŒ‘æˆ˜ï¼ˆ{{needPrice}}å…ƒï¼‰</view>
        <view class="confirmBtn" bindtap="handleBack">ä¸ºçˆ±æ”¾å¼ƒ</view>
    </view>
    <!-- æ¸¸æˆè¿‡ç¨‹ä¸­çš„æŒ‘æˆ˜å¤±è´¥æç¤ºæ¡† -->
    <!-- <view class="onTipPopup" wx:if="{{tipVisible && tipBoxType === 0}}">
        <view class="tipBox fail">
            <image src="{{avator}}" class="avator"></image>
            <view class="tInfo1 fail">
                <image src="https://static.hudongmiao.com/joymewMp/zfdm/onFailTip2.png" class="keyImg"></image>
                {{resultTime}}
            </view>
            <view class="tInfo2 fail">
                <image src="https://static.hudongmiao.com/joymewMp/zfdm/onFailTip3.png" class="keyImg"></image>
                {{currentRank}}
            </view>
            <view class="tInfo3">
                <view class="tI3Pra1">è¯·å®æ—¶æ³¨æ„å½“å‰æ’åå˜åŒ–</view>
                <view class="tI3Pra2">1-8åå¯è·å¾—æ¸¸æˆå¥–åŠ±</view>
            </view>
        </view>
        <view class="replayBtn" bindtap="replay">å†æ¥ä¸€æ¬¡ï¼ˆ{{needPrice}}å…ƒï¼‰</view>
        <view class="confirmBtn" bindtap="handleBack">è¿”å›</view>
    </view> -->
</view>
````

## File: packageGame/pages/zfdm/zfdm.wxss
````
.zfdmContainer {
  position: absolute;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/bg.png');
  background-size: 100% 100%;
}
.zfdmContainer > .titleImg {
  width: 562rpx;
  height: 378rpx;
}
.zfdmContainer > .ruleEntry {
  width: 108rpx;
  height: 83rpx;
  background-image: url('https://static.joymew.com/joymewMp/zfdm/ruleEntry.png');
  background-size: 100% 100%;
  position: absolute;
  right: 0;
  top: 124rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 1;
}
.ruleEntry > .para {
  font-size: 24rpx;
  color: rgba(255, 255, 255, 0.5);
}
.zfdmContainer > .targetTime {
  width: 482rpx;
  height: 134rpx;
  background-image: url('https://static.joymew.com/joymewMp/zfdm/targetBox.png');
  background-size: 100% 100%;
  display: flex;
  justify-content: center;
  line-height: 122rpx;
  font-size: 42rpx;
  font-weight: 400;
  color: #d83607;
}
.zfdmContainer > .bonusTopThree {
  font-size: 32rpx;
  font-weight: 500;
  color: #ffffff;
  margin-top: 20rpx;
  width: 100%;
  display: flex;
  justify-content: center;
}
.bonusTopThree > .bItem {
  margin-left: 30rpx;
}
.bonusTopThree > .bItem:nth-child(1) {
  margin-left: 0;
}
.zfdmContainer > .timer {
  width: 606rpx;
  height: 182rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/timeBg.png');
  background-size: 100% 100%;
  margin-top: 20rpx;
  font-size: 80rpx;
  font-weight: 500;
  color: #cf2322;
  letter-spacing: 35rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  padding-left: 30rpx;
}

.zfdmContainer > .firstFreeTip {
  margin-top: 20rpx;
  font-size: 32rpx;
  color: #ffffff;
}
.zfdmContainer > .waitTip {
  font-size: 32rpx;
  color: #ffffff;
  margin-top: 32rpx;
}
.zfdmContainer > .challengeBtn {
  width: 250rpx;
  height: 250rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/cBtnNew.png');
  background-size: 100% 100%;
  animation-name: scaleAni;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
  z-index: 1;
}
.challengeBtn > .cBtnText1 {
  width: 102rpx;
  height: 98rpx;
}
.challengeBtn > .cBtnText2 {
  width: 102rpx;
  height: 50rpx;
}
.ruleWrap {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}
.ruleWrap > .ruleBox {
  width: 624rpx;
  height: 796rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/ruleBox.png');
  background-size: 100% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}
.ruleWrap > .ruleBox > .content {
  margin-top: 148rpx;
}

.ruleWrap > .ruleBox > .content > .para {
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
  padding: 0 30rpx;
  margin: 15rpx 0;
}
.ruleWrap > .ruleBox > .getItBtn {
  width: 336rpx;
  height: 72rpx;
  background-color: #fde37a;
  border-radius: 36rpx;
  position: absolute;
  bottom: 62rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 36rpx;
  font-weight: 400;
  color: #e07717;
}
.ruleWrap > .ruleBox > .closeBtn {
  width: 68rpx;
  height: 70rpx;
  position: absolute;
  bottom: -114rpx;
}
.shade {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 1;
}
.onTipPopup {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 1;
}
.onTipPopup > .tipBox {
  width: 710rpx;
  height: 860rpx;
  background-image: url('https://static.joymew.com/joymewMp/zfdm/challengeSuccessBg.png');
  background-size: 100% 100%;
  display: flex;
  align-items: center;
  flex-direction: column;
  position: relative;
  padding-top: 350rpx;
}
.tipBox.fail {
  width: 674rpx;
  height: 876rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/onFailTip1.png');
}
.tipBox > .avator {
  width: 88rpx;
  height: 88rpx;
  position: absolute;
  top: 36rpx;
  border-radius: 50%;
}
.tipBox > .tInfo1 {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  width: 505rpx;
}
.tipBox > .tInfo1 > .tI1Pra1 {
  font-size: 30rpx;
  font-weight: 400;
  color: #333333;
  display: flex;
  align-items: flex-end;
}
.tipBox > .tInfo1 > .tI1Pra1 > .strong {
  font-size: 46rpx;
  color: #fb4a40;
  line-height: 45rpx;
}
.tipBox > .tInfo1 > .tI1Pra2 {
  font-size: 30rpx;
  font-weight: 400;
  color: #333333;
  display: flex;
  align-items: flex-end;
  margin-top: 20rpx;
}
.tipBox > .tInfo1.fail {
  font-size: 63rpx;
  font-weight: 700;
  color: #5f4d8c;
  letter-spacing: 3rpx;
  justify-content: space-between;
  flex-direction: row;
  width: 520rpx;
}
.tipBox > .tInfo1.fail > .keyImg {
  width: 286rpx;
  height: 58rpx;
}
.tipBox > .tInfo1 > .tI1Pra2 > .strong2 {
  color: #fb4a40;
}
.tipBox > .tInfo1 > .tI1Pra2 > .strong {
  font-size: 46rpx;
  color: #fb4a40;
  line-height: 45rpx;
}
.tipBox > .tInfo2 {
  width: 512rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 63rpx;
  font-weight: 700;
  color: #fb4a40;
  margin-top: 60rpx;
}
.tipBox > .tInfo2.fail {
  color: #5f4d8c;
  width: 520rpx;
}
.tipBox > .tInfo2 > .keyImg {
  width: 253rpx;
  height: 51rpx;
}

.tipBox > .tInfo3 {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 345rpx;
  font-size: 30rpx;
  font-weight: 500;
  color: #666666;
  letter-spacing: 2rpx;
  margin-top: 120rpx;
}
.tipBox > .tInfo3 > .tI3Pra1 {
  margin-bottom: 18rpx;
}

.tipBox.giveup {
  width: 622rpx;
  height: 458rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/giveupBox.png');
  padding-top: 75rpx;
}
.tipBox.giveup > .t1 {
  width: 472rpx;
  height: 42rpx;
}
.tipBox.giveup > .cjWrap {
  width: 521rpx;
  height: 224rpx;
  margin-top: 92rpx;
}
.tipBox.giveup > .cjWrap > .cjItem {
  width: 521rpx;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  font-size: 46rpx;
  font-weight: 700;
  color: #fb4a40;
  line-height: 37rpx;
}
.tipBox.giveup > .cjWrap > .cjItem:nth-child(2) {
  margin-top: 40rpx;
}
.tipBox.giveup > .cjWrap > .cjItem > .keyImg {
  width: 228rpx;
  height: 33rpx;
  margin-right: 10rpx;
}
.tipBox.giveup > .cjWrap > .cjItem > .keyImg2 {
  width: 264rpx;
  height: 33rpx;
  margin-right: 10rpx;
}
.tipBox.giveup > .cjWrap > .cjItem > .unit {
  width: 33rpx;
  height: 32rpx;
  margin-left: 10rpx;
}
.tipBox.giveup > .closeImg {
  width: 44rpx;
  height: 44rpx;
  position: absolute;
  top: -24rpx;
  left: 615rpx;
  z-index: 1;
}
.onTipPopup > .replayBtn {
  width: 670rpx;
  height: 104rpx;
  background: #fdf1ac;
  border-radius: 52rpx;
  margin-top: 50rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40rpx;
  font-weight: 700;
  color: #e07717;
  letter-spacing: 2rpx;
  animation-name: scaleAni;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}
.onTipPopup > .confirmBtn {
  font-size: 32rpx;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.4);
  margin-top: 30rpx;
  letter-spacing: 2rpx;
}
.onTipPopup > .koBox {
  width: 686rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 40rpx;
}
.onTipPopup > .cd {
  width: 94rpx;
  height: 46rpx;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 66px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  position: absolute;
  right: 38rpx;
  top: 38rpx;
}
.koBox > .boxHeader {
  width: 439rpx;
  height: 439rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/otherKo2.png');
  background-size: 100% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.koBox > .boxHeader > .gx {
  width: 336rpx;
  height: 239rpx;
}
.koBox > .boxHeader > .nameBox {
  width: 520rpx;
  height: 143rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/otherKo3.png');
  background-size: 100% 100%;
  overflow: hidden;
  text-align: center;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 52rpx;
  font-weight: 500;
  color: #ffffff;
  line-height: 143rpx;
  padding: 0 20rpx;
}
.koBox > .boxInfo {
  width: 686rpx;
  font-size: 56rpx;
  font-weight: 400;
  color: #ffffff;
}
.koBox > .boxInfo > .p1 {
  width: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  margin-top: 20rpx;
}
.koBox > .boxInfo > .p1 > .strong {
  color: #fb4a40;
}
.koBox > .boxInfo > .p2 {
  width: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
.koBox > .boxInfo > .p2 > .strong {
  color: #fb4a40;
}
.koBox > .boxInfo > .p3 {
  margin-top: 50rpx;
  width: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  line-height: 50rpx;
}
.koBox > .boxInfo > .p3 > .strong {
  font-size: 88rpx;
  color: #fb4a40;
}
.onTipPopup > .koBoxMe {
  width: 658rpx;
  height: 647rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/challengeFailBg.png');
  background-size: 100% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 322rpx;
}
.koBoxMe > .koller {
  width: 605rpx;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 56rpx;
  font-weight: 700;
  color: #ffbe23;
  white-space: nowrap;
}
.koBoxMe > .para1 {
  font-size: 30rpx;
  font-weight: 400;
  color: #333333;
  margin-top: 25rpx;
}
.koBoxMe > .para2 {
  font-size: 30.16rpx;
  font-weight: 400;
  color: #333333;
  display: flex;
  align-items: flex-end;
}
.koBoxMe > .para2 > .strong {
  color: #fb4a40;
}
.koBoxMe > .para3 {
  font-size: 30rpx;
  font-weight: 400;
  color: #333333;
  display: flex;
  align-items: flex-end;
  margin-top: 15rpx;
}
.koBoxMe > .para3 > .strong {
  color: #fb4a40;
  font-size: 45rpx;
}
.onTipPopup > .overBox {
  width: 712rpx;
  height: 902rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 40rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/tos1.png');
  background-size: 100% 100%;
}
.onTipPopup > .overBox.fail {
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/tof1.png');
  width: 678rpx;
  height: 952rpx;
}
.overBox.fail > .failTit {
  width: 253rpx;
  height: 74rpx;
  position: absolute;
  top: 158rpx;
}
.overBox > .overSWrap {
  width: 450rpx;
  padding-top: 310rpx;
}
.overBox > .overSWrap > .overSItem {
  width: 450rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 53rpx;
  font-weight: 700;
  color: #fdf8bd;
  margin-bottom: 80rpx;
}
.overBox > .overSWrap > .overSItem > .keyImg {
  width: 240rpx;
  height: 49rpx;
}
.overBox > .overSWrap > .overSItem > .strong {
  font-size: 53rpx;
  font-weight: 700;
  color: #ff3434;
}
.overBox.fail > .overFWrap {
  width: 440rpx;
  padding-top: 378rpx;
}
.overBox.fail > .overFWrap > .overSItem {
  width: 440rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 53rpx;
  font-weight: 700;
  color: #fdf8bd;
  margin-bottom: 45rpx;
}
.overBox.fail > .overFWrap > .overSItem.fail {
  justify-content: center;
}
.overBox.fail > .overFWrap > .overSItem > .keyImg {
  width: 240rpx;
  height: 49rpx;
}
.overBox.fail > .overFWrap > .overSItem > .keyImg2 {
  width: 328rpx;
  height: 48rpx;
}
.onTipPopup > .overCheckRank {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 670rpx;
  height: 104rpx;
  background: #fdf1ac;
  border-radius: 52rpx;
  font-size: 40rpx;
  font-weight: 700;
  color: #e07717;
  letter-spacing: 2rpx;
  margin-bottom: 40rpx;
  animation-name: scaleAni;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}
.onTipPopup > .overBack {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 670rpx;
  height: 104rpx;
  background: #fdf1ac;
  border-radius: 52rpx;
  font-size: 40rpx;
  font-weight: 700;
  color: #e07717;
  letter-spacing: 2rpx;
}
.rankWrap {
  position: absolute;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  background-image: url('https://static.hudongmiao.com/joymewMp/zfdm/rankBg.png');
  background-size: 100% 100%;
  z-index: 1;
}
.rankWrap > .rankBox {
  width: 670rpx;
  height: 1175rpx;
  background: #fef1cf;
  border-radius: 56rpx;
  padding: 30rpx 0;
}
.rankBox > .rankItem {
  display: flex;
  align-items: center;
  width: 100%;
  position: relative;
  margin-bottom: 40rpx;
  padding-left: 5rpx;
}
.rankBox > .rankItem.topThree {
  margin-bottom: 10rpx;
}
.rankBox > .rankItem > .rankNum {
  font-size: 60rpx;
  font-weight: 400;
  color: #a47d18;
  width: 116rpx;
  text-align: center;
}
.rankNum > .medal {
  width: 116rpx;
  height: 132rpx;
}
.rankBox > .rankItem > .avator {
  width: 60rpx;
  height: 60rpx;
  border-radius: 50%;
  margin-left: 5rpx;
}
.rankBox > .rankItem > .nickname {
  width: 198rpx;
  font-size: 28rpx;
  font-weight: 400;
  text-align: left;
  color: #7a2309;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  margin-left: 24rpx;
}
.rankBox > .rankItem > .cTime {
  color: #7d00fd;
  font-size: 28rpx;
  font-weight: 400;
  margin-left: 10rpx;
}
.rankBox > .rankItem > .money {
  font-size: 28rpx;
  font-weight: 400;
  color: #fd0000;
  position: absolute;
  right: 20rpx;
}
.danmuArea {
  position: absolute;
  width: 100%;
  height: 100%;
}
.danmuArea > .rocket {
  width: 500rpx;
  height: 270rpx;
  position: absolute;
  top: 25rpx;
  left: 850rpx;
  display: flex;
  align-items: center;
  z-index: 1;
  transform: translateX(0rpx);
}
.danmuArea > .rocket > .content {
  position: absolute;
  width: 782rpx;
  height: 172rpx;
  left: 0rpx;
  background-image: url('https://static.joymew.com/joymewMp/zfdm/ribbon2.png');
  background-size: 100% 100%;
  padding: 31rpx 0;
  padding-left: 150rpx;
  display: flex;
  align-items: center;
  font-size: 38rpx;
  font-weight: 400;
  color: #ffecea;
  flex-wrap: wrap;
}
.danmuArea > .rocket > .name {
  width: 300rpx;
  height: 60rpx;
  background-image: url('https://static.joymew.com/joymewMp/zfdm/ribbon.png');
  background-size: 100% 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  position: absolute;
  top: 16rpx;
  left: 141rpx;
  font-size: 35rpx;
  font-weight: 400;
  color: #ffffff;
  text-align: center;
  line-height: 53rpx;
  padding: 0 20rpx;
}
.danmuArea > .rocket > .avator {
  width: 185rpx;
  height: 185rpx;
  border-radius: 50%;
  position: absolute;
  left: -73rpx;
  top: 43rpx;
}
.rocket > .content > .strong {
  color: #FFE278;
}
.showTipBoxAni {
  animation: zoomIn 0.3s linear;
}
.rocketMoveAni {
  animation: moveAni 8s linear;
}
@keyframes moveAni {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-2000rpx);
  }
}
@keyframes scaleAni {
  0% {
    transform: scale(0.9);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(0.9);
  }
}
@keyframes zoomIn {
  from {
    opacity: 0;
    -webkit-transform: scale3d(0.3, 0.3, 0.3);
    transform: scale3d(0.3, 0.3, 0.3);
  }

  50% {
    opacity: 1;
  }
}

@media screen and (min-height: 720px) {
  .zfdmContainer > .targetTime {
    margin-top: 30rpx;
  }
  .zfdmContainer > .timer {
    margin-top: 40rpx;
  }
  .zfdmContainer > .firstFreeTip {
    margin-top: 40rpx;
  }
  .zfdmContainer > .challengeBtn {
    margin-top: 40rpx;
  }
}
````

## File: packageGame/pages/zyz/zyz.json
````json
{
  "navigationBarTitleText": "è½¬ä¸€è½¬",
  "disableScroll":true,
  "usingComponents": {
    "feedbackEntry": "../../../components/feedbackEntry/feedbackEntry"
  }
}
````

## File: packageGame/pages/zyz/zyz.wxml
````
<view class="zyzContainer">
    <view class="bgArea">
        <image src="https://static.hudongmiao.com/joymewMp/zyz/zyzBg2.png" class="bg" mode="widthFix" wx:if="{{gameStatus === 1 || gameStatus === 2}}"></image>
        <image src="https://static.hudongmiao.com/joymewMp/zyz/rankBg.png" class="bg" mode="widthFix" wx:if="{{gameStatus === 3}}"></image>
        <view class="shade" wx:if="{{gameStatus === 1 || gameStatus === 2}}"></view>
        <image src="https://static.hudongmiao.com/joymewMp/zyz/title.png" class="title" wx:if="{{gameStatus === 2}}"></image>
    </view>
    <!-- ç­‰å¾…ç•Œé¢ -->
    <view class="waitContainer" wx:if="{{gameStatus === 1}}">
        <!-- å¥–æ± é‡‘é¢ -->
        <view class="totalMoney">
            å¥–æ± æ€»é‡‘é¢: {{poolMoney}}å…ƒ
            <image src="https://static.hudongmiao.com/joymewMp/zyz/coins.png" class="coinsImg"></image>
        </view>
        <view class="ruleBox">
            <image src="https://static.hudongmiao.com/joymewMp/zyz/ruleBox.png" class="ruleBoxImg" mode="widthFix"></image>
            <view class="ruleContent">
                <view class="para">1ã€ä¸»æŒäººç‚¹å‡»å¼€å§‹æŒ‰é’®ï¼Œæ¸¸æˆç«‹å³å¼€å§‹ï¼›</view>
                <view class="para">2ã€æ¸¸æˆæ—¶é•¿150ç§’ï¼Œåœ¨å€’è®¡æ—¶ç»“æŸå‰å•ä¸ªå‚ä¸è€…å¯ä»¥ä¸é™æ¬¡æ•°å‚ä¸æ¸¸æˆï¼›</view>
                <view class="para">3ã€å‚ä¸è€…è´­ä¹°é«˜çº§åˆ«å¼¹å¹•åï¼Œç³»ç»Ÿå°†å…è´¹èµ é€æœºä¼šï¼›</view>
                <view class="para">4ã€æ‰€æœ‰å¥–é¡¹å‡ä¸ºéšæœºäº‹ä»¶ï¼Œå‚ä¸è€…çš„æ¶ˆè´¹å°†è®¡å…¥æ€»å¥–æ± ï¼Œä¸­å¥–è€…çš„å¥–é‡‘å°†ä»å¥–æ± ä¸­æ‰£é™¤ã€‚</view>
            </view>
        </view>
        <view class="giftListWrap">
            <view class="giftItem {{item.isChoosed?'active':''}}" wx:for="{{giftList}}" wx:key="id" data-id="{{item.id}}" bindtap='chooseGift'>
                <view class="fudai"></view>
                <image src="{{item.imgUrl}}" class="giftImg g{{index+1}}"></image>
            </view>
        </view>
        <view class="startBtn" bindtap="toGame"></view>
    </view>
    <!-- æ¸¸æˆç•Œé¢ -->
    <view class="gameContainer" wx:if="{{gameStatus === 2}}">
        <!-- å¥–æ± é‡‘é¢ -->
        <view class="totalMoney">
            å¥–æ± æ€»é‡‘é¢: {{poolMoney}}å…ƒ
            <image src="https://static.hudongmiao.com/joymewMp/zyz/coins.png" class="coinsImg"></image>
        </view>
        <!-- è½¬ç›˜åŒºåŸŸ -->
        <view class="wheelArea">
            <image src="https://static.hudongmiao.com/joymewMp/zyz/wheelBorder.png" class="wheelBorderImg"></image>
            <image src="https://static.hudongmiao.com/joymewMp/zyz/wheel.png" class="wheelImg"></image>
            <image src="https://static.hudongmiao.com/joymewMp/zyz/wheelInner.png" class="wheelInnerImg" style="transform:{{'rotate('+wheelRodateDeg+'deg)'}}"></image>
            <image src="https://static.hudongmiao.com/joymewMp/zyz/wheelBtn.png" class="wheelBtn"></image>
            <view class="countdown">
                <view class="time">{{countDownNum}}</view>
                <view class="timeKey">å€’è®¡æ—¶</view>
            </view>
            <view class="prizeWrap">
                <view class="prizeItem" wx:for="{{prizeItemList}}" wx:key="index">
                    <view class="prizeName">{{item}}</view>
                    <image src="https://static.joymew.com/joymewMp/zyz/hb.png" class="hbImg" wx:if="{{index !== 3 && index !== 8}}"></image>
                </view>
            </view>
        </view>
        <view class="agreement" bindtap='toAgreement'>é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
        <view class="giftListWrap">
            <view class="giftItem {{item.isChoosed?'active':''}}" wx:for="{{giftList}}" wx:key="id" data-id="{{item.id}}" bindtap='chooseGift'>
                <view class="fudai"></view>
                <image src="{{item.imgUrl}}" class="giftImg g{{index+1}}"></image>
            </view>
        </view>
        <view class="startBtn">
            <view class="text" bindtap="recharge">å‘é€ç¤¼ç‰©</view>
        </view>
        <!-- ä¸­å¥–ç»“æœ -->
        <view class="luckyWrap {{luckyAni}}" wx:if="{{isLuckyShow}}">
            <view class="tit">ä¸­å¥–å•¦</view>
            <view class="congragulations">
                æ­å–œä½ ! è·å¾—
                <text>{{luckyMoney}}</text>
                å…ƒçº¢åŒ…!
            </view>
            <view class="wechatTip">å¾®ä¿¡å·²å®æ—¶åˆ°è´¦</view>
            <view class="money">{{luckyMoney}}å…ƒ</view>
        </view>
    </view>
    <!-- æ¸¸æˆæ’è¡Œæ¦œç•Œé¢ -->
    <view class="rankContainer" wx:if="{{gameStatus === 3}}">
        <view class="firstLucky" wx:if="{{topRankList[0]}}">
            <view class="num">
                <view class="text">1</view>
            </view>
            <view class="headImgBox">
                <image src="{{topRankList[0].headimgurl}}" class="headImg"></image>
            </view>
            <view class="name">
                <view class="text">{{topRankList[0].nickname}}</view>
            </view>
            <view class="money">
                <view class="text">{{topRankList[0].money}}å…ƒ</view>
            </view>
        </view>
        <view class="secondLucky" wx:if="{{topRankList[1]}}">
            <view class="num">
                <view class="text">2</view>
            </view>
            <view class="headImgBox">
                <image src="{{topRankList[1].headimgurl}}" class="headImg"></image>
            </view>
            <view class="name">
                <view class="text">{{topRankList[1].nickname}}</view>
            </view>
            <view class="money">
                <view class="text">{{topRankList[1].money}}å…ƒ</view>
            </view>
        </view>
        <view class="thirdLucky" wx:if="{{topRankList[2]}}">
            <view class="num">
                <view class="text">3</view>
            </view>
            <view class="headImgBox">
                <image src="{{topRankList[2].headimgurl}}" class="headImg"></image>
            </view>
            <view class="name">
                <view class="text">{{topRankList[2].nickname}}</view>
            </view>
            <view class="money">
                <view class="text">{{topRankList[2].money}}å…ƒ</view>
            </view>
        </view>
        <view class="otherWrap">
            <view class="otherLuckyList">
                <view class="item" wx:for="{{otherRankList}}" wx:key="index">
                    <view class="left">
                        <view class="num">{{ item.num }}</view>
                        <view class="headImgBox">
                            <image src="{{item.headimgurl}}" class="headImg"></image>
                        </view>
                        <view class="name">{{item.nickname}}</view>
                    </view>
                    <view class="right">{{item.money}}å…ƒ</view>
                </view>
            </view>
        </view>
        <!-- åé¦ˆå…¥å£ -->
        <feedbackEntry userId="{{userId}}" openId="{{openId}}"></feedbackEntry>
    </view>
</view>
````

## File: packageGame/pages/zyz/zyz.wxss
````
.zyzContainer {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow-x: hidden;
  overflow-y: scroll;
}

/* å…¬å…±èƒŒæ™¯åŒºåŸŸ */
.zyzContainer>.bgArea {
  width: 100%;
  position: absolute;
}

.zyzContainer>.bgArea>.bg {
  width: 105%;
  height: 100%;
  position: absolute;
  left: -2%;
}

.zyzContainer>.bgArea>.shade {
  width: 100vw;
  height: 100vh;
  opacity: 0.6;
  background-color: #000000;
  position: absolute;
  top: 0;
  left: 0;
}

.zyzContainer>.bgArea>.title {
  position: absolute;
  width: 101%;
  height: 185rpx;
  top: -10rpx;
  left: -3rpx;
}


/* ç­‰å¾…ç•Œé¢ */
.zyzContainer>.waitContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.zyzContainer>.waitContainer>.totalMoney {
  position: absolute;
  top: 0rpx;
  width: 526rpx;
  height: 70rpx;
  background: #AC0C00;
  box-shadow: 0rpx 3rpx 7rpx 0px #F6544A, 0px 1rpx 3rpx 0rpx rgba(0, 0, 0, 0.35);
  border-radius: 29rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 44rpx;
  color: #FCF5CD;
}

.zyzContainer>.waitContainer>.totalMoney>.coinsImg {
  width: 97rpx;
  height: 80rpx;
  position: absolute;
  left: -59rpx;
}

.zyzContainer>.waitContainer>.ruleBox {
  width: 880rpx;
  height: 740rpx;
  position: absolute;
  top: 186rpx;
  overflow: hidden;
  display: flex;
  justify-content: center;
}

.zyzContainer>.waitContainer>.ruleBox>.ruleBoxImg {
  width: 880rpx;
  top: -65rpx;
  position: absolute;
  left: 70rpx;
}

.zyzContainer>.waitContainer>.ruleBox>.ruleContent {
  font-size: 28rpx;
  font-weight: 400;
  color: #FFFFDA;
  position: absolute;
  width: 475rpx;
  top: 140rpx;
}

.zyzContainer>.waitContainer>.ruleBox>.ruleContent>.para {
  margin: 20rpx 0;
}

.zyzContainer>.waitContainer>.giftListWrap {
  display: flex;
  justify-content: space-around;
  position: absolute;
  top: 860rpx;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem {
  width: 196rpx;
  height: 230rpx;
  position: relative;
  display: flex;
  justify-content: center;
  opacity: 0.3;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem.active {
  opacity: 1;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem>.fudai {
  width: 100%;
  height: 100%;
  position: absolute;
  background-image: url('https://static.joymew.com/joymewMp/zyz/fd1.png');
  background-size: 100% 100%;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem>.giftImg {
  position: absolute;
  top: 61rpx;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem>.giftImg.g1 {
  width: 67rpx;
  height: 157rpx;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem>.giftImg.g2 {
  width: 55rpx;
  height: 159rpx;
}

.zyzContainer>.waitContainer>.giftListWrap>.giftItem>.giftImg.g3 {
  width: 63rpx;
  height: 160rpx;
}

.zyzContainer>.waitContainer>.startBtn {
  width: 390rpx;
  height: 114rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/startBtn.png');
  background-size: 100% 100%;
  position: absolute;
  bottom: 0rpx;
}

/* æ¸¸æˆç•Œé¢ */
.zyzContainer>.gameContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.zyzContainer>.gameContainer>.totalMoney {
  position: absolute;
  top: 32rpx;
  width: 526rpx;
  height: 70rpx;
  background: #AC0C00;
  box-shadow: 0rpx 3rpx 7rpx 0px #F6544A, 0px 1rpx 3rpx 0rpx rgba(0, 0, 0, 0.35);
  border-radius: 29rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 44rpx;
  color: #FCF5CD;
}

.zyzContainer>.gameContainer>.totalMoney>.coinsImg {
  width: 97rpx;
  height: 80rpx;
  position: absolute;
  left: -59rpx;
}

.zyzContainer>.gameContainer>.wheelArea {
  width: 681rpx;
  height: 681rpx;
  position: absolute;
  top: 121rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.gameContainer>.wheelArea>.wheelBorderImg {
  position: absolute;
  width: 100%;
  height: 100%;
}

.zyzContainer>.gameContainer>.wheelArea>.wheelImg {
  position: absolute;
  width: 612rpx;
  height: 612rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.wheelInnerImg {
  position: absolute;
  width: 611rpx;
  height: 611rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.wheelBtn {
  position: absolute;
  width: 248rpx;
  height: 248rpx;
  top: 230rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.countdown {
  width: 205rpx;
  height: 205rpx;
  position: absolute;
  top: 273rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.zyzContainer>.gameContainer>.wheelArea>.countdown>.time {
  font-size: 72rpx;
  font-weight: normal;
  color: #DCA96F;
  text-shadow: #5F191B 1rpx 0 0, #5F191B 0 1rpx 0, #5F191B -1rpx 0 0, #5F191B 0 -1rpx 0, #5F191B 2rpx 0 0, #5F191B 0 2rpx 0, #5F191B -2rpx 0 0, #5F191B 0 -2rpx 0;
}

.zyzContainer>.gameContainer>.wheelArea>.countdown>.timeKey {
  font-size: 48rpx;
  color: #DCA96F;
  margin-top: -14rpx;
  text-shadow: #5F191B 1rpx 0 0, #5F191B 0 1rpx 0, #5F191B -1rpx 0 0, #5F191B 0 -1rpx 0, #5F191B 2rpx 0 0, #5F191B 0 2rpx 0, #5F191B -2rpx 0 0, #5F191B 0 -2rpx 0;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap {
  position: absolute;
  width: 100%;
  height: 100%;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem {
  position: absolute;
  width: 169rpx;
  height: 194rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem>.prizeName {
  font-size: 38rpx;
  font-weight: normal;
  color: #2d0800;
  position: absolute;
  width: 120rpx;
  text-align: center;
  white-space: nowrap;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem>.hbImg {
  width: 90rpx;
  height: 109rpx;
  position: absolute;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(1) {
  left: 237rpx;
  top: 51rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(1)>.prizeName {
  left: -34rpx;
  top: 21rpx;
  transform: rotate(-20deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(1)>.hbImg {
  transform: rotate(-41deg);
  top: 77rpx;
  left: 10rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(2) {
  left: 360rpx;
  top: 51rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(2)>.prizeName {
  left: 7rpx;
  top: 22rpx;
  transform: rotate(11deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(2)>.hbImg {
  top: 80rpx;
  left: -11rpx;
  transform: rotate(-8deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(3) {
  left: 437rpx;
  top: 165rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(3)>.prizeName {
  left: 59rpx;
  top: 5rpx;
  transform: rotate(53deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(3)>.hbImg {
  transform: rotate(33deg);
  top: 13px;
  left: 0px;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(4) {
  left: 535rpx;
  top: 271rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(4)>.prizeName {
  left: -53rpx;
  top: 50rpx;
  transform: rotate(0deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(5) {
  left: 642rpx;
  top: 546rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(5)>.prizeName {
  left: -145rpx;
  top: -78rpx;
  transform: rotate(-58deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(5)>.hbImg {
  transform: rotate(-81deg);
  top: -80px;
  left: -108px;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(6) {
  left: 613rpx;
  top: 653rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(6)>.prizeName {
  left: -247rpx;
  top: -81rpx;
  transform: rotate(-22deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(6)>.hbImg {
  transform: rotate(-46deg);
  top: -184rpx;
  left: -262rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(7) {
  left: 405rpx;
  top: 534rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(7)>.prizeName {
  left: -209rpx;
  top: 30rpx;
  transform: rotate(20deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(7)>.hbImg {
  top: -68rpx;
  left: -168rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(8) {
  left: 176rpx;
  top: 398rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(8)>.prizeName {
  left: -106rpx;
  top: 69rpx;
  transform: rotate(57deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(8)>.hbImg {
  top: -5rpx;
  left: -25rpx;
  transform: rotate(36deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(9) {
  left: 273rpx;
  top: 376rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(9)>.prizeName {
  left: -216rpx;
  top: -66rpx;
  transform: rotate(0deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(10) {
  left: 237rpx;
  top: 238rpx;
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(10)>.prizeName {
  left: -162rpx;
  top: -70rpx;
  transform: rotate(-55deg);
}

.zyzContainer>.gameContainer>.wheelArea>.prizeWrap>.prizeItem:nth-child(10)>.hbImg {
  top: -51rpx;
  left: -81rpx;
  transform: rotate(-76deg);
}

.zyzContainer>.gameContainer>.tip {
  font-size: 24rpx;
  font-weight: normal;
  color: #D87446;
  position: absolute;
  top: 815rpx;
  letter-spacing: 2rpx;
}

.zyzContainer>.gameContainer>.agreement {
  font-size: 24rpx;
  font-weight: 400;
  color: #fff;
  position: absolute;
  bottom: 132rpx;
}

.zyzContainer>.gameContainer>.giftListWrap {
  display: flex;
  justify-content: space-around;
  position: absolute;
  top: 800rpx;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem {
  width: 196rpx;
  height: 230rpx;
  position: relative;
  display: flex;
  justify-content: center;
  opacity: 0.3;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem.active {
  opacity: 1;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem>.fudai {
  width: 100%;
  height: 100%;
  position: absolute;
  background-image: url('https://static.joymew.com/joymewMp/zyz/fd1.png');
  background-size: 100% 100%;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg {
  position: absolute;
  top: 61rpx;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g1 {
  width: 67rpx;
  height: 157rpx;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g2 {
  width: 55rpx;
  height: 159rpx;
}

.zyzContainer>.gameContainer>.giftListWrap>.giftItem>.giftImg.g3 {
  width: 63rpx;
  height: 160rpx;
}

.zyzContainer>.gameContainer>.startBtn {
  width: 390rpx;
  height: 114rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/startBtn2.png');
  background-size: 100% 100%;
  position: absolute;
  bottom: 0rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.gameContainer>.startBtn>.text {
  position: absolute;
  top: 19rpx;
  font-size: 48rpx;
  font-weight: 400;
  color: #C14532;
  background: linear-gradient(177deg, #FCD58E 0%, #F8A65D 99.31640625%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.zyzContainer>.gameContainer>.luckyWrap {
  width: 548rpx;
  height: 607rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: absolute;
  top: 176rpx;
  left: 85rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/prizeResultBox2.png');
  background-size: 100% 100%;
}

.zyzContainer>.gameContainer>.luckyWrap>.tit {
  font-size: 60rpx;
  font-weight: 400;
  color: #D5261D;
  -webkit-text-stroke: 1px #D32F10;
  text-stroke: 1px #D32F10;
  position: absolute;
  top: 85rpx;
}

.zyzContainer>.gameContainer>.luckyWrap>.congragulations {
  font-size: 30rpx;
  font-weight: 400;
  color: #5E493D;
  position: absolute;
  top: 188rpx;
}

.zyzContainer>.gameContainer>.luckyWrap>.congragulations>text {
  color: #D5261D;
  font-size: 48rpx;
}

.zyzContainer>.gameContainer>.luckyWrap>.wechatTip {
  font-size: 24rpx;
  font-weight: normal;
  color: #8C7E77;
  position: absolute;
  top: 251rpx;
}

.zyzContainer>.gameContainer>.luckyWrap>.money {
  font-size: 36rpx;
  font-weight: 400;
  color: #FBA140;
  position: absolute;
  bottom: 105rpx;
}

.showLuckyAni {
  animation: zoomIn 0.1s linear;
}

.hideLuckyAni {
  animation: zoomOut 0.1s linear;
}

@keyframes zoomIn {
  from {
    opacity: 0;
    -webkit-transform: scale3d(0.3, 0.3, 0.3);
    transform: scale3d(0.3, 0.3, 0.3);
  }

  50% {
    opacity: 1;
  }
}

@keyframes zoomOut {
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
    -webkit-transform: scale3d(0.3, 0.3, 0.3);
    transform: scale3d(0.3, 0.3, 0.3);
  }

  to {
    opacity: 0;
  }
}

/* æ’è¡Œæ¦œç•Œé¢ */
.zyzContainer>.rankContainer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.zyzContainer>.rankContainer>.firstLucky {
  display: flex;
  align-items: center;
  flex-direction: column;
  position: absolute;
  width: 221rpx;
  height: 272rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/moneyBg.png');
  background-size: 100% 100%;
  top: 324rpx;
}

.zyzContainer>.rankContainer>.firstLucky>.num {
  width: 120rpx;
  height: 72rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/nt.png');
  background-size: 100% 100%;
  top: -27rpx;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.firstLucky>.num>.text {
  font-size: 31rpx;
  font-weight: normal;
  color: #fded9e;
  -webkit-text-stroke: 2rpx #57161b;
  text-stroke: 2rpx #57161b;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.zyzContainer>.rankContainer>.firstLucky>.headImgBox {
  position: absolute;
  top: 38rpx;
  width: 78rpx;
  height: 78rpx;
  background: #e88f5d;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.firstLucky>.headImgBox>.headImg {
  border-radius: 50%;
  width: 72rpx;
  height: 72rpx;
}

.zyzContainer>.rankContainer>.firstLucky>.name {
  width: 164rpx;
  height: 43rpx;
  position: absolute;
  top: 125rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/nameBg.png');
  background-size: 100% 100%;
  background-position-x: 10rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.firstLucky>.name>.text {
  width: 124rpx;
  font-size: 24rpx;
  font-weight: normal;
  color: #FDE8E2;
  background: linear-gradient(0deg, #DCA96F 0%, #FFFFFF 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  text-align: center;
}

.zyzContainer>.rankContainer>.firstLucky>.money {
  position: absolute;
  top: 177rpx;
}

.zyzContainer>.rankContainer>.firstLucky>.money>.text {
  font-size: 42rpx;
  color: #fee4de;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}


.zyzContainer>.rankContainer>.secondLucky {
  display: flex;
  align-items: center;
  flex-direction: column;
  position: absolute;
  width: 221rpx;
  height: 272rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/moneyBg.png');
  background-size: 100% 100%;
  top: 355rpx;
  left: 30rpx;
}

.zyzContainer>.rankContainer>.secondLucky>.num {
  width: 59rpx;
  height: 66rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/secondMedal.png');
  background-size: 100% 100%;
  top: -27rpx;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.secondLucky>.num>.text {
  font-size: 31rpx;
  font-weight: normal;
  color: #fded9e;
  -webkit-text-stroke: 2rpx #57161b;
  text-stroke: 2rpx #57161b;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.zyzContainer>.rankContainer>.secondLucky>.headImgBox {
  position: absolute;
  top: 38rpx;
  width: 78rpx;
  height: 78rpx;
  background: #e88f5d;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.secondLucky>.headImgBox>.headImg {
  border-radius: 50%;
  width: 72rpx;
  height: 72rpx;
}

.zyzContainer>.rankContainer>.secondLucky>.name {
  width: 164rpx;
  height: 43rpx;
  position: absolute;
  top: 125rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/nameBg.png');
  background-size: 100% 100%;
  background-position-x: 10rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.secondLucky>.name>.text {
  width: 124rpx;
  font-size: 24rpx;
  font-weight: normal;
  color: #FDE8E2;
  background: linear-gradient(0deg, #DCA96F 0%, #FFFFFF 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  text-align: center;
}

.zyzContainer>.rankContainer>.secondLucky>.money {
  position: absolute;
  top: 177rpx;
}

.zyzContainer>.rankContainer>.secondLucky>.money>.text {
  font-size: 42rpx;
  color: #fee4de;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}


.zyzContainer>.rankContainer>.thirdLucky {
  display: flex;
  align-items: center;
  flex-direction: column;
  position: absolute;
  width: 221rpx;
  height: 272rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/moneyBg.png');
  background-size: 100% 100%;
  top: 355rpx;
  right: 30rpx;
}

.zyzContainer>.rankContainer>.thirdLucky>.num {
  width: 59rpx;
  height: 66rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/thirdMedal.png');
  background-size: 100% 100%;
  top: -27rpx;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.thirdLucky>.num>.text {
  font-size: 31rpx;
  font-weight: normal;
  color: #fded9e;
  -webkit-text-stroke: 2rpx #57161b;
  text-stroke: 2rpx #57161b;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.zyzContainer>.rankContainer>.thirdLucky>.headImgBox {
  position: absolute;
  top: 38rpx;
  width: 78rpx;
  height: 78rpx;
  background: #e88f5d;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.thirdLucky>.headImgBox>.headImg {
  border-radius: 50%;
  width: 72rpx;
  height: 72rpx;
}

.zyzContainer>.rankContainer>.thirdLucky>.name {
  width: 164rpx;
  height: 43rpx;
  position: absolute;
  top: 125rpx;
  background-image: url('https://static.joymew.com/joymewMp/zyz/nameBg.png');
  background-size: 100% 100%;
  background-position-x: 10rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zyzContainer>.rankContainer>.thirdLucky>.name>.text {
  width: 124rpx;
  font-size: 24rpx;
  font-weight: normal;
  color: #FDE8E2;
  background: linear-gradient(0deg, #DCA96F 0%, #FFFFFF 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  text-align: center;
}

.zyzContainer>.rankContainer>.thirdLucky>.money {
  position: absolute;
  top: 177rpx;
}

.zyzContainer>.rankContainer>.thirdLucky>.money>.text {
  font-size: 42rpx;
  color: #fee4de;
  background: linear-gradient(0deg, #db9f69 0%, #ffffff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.zyzContainer>.rankContainer .otherWrap {
  position: absolute;
  width: 100%;
  min-height: 600rpx;
  top: 641rpx;
  padding-bottom: 40rpx;
}

.zyzContainer>.rankContainer .otherLuckyList {
  position: absolute;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.zyzContainer>.rankContainer .otherLuckyList>.item {
  width: 660rpx;
  height: 90rpx;
  background: #E8CDBB;
  border-radius: 12rpx;
  display: flex;
  justify-content: space-between;
  padding: 0 40rpx;
  margin: 6rpx 0;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.left {
  display: flex;
  align-items: center;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.left>.num {
  font-size: 36rpx;
  font-weight: bold;
  color: #FCE67D;
  -webkit-text-stroke: 2rpx #62030F;
  text-stroke: 2rpx #62030F;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.left>.headImgBox {
  width: 51rpx;
  height: 50rpx;
  border-radius: 12rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #E69269;
  margin-left: 11rpx;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.left>.headImgBox>.headImg {
  width: 51rpx;
  height: 50rpx;
  border-radius: 12rpx;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.left>.name {
  width: 180rpx;
  font-size: 30rpx;
  font-weight: bold;
  color: #FFFFFF;
  -webkit-text-stroke: 2rpx #62030F;
  text-stroke: 2rpx #62030F;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-left: 16rpx;
}

.zyzContainer>.rankContainer .otherLuckyList>.item>.right {
  width: 100rpx;
  font-size: 33rpx;
  font-weight: bold;
  color: #9D0A20;
  display: flex;
  align-items: center;
}

@media screen and (min-height: 720px) {
  .zyzContainer>.gameContainer>.agreement {
    font-size: 24rpx;
    font-weight: 400;
    color: #fff;
    position: absolute;
    bottom: 240rpx;
  }
  .zyzContainer>.waitContainer>.ruleBox {
    top: 250rpx;
  }

  .zyzContainer>.waitContainer>.giftListWrap {
    top: 967rpx;
  }

  .zyzContainer>.waitContainer>.startBtn {
    bottom: 91rpx;
  }

  .zyzContainer>.gameContainer>.totalMoney {
    top: 53rpx;
  }

  .zyzContainer>.gameContainer>.wheelArea {
    top: 158rpx;
  }

  .zyzContainer>.gameContainer>.tip {
    top: 852rpx;
  }

  .zyzContainer>.gameContainer>.giftListWrap {
    top: 931rpx;
  }

  .zyzContainer>.gameContainer>.startBtn {
    bottom: 91rpx;
  }

}
````

## File: packageGame/utils/tween.js
````javascript
module.exports = (function () {
  var __MODS__ = {};
  var __DEFINE__ = function (modId, func, req) {
    var m = {
      exports: {},
      _tempexports: {}
    };
    __MODS__[modId] = {
      status: 0,
      func: func,
      req: req,
      m: m
    };
  };
  var __REQUIRE__ = function (modId, source) {
    if (!__MODS__[modId]) return require(source);
    if (!__MODS__[modId].status) {
      var m = __MODS__[modId].m;
      m._exports = m._tempexports;
      var desp = Object.getOwnPropertyDescriptor(m, "exports");
      if (desp && desp.configurable) Object.defineProperty(m, "exports", {
        set: function (val) {
          if (typeof val === "object" && val !== m._exports) {
            m._exports.__proto__ = val.__proto__;
            Object.keys(val).forEach(function (k) {
              m._exports[k] = val[k];
            });
          }
          m._tempexports = val
        },
        get: function () {
          return m._tempexports;
        }
      });
      __MODS__[modId].status = 1;
      __MODS__[modId].func(__MODS__[modId].req, m, m.exports);
    }
    return __MODS__[modId].m.exports;
  };
  var __REQUIRE_WILDCARD__ = function (obj) {
    if (obj && obj.__esModule) {
      return obj;
    } else {
      var newObj = {};
      if (obj != null) {
        for (var k in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, k)) newObj[k] = obj[k];
        }
      }
      newObj.default = obj;
      return newObj;
    }
  };
  var __REQUIRE_DEFAULT__ = function (obj) {
    return obj && obj.__esModule ? obj.default : obj;
  };
  __DEFINE__(1698738435262, function (require, module, exports) {
    /**
     * Tween.js - Licensed under the MIT license
     * https://github.com/tweenjs/tween.js
     * ----------------------------------------------
     *
     * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.
     * Thank you all, you're awesome!
     */


    var _Group = function () {
      this._tweens = {};
      this._tweensAddedDuringUpdate = {};
    };

    _Group.prototype = {
      getAll: function () {

        return Object.keys(this._tweens).map(function (tweenId) {
          return this._tweens[tweenId];
        }.bind(this));

      },

      removeAll: function () {

        this._tweens = {};

      },

      add: function (tween) {

        this._tweens[tween.getId()] = tween;
        this._tweensAddedDuringUpdate[tween.getId()] = tween;

      },

      remove: function (tween) {

        delete this._tweens[tween.getId()];
        delete this._tweensAddedDuringUpdate[tween.getId()];

      },

      update: function (time, preserve) {

        var tweenIds = Object.keys(this._tweens);

        if (tweenIds.length === 0) {
          return false;
        }

        time = time !== undefined ? time : TWEEN.now();

        // Tweens are updated in "batches". If you add a new tween during an update, then the
        // new tween will be updated in the next batch.
        // If you remove a tween during an update, it may or may not be updated. However,
        // if the removed tween was added during the current batch, then it will not be updated.
        while (tweenIds.length > 0) {
          this._tweensAddedDuringUpdate = {};

          for (var i = 0; i < tweenIds.length; i++) {

            var tween = this._tweens[tweenIds[i]];

            if (tween && tween.update(time) === false) {
              tween._isPlaying = false;

              if (!preserve) {
                delete this._tweens[tweenIds[i]];
              }
            }
          }

          tweenIds = Object.keys(this._tweensAddedDuringUpdate);
        }

        return true;

      }
    };

    var TWEEN = new _Group();

    TWEEN.Group = _Group;
    TWEEN._nextId = 0;
    TWEEN.nextId = function () {
      return TWEEN._nextId++;
    };


    // Include a performance.now polyfill.
    // In node.js, use process.hrtime.
    if (typeof (self) === 'undefined' && typeof (process) !== 'undefined' && process.hrtime) {
      TWEEN.now = function () {
        var time = process.hrtime();

        // Convert [seconds, nanoseconds] to milliseconds.
        return time[0] * 1000 + time[1] / 1000000;
      };
    }
    // In a browser, use self.performance.now if it is available.
    else if (typeof (self) !== 'undefined' &&
      self.performance !== undefined &&
      self.performance.now !== undefined) {
      // This must be bound, because directly assigning this function
      // leads to an invocation exception in Chrome.
      TWEEN.now = self.performance.now.bind(self.performance);
    }
    // Use Date.now if it is available.
    else if (Date.now !== undefined) {
      TWEEN.now = Date.now;
    }
    // Otherwise, use 'new Date().getTime()'.
    else {
      TWEEN.now = function () {
        return new Date().getTime();
      };
    }


    TWEEN.Tween = function (object, group) {
      this._object = object;
      this._valuesStart = {};
      this._valuesEnd = {};
      this._valuesStartRepeat = {};
      this._duration = 1000;
      this._repeat = 0;
      this._repeatDelayTime = undefined;
      this._yoyo = false;
      this._isPlaying = false;
      this._reversed = false;
      this._delayTime = 0;
      this._startTime = null;
      this._easingFunction = TWEEN.Easing.Linear.None;
      this._interpolationFunction = TWEEN.Interpolation.Linear;
      this._chainedTweens = [];
      this._onStartCallback = null;
      this._onStartCallbackFired = false;
      this._onUpdateCallback = null;
      this._onRepeatCallback = null;
      this._onCompleteCallback = null;
      this._onStopCallback = null;
      this._group = group || TWEEN;
      this._id = TWEEN.nextId();

    };

    TWEEN.Tween.prototype = {
      getId: function () {
        return this._id;
      },

      isPlaying: function () {
        return this._isPlaying;
      },

      to: function (properties, duration) {

        this._valuesEnd = Object.create(properties);

        if (duration !== undefined) {
          this._duration = duration;
        }

        return this;

      },

      duration: function duration(d) {
        this._duration = d;
        return this;
      },

      start: function (time) {

        this._group.add(this);

        this._isPlaying = true;

        this._onStartCallbackFired = false;

        this._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();
        this._startTime += this._delayTime;

        for (var property in this._valuesEnd) {

          // Check if an Array was provided as property value
          if (this._valuesEnd[property] instanceof Array) {

            if (this._valuesEnd[property].length === 0) {
              continue;
            }

            // Create a local copy of the Array with the start value at the front
            this._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);

          }

          // If `to()` specifies a property that doesn't exist in the source object,
          // we should not set that property in the object
          if (this._object[property] === undefined) {
            continue;
          }

          // Save the starting value.
          this._valuesStart[property] = this._object[property];

          if ((this._valuesStart[property] instanceof Array) === false) {
            this._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings
          }

          this._valuesStartRepeat[property] = this._valuesStart[property] || 0;

        }

        return this;

      },

      stop: function () {

        if (!this._isPlaying) {
          return this;
        }

        this._group.remove(this);
        this._isPlaying = false;

        if (this._onStopCallback !== null) {
          this._onStopCallback(this._object);
        }

        this.stopChainedTweens();
        return this;

      },

      end: function () {

        this.update(Infinity);
        return this;

      },

      stopChainedTweens: function () {

        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {
          this._chainedTweens[i].stop();
        }

      },

      group: function (group) {
        this._group = group;
        return this;
      },

      delay: function (amount) {

        this._delayTime = amount;
        return this;

      },

      repeat: function (times) {

        this._repeat = times;
        return this;

      },

      repeatDelay: function (amount) {

        this._repeatDelayTime = amount;
        return this;

      },

      yoyo: function (yoyo) {

        this._yoyo = yoyo;
        return this;

      },

      easing: function (easingFunction) {

        this._easingFunction = easingFunction;
        return this;

      },

      interpolation: function (interpolationFunction) {

        this._interpolationFunction = interpolationFunction;
        return this;

      },

      chain: function () {

        this._chainedTweens = arguments;
        return this;

      },

      onStart: function (callback) {

        this._onStartCallback = callback;
        return this;

      },

      onUpdate: function (callback) {

        this._onUpdateCallback = callback;
        return this;

      },

      onRepeat: function onRepeat(callback) {

        this._onRepeatCallback = callback;
        return this;

      },

      onComplete: function (callback) {

        this._onCompleteCallback = callback;
        return this;

      },

      onStop: function (callback) {

        this._onStopCallback = callback;
        return this;

      },

      update: function (time) {

        var property;
        var elapsed;
        var value;

        if (time < this._startTime) {
          return true;
        }

        if (this._onStartCallbackFired === false) {

          if (this._onStartCallback !== null) {
            this._onStartCallback(this._object);
          }

          this._onStartCallbackFired = true;
        }

        elapsed = (time - this._startTime) / this._duration;
        elapsed = (this._duration === 0 || elapsed > 1) ? 1 : elapsed;

        value = this._easingFunction(elapsed);

        for (property in this._valuesEnd) {

          // Don't update properties that do not exist in the source object
          if (this._valuesStart[property] === undefined) {
            continue;
          }

          var start = this._valuesStart[property] || 0;
          var end = this._valuesEnd[property];

          if (end instanceof Array) {

            this._object[property] = this._interpolationFunction(end, value);

          } else {

            // Parses relative end values with start as base (e.g.: +10, -3)
            if (typeof (end) === 'string') {

              if (end.charAt(0) === '+' || end.charAt(0) === '-') {
                end = start + parseFloat(end);
              } else {
                end = parseFloat(end);
              }
            }

            // Protect against non numeric properties.
            if (typeof (end) === 'number') {
              this._object[property] = start + (end - start) * value;
            }

          }

        }

        if (this._onUpdateCallback !== null) {
          this._onUpdateCallback(this._object, elapsed);
        }

        if (elapsed === 1) {

          if (this._repeat > 0) {

            if (isFinite(this._repeat)) {
              this._repeat--;
            }

            // Reassign starting values, restart by making startTime = now
            for (property in this._valuesStartRepeat) {

              if (typeof (this._valuesEnd[property]) === 'string') {
                this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);
              }

              if (this._yoyo) {
                var tmp = this._valuesStartRepeat[property];

                this._valuesStartRepeat[property] = this._valuesEnd[property];
                this._valuesEnd[property] = tmp;
              }

              this._valuesStart[property] = this._valuesStartRepeat[property];

            }

            if (this._yoyo) {
              this._reversed = !this._reversed;
            }

            if (this._repeatDelayTime !== undefined) {
              this._startTime = time + this._repeatDelayTime;
            } else {
              this._startTime = time + this._delayTime;
            }

            if (this._onRepeatCallback !== null) {
              this._onRepeatCallback(this._object);
            }

            return true;

          } else {

            if (this._onCompleteCallback !== null) {

              this._onCompleteCallback(this._object);
            }

            for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {
              // Make the chained tweens start exactly at the time they should,
              // even if the `update()` method was called way past the duration of the tween
              this._chainedTweens[i].start(this._startTime + this._duration);
            }

            return false;

          }

        }

        return true;

      }
    };


    TWEEN.Easing = {

      Linear: {

        None: function (k) {

          return k;

        }

      },

      Quadratic: {

        In: function (k) {

          return k * k;

        },

        Out: function (k) {

          return k * (2 - k);

        },

        InOut: function (k) {

          if ((k *= 2) < 1) {
            return 0.5 * k * k;
          }

          return -0.5 * (--k * (k - 2) - 1);

        }

      },

      Cubic: {

        In: function (k) {

          return k * k * k;

        },

        Out: function (k) {

          return --k * k * k + 1;

        },

        InOut: function (k) {

          if ((k *= 2) < 1) {
            return 0.5 * k * k * k;
          }

          return 0.5 * ((k -= 2) * k * k + 2);

        }

      },

      Quartic: {

        In: function (k) {

          return k * k * k * k;

        },

        Out: function (k) {

          return 1 - (--k * k * k * k);

        },

        InOut: function (k) {

          if ((k *= 2) < 1) {
            return 0.5 * k * k * k * k;
          }

          return -0.5 * ((k -= 2) * k * k * k - 2);

        }

      },

      Quintic: {

        In: function (k) {

          return k * k * k * k * k;

        },

        Out: function (k) {

          return --k * k * k * k * k + 1;

        },

        InOut: function (k) {

          if ((k *= 2) < 1) {
            return 0.5 * k * k * k * k * k;
          }

          return 0.5 * ((k -= 2) * k * k * k * k + 2);

        }

      },

      Sinusoidal: {

        In: function (k) {

          return 1 - Math.cos(k * Math.PI / 2);

        },

        Out: function (k) {

          return Math.sin(k * Math.PI / 2);

        },

        InOut: function (k) {

          return 0.5 * (1 - Math.cos(Math.PI * k));

        }

      },

      Exponential: {

        In: function (k) {

          return k === 0 ? 0 : Math.pow(1024, k - 1);

        },

        Out: function (k) {

          return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);

        },

        InOut: function (k) {

          if (k === 0) {
            return 0;
          }

          if (k === 1) {
            return 1;
          }

          if ((k *= 2) < 1) {
            return 0.5 * Math.pow(1024, k - 1);
          }

          return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);

        }

      },

      Circular: {

        In: function (k) {

          return 1 - Math.sqrt(1 - k * k);

        },

        Out: function (k) {

          return Math.sqrt(1 - (--k * k));

        },

        InOut: function (k) {

          if ((k *= 2) < 1) {
            return -0.5 * (Math.sqrt(1 - k * k) - 1);
          }

          return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

        }

      },

      Elastic: {

        In: function (k) {

          if (k === 0) {
            return 0;
          }

          if (k === 1) {
            return 1;
          }

          return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);

        },

        Out: function (k) {

          if (k === 0) {
            return 0;
          }

          if (k === 1) {
            return 1;
          }

          return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;

        },

        InOut: function (k) {

          if (k === 0) {
            return 0;
          }

          if (k === 1) {
            return 1;
          }

          k *= 2;

          if (k < 1) {
            return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);
          }

          return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;

        }

      },

      Back: {

        In: function (k) {

          var s = 1.70158;

          return k * k * ((s + 1) * k - s);

        },

        Out: function (k) {

          var s = 1.70158;

          return --k * k * ((s + 1) * k + s) + 1;

        },

        InOut: function (k) {

          var s = 1.70158 * 1.525;

          if ((k *= 2) < 1) {
            return 0.5 * (k * k * ((s + 1) * k - s));
          }

          return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

        }

      },

      Bounce: {

        In: function (k) {

          return 1 - TWEEN.Easing.Bounce.Out(1 - k);

        },

        Out: function (k) {

          if (k < (1 / 2.75)) {
            return 7.5625 * k * k;
          } else if (k < (2 / 2.75)) {
            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;
          } else if (k < (2.5 / 2.75)) {
            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;
          } else {
            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;
          }

        },

        InOut: function (k) {

          if (k < 0.5) {
            return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
          }

          return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

        }

      }

    };

    TWEEN.Interpolation = {

      Linear: function (v, k) {

        var m = v.length - 1;
        var f = m * k;
        var i = Math.floor(f);
        var fn = TWEEN.Interpolation.Utils.Linear;

        if (k < 0) {
          return fn(v[0], v[1], f);
        }

        if (k > 1) {
          return fn(v[m], v[m - 1], m - f);
        }

        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

      },

      Bezier: function (v, k) {

        var b = 0;
        var n = v.length - 1;
        var pw = Math.pow;
        var bn = TWEEN.Interpolation.Utils.Bernstein;

        for (var i = 0; i <= n; i++) {
          b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
        }

        return b;

      },

      CatmullRom: function (v, k) {

        var m = v.length - 1;
        var f = m * k;
        var i = Math.floor(f);
        var fn = TWEEN.Interpolation.Utils.CatmullRom;

        if (v[0] === v[m]) {

          if (k < 0) {
            i = Math.floor(f = m * (1 + k));
          }

          return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

        } else {

          if (k < 0) {
            return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
          }

          if (k > 1) {
            return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);
          }

          return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

        }

      },

      Utils: {

        Linear: function (p0, p1, t) {

          return (p1 - p0) * t + p0;

        },

        Bernstein: function (n, i) {

          var fc = TWEEN.Interpolation.Utils.Factorial;

          return fc(n) / fc(i) / fc(n - i);

        },

        Factorial: (function () {

          var a = [1];

          return function (n) {

            var s = 1;

            if (a[n]) {
              return a[n];
            }

            for (var i = n; i > 1; i--) {
              s *= i;
            }

            a[n] = s;
            return s;

          };

        })(),

        CatmullRom: function (p0, p1, p2, p3, t) {

          var v0 = (p2 - p0) * 0.5;
          var v1 = (p3 - p1) * 0.5;
          var t2 = t * t;
          var t3 = t * t2;

          return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

        }

      }

    };

    // UMD (Universal Module Definition)
    (function (root) {

      if (typeof define === 'function' && define.amd) {

        // AMD
        define([], function () {
          return TWEEN;
        });

      } else if (typeof module !== 'undefined' && typeof exports === 'object') {

        // Node.js
        module.exports = TWEEN;

      } else if (root !== undefined) {

        // Global variable
        root.TWEEN = TWEEN;

      }

    })(this);

  }, function (modId) {
    var map = {};
    return __REQUIRE__(map[modId], modId);
  })
  return __REQUIRE__(1698738435262);
})()
````

## File: pages/estimate/components/eFooter/eFooter.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/eFooter/eFooter.wxml
````
<cover-view class="footer" style="padding-bottom: {{bottomLift}}px">
  <cover-view class="btn-wrap {{activePage===item.page?'active':''}} {{item.page}}" wx:for="{{menus}}" data-page="{{item.page}}" wx:key="id" bindtap="changePage">
    <cover-image class="icon" src="{{item.iconActive}}" wx:if="{{activePage===item.page}}"></cover-image>
    <cover-image class="icon" src="{{item.icon}}" wx:else></cover-image>
    <cover-view class="text">{{item.name}}</cover-view>
  </cover-view>
</cover-view>
````

## File: pages/estimate/components/eFooter/eFooter.wxss
````
.footer {
  width: 750rpx;
  height: 98rpx;
  background: #ffffff;
  position: fixed;
  bottom: 0;
  left: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 1000;
  box-sizing: content-box;
}

.footer .btn-wrap {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 20rpx;
  flex: 1;
}

.footer .btn-wrap .icon {
  width: 48rpx;
  height: 48rpx;
}

.footer .btn-wrap.active {
  color: #ff2352;
}
````

## File: pages/estimate/components/mark/danmu/danmu.js
````javascript
import { getRandom, timeoutTask } from '../../../../../utils/index';
import defaultContent from '../../../../../assets/constant/default';

const danmusLen = defaultContent.commentDanmu.length;
let timer = undefined;
let indexArr = [];
Component({
  data: {
    danmu: {
      avator: '',
      comment: '',
      moveDistance: 0,
      type: -1,
    },
  },
  lifetimes: {
    attached() {
      timer = undefined;
      indexArr = [];
      this.loopShowDanmu();
    },
    detached() {
      this.endLoop();
    }
  },
  methods: {
    loopShowDanmu() {
      if (timer) {
        return;
      }
      this.sendDanmu();
      timer = setInterval(() => {
        this.sendDanmu();
      }, 9000);
    },
    // å‘é€å¼¹å¹•
    sendDanmu() {
      const danmuIndex = this.generateDanmuIndex();
      this.setData({
        ['danmu.avator']: defaultContent.commentDanmu[danmuIndex].avator,
        ['danmu.comment']: defaultContent.commentDanmu[danmuIndex].comment,
        ['danmu.moveDistance']: 0,
        ['danmu.type']: getRandom(1, 4),
      });
      timeoutTask(() => {
        this.setData({
          ['danmu.moveDistance']: -(
            defaultContent.commentDanmu[danmuIndex].comment.length * 17 +
            400
          ),
        });
        // console.log(this.data.danmu);
      }, 500);
      timeoutTask(() => {
        this.setData({
          ['danmu.avator']: '',
          ['danmu.comment']: '',
          ['danmu.moveDistance']: 0,
          ['danmu.type']: -1,
        });
      }, 8500);
    },
    // åˆ›å»ºä¸€ä¸ªæ‰“ä¹±é¡ºåºçš„ç´¢å¼•æ•°ç»„
    generateIndexArr() {
      const tmpIndexArr = [];
      for (let i = 0; i < danmusLen; i += 1) {
        tmpIndexArr.push(i);
      }
      tmpIndexArr.sort((a, b) => {
        return Math.random() > 0.5 ? -1 : 1;
      });
      return tmpIndexArr;
    },
    // å¼¹å¹•ç´¢å¼•
    generateDanmuIndex() {
      let tmpIndex = -1;
      if (indexArr.length > 0) {
        tmpIndex = indexArr.pop();
      } else {
        indexArr = this.generateIndexArr();
        tmpIndex = indexArr.pop();
      }
      return tmpIndex;
    },
    endLoop() {
      console.log('ç»“æŸå¾ªç¯!');
      clearInterval(timer);
      timer = undefined;
    },
  },
});
````

## File: pages/estimate/components/mark/danmu/danmu.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/mark/danmu/danmu.wxml
````
<view class="danmuArea">
  <view class="danmu {{danmu.type === 1 ? 't1' : ''}} {{danmu.type === 2 ? 't2' : ''}} {{danmu.type === 3 ? 't3' : ''}}" style="transform:translateX({{danmu.moveDistance}}px)" wx:if="{{danmu.comment}}">
    <image class="avator" src="{{danmu.avator}}"></image>
    <view class="content">{{danmu.comment}}</view>
  </view>
</view>
````

## File: pages/estimate/components/mark/danmu/danmu.wxss
````
.danmuArea {
  position: fixed;
  width: 100%;
  height: 208rpx;
  top: 32rpx;
}

.danmu {
  height: 48rpx;
  background: rgba(255, 56, 56, 0.30);
  border: 2rpx solid #fff0f0;
  border-radius: 50rpx;
  display: flex;
  align-items: center;
  padding: 4rpx 16rpx 4rpx 0;
  position: absolute;
  left: 750rpx;
  transition: all 8s linear;
  transform: translateX(0);
}
.danmu.t1 {
  top: 26rpx;
}
.danmu.t2 {
  top: 96rpx;
}
.danmu.t3 {
  top: 170rpx;
}
.avator {
  width: 44rpx;
  height: 44rpx;
  border-radius: 50%;
}
.content {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 4rpx;
  white-space: nowrap;
}
````

## File: pages/estimate/components/mark/item.wxss
````
.comment-item{
    margin: 0 auto;
    width: 616rpx;
    
    /* background-color: orange; */
    display: flex;
    flex-direction: column;
    
  }
  .my-c{
    display: flex;
    justify-content: flex-start;
  }
  .my-avator{
    width: 68rpx;
    height: 68rpx;
    border-radius: 50%;
    margin-right: 16rpx;
  }
  .nameAnddate{
    display: flex;
    flex-direction: column;
  }
  .nameAnddate .name{
    font-size: 26rpx;
  
    color: #333;
  }
  .nameAnddate .date{
    font-size: 24rpx;
    color: #999999;
  }
  .comment-item .content{
    font-size: 32rpx;
    margin-top: 22rpx;
  }
  .sub-comment{
  
    margin-top: 20rpx;
    background: #f5f5f3;
    border-radius: 4rpx;
    padding: 10rpx;
    padding-left: 24rpx;
    font-size: 24rpx;
  }
  .reply-btn{
    width: 100%;
    height: 50rpx;
    background: #f5f5f3;
    border-radius: 4rpx;
    font-size: 24rpx;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding-left: 24rpx;
    margin-top:20rpx;
  }
  .sub-item{
    /* display: flex;
    flex-direction: column; */
    margin-top: 8rpx;
  }
  .sub-name{
    margin-right: 20rpx;
    max-width: 200rpx;
    color: #333;
    font-weight: bold;
  }
  .sub-content{
    color: #666;
  }
````

## File: pages/estimate/components/mark/mark.json
````json
{
  "component": true,
  "usingComponents": {
    "rateStar": "./rateStar/rateStar",
    "qrcode": "./qrcode/qrcode",
    "danmu": "./danmu/danmu",
    "replyInput": "./replyInput/replyInput",
    "markAfterQuery": "./markAfterQuery/markAfterQuery"
  }
}
````

## File: pages/estimate/components/mark/markAfterQuery/markAfterQuery.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/mark/qrcode/qrcode.js
````javascript
Component({
  properties: {
    hostWechatQrcode: {
      type: String,
      value: ''
    }
  },

  data: {

  },
  methods: {
    /**
     * å…³é—­äºŒç»´ç 
     */
    closeQrcode() {
      this.triggerEvent('toggleQrcode');
    }
  }
})
````

## File: pages/estimate/components/mark/qrcode/qrcode.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/mark/qrcode/qrcode.wxml
````
<view class="qrcode-wrap" catchtap="closeQrcode">
  <view class="qrcode-modal">
    <image src="{{hostWechatQrcode}}" class="qrcode-cus" show-menu-by-longpress='true'></image>
    <view class="save">å¦‚æœ‰ä¸»æŒéœ€æ±‚ï¼Œè¯·é•¿æŒ‰äºŒç»´ç æ·»åŠ ä¸»æŒäººå¾®ä¿¡ã€‚</view>
  </view>
  <view class="qrcode-close"></view>
</view>
````

## File: pages/estimate/components/mark/qrcode/qrcode.wxss
````
.qrcode-wrap {
  width: 100%;
  height: 100%;
  position: fixed;
  font-size: 32rpx;
  left: 0;
  top: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 100;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.qrcode-modal {
  width: 480rpx;
  height: 580rpx;
  padding: 20rpx;
  background-color: #fff;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  flex-direction: column;
  border-radius: 8rpx;
}
.qrcode-close {
  width: 68rpx;
  height: 68rpx;
  margin-top: 63rpx;
  background-size: 100% 100%;
  background-image: url('https://static.joymew.com/joymewMp/joymewIndex/estimate/comment_close.png');
}
.qrcode-cus {
  width: 440rpx;
  height: 440rpx;
}
.save {
  margin-top: 30rpx;
  font-size: 24rpx;
  padding: 0 10rpx;
}
````

## File: pages/estimate/components/mark/rateStar/rateStar.js
````javascript
// components/rateStar/rateStar.js
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    rate: {
      type: Number,
      value: 0
    },
    size: {
      type: String,
      value: ''
    },    
    edit: {
      type:Boolean,
      value: false
    }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {

  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    setRate(e){
      if(!this.data.edit){
        return 
      }
      let rate = e.currentTarget.dataset.rate
			this.triggerEvent('change', rate)
    }
  }
})
````

## File: pages/estimate/components/mark/rateStar/rateStar.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/mark/replyInput/replyInput.js
````javascript
// components/replyInput/replyInput.js
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    focus: {
      type: Boolean
    },
    initContent: {
      type: String,
    },
    username: {
      type: String,
    }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    InputBottom: 0,
    content: '',
  },
  lifetimes: {
    attached(){
      console.log('attach')
      console.log(this.data.initContent)
      this.setData({
        content: this.data.initContent
      })
    }
  },
  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    preventBubble(){

    },
    InputFocus(e) {
      this.setData({
        InputBottom: e.detail.height
      })
    },
    InputBlur(e) {
      this.setData({
        InputBottom: 0
      })
    },
    InputChange(e){
      const {value} = e.detail
      this.setData({
        content: value
      })
      this.triggerEvent('input', value)
    },
    sendReply(){
      this.triggerEvent('send', this.data.content)
    }
  }
})
````

## File: pages/estimate/components/mark/replyInput/replyInput.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimate/components/mark/replyInput/replyInput.wxml
````
<!--components/replyInput/replyInput.wxml-->
<view class="cu-bar foot input {{InputBottom!=0?'cur':''}}" style="bottom:{{InputBottom}}px" catchtap="preventBubble">
  <view class="toPerson">
  å›å¤  <view class="username">{{username}}</view>:
  </view>
  <input class="solid-bottom" bindfocus="InputFocus" bindblur="InputBlur" adjust-position="{{false}}" focus="{{focus}}" maxlength="300" cursor-spacing="10"
  bindinput="InputChange"
  bindconfirm="sendReply"
  value="{{content}}"
  ></input>
  <button class="cu-btn bg-green shadow" bindtap="sendReply">å‘é€</button>
</view>
````

## File: pages/estimate/components/mark/replyInput/replyInput.wxss
````
/* components/replyInput/replyInput.wxss */

.cu-bar.foot {
  --white: #fff;
  padding-right: 20rpx;
  background-color: var(--white);
  position: fixed;
  width: 100%;
  bottom: 0;
  z-index: 1024;
  box-shadow: 0 -1rpx 6rpx rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  min-height: 100rpx;
  justify-content: space-between;
}

.solid-bottom {
  position: relative;
  overflow: initial;
  line-height: 64rpx;
  height: 64rpx;
  min-height: 64rpx;
  flex: 1;
  font-size: 30rpx;
  margin: 0 20rpx;
  font-size: 24rpx;
}

.solid-bottom::after {
  content: " ";
  width: 200%;
  height: 200%;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: inherit;
  transform: scale(0.5);
  transform-origin: 0 0;
  pointer-events: none;
  box-sizing: border-box;
}

.cu-btn {
  --white: #ffffff;
  --green: #39b54a;
  --ShadowSize: 6rpx 6rpx 8rpx;
  --greenShadow: rgba(48, 156, 63, 0.2);
  box-shadow: var(--ShadowSize) var(--greenShadow);
  background-color: var(--green);
  color: var(--white);
  position: relative;
  border: 0rpx;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0 30rpx;
  font-size: 28rpx;
  height: 64rpx;
  line-height: 1;
  text-align: center;
  text-decoration: none;
  overflow: visible;
  margin-left: initial;
  transform: translate(0rpx, 0rpx);
  margin-right: initial;
}
.cu-btn.button-hover {
  transform: translate(1rpx, 1rpx);
}
.toPerson {
  font-size: 24rpx;
  margin-left: 20rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.username {
  max-width: 130rpx;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
````

## File: pages/index/index.json
````json
{
    "navigationBarTitleText": " å—¨å–µäº’åŠ¨",
    "backgroundColor": "#305068",
    "disableScroll": false
}
````

## File: pages/index/index.wxml
````
<view class="index-wrap">
    <view class="bg"></view>
    <view class="chatArea">
        <view class="weddingChatList">
            <scroll-view class="newsContainer" scroll-y="true" scrollTop="{{scrollTop}}">
                <view class="messageItem" wx:for="{{chatList}}" wx:key="index">
                    <view class="top">
                        <image class="headImg" src="{{item.miaoTxUrl}}"></image>
                        <view class="nickname">{{item.miaoName}}</view>
                    </view>
                    <view class="content">
                        <view class="common">{{item.miaoContent}}</view>
                    </view>
                    <view class="bottom">
                        <view class="date">{{item.sendTime}}</view>
                    </view>
                </view>
            </scroll-view>
        </view>
    </view>
    <view class="bottomArea">
        <view class="wedding">
            <view class="quickWish">
                <view class="quickWishCt">
                    <view class="item" wx:for="{{quickWishes}}" wx:key="index" bindtap="chooseQuickWish"
                        data-index="{{index}}">
                        <view class="itemCt">
                            {{item}}
                        </view>
                    </view>
                </view>
            </view>
            <view class="bottomMain {{sendDanmuVisible ? 'show' : ''}}">
                <view class="bottomEmptyArea" bindtap="closeSendDanmu" wx:if="{{sendDanmuVisible}}"></view>
                <view class="default" wx:if="{{sendDanmuVisible}}">
                    <view class="defaultCt">
                        <view class="item" wx:for="{{defaultWishes}}" data-index="{{index}}" wx:key="index"
                            bindtap="chooseDefaultWish">
                            <view class="itemCt">{{item}}</view>
                        </view>
                    </view>
                </view>
                <view class="iptArea">
                    <image src="https://static.hudongmiao.com/joymewMp/img/recharge/messageIcon.png" class="msgIcon"></image>
                    <view class="inputBoxVitual" wx:if="{{!sendDanmuVisible}}" bindtap="showSendDanmu">é€ä¸Šç¥ç¦...</view>
                    <input class="inputBox" placeholder="é€ä¸Šç¥ç¦..." bindinput="handleInput" value="{{message}}"
                        wx:if="{{sendDanmuVisible}}" placeholder-style="font-size:16px" disabled/>
                    <view class="sendBtn {{message ? 'active' : ''}}" wx:if="{{sendDanmuVisible}}" bindtap="sendDanmu">
                        å‘é€</view>
                </view>
            </view>
        </view>
    </view>
</view>
````

## File: pages/index/index.wxss
````
view {
    box-sizing: border-box;
}
.index-wrap {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}
.bg {
    background-image: url('https://ustatic.hudongmiao.com/h5/bg.png');
    background-size: 100% 100%;
    position: absolute;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: 50%;
    z-index: 0;
}

.chatArea {
    position: absolute;
    width: 700rpx;
    height: 80%;
    top: 40rpx;
    color: #fff;
    z-index: 0;
}
.chatArea .weddingChatList {
    position: absolute;
    width: 100%;
    height: 100%;
    padding-left: 20rpx;
}
.chatArea .weddingChatList .newsContainer {
    height: 100%;
}
.messageItem {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 0px 32rpx 32rpx 32rpx;
    color: #ffffff;
    padding: 20rpx 18rpx;
    position: relative;
    width: 675rpx;
    margin: 18rpx 0;
}
.messageItem .top {
    display: flex;
    align-items: center;
}
.messageItem .top .headImg{
    width: 40rpx;
    height: 40rpx;
    border-radius: 50%;
}
.messageItem .top .nickname{
    font-size: 20rpx;
    font-weight: 300;
    color: #ffffff;
    margin-left: 10rpx;
}
.messageItem .content {
    font-size: 28rpx;
    margin-top: 18rpx;
}
.messageItem .content .common {
    margin-top: 23rpx;
}
.messageItem .bottom {
    justify-content: space-between;
    margin-top: 23rpx;
    display: flex;
    align-items: center;
}
.messageItem .bottom .date{
    font-size: 20rpx;
    font-weight: 400;
    color: rgba(255, 255, 255, 0.4);
}

.bottomArea {
    width: 100%;
    height: 140rpx;
    position: absolute;
    bottom: 0;
    z-index: 2;
}
.bottomArea .wedding .quickWish{
    height: 69rpx;
    width: 100%;
    position: absolute;
    left: 0;
    top: -69rpx;
    border-radius: 24rpx 24rpx 0 0;
    overflow-x: scroll;
}
.bottomArea .wedding .quickWish .quickWishCt {
    white-space: nowrap;
}
.bottomArea .wedding .quickWish .quickWishCt .item{
    font-size: 20rpx;
    color: #ffffff;
    align-items: center;
    margin: 0px 20rpx;
    display: inline-block;
    background: linear-gradient(135deg, #ee9bff, #5560f5);
    border-radius: 27rpx;
    padding: 4rpx;
}
.bottomArea .wedding .quickWish .quickWishCt .item .itemCt{
    border-radius: 27rpx;
    background: linear-gradient(135deg, #183a6a, #1351a3);
    padding: 4rpx 12rpx;
}
.bottomArea .wedding .bottomMain{
    width: 100%;
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.bottomArea .wedding .bottomMain .bottomEmptyArea {
    position: absolute;
    width: 100vw;
    height: 100vh;
    top: -100vh;
}
.bottomArea .wedding .bottomMain.show {
    flex-direction: column;
    justify-content: center;
    background: linear-gradient(135deg, #183a6a, #1351a3);
    height: 260rpx;
    position: absolute;
    bottom: 0;
    border-top-left-radius: 20rpx;
    border-top-right-radius: 20rpx;
}
.bottomArea .wedding .bottomMain .iptArea {
    width: 292rpx;
    height: 72rpx;
    background: rgba(0, 0, 0, 0.19);
    border-radius: 36rpx;
    padding-left: 24rpx;
    padding-right: 14rpx;
    position: relative;
    display: flex;
    align-items: center;
}
.bottomArea .wedding .bottomMain .iptArea::after {
    content: '';
    display: block;
    width: 2rpx;
    height: 32rpx;
    background-color: rgba(251, 213, 111, 0.3);
    position: absolute;
    left: 68rpx;
}
.bottomArea .wedding .bottomMain .iptArea .msgIcon{
    width: 36rpx;
    height: 36rpx;
}
.bottomArea .wedding .bottomMain .iptArea .inputBox{
    width: 212rpx;
    height: 72rpx;
    background-color: transparent;
    border-radius: 36rpx;
    border: none;
    font-size: 20rpx;
    padding: 0 10rpx 0 10rpx;
    color: #fff;
    position: absolute;
    left: 80rpx;
    outline: none;
    box-sizing: border-box;
}
.bottomArea .wedding .bottomMain .iptArea .inputBoxVitual{
    width: 212rpx;
    height: 72rpx;
    background-color: transparent;
    border-radius: 36rpx;
    border: none;
    font-size: 20rpx;
    padding: 0 10rpx 0 10rpx;
    color: #fff;
    position: absolute;
    left: 80rpx;
    outline: none;
    box-sizing: border-box;
    display: flex;
    align-items: center;
}
.bottomArea .wedding .bottomMain .iptArea .sendBtn {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100rpx;
    height: 45rpx;
    font-size: 24rpx;
    color: rgba(255, 255, 255, 0.6);
    background-color: rgba(0, 0, 0, 0.6);
    position: absolute;
    right: 10rpx;
    border-radius: 34rpx;
}
.bottomArea .wedding .bottomMain .iptArea .sendBtn.active {
    background-color: #e4156a;
    color: #fff;
}
.bottomArea .wedding .bottomMain .default {
    height: 90rpx;
    width: 100%;
    border-radius: 24rpx 24rpx 0 0;
}
.bottomArea .wedding .bottomMain .default .defaultCt{
    white-space: nowrap;
    overflow-x: scroll;
}
.bottomArea .wedding .bottomMain .default .item{
    font-size: 20rpx;
    color: #ffffff;
    align-items: center;
    margin: 0rpx 20rpx;
    display: inline-block;
    background: linear-gradient(135deg, #ee9bff, #5560f5);
    border-radius: 27rpx;
    padding: 4rpx;
}
.bottomArea .wedding .bottomMain .default .item .itemCt{
    border-radius: 27rpx;
    background: linear-gradient(135deg, #183a6a, #1351a3);
    padding: 4rpx 12rpx;
}
/* bottomMain activeçŠ¶æ€ä¸‹çš„å­å…ƒç´ æ ·å¼ */
.bottomArea .wedding .bottomMain.show .iptArea {
    width: 700rpx;
}
.bottomArea .wedding .bottomMain.show .iptArea::after {
    display: none;
}
.bottomArea .wedding .bottomMain.show .iptArea .msgIcon{
   display: none;
}
.bottomArea .wedding .bottomMain.show .iptArea .inputBox{
    width: 563rpx;
    left: 28rpx;
 }
````

## File: pages/joymewIndex/joymewIndex.json
````json
{
    "navigationBarTitleText": " å—¨å–µæ‚¦åŠ¨",
    "navigationStyle":"custom",
    "usingComponents": {}
}
````

## File: pages/live/live.json
````json
{
  "navigationBarTitleText": " å—¨å–µæ‚¦åŠ¨",
  "backgroundColor": "#305068",
  "disableScroll": true
}
````

## File: pages/live/live.wxml
````
<web-view src="{{liveH5Path}}">
</web-view>
````

## File: pages/live/live.wxss
````
page {
  background: linear-gradient(139deg, #fec84e 0%, #feaf40 100%);
}
````

## File: pages/pay/pay.json
````json
{
  "navigationBarTitleText": "æ”¯ä»˜"
}
````

## File: pages/pay/pay.wxml
````
<!-- æ­¤é¡µé¢åªç”¨æ¥è°ƒèµ·æ”¯ä»˜ -->
<view></view>
````

## File: pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/reserve/reserveButtonAndPopup/tool.wxs
````
function getReserveTimeName(v) {
  var timeList = [
    {
      id: "1",
      name: "åˆå®´",
    },
    {
      id: "2",
      name: "æ™šå®´",
    },
  ];
  var targetIndex = -1;
  var name = '';
  for (var i = 0; i < timeList.length; i++) {
    if (timeList[i].id === v) {
      targetIndex = i;
      break;
    }
  }
  if(targetIndex > -1) {
    name = timeList[targetIndex].name;
  }
  return name;
}

module.exports.getReserveTimeName = getReserveTimeName;
````

## File: pages/review/imgPreview/imgPreview.js
````javascript
// pages/estimate/review/imgPreview/imgPreview.js
Component({
  properties: {
    // å›¾ç‰‡åˆ—è¡¨
    imgs: {
      type: Array,
    },
    // å½“å‰å›¾ç‰‡ç´¢å¼•
    pageIndex: {
      type: Number,
    }
  },
  methods: {
    // ç‚¹å‡»å…³é—­é¢„è§ˆ
    close() {
      this.triggerEvent('update', {
        activeImg: []
      });
    },
    // æ»‘åŠ¨æ—¶ä¿®æ”¹å½“å‰å›¾ç‰‡ç´¢å¼•
    changeSwiper(e) {
      let source = e.detail.source;
      if (source !== 'touch') {
        return;
      }
      let value = e.detail.current;
      this.triggerEvent('update', {
        imgIndex: Number(value)
      });

    }

  }
});
````

## File: pages/review/imgPreview/imgPreview.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/review/imgPreview/imgPreview.wxml
````
<view class="imgPreview" bind:tap="close">
  <swiper
    class="swiper"
    bind:change="changeSwiper"
    current="{{ pageIndex }}"
    circular
  >
    <swiper-item wx:for="{{ imgs }}" class="swiper-item" wx:key="item">
      <image src="{{ item }}" class="img" mode="widthFix"></image>
    </swiper-item>
  </swiper>
  <view class="pageNum">{{ pageIndex + 1 }} / {{ imgs.length }}</view>
</view>
````

## File: pages/review/imgPreview/imgPreview.wxss
````
.imgPreview {
  width: 100vw;
  height: 100vh;
  background: #000000;
  position: fixed;
  z-index: 1020;
  top: 0;
  left: 0;
  display: flex;
  overflow-x: hidden;
  justify-content: center;
  align-items: center;
}
.imgPreview .pageNum {
  position: absolute;
  bottom: 160rpx;
  right: 30rpx;
  width: 100rpx;
  height: 60rpx;
  border-radius: 30rpx;
  color: #fff;
  border: 2rpx solid #dcdcdc;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28rpx;
  z-index: 20;
}
.imgPreview .swiper {
  width: 730rpx;
  height: 100vh;
  margin: 0 auto;
}
.imgPreview .swiper .swiper-item {
  width: 730rpx;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.imgPreview .swiper .swiper-item .img {
  width: 730rpx;
}
````

## File: pages/review/rankInfo/rankInfo.js
````javascript
Component({
  properties: {
    info: {
      type: Object,
    }
  },
  data: {
    name: wx.getStorageSync('nickname'),
    avatar: wx.getStorageSync('avatar'),
  },
});
````

## File: pages/review/rankInfo/rankInfo.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/review/rankInfo/rankInfo.wxml
````
<view class="rankInfo">
  <view class="left">
    <view
      class="avatar"
      style="background-image: url({{ info.avatar || avatar }})"
    ></view>
    <view class="name">{{ info.name || name || "-" }}</view>
  </view>

  <view class="right">
    <view class="value-wrap com-wrap">
      <view class="title">å¹¸ç¦è´¡çŒ®å€¼</view>
      <view class="value">{{ info.value || "0" }}</view>
    </view>

    <view class="rank-wrap com-wrap">
      <view class="title">
        <view>æ’å</view>
      </view>
      <view class="rank">{{ info.rank || "-" }}</view>
    </view>
  </view>
</view>
````

## File: pages/review/rankInfo/rankInfo.wxss
````
.rankInfo{
  width: 686rpx;
  height: 128rpx;
  background: #ffffff;
  border-radius: 16rpx;
  margin: 0 auto;
  margin-top: 56rpx;
  display: flex;
  justify-content:space-between;
  align-items: center;
}
.rankInfo .left{
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.rankInfo .avatar{
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  background-size: cover;
  margin-left: 24rpx;
  flex-shrink: 0;
  border: 2rpx solid #DCDCDC;
}
.rankInfo .name{
  width: 200rpx;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  margin-left: 16rpx;
  flex-shrink: 0;
  color: #333333;
  font-size: 28rpx;
  font-weight: 500;
}

.rankInfo .right{
  display: flex;
  justify-content: flex-start;
  align-items: center;
}

.com-wrap{
  width: 160rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  flex-direction: column;
  height: 128rpx;
}
.com-wrap .title{
  margin-top: 20rpx;
  font-size: 24rpx;
  color: rgba(0,0,0,0.40);

  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.value-wrap .value{
  margin-top: 10rpx;
  font-size: 32rpx;
  color: #FF2352;
}
.rank-wrap .rank{
  font-size: 48rpx;
  color: #FF2352;
}
````

## File: pages/review/review.wxss
````
.review {
  width: 750rpx;
  min-height: 100vh;
  overflow-x: hidden;
  padding-bottom: 120rpx;
  padding-bottom: 220rpx;
  position: relative;
}
.review .bg {
  overflow-x: hidden;
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: -1;
  top: 0;
  left: 0;
  background-repeat: no-repeat;
  background-size: cover;
  background-position: 50%;
  filter: blur(4px);
}
.review .title {
  width: 750rpx;
  height: 44rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  box-sizing: content-box;
  color: #ffffff;
  font-size: 34rpx;
}
.review .action-op {
  width: 750rpx;
  padding: 0 32rpx;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  align-items: center;
  position: fixed;
  bottom: 130rpx;
}
.review .action-op .op-btn {
  width: 316rpx;
  height: 78rpx;
  background: linear-gradient(103deg, #ffbfb7, #ff2352 100%);
  border-radius: 114rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32rpx;
  font-weight: 500;
  color: #ffffff;
}
.review .action-op .op-btn.share {
  margin: 0;
  padding: 0;
}
.review .action-op .op-btn.share::before {
  margin: 0;
  padding: 0;
}
.review .action-op .op-btn.share::after {
  border: none;
}
````

## File: pages/review/reviewItem/reviewItem.js
````javascript
Component({
  properties: {
    recorder: {
      type: Object
    }
  },
  methods: {
    // ç‚¹å‡»é¢„è§ˆå›¾ç‰‡
    preview(e) {
      this.triggerEvent('previewImage', {
        activeImg: this.data.recorder.imgs,
        imgIndex: e.currentTarget.dataset.index || 0
      });
    }
  }
});
````

## File: pages/review/reviewItem/reviewItem.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/review/reviewItem/reviewItem.wxml
````
<view class="reviewItem">
  <view class="reviewHeader">
    <view class="left">
      <view
        class="avatar"
        style="background-image: url({{ recorder.avatar }});"
      ></view>
      <view class="name">{{ recorder.name }}</view>
      <view class="action">
        {{ recorder.action === 1 ? "å‘å¸ƒäº†" : "å‘è¡¨äº†" }}
      </view>
      <view class="name" wx:if="{{ recorder.action === 1 }}"
        >{{ recorder.count }}å¼ å›¾ç‰‡</view
      >
      <view class="name" wx:if="{{ recorder.action !== 1 }}"
        >{{ recorder.count }}æ¡å¼¹å¹•</view
      >
    </view>

    <view class="right">
      <view class="badge host" wx:if="{{ recorder.userType === 0 }}"
        >ä¸»æŒäºº</view
      >
      <view class="badge red" wx:if="{{ recorder.userType == 2 }}"
        >å¥³æ–¹äº²å‹</view
      >
      <view class="badge blue" wx:if="{{ recorder.userType == 1 }}"
        >ç”·æ–¹äº²å‹</view
      >
    </view>
  </view>
  <view class="dmContent" wx:if="{{ recorder.dm }}">
    {{ recorder.dm }}
  </view>
  <swiper
    wx:if="{{ recorder.action === 1 && recorder.imgs.length > 0 }}"
    class="swiper"
  >
    <swiper-item
      class="swiper-item"
      wx:for="{{ recorder.imgs }}"
      wx:for-item="img"
      wx:key="img"
    >
      <image
        src="{{ img }}"
        alt=""
        srcset=""
        class="img"
        mode="aspectFill"
        bind:tap="preview"
        data-index="{{ index }}"
      ></image>
    </swiper-item>
  </swiper>

  <view class="reviewFooter">
    {{ recorder.datetime }}
  </view>
</view>
````

## File: pages/review/reviewItem/reviewItem.wxss
````
.reviewItem {
    width: 686rpx;
    margin: 0 auto;
    margin-top: 32rpx;
    background-color: #fff;
    border-radius: 16rpx;
  }
  .reviewItem .reviewHeader {
    height: 92rpx;
    display: flex;
    padding: 0 24rpx;
    box-sizing: border-box;
    justify-content: space-between;
    align-items: center;
  }
  .reviewItem .reviewHeader .left {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-grow: 1;
  }
  .reviewItem .reviewHeader .left .avatar {
    width: 48rpx;
    height: 48rpx;
    border-radius: 50%;
    background-size: cover;
    margin-right: 14rpx;
    border: 2rpx solid #DCDCDC;
    box-sizing: content-box;
  }
  .reviewItem .reviewHeader .left .name {
    color: #333333;
    font-size: 28rpx;
    margin-right: 16rpx;
    width: 160rpx;
    overflow: hidden;
    flex-grow: 1;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .reviewItem .reviewHeader .left .action {
    margin-right: 16rpx;
    font-size: 28rpx;
    color: rgba(0, 0, 0, 0.4);
  }
  .reviewItem .reviewHeader .right {
    flex-grow: 1;
  }
  .reviewItem .reviewHeader .right .badge {
    width: 100rpx;
    height: 40rpx;
    background: #010101;
    border-radius: 56rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20rpx;
    color: #fff;
  }
  .reviewItem .reviewHeader .right .badge.host {
    background: #010101;
  }
  .reviewItem .reviewHeader .right .badge.red {
    background: linear-gradient(265deg, #fd31f7 0%, #f55670 100%);
  }
  .reviewItem .reviewHeader .right .badge.blue {
    background: linear-gradient(264deg, #31a3fd 0%, #565ef5 100%);
  }
  .reviewItem .dmContent {
    padding-left: 86rpx;
    padding-right: 86rpx;
    box-sizing: border-box;
    font-size: 40rpx;
    color: #333333;
    margin-top: 10rpx;
    margin-bottom: 16rpx;
  }
  .reviewItem .swiper {
    width: 750rpx;
    height: 360rpx;
    padding-left: 86rpx;
    margin: 0 auto;
    margin-top: 16rpx;
    margin-bottom: 24rpx;
    display: flex;
    justify-content: flex-start;
    align-items: center;
  }
  .reviewItem .swiper .swiper-item {
    width: 360rpx;
    height: 360rpx;
  }
  .reviewItem .swiper .swiper-item .img {
    width: 360rpx;
    height: 360rpx;
  }
  .reviewItem .reviewFooter {
    padding-left: 86rpx;
    height: 74rpx;
    font-size: 24rpx;
    color: rgba(0, 0, 0, 0.4);
  }
````

## File: utils/qiniu/index.js
````javascript
import { reqGetQiniuToken } from '../../api/index.js';
import { generateRandomId } from '../index.js';

const qiniu  = require('./qiniu');

/**
 * è¾…åŠ©å‡½æ•° ç”¨äºç”Ÿæˆä¸ƒç‰›äº‘ä¸Šä¼ æ‰€éœ€è¦çš„key
 */
const getKey = () => {
    const getTodayStr = () => {
        const today = new Date();
        const year = today.getFullYear();
        let month = today.getMonth() + 1;
        month = month.toString().padStart(2, '0');
        let day = today.getDate();
        day = day.toString().padStart(2, '0');
        return `${year}${month}${day}`;
    }
  return `joymewMp/${getTodayStr()}/${generateRandomId(12)}`
}


/**
 * åˆå§‹åŒ–ä¸ƒç‰›äº‘
 * @description è·å–ä¸ƒç‰›äº‘token->åˆå§‹åŒ–ä¸ƒç‰›äº‘
 */
const init = () => {
    return new Promise(async (resolve, reject) => {
        try {
            // 1.è·å–ä¸ƒç‰›äº‘token
            const qiniuRes = await reqGetQiniuToken();
            // 2.ç”Ÿæˆé…ç½®å¯¹è±¡
            const options = {
                region: 'ECN',
                uptoken: qiniuRes.data.token,
                domain: 'https://ustatic.hudongmiao.com/',
            }
            // 3.åˆå§‹åŒ–ä¸ƒç‰›äº‘
            qiniu.init(options);
            resolve();
        } catch (err) {
            reject(err);
        }

    });
   
}

/**
 * ä¸Šä¼ å•ä¸ªæ–‡ä»¶
 * @param {String} filePath ä¸´æ—¶æ–‡ä»¶è·¯å¾„
 */

const upload = (filePath) => {
    return new Promise((resolve, reject) => {
        qiniu.upload(filePath, (res) => {
            resolve(res);
        },(err) => {
            reject(err);
        }, {
            region: 'ECN',
            key: getKey(),
        });
    });
}

/*
 * ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ 
 * @param {Array} fileArr ä¸´æ—¶æ–‡ä»¶è·¯å¾„æ•°ç»„
 * @returns 
 */

function uploadFiles(fileArr) {
    return new Promise(function (resolve, reject) {
      const asyncTask = [];
  
      fileArr.forEach((fileItem) => {
        asyncTask.push(upload(fileItem));
      });
  
      wx.showLoading({
        mask: true,
        title: 'ä¸Šä¼ ä¸­ï¼Œè¯·ç¨ç­‰~'
      })
      Promise.all(asyncTask).then((res) => {
        wx.hideLoading();
        console.log(res);
        resolve(res);
      }).catch((err) => {
        wx.hideLoading();
        console.log(err);
        reject(err);
      })
    })
  }



export default {
    init,
    upload,
    uploadFiles
}
````

## File: utils/request.js
````javascript
import { MP_HOST, H5_HOST, WWW_HOST } from '../assets/constant/host';

const HOST_MAP = {
  MP: MP_HOST,
  H5: H5_HOST,
  WWW: WWW_HOST,
};

/**
 * å¾—åˆ°å®Œæ•´çš„è¯·æ±‚url
 * @description é»˜è®¤æ˜¯MPåŸŸå
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡«
 * @param {String} host è¯·æ±‚åŸŸåç±»å‹ å¯é€‰ hostå–å€¼èŒƒå›´ï¼š'MP', 'H5', 'WWW'
 */
function getUrl(url, host) {
  return host ? `${HOST_MAP[host]}${url}` : MP_HOST + url;
}

/**
 * @param {Boolean} needAppId æ˜¯å¦éœ€è¦appId
 */
function getHeader(needAppId) {
  const header = {
    'Content-Type': 'application/x-www-form-urlencoded',
    token: wx.getStorageSync('token'),
  };
  if (needAppId) {
    header.appId = wx.getStorageSync('accountInfo_appId');
  }
  return header;
}

function failTip(err) {
  if (err === '401') {
    wx.showToast({
      title: 'ç™»å½•å·²è¿‡æœŸ',
      icon: 'error',
    });
    return;
  }

  wx.showToast({
    title: `è¯·æ±‚å¤±è´¥:${err}`,
    icon: 'error',
  });
}

function showLoading(cancelLoading) {
  if (cancelLoading) {
    return;
  }
  wx.showLoading({
    title: 'è¯·æ±‚ä¸­...',
    mask: true,
  });
}

function hideLoading(cancelLoading) {
  if (cancelLoading) {
    return;
  }
  wx.hideLoading();
}

/**
 * @typedef {Object} MyRequestOptions
 * @property {Boolean} cancelLoading æ˜¯å¦å–æ¶ˆloading
 * @property {Boolean} needAppId æ˜¯å¦éœ€è¦appId
 * @property {keyof HOST_MAP} host è¯·æ±‚åŸŸåç±»å‹ å–å€¼èŒƒå›´ï¼š'MP', 'H5', 'WWW'
 */

/**
 * æ™®é€šçš„è¯·æ±‚
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡« æ¯”å¦‚ï¼šuser/login
 * @param {'GET'|'POST'} method è¯·æ±‚æ–¹å¼ å¿…å¡« å–å€¼èŒƒå›´ï¼šGET,POST
 * @param {AnyObject} data è¯·æ±‚æ•°æ® å¿…å¡«
 * @param {
 * MyRequestOptions & WechatMiniprogram.RequestOption
 * } options è¯·æ±‚é…ç½® å¯é€‰ { cancelLoading(Boolean),needAppId(Boolean), host(String) }
 * hostï¼šé»˜è®¤æ˜¯MPåŸŸå å–å€¼èŒƒå›´ï¼š'MP', 'H5', 'WWW'
 * @returns Promise
 */
export function request(url, method = 'GET', data = {}, options = {}) {
  return new Promise(async (resolve, reject) => {
    showLoading(options.cancelLoading);
    const urlLast = getUrl(url, options.host);
    const header = getHeader(options.needAppId);
    wx.request({
      url: urlLast,
      method,
      data,
      header,
      success: (res) => {
        hideLoading(options.cancelLoading);
        if (res.data.message === '401') {
          wx.removeStorageSync('token');
          failTip(res.data.message);
          reject('401');
          return;
        }
        resolve(res.data);
      },
      fail: (err) => {
        hideLoading(options.cancelLoading);
        failTip(err);
        reject(err);
      },
    });
  });
}

/**
 * ä¸Šä¼ æ–‡ä»¶çš„è¯·æ±‚
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡«
 * @param {String} filePath æ–‡ä»¶è·¯å¾„ å¿…å¡«
 * @param {Object} options è¯·æ±‚é…ç½® å¯é€‰ { cancelLoading(Boolean), host(String),token }
 * @returns Promise
 */
export function uploadFileRequest(url, filePath, options = {}) {
  return new Promise((resolve, reject) => {
    showLoading(options.cancelLoading);
    const urlLast = getUrl(url, options.host);
    const token = options.token || wx.getStorageSync('token');
    wx.uploadFile({
      url: urlLast,
      filePath: filePath,
      name: 'file',
      header: {
        token,
      },
      formData: {
        prefix: 'mpFileUpload',
      },
      success: function (res) {
        hideLoading(options.cancelLoading);
        resolve(res);
      },
      fail: function (err) {
        hideLoading(options.cancelLoading);
        failTip(err);
        reject(err);
      },
    });
  });
}

/**
 * æ–°çš„è¯·æ±‚æ–¹æ³•ï¼ˆæµ‹è¯•ä¸­ï¼‰
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡«
 * @param {Object} data è¯·æ±‚æ•°æ® å¯é€‰
 * @param {WechatMiniprogram.RequestOption & MyRequestOptions} options è¯·æ±‚é…ç½® å¯é€‰
 * @returns {WechatMiniprogram.RequestSuccessCallbackResult}
 */
export const req = (url, data = {}, options = {}) => {
  return new Promise((resolve, reject) => {
    showLoading(options.cancelLoading);
    const urlLast = getUrl(url, options.host);
    const header = getHeader(options.needAppId);
    wx.request({
      url: urlLast,
      data,
      header,
      success: (res) => {
        if (res.data.message === '401') {
          wx.removeStorageSync('token');
          failTip(res.data.message);
          reject('401');
          return;
        }
        resolve(res.data);
      },
      fail: (err) => {
        failTip(err);
        reject(err);
      },
      complete: () => {
        hideLoading(options.cancelLoading);
      },
      ...options,
    });
  });
};

/**
 * æ™®é€šçš„getè¯·æ±‚
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡«
 * @param {Object} data è¯·æ±‚æ•°æ® å¯é€‰
 * @param {WechatMiniprogram.RequestOption & MyRequestOptions} options è¯·æ±‚é…ç½® å¯é€‰
 */
export const reqGet = (url, data = {}, options = {}) =>
  req(url, data, { method: 'GET', ...options });

/**
 * æ™®é€šçš„postè¯·æ±‚
 * @param {String} url è¯·æ±‚åœ°å€ å¿…å¡«
 * @param {Object} data è¯·æ±‚æ•°æ® å¯é€‰
 * @param {WechatMiniprogram.RequestOption & MyRequestOptions} options è¯·æ±‚é…ç½® å¯é€‰
 */
export const reqPost = (url, data = {}, options = {}) =>
  req(url, data, { method: 'POST', ...options });
````

## File: api/gift.js
````javascript
import {
  request
} from '../utils/request'

/**
 * è·å–ç¤¼ç‰©åˆ—è¡¨
 * @param {String} liveId æ´»åŠ¨id
 * @returns
 */
export function reqGetGiftList(splid) {
  return request("hmGiftController/listGift7", "GET", {
    splid,
  });
}

/**
 * è·å–ç­¾åˆ°æ’å(é€ç¥ç¦æ’å)
 */
export function reqGetSignRankList(splid) {
  return request("hmGiftController/findGiftRankListAll", "GET", {
    splid,
  });
}

/**
 * å‘ç¤¼ç‰©
 */
export function reqSendGift({
  splid,
  giftId
}) {
  return request("hmGiftController/sendGift6", "POST", {
    splid,
    giftconst: giftId,
  });
}

/**
 * å‘ç¤¼ç‰©å¹¿æ’­
 * @param {string} giftId
 * @param {string} content æ–‡æœ¬å†…å®¹
 * @param {string} imgUrl å›¾ç‰‡
 * @param {string} times ç…§ç‰‡ç¤¼ç‰©æ—¶é—´
 */
export function reqSendGiftBroadCast({
  giftId,
  content,
  imgUrl,
  times
}) {
  const tempObj = {
    liwuId: giftId,
    content,
    tpUrl: imgUrl,
    times,
  };
  const targetObj = {
    splid: wx.getStorageSync('liveId')
  }
  for (let key in tempObj) {
    if (tempObj[key]) {
      targetObj[key] = tempObj[key];
    }
  }
  return request('sendMsgController/liwuGo6', 'POST', targetObj);
}

/**
 * å‘å–µé’»çº¢åŒ…
 * @param {string} total å–µé’»é‡‘é¢
 * @param {string} size å–µé’»å‘é€ç»™å¤šå°‘äºº
 * @param {string} type å–µé’»çº¢åŒ…ç±»å‹
 * 
 */
export function reqSendDiamondHb({
  total,
  size,
  type
}) {
  return request("redPackage/sendRedPackage", "POST", {
    splid: wx.getStorageSync('liveId'),
    total,
    size,
    type,
  });
}

/**
 * ä¿®æ”¹ä¸ªäººä¿¡æ¯
 */
export function reqEditUserInfo({
  wx_name = '',
  avator = '',
  table_number = '',
  position = '',
  type = ''
}) {
  return request('hmGiftController/editUserInfo', 'POST', {
    wx_name,
    avator,
    table_number,
    position,
    type,
    splid: wx.getStorageSync('liveId'),
  });
}

/**
 * è´­ä¹°è¿›åœºç‰¹æ•ˆ
 */
export function reqBuyVipEnterEffect(giftId) {
  return request('hmGiftController/buyVipJc', 'POST', {
    giftconst: giftId,
    splid: wx.getStorageSync('liveId'),
  });
}


/**
 * è·å–æŠ½å¥–æœºä¼š
 */
export function reqGetSendGiftChance() {
  return request('giftLotteryController/getChance', 'POST', {
    splid: wx.getStorageSync('liveId'),
  });
}

/**
 * å‘ç¤¼ç‰©æŠ½å¥–
 * idå’ŒqueryTypeéƒ½æ˜¯è·å–æŠ½å¥–æœºä¼šæ¥å£è¿”å›çš„
 */
export function reqSendGiftLottery({id,queryType}) {
  return request('giftLotteryController/useChance', 'POST', {
    splid: wx.getStorageSync('liveId'),
    id,
    queryType,
  });
}

/**
 * ç”¨æ‰å‘ç¤¼ç‰©çš„æœºä¼š
 */
export function reqUpdateSendGiftStatus({id,queryType}) {
  return request('giftLotteryController/updateStatus', 'POST', {
    splid: wx.getStorageSync('liveId'),
    id,
    queryType,
  });
}
````

## File: appGlobalData/siyiInfo.js
````javascript
/**
 * æœ¬åœºæ´»åŠ¨ä¸»æŒäººä¿¡æ¯æ¨¡å—
 */

/**
 *
 * @param {Object} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function siyiInfo_module(app) {
    const { globalData } = app;
    globalData.siyiInfo_isOpenWxPhone = false; // {Boolean} æ˜¯å¦éœ€è¦å±•ç¤ºå¾®ä¿¡è·å–æ‰‹æœºå·ç»„ä»¶
    globalData.siyiInfo_isNeedUserComment = false; // {Boolean} æ˜¯å¦éœ€è¦å¼€å¯è¯„ä»·æ¶ˆæ¯è®¢é˜…åŠŸèƒ½

    /**
     * @param {Object} siyiInfo
     * @description keyä¸å·²æœ‰çš„globalData.siyiInfo_xxxå±æ€§çš„xxxå¯¹åº”(æ¯”å¦‚å±æ€§isOpenWxPhoneå¯¹åº”globalData.siyiInfo_isOpenWxPhone)
     */
    app.siyiInfo_setSiyiInfo = (siyiInfo) => {
      const keys = Object.keys(siyiInfo);
      keys.forEach((key) => {
        if(siyiInfo[key] !== undefined) {
          globalData[`siyiInfo_${key}`] = siyiInfo[key];
        }
      });
    };
  }
  
  export default siyiInfo_module;
````

## File: components/privacyAuthorize/privacyAuthorize.js
````javascript
import {
  H5_HOST
} from '../../assets/constant/host';

const app = getApp();
const SERVICE_CONTRACT_LINK = `${H5_HOST}agreement/service.html?time=${Date.now()}`;

Component({
  properties: {
    needAutoShow: { // æ˜¯å¦éœ€è¦å¼¹çª—è‡ªåŠ¨å¼¹å‡º(æ¡ä»¶æ»¡è¶³çš„æ—¶å€™)
      value: false,
      type: Boolean
    }
  },
  data: {
    privacyAuthorizeVisible: false,
    privacyContractName: '',
    serviceContractName: '',
    mpName: app.globalData.accountInfo_name
  },
  lifetimes: {
    async attached() {
      try {
        // ç›‘å¬
        this.watchNeedPrivacyAuthEvent();
        // éœ€è¦éšç§æˆæƒå˜›?
        const needAuthorization = await this.getPrivacyAuthInfo();
        // æ¡ä»¶æ»¡è¶³(éœ€è¦éšç§æˆæƒ&&è®¾ç½®äº†è‡ªåŠ¨å¼¹å‡ºå¼¹çª—)çš„æƒ…å†µä¸‹è‡ªåŠ¨å¼¹çª—éšç§æˆæƒå¼¹çª—
        this.autoShowLogic(needAuthorization);
      } catch (err) {
        console.log(err);
      }
    },
    detached() {}
  },
  methods: {
    // æ‰“å¼€éšç§åè®®å…·ä½“å†…å®¹
    onPrivacyContractOpen() {
      wx.openPrivacyContract({
        success: () => {}, // æ‰“å¼€æˆåŠŸ
        fail: () => {}, // æ‰“å¼€å¤±è´¥
        complete: () => {}
      });
    },
    // æ‰“å¼€æœåŠ¡åè®®
    onServiceContractOpen() {
      const url = encodeURIComponent(SERVICE_CONTRACT_LINK);
      wx.navigateTo({
        url: `/packageC/pages/outerLink/outerLink?link=${url}`
      });
    },
    // åŒæ„æˆæƒ
    onAgree() {
      this.privacyAuthResolve({
        event: 'agree',
        buttonId: 'agree-btn'
      });
      this.setData({
        privacyAuthorizeVisible: false
      });
    },
    // æ‹’ç»æˆæƒ
    onDisagree() {
      this.privacyAuthResolve({
        event: 'disagree'
      });
      this.setData({
        privacyAuthorizeVisible: false
      });
    },
    // ç›‘å¬â€œéœ€è¦éšç§æˆæƒâ€äº‹ä»¶
    watchNeedPrivacyAuthEvent() {
      wx.onNeedPrivacyAuthorization((resolve) => {
        console.log('ç›‘å¬åˆ°éšç§è·å–æ“ä½œ');
        // æ‰“å¼€éšç§æˆæƒå¼¹çª—
        this.setData({
          privacyAuthorizeVisible: true
        });
        // æš‚å­˜resolve(æ”¹å˜å¾®ä¿¡éšç§ç»„ä»¶çš„çŠ¶æ€)
        this.privacyAuthResolve = resolve;
      });
    },
    // æŸ¥è¯¢éšç§åç§°ã€æ˜¯å¦éœ€è¦éšç§æˆæƒ
    getPrivacyAuthInfo() {
      return new Promise((resolve, reject) => {
        wx.getPrivacySetting({
          success: (res) => {
            console.log("æ˜¯å¦éœ€è¦æˆæƒï¼š", res.needAuthorization, "éšç§åè®®çš„åç§°ä¸ºï¼š", res.privacyContractName);
            if (res.needAuthorization) {
              this.setData({
                privacyContractName: res.privacyContractName || `ã€Š${app.globalData.accountInfo_name}å°ç¨‹åºéšç§ä¿æŠ¤æŒ‡å¼•ã€‹`,
                serviceContractName: `ã€Š${app.globalData.accountInfo_name}å°ç¨‹åºæœåŠ¡åè®®ã€‹`
              });
              resolve(res.needAuthorization);
            }
          },
          fail: (err) => {
            console.log(err);
            reject(err);
          },
        })
      })
    },
    // è‡ªåŠ¨å¼¹å‡ºéšç§æˆæƒçª—(æ¡ä»¶æ»¡è¶³çš„æƒ…å†µ)çš„é€»è¾‘
    // æ¡ä»¶ï¼šéœ€è¦éšç§æˆæƒå¹¶ä¸”éœ€è¦è‡ªåŠ¨å¼¹å‡º
    autoShowLogic(needPrivacyAuth) {
      if (needPrivacyAuth === true && this.data.needAutoShow) {
        wx.requirePrivacyAuthorize({});
      }
    }
  },
});
````

## File: components/privacyAuthorize/privacyAuthorize.wxml
````
<!-- éšç§æˆæƒå¼¹çª— -->
<view class="privacyAuthorize" wx:if="{{privacyAuthorizeVisible}}">
  <view class="shade"></view>
  <view class="box">
   <view class="platformInfo">
    <image src="https://static.hudongmiao.com/joymewMp/defaultHeadImg2.png" class="avatar" />
    {{mpName}}
   </view>
    <view class="content">åœ¨ä½ ä½¿ç”¨ã€{{mpName}}ã€‘æœåŠ¡ä¹‹å‰ï¼Œè¯·ä»”ç»†é˜…è¯»<text class="link" bindtap="onPrivacyContractOpen">{{privacyContractName}}</text>ã€<text class="link" bindtap="onServiceContractOpen">{{serviceContractName}}</text>ã€‚å¦‚ä½ åŒæ„{{privacyContractName}}ã€{{serviceContractName}}ï¼Œè¯·ç‚¹å‡»"åŒæ„"å¼€å§‹ä½¿ç”¨ã€{{mpName}}ã€‘</view>
    <view class="btnGroup">
      <button class="btn refuseBtn" bindtap="onDisagree">æ‹’ç»</button>
      <button id="agree-btn" open-type="agreePrivacyAuthorization" bindagreeprivacyauthorization="onAgree" class="btn agreeBtn">åŒæ„</button>
    </view>
  </view>
</view>
````

## File: packageA/api/recharge.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from '../../api/pay'

/**
 * è·å–å‘ç¤¼ç‰©æ’è¡Œæ¦œ
 */
export function reqGetGiftRankList(splid) {
    return request('hmGiftController/findGiftRankList6', 'GET', {
        splid,
    });
}

/**
 * å……å€¼å–µé’»
 */
export async function reqDiamondRecharge({total, userId,openId}) {
    const res =  await request('hmWxmoney/chongzhiMiao', 'POST', {
        total,
        userId,
        openid: openId,
    },{
        needAppId: true,
        cancelLoading: true,
    });
    return reqWxPay(res);
}

/**
 * ä¿®æ”¹ä¸ªäººä¿¡æ¯
 */
export function reqEditUserInfo({wx_name = '', avator = '', table_number = '', position = '', type = '', splid = ''}) {
    return request('hmGiftController/editUserInfo', 'POST', {
        wx_name,
        avator,
        table_number,
        position,
        type,
        splid,
    });
}

/**
 * è·å–ç”·å¥³æ–¹å‘é€ç¤¼ç‰©æ’è¡Œæ¦œ
 */
export function reqGetRoleGiftRankList(splid) {
    return request('hmGiftController/findGiftRankList7', 'GET', {
        splid,
    });
}


/**
 * è·å–ä¸ªäººä¿¡æ¯
 */
export function reqGetUserInfo() {
  return request('wxScan/getUserBaseInfo', 'GET', {});
}
````

## File: packageA/pages/hbkdRecharge/hbkdRecharge.wxss
````
@import "./styles/templateMode.wxss";
@import "./styles/commonMode.wxss";
@import "./styles/zshlMode.wxss";

.hbkdRechargeContainer {
    height: 100vh;
    overflow-y: scroll;
}
````

## File: packageA/pages/rechargeWedding/rechargeWedding.wxss
````
.rechargeContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #F4F7F9;
    height: 1624rpx;
}

.rechargeContainer>.topBg {
    width: 100%;
    height: 678rpx;
    position: absolute;
}

.rechargeContainer>.userInfo {
    width: 100%;
    display: flex;
    align-items: center;
    margin-top: 120rpx;
    padding: 0 40rpx;
    position: relative;
}

.userInfo>.headImgBox {
    position: relative;
    width: 110rpx;
    height: 110rpx;
}

.userInfo>.headImgBox>.headImg {
    width: 100%;
    height: 100%;
    border-radius: 50%;
}

.userInfo>.headImgBox>.pencilImg {
    width: 40rpx;
    height: 40rpx;
    position: absolute;
    top: -10rpx;
    right: -2rpx;
}

.userInfo>.accountInfo {
    margin-left: 36rpx;
}

.userInfo>.accountInfo>.top {
    display: flex;
    align-items: center;
}

.userInfo>.accountInfo>.top>.nickname {
    font-size: 36rpx;
    color: #FFFFFF;
    font-weight: 500;
}

.userInfo>.accountInfo>.top>.level {
    width: 48rpx;
    height: 42rpx;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 20rpx;
}

.userInfo>.accountInfo>.top>.level>.crownImg {
    width: 100%;
    height: 100%;
}

.userInfo>.accountInfo>.top>.level>.levelVal {
    font-size: 20rpx;
    color: #fff;
    position: absolute;
    margin-top: 6rpx;
}

.userInfo>.accountInfo>.bottom {
    margin-top: 16rpx;
    color: rgba(255, 255, 255, 0.6);
    font-size: 24rpx;
    display: flex;
    align-items: center;
}

.userInfo>.accountInfo>.bottom>.diamondImg {
    width: 32rpx;
    height: 26rpx;
    margin-left: 14rpx;
}

.userInfo>.relativeType {
    width: 140rpx;
    height: 48rpx;
    background: rgba(255, 255, 255, 0.28);
    border-radius: 24rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20rpx;
    color: rgba(255, 255, 255, 0.6);
    position: absolute;
    right: 40rpx;
    bottom: 0;

}

.userInfo>.relativeType>.relativeIcon {
    width: 22rpx;
    height: 24rpx;
    margin-right: 10rpx;
}

.rechargeContainer>.limitRechargeArea {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 140rpx;
    position: relative;
}

.limitRechargeArea>.rechargeItem {
    width: 187rpx;
    height: 100rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 12rpx 12rpx;
    background-color: #EEE9FF;
    border-radius: 10rpx;
    position: relative;
}

.limitRechargeArea>.rechargeItem>.diamondIcon {
    width: 64rpx;
    height: 52rpx;
    margin-top: 12rpx;
}

.limitRechargeArea>.rechargeItem>.num {
    font-size: 42rpx;
    font-weight: 500;
    color: #9C2CF3;
    margin-left: 6rpx;
}
.limitRechargeArea>.rechargeItem>.thIcon {
    width: 74rpx;
    height: 32rpx;
    position: absolute;
    top: -16rpx;
    right: -16rpx;
}
.rechargeContainer>.agreement {
    font-size: 22rpx;
    font-weight: 500;
    color: #666666;
    margin-top: 12rpx;
    position: relative;
    display: flex;
}

.rechargeContainer>.agreement>.bond {
    color: #DC2F2F;
}

.rechargeContainer>.wishSheetList {
    position: relative;
    margin-top: 90rpx;
    width: 690rpx;
    height: 856rpx;
    background: #FFFFFF;
    box-shadow: 0rpx 4rpx 10rpx -2rpx rgba(0, 0, 0, 0.06);
    border-radius: 8rpx;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.wishSheetList>.bdTitle {
    width: 372rpx;
    height: 86rpx;
    position: absolute;
    top: -42rpx;
}

.wishSheetList>.vsTitle {
    display: flex;
    align-items: center;
    width: 100%;
    justify-content: center;
    margin-top: 84rpx;
}

.wishSheetList>.vsTitle>.boy {
    display: flex;
    align-items: center;
    font-size: 32rpx;
    font-weight: 600;
    color: #4526C2;
}

.wishSheetList>.vsTitle>.boy>.sexIcon {
    width: 36rpx;
    height: 40rpx;
    margin-right: 8rpx;
}

.wishSheetList>.vsTitle>.girl {
    display: flex;
    align-items: center;
    font-size: 32rpx;
    font-weight: 600;
    color: #EA1877;
}

.wishSheetList>.vsTitle>.girl>.sexIcon {
    width: 32rpx;
    height: 44rpx;
    margin-right: 8rpx;
}

.wishSheetList>.vsTitle>.vsIcon {
    width: 52rpx;
    height: 52rpx;
    margin: 0 58rpx;
}

.wishSheetList>.gapLine {
    width: 636rpx;
    height: 2rpx;
    border: 1rpx solid #EEEEEE;
    margin-top: 24rpx;
}

.wishSheetList>.listWrap {
    display: flex;
    width: 100%;
    margin-top: 36rpx;
    justify-content: center;
    height: 800rpx;
    overflow-y: scroll;

}

.wishSheetList>.listWrap>.sexList {
    width: 35%;
    margin: 0 24rpx;
}

.sexList>.item {
    margin-bottom: 60rpx;
}

.sexList>.item>.user {
    display: flex;
    align-items: center;
    /* width: 240rpx; */
    justify-content: space-between;
}

.sexList>.item>.user>.baseInfo {
    display: flex;
    align-items: center;
    margin-right: 12rpx;
}

.sexList>.item>.user>.baseInfo>.headImg {
    width: 56rpx;
    height: 56rpx;
    margin-right: 14rpx;
    border-radius: 50%;
}

.sexList>.item>.user>.baseInfo>.name {
    font-size: 28rpx;
    color: #514E4E;
    font-weight: 400;
}

.sexList>.item>.user>.level {
    width: 36rpx;
    height: 30rpx;
    position: relative;
    display: flex;
    justify-content: center;
}

.sexList>.item>.user>.level>.crownImg {
    width: 100%;
    height: 100%;
}

.sexList>.item>.user>.level>.levelVal {
    font-size: 12rpx;
    color: #fff;
    position: absolute;
    top: 16rpx;
}

.sexList>.item>.sendGiftNum {
    font-size: 28rpx;
    font-weight: 400;
    color: #4526C2;
    margin-top: 12rpx;
}

.popupArea {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
}

.popupArea>.shade {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
    top: 0;
    left: 0;
}

.popupArea>.infoForm {
    width: 750rpx;
    height: 1130rpx;
    background: #FFFFFF;
    position: absolute;
    bottom: 0;
    border-top-right-radius: 20rpx;
    border-top-left-radius: 20rpx;
    padding: 0 50rpx;
    padding-top: 30rpx;
    transition: all 0.3s ease-out;
}

.popupArea>.infoForm.hide {
    transform: translateY(1130rpx);
}

.popupArea>.infoForm.show {
    transform: translateY(0rpx);
}

.infoForm>.formItem {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 138rpx;
    position: relative;
}

.infoForm>.formItem:nth-child(4) {
    position: relative;
}

.infoForm>.formItem>.key {
    font-size: 32rpx;
    font-weight: 400;
    color: #8F9297;
}

.infoForm>.formItem>.formCt {
    display: flex;
    align-items: center;
    position: relative;
}

.infoForm>.formItem>.formCt>.headImg {
    width: 76rpx;
    height: 76rpx;
    border-radius: 50%;
}

.infoForm>.formItem>.formCt>.arrowRight {
    width: 28rpx;
    height: 28rpx;
    margin-left: 30rpx;
}

.infoForm>.formItem>.formCt>.nameIpt {
    font-weight: 400;
    color: #5B5E63;
    font-size: 32rpx;
    text-align: right;
    width: 256rpx;
}

.infoForm>.formItem>.formCt>.relativeGroup {
    display: flex;
}

.relativeGroup>.radioItem {
    display: flex;
    align-items: center;
}

.relativeGroup>.radioItem:nth-child(1) {
    margin-right: 66rpx;
}

.relativeGroup>.radioItem>.radioLabel {
    display: flex;
    align-items: center;
    font-weight: 400;
    font-size: 28rpx;
    margin-right: 16rpx;
}

.relativeGroup>.radioItem>.radioLabel.boy {
    color: #6112B0;
}

.relativeGroup>.radioItem>.radioLabel.girl {
    color: #ED3488;
}

.relativeGroup>.radioItem>.radioLabel>.sexIcon.boy {
    width: 32rpx;
    height: 32rpx;
    margin-right: 8rpx;
}

.relativeGroup>.radioItem>.radioLabel>.sexIcon.girl {
    width: 28rpx;
    height: 34rpx;
    margin-right: 8rpx;
}

.formItem .relativeInput {
  text-align: right;
  position: absolute;
  right: 50rpx;
}

.formItem .deskNumPicker {
    display: flex;
    align-items: center;
}

.formItem .deskNumPicker>.arrowRight {
    margin-left: 30rpx;
    width: 28rpx;
    height: 28rpx;
}

.identyLabels {
    width: 520rpx;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

.identyLabels>.label {
    width: 135rpx;
    height: 64rpx;
    border-radius: 30rpx;
    border: 2rpx solid #EEEEEE;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 28rpx;
    font-weight: 400;
    color: #5B5E63;
    margin: 25rpx 10rpx;
    white-space: nowrap;
}

.identyLabels>.label.active {
    background: linear-gradient(276deg, #71B3FF 0%, #2C82E4 100%);
    color: #FFFFFF;
}

.formConfirmItem {
    flex-direction: column;
    display: flex;
    align-items: center;
    margin-top: 150rpx;
}

.formConfirmItem>.confirmBtn {
    width: 418rpx;
    height: 90rpx;
    background: linear-gradient(300deg, #C76BFB 0%, #EA1775 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 32rpx;
    font-weight: 400;
    color: #FFFFFF;
}

.formConfirmItem>.editTip {
    font-size: 24rpx;
    font-weight: 400;
    color: #E14D4D;
    margin-top: 14rpx;
}
````

## File: packageA/pages/wishRank/wishRank.wxml
````
<view class="container">
  <view class="tip">é€å‡ºç¥ç¦ç¤¼ç‰©åæ’åºæ›´é å‰å“¦ï½</view>
  <view class="rankWrap">
    <view class="rankItem" wx:for="{{signRankList}}" wx:key="index">
      <view class="rankNum {{'rankindex' + index}}">{{index + 1}}</view>
      <image class="avatar" src="{{item.avator}}"></image>
      <view class="nickname">{{item.wx_name}}</view>
      <view class="mark" wx:if="{{item.money}}">å·²é€ç¥ç¦</view>
      <view class="position {{item.position.startsWith('1')? 'man' : (item.position.startsWith('2') ? 'woman' : '')}}">{{item.positionName}}</view>
    </view>
  </view>
  <view class="myWrap">
    <view class="myInfo">
      <view class="rankNum">{{myInfo.indexStr}}</view>
      <image class="avatar" src="{{myInfo.avator}}"></image>
      <view class="nickname">{{myInfo.wx_name}}</view>
      <view class="mark" wx:if="{{myInfo.money}}">å·²é€ç¥ç¦</view>
      <view class="position {{myInfo.position === '1' ? 'man' : (myInfo.position === '2' ? 'woman' : '')}}">{{myInfo.positionName}}</view>
    </view>
    <view class="placeholder" style="height: {{bottomLift}}px"></view>
  </view>
</view>
````

## File: packageB/api/winningRecord.js
````javascript
import { request } from "../../utils/request";

/**
 * è·å–ä¸­å¥–è®°å½•
 * @param {string} splid
 * @returns {Promise<{
*  data: {
    * newestLotteryId: string; // æœ€æ–°ä¸€æ¬¡æŠ½å¥–çš„id
    * myWinningRecordList: Array<{
    * id: number;
    * awardname: string;
    * piclink: string;
    * prize_name: null | string;
    * }> // æˆ‘çš„ä¸­å¥–è®°å½•
    * winningRecordList: Array<{
    * awardname: string;
    * cusaward_id: number;
    * kind: string;
    * piclink: string;
    * prize_name?: string;
    * rank: string;
    * splid: string;
    * winnerList: Array<{
    * avator?: string;
    * category: string;
    * create_time: string;
    * grade: string;
    * id: string;
    * notdraw: string;
    * phone_show: string;
    * splid: string;
    * userId: string;
    * wx_name: string;
    * }>;
    * }>;
    * }
    *  message: string;
    *  statusCode: string;
    *  success: boolean;
    * }}
    */
   export const reqGetWinningRecord = (splid) => {
     return request('dice/getWinningRecord', 'GET', {
       splid,
     }, {
       cancelLoading: true
     });
   };
   

   /**
    * å¥–å“æ ¸é”€
    */
   export const reqConfirmPrize = (id) => {
    return request('dice/heXiao', 'POST', {
      splid: wx.getStorageSync('liveId'),
      id,
    });
  };
````

## File: packageB/pages/sendGiftLottery/components/machineBody/index.js
````javascript
import { reqSendGiftLottery } from "../../../../../api/gift";

let timer = null;

Component({
  properties: {
    prizeList: {
      type: Array,
      value: [],
    },
    remainChance: {
      // å‰©ä½™æŠ½å¥–æœºä¼š
      type: Number,
      value: 0,
    },
    chanceDetailList: {
      // æœºä¼šæ˜ç»†åˆ—è¡¨
      type: Array,
      value: [],
    }
  },
  data: {
    activeIndex: -1,
  },
  observers: {},
  lifetimes: {
    detached() {
      this.destroyTimer();
    },
  },
  methods: {
    async startLottery() {
      if (this.data.remainChance <= 0) {
        wx.showToast({
          title: "æš‚æ— æŠ½å¥–æœºä¼š!å»å‘ç¥ç¦å§!",
          icon: "none",
        });
        return;
      }
      try {
        const chanceDetail = this.data.chanceDetailList[0];
        const { id, queryType, giftid } = chanceDetail;

        // é€šçŸ¥çˆ¶ç»„ä»¶æš‚å­˜giftid
        this.triggerEvent("giftIdTmpSave", giftid);
        // ç”¨æ‹¿åˆ°çš„æœºä¼šæ˜ç»†å‘èµ·æŠ½å¥–è¯·æ±‚
        const lotteryRes = await reqSendGiftLottery({
          id,
          queryType,
        });
        console.log('æŠ½å¥–ç»“æœ>>>', lotteryRes);
        const tmpLotteryInfo = JSON.parse(lotteryRes.data.lotteryResult.lottery_type);
        // æŠ½å®Œå¥–è¦åšçš„äº‹ï¼š
        // 1. æ‰§è¡Œå…‰åœˆåŠ¨ç”»åœæ­¢åœ¨æŒ‡å®šçš„ä½ç½®
        const endIndex = this.getRealEndIndex(lotteryRes.data.lotteryResult.index);
        await this.moveIndex(endIndex);
        // 2. æ˜¾ç¤ºä¸­å¥–ç»“æœå¼¹çª—
        // è®©çˆ¶ç»„ä»¶ç»„è£…ä¸­å¥–ç»“æœæ•°æ®
        this.triggerEvent('resultDataAssemble',{
          endIndex,
          content: tmpLotteryInfo.content,
          kind: tmpLotteryInfo.kind,
          id: lotteryRes.data.lotteryResult.id,
          remainChance: this.data.remainChance - 1,
        })
        this.showResultPopup();
        // 3. é€šçŸ¥çˆ¶ç»„ä»¶åˆ·æ–°æ•°æ®
        this.triggerEvent("dataRefresh");
        // 4. é‡ç½®å…‰æ ‡ä½ç½®
        this.setData({
          activeIndex: -1,
        });
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "æŠ½å¥–å¼‚å¸¸!",
          icon: "none",
        });
      }
      // this.moveIndex(8);
    },
    /**
     * å…‰æ ‡ç§»åŠ¨åŠ¨ç”»(ä¸»æ–¹æ³•)
     * å‰2åœˆï¼š300ç§’/æ ¼ï¼Œ
     * æœ€åä¸€åœˆ:1ç§’/æ ¼ æœ€ç»ˆåœæ­¢åœ¨ç›®æ ‡ä½ç½®
     * endIndex: ç›®æ ‡ä½ç½®
     */
    async moveIndex(endIndex) {
      await this.averageMove();
      await this.decelerationMove(endIndex);
    },
    /**
     * å‡é€Ÿç§»åŠ¨
     */
    averageMove() {
      return new Promise((resolve, reject) => {
        if (timer) {
          reject("å½“å‰æœ‰å®šæ—¶å™¨åœ¨æ‰§è¡Œï¼Œè¯·ç­‰å¾…");
          return;
        }
        let round = 1; // è®°å½•åœˆæ•°
        let count = -1;
        count++;
        this.setData({
          activeIndex: count,
        });
        timer = setInterval(() => {
          count++;
          this.setData({
            activeIndex: count,
          });
          // åˆ°äº†å°¾éƒ¨
          if (count >= this.data.prizeList.length - 1) {
            // åˆ¤æ–­åœˆæ•°
            if (round < 2) {
              round++;
              count = -1;
            } else {
              this.destroyTimer();
              resolve();
            }
          }
        }, 100);
      });
    },
    /**
     * å‡é€Ÿç§»åŠ¨
     */
    decelerationMove(endIndex) {
      return new Promise((resolve, reject) => {
        if (timer) {
          reject("å½“å‰æœ‰å®šæ—¶å™¨åœ¨æ‰§è¡Œï¼Œè¯·ç­‰å¾…");
          return;
        }
        let count = -1;
        count++;
        this.setData({
          activeIndex: count,
        });
        // å¦‚æœç›®æ ‡ä½ç½®åœ¨å‰3æ ¼ï¼Œé‚£ä¹ˆè¦å¤šè·‘ä¸€åœˆåœæ­¢åœ¨ç¬¬äºŒåœˆçš„ç›®æ ‡ä½ç½®
        if (endIndex < 3) {
          let round = 1; // è®°å½•åœˆæ•°
          timer = setInterval(() => {
            count++;
            this.setData({
              activeIndex: count,
            });
            // åˆ°äº†å°¾éƒ¨å¹¶ä¸”åœˆæ•°å°äº2
            if (count >= this.data.prizeList.length - 1 && round < 2) {
              // åœˆæ•°+1,é‡ç½®count
              round++;
              count = -1;
            }
            // åœˆæ•°å¤§äºç­‰äº2å¹¶ä¸”åˆ°äº†ç›®æ ‡ä½ç½®åˆ™ç»“æŸä»»åŠ¡
            if (count >= endIndex && round >= 2) {
              this.destroyTimer();
              resolve();
            }
          }, 300);
        } else {
          // ç›®æ ‡ä½ç½®ä¸åœ¨å‰3æ ¼ï¼Œç›´æ¥è·‘åˆ°ç›®æ ‡ä½ç½®
          timer = setInterval(() => {
            count++;
            this.setData({
              activeIndex: count,
            });
            console.log(this.data.activeIndex);
            // åˆ°äº†ç›®æ ‡ä½ç½®ï¼Œåˆ™ç»“æŸå½“å‰ä»»åŠ¡
            if (count >= endIndex) {
              this.destroyTimer();
              resolve();
            }
          }, 300);
        }
      });
    },
    /**
     * æ¸…ç©ºè®¡æ—¶å™¨
     */
    destroyTimer() {
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
    },
    /**
     * æ˜¾ç¤ºä¸­å¥–ç»“æœå¼¹çª—
     */
    showResultPopup() {
      this.triggerEvent("popupShow", "result");
    },
    /**
     * è½¬æ¢æœåŠ¡ç«¯ä¼ è¿‡æ¥çš„endIndexä¸ºå‰ç«¯ç¨‹åºå®é™…çš„endIndex
     */
    getRealEndIndex(serverEndIndex) {
      return this.data.prizeList.findIndex(
        (item) => item.index === serverEndIndex
      );
    },
  },
});
````

## File: packageB/pages/sendGiftLottery/components/machineBody/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
  }
}
````

## File: packageB/pages/sendGiftLottery/components/machineBody/index.wxml
````
<view class="machine-body">
  <view class="center-box">
    <view class="prize-item {{activeIndex === item.indexUI? 'active' : ''}}" wx:for="{{prizeList}}" wx:key="index" >
      <image src="{{item.url}}" class="prize-icon" />
    </view>
  </view>
  <view class="bottom-operate">
    <view class="start-btn" bindtap="startLottery">
      <view class="btn-content">
        <image src="https://ustatic.hudongmiao.com/joymewMp/b-text.png" class="btn-text" />
        <text wx:if="{{remainChance > 0}}">X{{remainChance}}</text>
      </view>
    </view>
  </view>
</view>
````

## File: packageB/pages/sendGiftLottery/components/machineBody/index.wxss
````
.center-box {
  width: 694rpx;
  height: 692rpx;
  background-image: url("https://ustatic.hudongmiao.com/%20miao/cent-bg_compressed.png");
  background-size: 100% 100%;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(3, min-content);
  grid-template-rows: repeat(3, min-content);
  justify-content: center;
  align-content: center;
  column-gap: 10rpx;
  row-gap: 10rpx;
}

.center-box .prize-item {
  width: 198rpx;
  height: 200rpx;
  border-radius: 20rpx;
}
.center-box .prize-item.active {
  background-color: rgba(255, 247, 43, 1);
}

.center-box .prize-item .prize-icon {
  width: 100%;
  height: 100%;
}

.bottom-operate {
  width: 748rpx;
  height: 138rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/dz-g.png");
  margin: 0 auto;
  display: flex;
  justify-content: center;
}

.bottom-operate .start-btn {
  width: 382rpx;
  height: 154rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/annd.png");
  padding-left: 51rpx;
  padding-top: 18rpx;
  font-size: 26rpx;
  font-weight: 500;
  color: #3d96ff;
}
.bottom-operate .start-btn .btn-content {
  display: flex;
  align-items: center;
  width: 288rpx;
  height: 80rpx;
  justify-content: center;
}
.bottom-operate .start-btn .btn-content .btn-text {
  width: 170rpx;
  height: 34rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/b-text.png");
}
.bottom-operate .start-btn .btn-content text {
  margin-left: 10rpx;
  margin-top: -10rpx;
}

@media screen and (max-height: 680px) {
  .center-box {
    height: 650rpx;
    row-gap: 0;
  }
}
````

## File: packageB/pages/sendGiftLottery/components/machineHeader/index.js
````javascript
import { timeoutTask } from "../../../../../utils/index";

let perDistance = 0; // æ¯æ¬¡ç§»åŠ¨çš„è·ç¦»
let timer = null; // å®šæ—¶å™¨

Component({
  properties: {
    broadTexts: {
      type: Array,
      value: [],
    },
  },
  data: {
    broadTextsUI: [],
    textItemStyle: "", // ç”¨æ¥æ§åˆ¶æ–‡æœ¬é¡¹çš„ç§»åŠ¨
  },
  lifetimes: {
    attached() {},
    detached() {
      this.destroyTimer();
    },
  },
  observers: {
    broadTexts(newVal) {
      if (newVal.length > 0) {
        this.initData(newVal);
      }
    },
  },
  methods: {
    initData(list) {
      // å°†æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ å…‹éš†ä¸€ä»½æ”¾åˆ°æœ«å°¾
      const first = list[0];
      list.push(first);
      this.setData({
        broadTextsUI: list,
      });
      // è®¡ç®—æ¯é¡¹çš„ç§»åŠ¨è·ç¦»
      perDistance = 100 / list.length;
      // è‡ªåŠ¨æ»šåŠ¨
      if (this.data.broadTextsUI.length > 1) {
        this.autoScroll();
      }
    },
    /**
     * è‡ªåŠ¨æ»šåŠ¨
     */
    autoScroll() {
      if (timer) {
        return;
      }
      let count = 0;
      timer = setInterval(() => {
        count++;
        this.scrollToIndex(count);
        if(count >= this.data.broadTextsUI.length - 1) {
          // æ»šåŠ¨åˆ°æœ€åä¸€é¡¹åˆ™è¿…é€Ÿåˆ‡æ¢åˆ°ç¬¬ä¸€é¡¹
          this.goToFirst();
          count = 0;
        }
      }, 3000);
    },
    /**
     * æ»šåŠ¨åˆ°æŸä¸€é¡¹
     * @param {Number} index ç´¢å¼•
     */
    scrollToIndex(index) {
      if (index < 0 || index >= this.data.broadTextsUI.length) {
        return;
      }
      const transY = -index * perDistance;
      // æ…¢æ…¢æ»šåŠ¨åˆ°å¯¹åº”çš„ä½ç½®
      this.setData({
        textItemStyle: `transform: translateY(${transY}%);transition: transform 0.3s linear;`,
      });
    },
    /**
     * è¿…é€Ÿåˆ‡æ¢åˆ°ç¬¬ä¸€é¡¹
     */
    goToFirst() {
      // å»¶è¿Ÿ0.3sç­‰å¾…ç•Œé¢æ¸²æŸ“å¥½(å³ï¼šç­‰å¾…å®ƒæ»šåŠ¨åˆ°æœ€åä¸€ä¸ªä½ç½®)
      timeoutTask(() => {
        this.setData({
          textItemStyle: `transform: translateY(0);`,
        });
      }, 300);
    },
    /**
     * é”€æ¯è®¡æ—¶å™¨
     */
    destroyTimer() {
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
    },
  },
});
````

## File: packageB/pages/sendGiftLottery/components/machineHeader/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
  }
}
````

## File: packageB/pages/sendGiftLottery/components/machineHeader/index.wxml
````
<view class="machine-header" bindtap="test">
  <image src="https://ustatic.hudongmiao.com/joymewMp/laba_compressed.png" class="laba" />
  <view class="text-box">
    <view class="text-item_content" style="{{textItemStyle}}">
      <view class="text-item" wx:for="{{broadTextsUI}}" wx:key="index">
        æ­å–œ
        <text class="strong">{{item.nickname}}</text>
        è·å¾—
        <text>{{item.reward}}</text>
      </view>
    </view>
  </view>
</view>
````

## File: packageB/pages/sendGiftLottery/components/machineHeader/index.wxss
````
.machine-header {
  width: 694rpx;
  height: 158rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/hd-to_compressed.png");
  display: flex;
  justify-content: center;
  padding-top: 80rpx;
  margin: 0 auto;
}

.laba {
  width: 48rpx;
  height: 46rpx;
  margin-right: 22rpx;
}

.text-box {
  height: 48rpx;
  width: 500rpx;
  font-size: 34rpx;
  font-weight: 500;
  color: #000;
  overflow: hidden;
}
/* .text-item_content {
    transition: all 0.3s ease-in-out;
} */

.text-item {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  height: 48rpx;
}
.strong {
  color: #ff2a2a;
}
````

## File: packageB/pages/sendGiftLottery/components/popup/index.js
````javascript
import { timeoutTask } from "../../../../../utils/index";

Component({
  properties: {
    popupType: {
      type: String,
      value: "", // å–å€¼: 'rule', 'result','record'
    },
    recordList: {
      type: Array,
      value: [],
    },
    resultData: {
      // ç»“æœå¼¹çª—æ‰€éœ€è¦çš„æ•°æ®
      type: Object,
      value: {
        id: "",
        prize: "", // å¥–å“åç§°
        type: "", // å–å€¼ï¼š'active' 'passive'
        remainChance: 0, // å‰©ä½™æŠ½å¥–æ¬¡æ•°
        img: "", // å¥–å“å›¾ç‰‡
      },
    },
  },
  data: {
    isScaleShow: false, // ç”¨äºæ§åˆ¶å¼¹çª—ç¼©æ”¾æ˜¾ç¤ºçš„åŠ¨ç”»
    resultBtnText: "",
  },
  observers: {
    popupType(newVal) {
      if (newVal) {
        if (newVal === "result") {
          // è®¾ç½®ç»“æœå¼¹çª—æŒ‰é’®çš„æ–‡æ¡ˆ
          this.setResultBtnText();
        }
        // ç­‰æ¸²æŸ“å®Œæˆåå†ç¼©æ”¾
        timeoutTask(() => {
          this.scaleShowBox();
        }, 100);
      }
    },
  },
  methods: {
    closePopup() {
      // é‡ç½®ç¼©æ”¾åŠ¨ç”»çŠ¶æ€
      this.setData({
        isScaleShow: false,
      });
      // é€šçŸ¥çˆ¶ç»„ä»¶å…³é—­
      this.triggerEvent("popupClose");
    },
    scaleShowBox() {
      this.setData({
        isScaleShow: true,
      });
    },
    setResultBtnText() {
      if (this.data.resultData.type === "active") {
        this.setData({
          resultBtnText: "å»å‘é€",
        });
      } else if (
        this.data.resultData.type === "passive" &&
        this.data.resultData.remainChance > 0
      ) {
        this.setData({
          resultBtnText: "å†æŠ½ä¸€æ¬¡",
        });
      } else {
        this.setData({
          resultBtnText: "æˆ‘çŸ¥é“äº†",
        });
      }
    },
    /**
     * å‰å¾€å‘ç¤¼ç‰©
     * å‡†å¤‡å¥½å‘ç¤¼ç‰©éœ€è¦çš„æ•°æ®
     * é€šçŸ¥çˆ¶ç»„ä»¶å…³é—­å½“å‰å¼¹çª—ã€æ‰“å¼€å‘ç¤¼ç‰©å¼¹çª—
     */
    toSendGift(e) {
      this.closePopup();
      const id = e.currentTarget.dataset.id;
      const targetRecord = this.data.recordList.find((item) => String(item.id) === String(id));
      this.triggerEvent("sendGiftDataSet", {
        kind: targetRecord.lotteryType.type,
        giftId: targetRecord.giftid,
        id: targetRecord.id,
        queryType: targetRecord.queryType,
      });
      this.triggerEvent("sendGiftShow");
    },
    /**
     * ä¸­å¥–ç»“æœå¼¹çª—çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶
     */
    handleResultBtn() {
      this.closePopup();
      console.log(this.data.recordList, this.data.resultData);
      const targetRecord = this.data.recordList.find((item) => String(item.id) === String(this.data.resultData.id));
      if (this.data.resultBtnText === "å»å‘é€") {
        this.triggerEvent("sendGiftDataSet", {
          kind: targetRecord.lotteryType.type,
          giftId: targetRecord.giftid,
          id: targetRecord.id,
          queryType: targetRecord.queryType,
        }); 
        this.triggerEvent("sendGiftShow");
      }
    },
  },
});
````

## File: packageB/pages/sendGiftLottery/components/popup/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
  }
}
````

## File: packageB/pages/sendGiftLottery/components/popup/index.wxml
````
<view class="popup-container" wx:if="{{popupType}}">
  <!-- è’™å±‚ -->
  <view class="mask" bindtap="closePopup"></view>
  <!-- å¼¹çª—ç›’å­ -->
  <view class="box-wrap {{isScaleShow ? 'show' : ''}}">
    <!-- è§„åˆ™å¼¹çª— -->
    <view class="rule box" wx:if="{{popupType === 'rule'}}">
      <view class="title">æ´»åŠ¨è§„åˆ™</view>
      <view class="para">1ã€å—¨å–µç”¨æˆ·æ¯å‘é€ä¸€æ¬¡38.8å…ƒï¼ˆå«ï¼‰ä»¥ä¸Šç¥ç¦ç¤¼ç‰©å³å¯è·å¾—ä¸€æ¬¡å…è´¹æŠ½å¥–æœºä¼šï¼›</view>
      <view class="para">2ã€ç”¨æˆ·è·å¾—ç°é‡‘çº¢åŒ…å¥–åŠ±åï¼Œå¥–é‡‘å°†è‡ªåŠ¨å‘é€è‡³å…¶å¾®ä¿¡é›¶é’±è´¦æˆ·ï¼›</view>
      <view class="para">3ã€æœ¬æ´»åŠ¨ä¸AppleInc.æ— å…³ï¼›</view>
      <view class="para">
        4ã€å¯¹ä¸æ­£å½“æ‰‹æ®µ ï¼ˆå¦‚ä½œæ•´ã€ä¹±ç³»ç»Ÿã€å®æ–½ç½‘ç»œæ”»å‡»ç­‰ï¼‰å‚ä¸æ´»åŠ¨çš„ç”¨æˆ·ï¼Œå—¨å–µç§‘æŠ€æœ‰æƒç¦æ­¢å…¶å‚ä¸æ´»åŠ¨ï¼Œå¹¶å–æ¶ˆå…¶è·å¥–èµ„æ ¼ï¼ˆå¦‚å¥–åŠ±å·²å‘æ”¾ï¼Œæœ‰æƒè¿½å›ï¼‰ã€‚
      </view>
      <view class="get-it_btn btn" bindtap="closePopup">æˆ‘çŸ¥é“äº†</view>
    </view>
    <!-- ä¸­å¥–ç»“æœå¼¹çª— -->
    <view class="result box" wx:if="{{popupType ==='result'}}">
      <image src="https://ustatic.hudongmiao.com/%20miao/congit_compressed.png" class="congratulation-img" />
      <view class="prize-name">{{resultData.prize}}</view>
      <image src="{{resultData.img}}" class="prize-img" />
      <view class="to-lottery_btn btn" bindtap="handleResultBtn">{{resultBtnText}}</view>
      <view class="ps-tip">ps:å‘é€38.8å…ƒä»¥ä¸Šç¥ç¦ç¤¼ç‰©å³å¯å†æŠ½ä¸€æ¬¡</view>
    </view>
    <!-- ä¸­å¥–è®°å½•å¼¹çª— -->
    <view class="record box" wx:if="{{popupType ==='record'}}">
      <view class="title">æˆ‘çš„å¥–å“</view>
      <view class="table record-ct" wx:if="{{recordList.length > 0}}">
        <view class="t-header">
          <view class="t-cell">å¥–å“åç§°</view>
          <view class="t-cell">å¥–å“çŠ¶æ€</view>
          <view class="t-cell">è·å¥–æ—¶é—´</view>
        </view>
        <view class="t-body">
          <view class="row" wx:for="{{recordList}}" wx:key="index">
            <view class="t-cell">{{item.lotteryType.content}}</view>
            <view class="t-cell {{item.lotteryType.status === '1' ? '' : 'unfinished'}}" bindtap="toSendGift" data-id="{{item.id}}">{{item.lotteryType.statusName}}</view>
            <view class="t-cell">{{item.create_time}}</view>
          </view>
        </view>
      </view>
      <view class="no-result_tip record-ct" wx:else>
        æš‚æ— è·å¥–è®°å½•
      </view>
      <view class="to-lottery_btn btn" bindtap="closePopup">å»æŠ½å¥–å§</view>
    </view>
    <!-- å…³é—­æŒ‰é’® -->
    <view class="close-btn" bindtap="closePopup"></view>
  </view>
</view>
````

## File: packageB/pages/sendGiftLottery/components/popup/index.wxss
````
.popup-container {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

.mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}
.box-wrap {
  position: relative;
  z-index: 1;
  transform: scale(0);
}
.box-wrap.show {
  transform: scale(1);
  transition: all 0.1s ease-in-out;
}
.box {
  width: 576rpx;
  height: 724rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/%20miao/pobox_compressed.png");
}

.btn {
  background: linear-gradient(0deg, #864ce4 0%, #272fd9);
  border-radius: 68rpx;
  width: 480rpx;
  height: 72rpx;
  font-size: 30rpx;
  font-weight: 500;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
}

.close-btn {
  width: 68rpx;
  height: 68rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/%20miao/clse-icon_compressed.png");
  position: absolute;
  bottom: -90rpx;
  left: 50%;
  margin-left: -34rpx;
}

.rule {
  padding: 30rpx 30rpx 0 30rpx;
}
.rule .title {
  font-size: 34rpx;
  color: #ff2a2a;
  text-align: center;
  margin-bottom: 20rpx;
}
.rule .para {
  color: #333333;
  font-size: 30rpx;
  margin-bottom: 10rpx;
  line-height: 45rpx;
}

.rule .get-it_btn {
  margin-left: auto;
  margin-right: auto;
}

.record {
  padding-top: 30rpx;
  width: 702rpx;
  height: 898rpx;
}
.record .title {
  font-size: 34rpx;
  color: #ff2a2a;
  text-align: center;
  margin-bottom: 20rpx;
}

.record-ct {
  height: 642rpx;
  overflow-y: scroll;
}

.record .to-lottery_btn {
  margin-left: auto;
  margin-right: auto;
  margin-top: 30rpx;
}

.record .table {
  color: #333333;
  font-weight: 400;
}
.record .table .t-header {
  display: flex;
  height: 82rpx;
  align-items: center;
  border-top: 1rpx solid #c4c4c4;
  border-bottom: 1rpx solid #c4c4c4;
  font-size: 28rpx;
}
.record .table .t-cell {
  text-align: center;
}
.record .table .t-cell.unfinished {
  color: #27ae60;
}
.record .table .t-cell:nth-child(1) {
  flex: 2;
}
.record .table .t-cell:nth-child(2) {
  flex: 1;
}
.record .table .t-cell:nth-child(3) {
  flex: 2;
}
.record .table .t-body {
  font-size: 24rpx;
}
.record .table .t-body .row {
  display: flex;
  height: 82rpx;
  align-items: center;
}
.record .table .t-body .row:nth-child(even) {
  background-color: #f5f5f5;
}

.record .no-result_tip {
  font-size: 64rpx;
  color: rgba(0, 0, 0, 0.4);
  font-weight: 400;
  display: flex;
  align-items: center;
  justify-content: center;
}

.result {
  width: 560rpx;
  height: 740rpx;
  position: relative;
  padding-top: 32rpx;
}

.result .congratulation-img {
  width: 478rpx;
  height: 208rpx;
  position: absolute;
  left: 50%;
  margin-left: -239rpx;
  top: -208rpx;
}
.result .prize-name {
  font-size: 48rpx;
  color: #ff2a2a;
  font-weight: 500;
  text-align: center;
}
.result .prize-img {
  width: 328rpx;
  height: 328rpx;
  border-radius: 4px;
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top: 24rpx;
}
.result .to-lottery_btn {
  margin-top: 70rpx;
  margin-left: auto;
  margin-right: auto;
}
.result .ps-tip {
  font-size: 24rpx;
  font-weight: 400;
  text-align: center;
  color: rgba(0, 0, 0, 0.4);
  margin-top: 30rpx;
}
````

## File: packageB/pages/sendGiftLottery/components/rightEntry/index.js
````javascript
Component({
  properties: {
  },
  data: {
  },
  observers: {
  },
  methods: {
    showPopup(e) {
      this.triggerEvent('popupShow', e.currentTarget.dataset.type);
    },
  },
});
````

## File: packageB/pages/sendGiftLottery/components/rightEntry/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
  }
}
````

## File: packageB/pages/sendGiftLottery/components/rightEntry/index.wxml
````
<view class="right-entry">
  <view class="round rule" bindtap="showPopup" data-type="rule">è§„åˆ™</view>
  <view class="round prize" bindtap="showPopup" data-type="record">å¥–å“</view>
</view>
````

## File: packageB/pages/sendGiftLottery/components/rightEntry/index.wxss
````
.right-entry {
  position: absolute;
  right: 24rpx;
  top: 110rpx;
  z-index: 1;
}

.right-entry .round {
  width: 60rpx;
  height: 60rpx;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 50%;
  text-align: center;
  line-height: 60rpx;
  font-size: 22rpx;
  font-weight: 500;
  color: #fff;
}

.right-entry .prize {
  margin-top: 18rpx;
}
````

## File: packageB/pages/sendGiftLottery/components/sendGift/index.js
````javascript
import { timeoutTask } from "../../../../../utils/index";
import qiniu from "../../../../../utils/qiniu/index";
import { reqGetGiftList, reqSendGiftBroadCast, reqUpdateSendGiftStatus } from "../../../../../api/gift";

const giftTypeMap = {
  gift: "ç¥ç¦ä¸Šå¢™",
  bapin: "ç¥ç¦æ¨ªå¹…",
  photo: "ç…§ç‰‡éœ¸å±",
  rocket: "ç«ç®­å¼¹å¹•",
  allScreen: "å…¨å±ç‰¹æ•ˆ",
};

let giftList = []; // ç¥ç¦ä¸Šå¢™ç¤¼ç‰©åˆ—è¡¨(ç”¨äºæ ¹æ®ç¤¼ç‰©idè·å–å¿…è¦ä¿¡æ¯)

Component({
  properties: {
    sendGiftVisible: {
      type: Boolean,
      value: false,
    },
    giftId: {
      // kindä¸ºgift_freeçš„æƒ…å†µ
      // çˆ¶ç»„ä»¶ä¼ ä¸€ä¸ªç¤¼ç‰©Idè¿‡æ¥ï¼Œæˆ‘æ¥å‘é€
      type: String,
      value: "",
    },
    kind: {
      // å–å€¼gift_freeã€gift_huoã€gift_picture
      type: String,
      value: ''
    },
    queryId: {
      type: String,
      value: "",
    },
    queryType: {
      type: String,
      value: "",
    }
  },
  data: {
    showAni: false,
    formData: {
      giftId: "",
      imgUrl: "",
      content: "",
      times: "",
    },
    UIData: {
      giftType: "",
      giftTypeText: "",
      giftImgUrl: "", // ç¥ç¦ä¸Šå¢™:å…·ä½“çš„ç¤¼ç‰©å›¾ç‰‡ã€ç¥ç¦æ¨ªå¹…ã€ç…§ç‰‡éœ¸å±ã€ç«ç®­å¼¹å¹•ã€å…¨å±ç‰¹æ•ˆï¼šç©º
    },
  },
  lifetimes: {
    attached() {
      // åˆå§‹åŒ–ä¸ƒç‰›äº‘
      qiniu.init();
      // è·å–ç¥ç¦ä¸Šå¢™ç¤¼ç‰©åˆ—è¡¨
      this.getGiftList();
    },
    detached() {},
  },
  observers: {
    sendGiftVisible(newVal) {
      if (newVal) {
        // ç­‰æ¸²æŸ“å®Œæˆåå†ç¼©æ”¾
        timeoutTask(() => {
          this.scaleShowBox();
        }, 100);
        // åˆå§‹åŒ–é¡µé¢æ•°æ®
        this.initData();
      }
    },
  },
  methods: {
    closeSendGift() {
      this.setData({
        showAni: false,
      });
      this.triggerEvent("sendGiftClose");
    },
    scaleShowBox() {
      this.setData({
        showAni: true,
      });
    },
    initData() {
      // this.data.giftId
      // æ ¹æ®giftIdä»giftListä¸­æŸ¥æ‰¾åˆ°giftType,giftImgUrl,timesç­‰ä¿¡æ¯
      let tmpGiftType = null;
      let tmpGiftImgUrl = null;
      let tmpTimes = null;
      tmpGiftType = this.getGiftType(this.data.giftId);

      if (this.data.kind === "gift_free") {
        const gift = giftList.find(
          (item) => item.giftconst === this.data.giftId
        );
        // å¦‚æœæ˜¯ç¥ç¦ä¸Šå¢™è¿˜éœ€è¦è·å¾—å…·ä½“çš„ç¤¼ç‰©å›¾ç‰‡
        if (tmpGiftType === "gift" && gift) {
          tmpGiftImgUrl = gift.imglink;
        }

        // å¦‚æœæœ‰ç¤¼ç‰©æ—¶é—´è¿˜å¾—è®¾ç½®
        if (gift.shijian && gift.shijian !== "0") {
          tmpTimes = gift.shijian;
        }
      } else if (this.data.kind === "gift_picture") {
        // ç…§ç‰‡ç¤¼ç‰©å›ºå®š30s
        tmpTimes = 30;
      }

      this.setData({
        "formData.giftId": this.data.giftId,
        "formData.times": tmpTimes,
        "UIData.giftType": tmpGiftType,
        "UIData.giftTypeText": giftTypeMap[tmpGiftType],
        "UIData.giftImgUrl": tmpGiftImgUrl,
      });
    },
    /**
     * è·å–ç¤¼ç‰©ç±»å‹
     */
    getGiftType(giftId) {
      let tmpGiftType = null;
      if (this.data.kind === "gift_free") {
        // å¾—åˆ°ç¤¼ç‰©ç±»å‹
        if (giftId.includes("Miao_Bq")) {
          tmpGiftType = "rocket";
        } else if (giftId.includes("Miao_Bp")) {
          tmpGiftType = "bapin";
        } else if (giftId.includes("Miao_Tp")) {
          tmpGiftType = "photo";
        } else if (giftId.includes("Miao_SuperDanmu")) {
          tmpGiftType = "allScreen";
        } else {
          tmpGiftType = "gift";
        }
      } else {
        if (this.data.kind === "gift_huo") {
          tmpGiftType = "rocket";
        } else if (this.data.kind === "gift_picture") {
          tmpGiftType = "photo";
        }
      }

      return tmpGiftType;
    },
    /**
     * è¾“å…¥æ–‡æœ¬å†…å®¹
     */
    changeContent(e) {
      const target = e.detail.value;
      this.setData({
        "formData.content": target,
      });
    },
    /**
     * é€‰æ‹©ç…§ç‰‡
     */
    choosePhoto() {
      wx.chooseMedia({
        count: 1,
        mediaType: ["image"],
        sourceType: ["album"],
        sizeType: ["compressed"],
        success: (res) => {
          const imgs = res.tempFiles.map((item) => item.tempFilePath);
          qiniu
            .upload(imgs[0])
            .then((res) => {
              this.setData({
                "formData.imgUrl": res.imageURL,
              });
            })
            .catch((err) => {
              console.log("ä¸Šä¼ é”™è¯¯", err);
              wx.showToast({
                title: "ä¸Šä¼ å¤±è´¥!",
                icon: "error",
              });
            });
        },
        fail: (err) => {
          console.log("é”™è¯¯ä¿¡æ¯", err);
        },
      });
    },
    /**
     * å‘ç¤¼ç‰©å‰çš„æ ¡éªŒ
     */
    checkBeforeSend() {
      // æ–‡æœ¬å†…å®¹ä¸èƒ½ä¸ºç©º
      if (
        this.data.UIData.giftType !== "gift" &&
        !this.data.formData.content.trim()
      ) {
        wx.showToast({
          title: "ç¥ç¦å†…å®¹ä¸èƒ½ä¸ºç©º!",
          icon: "none",
        });
        return false;
      }
      // å›¾ç‰‡ä¸èƒ½ä¸ºç©º
      if (
        this.data.UIData.giftType === "photo" &&
        !this.data.formData.imgUrl.trim()
      ) {
        wx.showToast({
          title: "è¯·é€‰æ‹©ç…§ç‰‡!",
          icon: "none",
        });
        return false;
      }
      return true;
    },
    /**
     * å‘é€ç¤¼ç‰©
     */
    sendGift() {
      console.log("å‘é€ç¤¼ç‰©>>>", this.data.formData);
      if (!this.checkBeforeSend()) {
        return;
      }
      // è°ƒç”¨å‘ç¤¼ç‰©å¹¿æ’­æ¥å£
      reqSendGiftBroadCast({
        giftId: this.data.formData.giftId,
        content: this.data.formData.content,
        imgUrl: this.data.formData.imgUrl,
        times: this.data.formData.times,
      })
        .then((res) => {
          console.log("å‘ç¤¼ç‰©å¹¿æ’­æ¥å£è¿”å›", res);
          wx.showToast({
            title: "å‘ç¤¼ç‰©æˆåŠŸ!",
            icon: "success",
          });
          console.log("è°ƒç”¨æ¥å£æ¶ˆé™¤æœºä¼š>>>", this.data.queryId, this.data.queryType);
          // è°ƒç”¨æ¥å£æ¶ˆé™¤æœºä¼š
          reqUpdateSendGiftStatus({
            id: this.data.queryId,
            queryType: this.data.queryType,
          });
          // é€šçŸ¥çˆ¶ç»„ä»¶åˆ·æ–°æ•°æ®
          this.triggerEvent("dataRefresh");
          // å…³é—­å¼¹çª—
          this.closeSendGift();
          // æ¸…ç©ºè¡¨å•
          this.clearFormData();
        })
        .catch((err) => {
          console.log("å‘ç¤¼ç‰©å¹¿æ’­æ¥å£é”™è¯¯", err);
          wx.showToast({
            title: "å‘ç¤¼ç‰©å¤±è´¥!",
            icon: "error",
          });
        });
    },
    /**
     * æ¸…ç©ºè¡¨å•
     */
    clearFormData() {
      this.setData({
        "formData.giftId": "",
        "formData.imgUrl": "",
        "formData.content": "",
        "formData.times": "",
      });
    },
    /**
     * è·å–æœ¬åœºæ´»åŠ¨çš„ç¤¼ç‰©åˆ—è¡¨
     * ä¼˜å…ˆä»ç¼“å­˜è·å–ï¼Œç¼“å­˜ä¸å­˜åœ¨åˆ™è¯·æ±‚æ¥å£
     */
    getGiftList() {
      const liveId = wx.getStorageSync("liveId");
      const storageGiftList = this.getStorageGiftList(liveId);
      if (storageGiftList) {
        giftList = storageGiftList;
        console.log("giftList", giftList);
      } else {
        reqGetGiftList(liveId)
          .then((res) => {
            console.log("è·å–ç¥ç¦ä¸Šå¢™ç¤¼ç‰©åˆ—è¡¨", res);
            const { list1, list2, list3, list4, list5, list667 } =
              res.data.data;
            giftList = list1.concat(list2, list3, list4, list5, list667);
            console.log("giftList", giftList);
            this.setStorageGiftList(liveId, giftList);
          })
          .catch((err) => {
            console.log("è·å–ç¥ç¦ä¸Šå¢™ç¤¼ç‰©åˆ—è¡¨é”™è¯¯", err);
          });
      }
    },
    /**
     * ä»ç¼“å­˜ä¸­è·å–ç¤¼ç‰©åˆ—è¡¨
     * è¦åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯ä¸æ˜¯å·²ç»æœ‰äº†è¯¥åœºæ´»åŠ¨çš„ç¤¼ç‰©åˆ—è¡¨
     */
    getStorageGiftList(liveId) {
      const storageDataStr = wx.getStorageSync("giftList");
      if (storageDataStr) {
        const storageData = JSON.parse(storageDataStr);
        if (storageData.liveId === liveId) {
          // è¿›å…¥è¿™ä¸ªåˆ†æ”¯è¯´æ˜ç¼“å­˜ä¸­æœ‰æœ¬åœºæ´»åŠ¨çš„ç¤¼ç‰©åˆ—è¡¨
          return storageData.giftList;
        } else {
          // è¿›å…¥æ¬¡åˆ†æ”¯è¯´æ˜ç¼“å­˜ä¸­è™½ç„¶æœ‰æ•°æ®ä½†ä¸æ˜¯æœ¬åœºçš„
          wx.removeStorageSync("giftList");
        }
      }
      return null;
    },
    /**
     * ç¤¼ç‰©åˆ—è¡¨å­˜å…¥ç¼“å­˜
     * å­˜å…¥ç¼“å­˜çš„æ•°æ®æ ¼å¼:giftList: {liveId,giftList}
     */
    setStorageGiftList(liveId, giftList) {
      const targetObj = {
        liveId,
        giftList,
      };
      const targetObjStr = JSON.stringify(targetObj);
      wx.setStorageSync("giftList", targetObjStr);
    },
  },
});
````

## File: packageB/pages/sendGiftLottery/components/sendGift/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
  }
}
````

## File: packageB/pages/sendGiftLottery/components/sendGift/index.wxml
````
<view class="sendGift" wx:if="{{sendGiftVisible}}">
  <view class="mask" bindtap="closeSendGift"></view>
  <view class="box {{showAni ? 'show' : ''}}">
    <!-- ç¤¼ç‰©ç±»å‹ -->
    <view class="giftType">{{UIData.giftTypeText}}</view>
    <view class="form">
      <!-- ç¤¼ç‰©å›¾ç‰‡ -->
      <view class="form-item flexCenter" wx:if="{{UIData.giftImgUrl}}">
        <image class="gift-img" src="{{UIData.giftImgUrl}}"></image>
      </view>
      <!-- æ–‡æœ¬å†…å®¹ -->
      <view class="form-item input-part" wx:if="{{UIData.giftType !== 'gift'}}">
        <textarea value="{{formData.content}}" bindinput="changeContent" class="content-input" placeholder="å†™ä¸‹ä½ å¯¹æ­¤åˆ»çš„ç¥ç¦~" maxlength="20" />
        <view class="len">{{ formData.content.length + ' / 20' }}</view>
      </view>
      <!-- å›¾ç‰‡ -->
      <view class="form-item flexSide" wx:if="{{UIData.giftType === 'photo'}}">
        <view class="name">ç…§ç‰‡:</view>
        <view class="upload-box">
          <!-- æœªä¸Šä¼ çš„æƒ…å†µ -->
          <view class="no-upload" wx:if="{{!formData.imgUrl}}" bindtap="choosePhoto">
            <image src="https://ustatic.hudongmiao.com/joymewMp/photoWallNew/camera-icon.png" mode="aspectFill" class="camera-icon" />
          </view>
          <!-- å·²ä¸Šä¼ çš„æƒ…å†µ -->
          <image class="upload-img" src="{{formData.imgUrl}}" wx:else bindtap="choosePhoto"></image>
        </view>
      </view>
      <!-- å‘é€æŒ‰é’® -->
      <view class="send-btn" bindtap="sendGift">å‘é€</view>
    </view>
  </view>
</view>
````

## File: packageB/pages/sendGiftLottery/components/sendGift/index.wxss
````
.sendGift {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 9999;
}

.mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

.box {
  position: absolute;
  min-height: 300rpx;
  width: 100%;
  bottom: 0;
  left: 0;
  background-color: #fff;
  border-top-left-radius: 20rpx;
  border-top-right-radius: 20rpx;
  transform: scaleY(0);
  transform-origin: center bottom;
}

.box.show {
  transform: scaleY(1);
  transition: all 0.1s ease-in-out;
}

.flexSide {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.flexCenter {
  display: flex;
  justify-content: center;
}

.giftType {
  width: 376rpx;
  height: 72rpx;
  background: linear-gradient(276deg, #864ce4 0%, #272fd9 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 0;
  left: 50%;
  margin-left: -188rpx;
  font-size: 40rpx;
  font-weight: 500;
  color: #ffffff;
  border-radius: 0px 0px 20rpx 20rpx;
}

.form {
  padding: 100rpx 20rpx 40rpx 20rpx;
}

.form .form-item {
  margin-bottom: 40rpx;
}
.gift-img {
  width: 200rpx;
  height: 200rpx;
}
.input-part {
  height: 192.31rpx;
  border-bottom: 1.92rpx solid #efefef;
  position: relative;
}
.input-part .content-input {
  width: 100%;
  height: 100%;
}
.input-part .len {
  color: rgba(0, 0, 0, 0.4);
  font-size: 23.08rpx;
  position: absolute;
  bottom: 17.31rpx;
  right: 0;
}

.name {
  font-size: 32rpx;
  color: #333333;
  font-weight: 400;
}
.upload-box {
}
.upload-box .no-upload {
  width: 163.46rpx;
  height: 163.46rpx;
  margin-right: 32.69rpx;
  border: 1.92rpx dashed #7e7e7e;
  box-sizing: border-box;
  border-radius: 11.54rpx;
  display: flex;
  align-items: center;
  justify-content: center;
}
.upload-box .no-upload .camera-icon {
  width: 44.23rpx;
  height: 38.46rpx;
}

.upload-box .upload-img {
  width: 163.46rpx;
  height: 163.46rpx;
}

.send-btn {
  background: linear-gradient(0deg, #864ce4 0%, #272fd9);
  border-radius: 68rpx;
  width: 480rpx;
  height: 72rpx;
  font-size: 30rpx;
  font-weight: 500;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-left: auto;
  margin-right: auto;
}
````

## File: packageB/pages/sendGiftLottery/index.js
````javascript
import { reqGetSendGiftChance } from "../../../api/gift";
import { convertISOToBeijingTime } from "../../../utils/index";

const mockNames = require("./mockName");
Page({
  data: {
    broadTexts: [],
    prizeList: [],
    remainChance: 0, // å‰©ä½™æŠ½å¥–æ¬¡æ•°
    chanceDetailList: [], // æ¬¡æ•°æ˜ç»†
    recordList: [], // ä¸­å¥–è®°å½•åˆ—è¡¨
    popupType: "",
    sendGiftVisible: false,
    sendGiftData: {
      kind: "", // å–å€¼gift_freeã€gift_huoã€gift_picture
      giftId: "", // ç¤¼ç‰©id
      id: "", // idå’ŒqueryTypeç”¨äºè°ƒç”¨æ¥å£æ¶ˆé™¤æœºä¼š
      queryType: "",
    }, // å‘ç¤¼ç‰©å¼¹çª—éœ€è¦çš„æ•°æ®
    resultData: {
      prize: "",
      type: "",
      remainChance: 0,
      img: "",
      id: "",
    },
  },
  onLoad() {
    this.initData();
  },
  /**
   * æ˜¾ç¤ºå¼¹çª—
   */
  showPopup(e) {
    this.setData({
      popupType: e.detail,
    });
  },
  /**
   * å…³é—­å¼¹çª—
   */
  closePopup() {
    this.setData({
      popupType: "",
    });
  },
  /**
   * è®¾ç½®å‘ç¤¼ç‰©å¼¹çª—æ‰€éœ€è¦çš„æ•°æ®
   * å…¶ä»–ç»„ä»¶ä¼ è¿‡æ¥
   */
  setSendGiftData(e) {
    console.log(e.detail);
    const { kind, giftId, id, queryType } = e.detail;
    let tmpGiftId;
    if (kind === "gift_free") {
      tmpGiftId = giftId;
    } else if (kind === "gift_huo") {
      tmpGiftId = this.getGiftHuoId();
    } else if (kind === "gift_picture") {
      tmpGiftId = this.getGiftPictureId();
    }
    this.setData({
      sendGiftData: {
        kind,
        giftId: tmpGiftId,
        id,
        queryType,
      },
    });
    console.log(this.data.sendGiftData);
  },
  /**
   * æ˜¾ç¤ºå‘ç¤¼ç‰©å¼¹çª—
   */
  showSendGift() {
    this.setData({
      sendGiftVisible: true,
    });
  },
  /**
   * å…³é—­å‘ç¤¼ç‰©å¼¹çª—
   */
  closeSendGift() {
    this.setData({
      sendGiftVisible: false,
    });
  },
  /**
   * åˆå§‹åŒ–æ•°æ®
   */
  async initData() {
    try {
      const res = await reqGetSendGiftChance();
      console.log(res);
      if (this.data.prizeList.length === 0) {
        this.setPrizeList(res.data.showList);
      }
      this.setChanceInfo(
        res.data.size,
        res.data.list,
        res.data.lotteryList
      );
    } catch (err) {
      console.log(err);
      // æç¤ºï¼šåˆå§‹åŒ–æŠ½å¥–å¼‚å¸¸
      wx.showToast({
        title: "åˆå§‹åŒ–æŠ½å¥–å¼‚å¸¸",
        icon: "error",
      });
    }
  },
  /**
   * è®¾ç½®å¥–é¡¹åˆ—è¡¨
   */
  setPrizeList(list) {
    const prizeList = list
      .sort((a, b) => a.index - b.index)
      .map((item, index) => ({
        ...item,
        indexUI: index,
      }));
    this.setData({
      prizeList,
    });
    this.createRandomBroadTexts();
  },
  /**
   * è®¾ç½®å‰©ä½™æ¬¡æ•°ã€æ¬¡æ•°ä¿¡æ¯ã€å¥–å“åˆ—è¡¨
   */
  setChanceInfo(remainChance, chanceDetailList, recordList) {
    let tmpRecordList = [];
    if (recordList) {
      tmpRecordList = recordList.map((item) => {
        const tmpLotteryType = JSON.parse(item.lottery_type);
        if (tmpLotteryType.status === "0") {
          tmpLotteryType.statusName = "å»å‘é€";
        } else if (
          tmpLotteryType.status === "1" &&
          tmpLotteryType.kind === "send_gift"
        ) {
          tmpLotteryType.statusName = "å·²ä½¿ç”¨";
        } else {
          tmpLotteryType.statusName = "å·²å‘æ”¾";
        }
        return {
          ...item,
          create_time: convertISOToBeijingTime(item.create_time),
          lotteryType: tmpLotteryType,
        };
      });
    }
    this.setData({
      remainChance: parseInt(remainChance, 10),
      chanceDetailList: chanceDetailList || [],
      recordList: tmpRecordList,
    });
  },
  /**
   * ç»„è£…ä¸­å¥–ç»“æœ
   */
  assembleResultData(e) {
    // e.detailæ˜¯ä¸ªå¯¹è±¡
    const { endIndex, content, kind, id, remainChance } = e.detail;
    const tmpType = kind === "send_gift" ? "active" : "passive";

    this.setData({
      resultData: {
        prize: content,
        type: tmpType,
        remainChance,
        img: this.data.prizeList[endIndex].url,
        id,
      },
    });
  },
  getGiftHuoId() {
    const liveId = wx.getStorageSync("liveId");
    const storageGiftList = this.getStorageGiftList(liveId);
    if (storageGiftList) {
      const giftInfo = storageGiftList.find((item) =>
        item.giftconst.includes("Miao_Bq")
      );
      if (giftInfo) {
        return giftInfo.giftconst;
      }
    }
    return "";
  },
  getGiftPictureId() {
    const liveId = wx.getStorageSync("liveId");
    const storageGiftList = this.getStorageGiftList(liveId);
    if (storageGiftList) {
      const giftInfo = storageGiftList.find((item) =>
        item.giftconst.includes("Miao_Tp")
      );
      if (giftInfo) {
        return giftInfo.giftconst;
      }
    }
    return "";
  },
  /**
   * ä»ç¼“å­˜ä¸­è·å–ç¤¼ç‰©åˆ—è¡¨
   * è¦åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯ä¸æ˜¯å·²ç»æœ‰äº†è¯¥åœºæ´»åŠ¨çš„ç¤¼ç‰©åˆ—è¡¨
   */
  getStorageGiftList(liveId) {
    const storageDataStr = wx.getStorageSync("giftList");
    if (storageDataStr) {
      const storageData = JSON.parse(storageDataStr);
      if (storageData.liveId === liveId) {
        // è¿›å…¥è¿™ä¸ªåˆ†æ”¯è¯´æ˜ç¼“å­˜ä¸­æœ‰æœ¬åœºæ´»åŠ¨çš„ç¤¼ç‰©åˆ—è¡¨
        return storageData.giftList;
      } else {
        // è¿›å…¥æ¬¡åˆ†æ”¯è¯´æ˜ç¼“å­˜ä¸­è™½ç„¶æœ‰æ•°æ®ä½†ä¸æ˜¯æœ¬åœºçš„
        wx.removeStorageSync("giftList");
      }
    }
    return null;
  },
  createRandomBroadTexts() {
    const len = mockNames.length;
    const len2 = this.data.prizeList.length;
    const tmpBroadTexts = [];
    for (let i = 0; i < 20; i++) {
      const randomName = mockNames[Math.floor(Math.random() * len)];
      const randomPrize =
        this.data.prizeList[Math.floor(Math.random() * len2)].content;
      tmpBroadTexts.push({
        nickname: randomName,
        reward: randomPrize,
      });
    }
    this.setData({
      broadTexts: tmpBroadTexts,
    });
  },
});
````

## File: packageB/pages/sendGiftLottery/index.json
````json
{
  "navigationBarTitleText": "å¹¸è¿æŠ½å¥–",
  "usingComponents": {
    "rightEntry": "./components/rightEntry/index",
    "machineHeader": "./components/machineHeader/index",
    "machineBody": "./components/machineBody/index",
    "popup": "./components/popup/index",
    "sendGift": "./components/sendGift/index"
  }
}
````

## File: packageB/pages/sendGiftLottery/index.wxml
````
<view class="sendgiftlottery-container">
  <!-- å³ä¸Šè§’å¼¹çª—å…¥å£ -->
  <rightEntry bind:popupShow="showPopup" bind:popupShow="showPopup" />
  <!-- æŠ½å¥–æœº -->
  <view class="lottery-machine_box">
    <machineHeader broadTexts="{{broadTexts}}" />
    <machineBody prizeList="{{prizeList}}" remainChance="{{remainChance}}" chanceDetailList="{{chanceDetailList}}" bind:popupShow="showPopup" bind:dataRefresh="initData" bind:resultDataAssemble="assembleResultData" />
  </view>
  <!-- å¼¹çª— -->
  <popup popupType="{{popupType}}" recordList="{{recordList}}" resultData="{{resultData}}" giftIdRefer="{{giftIdRefer}}" bind:popupClose="closePopup" bind:sendGiftDataSet="setSendGiftData" bind:sendGiftShow="showSendGift"/>
  <!-- å‘ç¤¼ç‰© -->
  <sendGift sendGiftVisible="{{sendGiftVisible}}" giftId="{{sendGiftData.giftId}}" kind="{{sendGiftData.kind}}" queryId="{{sendGiftData.id}}" queryType="{{sendGiftData.queryType}}" bind:sendGiftClose="closeSendGift" bind:dataRefresh="initData"/>
</view>
````

## File: packageB/pages/sendGiftLottery/index.wxss
````
.sendgiftlottery-container {
  width: 100vw;
  height: 100vh;
  background-size: 100% 100%;
  background-image: url('https://ustatic.hudongmiao.com/%20miao/kt-bg_compressed.png');
  overflow: hidden;
  position: relative;
}
.lottery-machine_box {
  position: absolute;
  width: 100%;
  bottom: 10rpx;
}

@media screen and (min-height: 720px)  {
  .lottery-machine_box {
    bottom: 50rpx;
  }
}
````

## File: packageB/pages/sendGiftLottery/mockName.js
````javascript
const MOCK_NAME =  [
    "å°æ¸…æ–°", "æ¢¦æƒ³å®¶", "æš–å¿ƒå°å¤ªé˜³", "ç‹¬è¡Œä¾ ", "èŒèŒå“’",
    "å‘æ—¥è‘µ", "å¾®ç¬‘å¤©ä½¿", "å®‰é™çš„é›¨", "æµæµªçŒ«", "å’–å•¡æ—¶å…‰",
    "è¿½æ¢¦äºº", "å¤§æµ·çš„å¿ƒ", "æ‚ ç„¶è‡ªå¾—", "æ˜Ÿç©ºæ—…äºº", "è¶£å‘³ç©å‘³",
    "å°å°å†’é™©å®¶", "ç”œèœœå¹»æƒ³", "æš´é£éª‘å£«", "ç¬‘çœ‹é£äº‘", "æ¸©æŸ”å¦‚é£",
    "å¿ƒä¸­æœ‰æ¢¦", "æ¸…é£å¾æ¥", "éšé‡è€Œå®‰", "æ¢¦æ¸¸è€…", "ç¹æ˜Ÿç‚¹ç‚¹",
    "æ¼«æ­¥äº‘ç«¯", "ç¬‘è¯­å«£ç„¶", "æ‚ æ‰¬å¿ƒæ›²", "æ—¶å…‰é™å¥½", "å½©è™¹ç³–",
    "æ¢¦æƒ³å¯èˆª", "å¿ƒçµæ—…è€…", "ç§‹æ°´å…±é•¿å¤©", "å¿«ä¹å°çŒª", "æ¸©æš–é˜³å…‰",
    "æœªæ¥æ¢é™©è€…", "ç™½èŒ¶æ¸…æ¬¢", "å¯»é¦™è€…", "é’æ˜¥ç‡ƒçƒ§", "éšå½¢ç¿…è†€",
    "æš–æš–å…”å…”", "è¿·å¤±åœ¨ä½ çœ¼ä¸­", "ç¹èŠ±ä¼¼é”¦", "å¹½çµèˆè€…", "å°å¹¸è¿",
    "æœªæ¥å¯æœŸ", "æ•£æ­¥äº‘ç«¯", "æ¸…æ™¨éœ²æ°´", "å’Œé£ç»†é›¨", "ç‹¬è‡ªæ—…è¡Œ",
    "è¯—æ„æ –å±…", "è´è¶æ¢¦", "å¾€äº‹å¦‚çƒŸ", "æš–é£æ‹‚é¢", "å¿ƒçµå®ˆæŠ¤è€…",
    "é€æ¢¦æ—…ç¨‹", "å°åŸæ•…äº‹", "æœˆå…‰ä¸‹çš„çŒ«", "å¿ƒéšæ¢¦åŠ¨", "å¹¸ç¦å‘å‰èµ°",
    "ä¸€ç”Ÿçš„å‹‡æ°”", "è¿·ç¦»æ˜Ÿç©º", "å¾®ç¬‘é¢å¯¹", "çº·é£çš„é›ª", "è½èŠ±äººç‹¬ç«‹",
    "æˆ‘æ˜¯é£", "æ¢¦æƒ³èµ·èˆª", "é‡è§æœªæ¥", "å¤æ—¥å¾®é£", "æ—¶å…‰æ—…è¡Œè€…",
    "æ¸©æŸ”çš„é›¨", "ä¸ç¦»ä¸å¼ƒ", "éšæ¢¦è€Œè¡Œ", "æ±€è¶£é—²èŠ", "å°é›¨ç‚¹",
    "å¹¸ç¦æ¯ä¸€å¤©", "æ·±è“æµ·æ´‹", "è‡ªç”±é¸Ÿ", "æ˜Ÿè¾°å¤§æµ·"
];

module.exports = MOCK_NAME;
````

## File: packageB/pages/winningRecord/winningRecord.scss
````scss
.container {
  width: 100vw;
  height: 100vh;
  padding: 20px 16px;

  display: grid;
  grid-template-rows: min-content 1fr min-content;
  row-gap: 12px;

  .bg {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;

    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top;
  }

  .header {
    width: 100%;
    height: 48px;

    border-radius: 12px 12px 0 0;
    overflow: hidden;

    display: flex;
    align-items: center;
    justify-content: space-between;

    .header-item {
      width: 50%;
      height: 100%;

      background-color: #ec8585;

      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 4.2667vw;
      color: #fff;

      &.active {
        background-color: #fff;
        color: #ff5d5d;
      }
    }
  }

  .my-prize {
    width: 100%;
    height: 100%;
    overflow: scroll;

    &::-webkit-scrollbar {
      display: none;
    }

    display: flex;
    flex-direction: column;
    align-items: center;
    row-gap: 12px;

    &.empty {
      background-color: #fff;
      border-radius: 20px;
      justify-content: center;

      .empty-img {
        width: calc(100% - 50px);
        height: 100%;
      }
    }

    .item {
      width: 100%;
      height: 80px;

      background: #ffffff;
      border-radius: 12px;

      padding: 8px;
      display: grid;
      grid-template-areas:
        'img-area award btn'
        'img-area name btn';
      grid-template-columns: min-content 1fr auto;
      grid-template-rows: min-content 1fr auto;
      gap: 6px;

      .img-area {
        grid-area: img-area;
        place-self: center;
        width: 70px;
        height: 70px;
        background: #f2f2f2;
        border-radius: 2px;

        display: flex;
        align-items: center;
        justify-content: center;

        image {
          width: calc(100% - 7px);
          height: calc(100% - 7px);
        }
      }

      .award {
        grid-area: award;
        margin-top: 10px;
        font-size: 16px;
      }

      .name {
        grid-area: name;
        align-self: flex-start;
        font-size: 16px;
        line-height: 1;
      }

      .confirm-btn {
        width: 120rpx;
        height: 54rpx;
        background-color: #00bf1f;
        border-radius: 34rpx;
        text-align: center;
        line-height: 54rpx;
        font-size: 24rpx;
        color: #fff;
        align-self: center;
        grid-area: btn;
        &.confirmed {
          background-color: #969696;
        }
      }
    }
  }

  .winning-record {
    width: 100%;
    height: 100%;
    overflow: scroll;

    &::-webkit-scrollbar {
      display: none;
    }

    display: flex;
    flex-direction: column;
    align-items: center;
    row-gap: 12px;

    &.empty {
      background-color: #fff;
      border-radius: 20px;
      justify-content: center;

      .empty-img {
        width: 100%;
        height: 100%;
      }
    }

    .item {
      width: 100%;

      background: #ffffff;
      border-radius: 12px;

      padding: 8px;
      display: grid;
      grid-template:
        'img-area award-and-name award-and-name'min-content 'img-area winner-list winner-list'1fr 'check-more check-more check-more'min-content / min-content 1fr 1fr;
      gap: 6px;

      .img-area {
        grid-area: img-area;
        place-self: center;
        width: 70px;
        height: 70px;
        background: #f2f2f2;
        border-radius: 2px;

        display: flex;
        align-items: center;
        justify-content: center;

        image {
          width: calc(100% - 7px);
          height: calc(100% - 7px);
        }
      }

      .award-and-name {
        grid-area: award-and-name;
        width: calc(100% - 70px - 16px);

        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;

        font-size: 16px;
        color: #ff5d5d;
      }

      // æœªæŠ½å¥–æç¤º
      .not-lottery {
        grid-area: winner-list;
        width: 100%;

        font-size: 12px;
        color: #ccc;
      }

      .winner-list {
        grid-area: winner-list;

        display: flex;
        flex-wrap: wrap;
        gap: 4px;

        .winner {
          &.winner-0 {
            grid-area: winner-0;
          }

          &.winner-1 {
            grid-area: winner-1;
          }

          &.winner-2 {
            grid-area: winner-2;
          }

          &.winner-3 {
            grid-area: winner-3;
          }

          width: calc(50% - 2px);
          display: flex;
          align-items: center;

          .avatar {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            overflow: hidden;
          }

          .nickname {
            margin-left: 8px;
            width: calc(100% - 26px);

            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            font-size: 16px;
            color: #333;
          }
        }
      }

      .check-more {
        grid-area: check-more;
        place-self: center;
        width: 100%;
        height: 30px;

        display: flex;
        align-items: center;
        justify-content: center;

        color: #b2b2b2;

        .icon {
          width: 12px;
          height: 12px;
        }

        .text {
          margin-right: 4px;
        }
      }
    }
  }

  .ad-container {
    justify-self: center;
    width: 90vw;
    position: relative;
    z-index: 1;

    border-radius: 12px;
    overflow: hidden;

    border: 3px solid #ffffff;
  }
}
````

## File: packageC/pages/feedback/feedback.wxml
````
<view class="container">
 <view class="form-tip">æ³¨ï¼šæ­¤æŠ•è¯‰ä¸ºæœ¬å°ç¨‹åºè‡ªæœ‰æŠ•è¯‰æ¸ é“ï¼Œéå¾®ä¿¡å®˜æ–¹æŠ•è¯‰æ¸ é“</view>
  <view class="complaints-form">
    <view class="type-wrap">
      <view wx:for="{{typeList}}" wx:key="index" class="type-item" bindtap="chooseType" data-name="{{item.name}}" data-active="{{item.isActive}}">
        <view class="my-radio" style="{{item.isActive?'background-image:url(https://img.hidongtv.com/hidong-wechat/complaints-tick.png)':''}}"></view>
        <view class="radio-value">{{item.name}}</view>
      </view>
    </view>
    <view class="description-wrap">
      <view class="key">é—®é¢˜æè¿°</view>
      <view class="desc-wrap">
        <textarea placeholder="è¯·å¡«å†™æè¿°ä»¥ä¾¿æˆ‘ä»¬æä¾›æ›´å¥½çš„å¸®åŠ©" maxlength="120" bindinput="descInput" />
        <view class="numberV">{{txtVal}}/120</view>
      </view>
    </view>
    <view class="contact-wrap">
      <view class="phone-key">è”ç³»æ–¹å¼</view>
      <input bindinput='phoneInput' placeholder='è¯·è¾“å…¥æ‰‹æœºå·' type="number" maxlength="11" />
    </view>
    <view class="contact-way">
      <view class="phoneItem">å®¢æœç”µè¯ï¼š19512368757</view>
      <view class="phoneItem">æŠ•è¯‰ç”µè¯ï¼š400-082-2298</view>
    </view>
    <view class="submit-btn-wrap">
        <view class="btn" catchtap="submit">æäº¤</view>
    </view>
  </view>
</view>
````

## File: packageC/pages/feedback/feedback.wxss
````
.container {
  width: 100vw;
  background-color: #fff;
  position: relative;
  overflow: hidden;
}

.form-tip {
  text-align: center;
  line-height: 40rpx;
  font-size: 3.2vw;
  color: #878787;
}

.complaints-form>.type-wrap>.type-item {
  margin-left: 30rpx;
  height: 88rpx;
  border-bottom: 1rpx solid #e5e5e5;
  display: flex;
  align-items: center;
}

.complaints-form>.type-wrap>.type-item>.my-radio {
  width: 46rpx;
  height: 46rpx;
  border: 2rpx solid #c9c9c9;
  border-radius: 50%;
  margin-right: 20rpx;
  background-size: 100% 100%;
}

.complaints-form>.type-wrap>.type-item>.radio-value {
  color: #000;
  font-size: 34rpx;
}

.complaints-form>.description-wrap {
  margin-top: 20rpx;
}

.complaints-form>.description-wrap>.key {
  box-sizing: border-box;
  padding-left: 29rpx;
  font-size: 34rpx;
  color: #000;
}

.complaints-form>.description-wrap>.desc-wrap {
  display: flex;
  justify-content: center;
  position: relative;
  margin-top: 20rpx;
}

.complaints-form>.description-wrap>.desc-wrap>textarea {
  width: 690rpx;
  height: 140rpx;
  outline: none;
  border-radius: 4rpx;
  border: 1rpx solid #979797;
  box-sizing: border-box;
  padding: 12rpx;
}

.complaints-form>.description-wrap>.desc-wrap>.numberV {
  position: absolute;
  right: 5vw;
  bottom: 1vw;
  font-size: 3.2vw;
}

.complaints-form>.img-wrap {
  margin-top: 20rpx;
}

.complaints-form>.img-wrap>.key {
  box-sizing: border-box;
  padding-left: 29rpx;
  font-size: 34rpx;
  color: #000;
}

.complaints-form>.img-wrap .ui-uploader-cell-other {
  width: 690rpx;
  display: flex;
  flex-wrap: wrap;
  align-content: flex-start;
  margin-left: 30rpx;
}

.complaints-form>.img-wrap .ui-uploader-cell {
  width: 690rpx;
  display: flex;
  flex-wrap: wrap;
  align-content: flex-start;
  margin-left: 30rpx;
}

.complaints-form>.img-wrap .ui-uploader-item {
  width: 118rpx;
  height: 118rpx;
  margin-right: 18rpx;
  margin-bottom: 18rpx;
  padding-bottom: 2rpx;
  padding-right: 2rpx;
  position: relative;
}

.complaints-form>.img-wrap .ui-uploader-item-icon {
  position: absolute;
  right: 0;
}

.complaints-form>.img-wrap .ui-uploader-item image {
  width: 100%;
  height: 100%;
}

.complaints-form>.img-wrap .ui-uploader {
  width: 135rpx;
  height: 135rpx;
  margin-right: 20rpx;
  background: #efefef;
  border-radius: 4rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #878787;
  font-size: 72rpx;
}

.complaints-form>.contact-wrap {
  margin-top: 20rpx;
  display: flex;
  align-items: center;
  margin-left: 29rpx;
}

.complaints-form>.contact-wrap>.phone-key {
  font-size: 34rpx;
  color: #000;
  margin-right: 17rpx;
}

.complaints-form>.contact-wrap>input {
  outline: none;
  width: 42vw;
  height: 9vw;
  border-radius: 1.067vw;
  border: 1px solid #dedede;
  box-sizing: border-box;
  padding: 2vw;
  font-size: 4vw;
  letter-spacing: 0.2vw;
}

.complaints-form>.contact-way {
  display: flex;
  width: 100%;
  justify-content: space-around;
  padding: 32rpx 12rpx;
}

.complaints-form>.contact-way>.phoneItem {
  font-size: 3.2vw;
  color: #878787;
}

.complaints-form>.submit-btn-wrap {
  display: flex;
  justify-content: center;
  width: 75%;
  margin: 0 auto;
  margin-top: 40rpx;
}

.complaints-form>.submit-btn-wrap>.btn {
  width: 100%;
  height: 94rpx;
  background: #1aad19;
  border-radius: 10rpx;
  font-size: 4vw;
  font-weight: 700;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
````

## File: packageC/pages/outerLink/outerLink.wxml
````
<web-view src="{{link}}"/>
````

## File: packageC/pages/outerLink/outerLink.wxss
````
.container {
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 1);
}
````

## File: packageGame/api/commonRank.js
````javascript
import { request } from '../../utils/request'

export function reqGetRank({userId,gameCode}) {
  return request('play/newChaKeLaList6', 'GET', {
      splid: wx.getStorageSync('liveId'),
      userId,
      playInfo: gameCode,
  });
}
````

## File: packageGame/api/kbx.js
````javascript
import { request } from '../../utils/request'
import { reqWxPay } from "../../api/pay";
// å¼€å®ç®±å’Œçº¢åŒ…æŠ¢çš„æ¥å£
//------å¼€å®ç®±----------
/**
 * å¼€å®ç®±å……å€¼
 */
export async function reqKbxRecharge({userId,openid,money}) {
    const res = await request('hmWxmoney/chongzhiKbx', 'POST', {
        splid: wx.getStorageSync('liveId'),
        giftId: 'kbx',
        userId,
        openid,
        total: money,
    }, {
        needAppId: true
    });
    return reqWxPay(res);
}

/**
 * æŠ¢å®ç®±
 */
export function reqRobBox({boxIds,sort}) {
    return request('kakaluote/guipaiqigong6', 'POST', {
        splid: wx.getStorageSync('liveId'),
        boxIdList: boxIds,
        order_by: sort,
    });
}

/**
 * è·å–å®ç®±åˆ—è¡¨
 */
export function reqGetBoxesList() {
    return request('kakaluote/chaojisaiyaren6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    });
}

/**
 * å‘é€å¹¿æ’­
 */
export function reqSendBroadCast({c}) {
    return request('sendMsgController/duxin6', 'POST', {
        splid: wx.getStorageSync('liveId'),
        ykq_info: c
    });
}

/**
 * è·å–æ¸¸æˆçŠ¶æ€
 */
export function reqGetGameState({userId}) {
    return request('play/baiyan6', 'GET', {
        splid: wx.getStorageSync('liveId'),
        userId,
    });
}

/**
 * è·å–æˆ‘çš„å®ç®±
 */
export function reqGetMyBoxes() {
    return request('kakaluote/jianlai6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    });
}

//------çº¢åŒ…å¢™----------
/**
 * è·å–çº¢åŒ…åˆ—è¡¨
 */
export function reqGetHbList({cancelLoading} = {}) {
    return request('hbqController/showHbqList6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    }, {
        cancelLoading,
    });
}

/**
 * ä¹°çº¢åŒ…
 */
export function reqBuyHb({hbIds,sort}) {
    return request('hbqController/hbqPay6', 'POST', {
        splid: wx.getStorageSync('liveId'),
        eggIdList: hbIds,
        order_by: sort,
    });
}
/**
 * çº¢åŒ…å¢™å……å€¼
 */
export async function reqHbqRecharge({userId,openid,money}) {
    const res =  await request('hmWxmoney/chongzhiKbx', 'POST', {
        splid: wx.getStorageSync('liveId'),
        giftId: 'hbq',
        userId,
        openid,
        total: money,
    }, {
        needAppId: true
    });
    return reqWxPay(res);
}

/**
 * è·å–çº¢åŒ…æ’è¡Œæ¦œ
 */
export function reqGetHbRankList() {
    return request('hbqController/hbqRankList6', 'GET', {
        splid: wx.getStorageSync('liveId'),
    });
}
````

## File: packageGame/pages/commonRank/commonRank.json
````json
{
  "navigationBarTitleText": "æ’è¡Œæ¦œ",
  "usingComponents": {
    "jihuoniao-ad": "plugin://jihuoniao-ad-plugin/jihuoniao-ad"
  }
}
````

## File: packageGame/pages/commonRank/commonRank.scss
````scss
.publicVCenter {
  display: flex;
  align-items: center;
}

.publicHCenter {
  display: flex;
  justify-content: center;
}

.publicHvCenter {
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  width: 100vw;
  height: 100vh;
  position: relative;
}

.gameRank {
  position: absolute;
  width: 100%;
  height: 100%;

  .rankBg {
    width: 100%;
    height: auto;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
  }

  .firstRank,
  .secondRank,
  .thirdRank {
    position: absolute;
    z-index: 1;
    border-radius: 50%;

    .headImg {
      border-radius: 50%;
      position: absolute;
      z-index: 1;
    }

    .num {
      position: absolute;
      background-size: 100% 100%;
      color: #ffffff;
      text-align: center;
    }

    .name {
      background-size: 100% 100%;
      position: absolute;
      z-index: 2;

      div {
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
        white-space: nowrap;
      }
    }

    .score {
      color: #ffffff;
      position: absolute;
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: center;
    }

    .prize {
      color: #fffc29;
      position: absolute;
      font-weight: 500;
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: center;
    }
  }

  .firstRank {
    width: 150rpx;
    height: 150rpx;
    background-color: #fee857;
    left: 41vw;
    top: 21vw;

    .headImg {
      width: 140rpx;
      height: 140rpx;
    }

    .num {
      width: 88rpx;
      height: 64rpx;
      background-image: url("https://ustatic.hudongmiao.com/joymewH5/newImg/goldenCrown.png"); // gold crown
      top: -7vw;
      line-height: 75rpx;
    }

    .name {
      width: 305rpx;
      height: 85rpx;
      background-image: url("https://ustatic.hudongmiao.com/joymewH5/newImg/goldenRibbon.png");
      font-size: 28rpx;
      color: #ca8820;
      top: 10vw;
      line-height: 15.2vw;

      div {
        width: 22vw;
      }
    }

    .score {
      font-size: 44rpx;
      top: 29vw;
      width: 33vw;

      &.hasPrize {
        top: 26vw;
      }
    }

    .prize {
      top: 35vw;
      width: 33vw;

      &.s1 {
        font-size: 32rpx;
      }

      &.s2 {
        font-size: 18rpx;
      }
    }
  }

  .secondRank,
  .thirdRank {
    width: 116rpx;
    height: 116rpx;
    background-color: #fac4ff;

    .headImg {
      width: 106rpx;
      height: 106rpx;
    }

    .num {
      width: 88rpx;
      height: 64rpx;
      background-image: url("https://ustatic.hudongmiao.com/joymewH5/newImg/pinkCrown.png"); // pink crown
      top: -6vw;
      line-height: 75rpx;
    }

    .name {
      width: 212rpx;
      height: 87rpx;
      background-image: url("https://ustatic.hudongmiao.com/joymewH5/newImg/goldenRibbon.png"); // gold ribbon (reused)
      font-size: 24rpx;
      color: #de36b7;
      top: 10vw;
      line-height: 15.6vw;

      div {
        width: 26vw;
      }
    }

    .score {
      font-size: 44rpx;
      width: 26vw;

      &.hasPrize {
        top: 21vw;
      }
    }

    .prize {
      top: 29vw;
      width: 26vw;

      &.s1 {
        font-size: 32rpx;
      }

      &.s2 {
        font-size: 18rpx;
      }
    }
  }

  .secondRank {
    left: 12vw;
    top: 27vw;

    .score {
      top: 24vw;
      left: -2vw;
    }
  }

  .thirdRank {
    right: 12vw;
    top: 28vw;

    .score {
      top: 24vw;
      left: -6vw;
    }
  }

  .otherRank {
    width: 90vw;
    position: absolute;
    top: 63vw;
    left: 50%;
    transform: translateX(-50%);

    .item {
      padding: 3.5vw 7.5vw;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;

      .left {
        display: flex;
        align-items: center;

        .num {
          font-size: 36rpx;
          color: #333333;
          width: 6vw;
        }

        .headImg {
          width: 64rpx;
          height: 64rpx;
          border-radius: 50%;
          margin: 0 28rpx;
        }

        .name {
          font-size: 28rpx;
          color: #333333;
          max-width: 30vw;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
      }

      .score {
        font-size: 28rpx;
        color: #666666;
      }

      .prize {
        font-size: 28rpx;
        color: #dd2db5;
        position: absolute;
        right: 5vw;
        width: 25vw;
        text-align: right;
      }
    }

    .ad-container {
      padding: 10rpx 20rpx;
    }
  }
}
````

## File: packageGame/pages/commonRank/commonRank.ts
````typescript
import { reqGetRank } from '../../api/commonRank'

const defaultObj = {
  avator: 'https://ustatic.hudongmiao.com/joymewH5/newImg/defaultHeadImg.png', // ç¡®ä¿è¿™ä¸ªè·¯å¾„ä¸‹æœ‰é»˜è®¤å¤´åƒ
  wx_name: 'è™šä½ä»¥å¾…',
  score: 0,
  money: 0,
};

Page({
  data: {
    slotId: '100116000001',
    firstObj: {}, // ç¬¬ä¸€å
    secondObj: {}, // ç¬¬äºŒå
    thirdObj: {}, // ç¬¬ä¸‰å
    commonList: [] as any[], // 4-10ååˆ—è¡¨
  },

  onLoad(options: { userId?: string, gameCode?: string }) {
    if (options.userId && options.gameCode) {
      this.fetchRankData(options.userId, options.gameCode);
    } else {
      console.error('ç¼ºå°‘userIdæˆ–gameCodeå‚æ•°');
    }
  },

  async fetchRankData(userId: string, gameCode: string) {
    try {
      const res = await reqGetRank({ userId, gameCode });
      if (res && res.data && res.data.list) {
        // åˆ†æ•°å–æ•´
        res.data.list.forEach((item: any) => {
          item.score = parseInt(item.score, 10);
        });
        this.processRankList(res.data.list);
      } else {
        this.processRankList([]); // å¤„ç†ç©ºåˆ—è¡¨æƒ…å†µ
      }
    } catch (error) {
      console.error('è·å–æ’è¡Œæ¦œå¤±è´¥', error);
      this.processRankList([]); // å¼‚å¸¸æ—¶ä¹Ÿä½¿ç”¨é»˜è®¤æ•°æ®å¡«å……
    }
  },

  processRankList(list: any[]) {
    const dataToSet: { firstObj?: any, secondObj?: any, thirdObj?: any, commonList?: any[] } = {};
    const len = list.length;
    
    dataToSet.firstObj = len > 0 ? list[0] : defaultObj;
    dataToSet.secondObj = len > 1 ? list[1] : defaultObj;
    dataToSet.thirdObj = len > 2 ? list[2] : defaultObj;
    
    const common = len > 3 ? list.slice(3, 10) : [];
    while (common.length < 7) {
      common.push(defaultObj);
    }
    dataToSet.commonList = common;

    this.setData(dataToSet);
  },

  // --- æ¿€æ´»é¸Ÿå¹¿å‘Šå›è°ƒå‡½æ•° ---
  adLoad() {
    console.log('å¹¿å‘ŠåŠ è½½æˆåŠŸ');
  },

  adError(err: any) {
    console.error('å¹¿å‘ŠåŠ è½½å¤±è´¥', err);
    // å¹¿å‘ŠåŠ è½½å¤±è´¥å¯ä»¥éšè—å¹¿å‘Šä½ï¼Œé¿å…ç©ºç™½
    this.setData({ slotId: '' });
  },

  adClose() {
    console.log('å¹¿å‘Šå…³é—­');
  },

  adOpenMiniProgram(e: WechatMiniprogram.CustomEvent) {
    console.log('æ‰“å¼€å¹¿å‘Šå°ç¨‹åº', e);
    const { appId, path } = e.detail || {};
    if (appId) {
      wx.navigateToMiniProgram({
        appId: appId,
        path: path,
        success: () => console.log('è·³è½¬å°ç¨‹åºæˆåŠŸ'),
        fail: (err) => console.error('è·³è½¬å°ç¨‹åºå¤±è´¥', err)
      });
    }
  },
})
````

## File: packageGame/pages/commonRank/commonRank.wxml
````
<view class="container">
  <view class="gameRank">
    <image src="https://ustatic.hudongmiao.com/joymewH5/newImg/rankBg.png" class="rankBg" mode="widthFix"/>
    <!-- ç¬¬1å -->
    <view class="firstRank publicHvCenter" wx:if="{{firstObj.wx_name}}">
      <image src="{{firstObj.avator}}" class="headImg" />
      <view class="num">
        1
      </view>
      <view class="name publicHCenter">
        <view>{{ firstObj.wx_name }}</view>
      </view>
      <view class="score {{firstObj.coupon_name ? 'hasPrize' : ''}}">
        {{ firstObj.score }}åˆ†
      </view>
      <view wx:if="{{firstObj.coupon_name}}" class="prize {{firstObj.coupon_name.length <= 7 ? 's1' : 's2'}}">
        {{ firstObj.coupon_name }}
      </view>
    </view>
    <!-- ç¬¬2å -->
    <view class="secondRank publicHvCenter" wx:if="{{secondObj.wx_name}}">
      <image src="{{secondObj.avator}}" class="headImg" />
      <view class="num">
        2
      </view>
      <view class="name publicHCenter">
        <view>{{ secondObj.wx_name }}</view>
      </view>
      <view class="score {{secondObj.coupon_name ? 'hasPrize' : ''}}">
        {{ secondObj.score }}åˆ†
      </view>
      <view wx:if="{{secondObj.coupon_name}}" class="prize {{secondObj.coupon_name.length <= 6 ? 's1' : 's2'}}">
        {{ secondObj.coupon_name }}
      </view>
    </view>
    <!-- ç¬¬3å -->
    <view class="thirdRank publicHvCenter" wx:if="{{thirdObj.wx_name}}">
      <image src="{{thirdObj.avator}}" class="headImg" />
      <view class="num">
        3
      </view>
      <view class="name publicHCenter">
        <view>{{ thirdObj.wx_name }}</view>
      </view>
      <view class="score {{thirdObj.coupon_name ? 'hasPrize' : ''}}">
        {{ thirdObj.score }}åˆ†
      </view>
      <view wx:if="{{thirdObj.coupon_name}}" class="prize {{thirdObj.coupon_name.length <= 6 ? 's1' : 's2'}}">
        {{ thirdObj.coupon_name }}
      </view>
    </view>

    <!-- å…¶ä»–æ’å -->
    <scroll-view class="otherRank" scroll-y>
      <block wx:for="{{commonList}}" wx:key="index">
        <view class="item publicVCenter">
          <view class="left publicVCenter">
            <view class="num">
              {{ index + 4 }}
            </view>
            <image src="{{item.avator}}" class="headImg" />
            <view class="name {{item.coupon_name ? 'hasPrize' : ''}}">
              {{ item.wx_name }}
            </view>
          </view>
          <view class="score publicVCenter {{item.coupon_name ? 'hasPrize' : ''}}">
            {{ item.score }}åˆ†
          </view>
          <view wx:if="{{item.coupon_name}}" class="prize">
            {{ item.coupon_name }}
          </view>
        </view>
      </block>
      
      <!-- æ¿€æ´»é¸Ÿä¿¡æ¯æµå¹¿å‘Š -->
      <view class="ad-container" wx:if="{{slotId}}">
        <jihuoniao-ad
            slot-id="{{slotId}}"
            type="feed"
            count="1"
            bind:load="adLoad"
            bind:error="adError"
            bind:close="adClose"
            bind:openMiniProgram="adOpenMiniProgram"/>
      </view>

    </scroll-view>
  </view>
</view>
````

## File: packageGame/pages/kbx/kbx.js
````javascript
import {
  reqGetGameState,
  reqSendBroadCast,
  reqGetBoxesList,
  reqRobBox,
  reqKbxRecharge,
  reqGetMyBoxes
} from '../../api/kbx';
import {
  timeoutTask,
  getRandom,
  generateRandomId
} from '../../../utils/index';

const app = getApp();
const BX = [{
  num: '01',
  left: 129,
  top: 168,
}, {
  num: '02',
  left: 281,
  top: 168,
}, {
  num: '03',
  left: 444,
  top: 168,
}, {
  num: '05',
  left: 62,
  top: 330,
}, {
  num: '06',
  left: 213,
  top: 330,
}, {
  num: '07',
  left: 365,
  top: 330,
}, {
  num: '08',
  left: 521,
  top: 330,
}, {
  num: '09',
  left: 37,
  top: 508,
}, {
  num: '10',
  left: 201,
  top: 508,
}, {
  num: '11',
  left: 364,
  top: 508,
}, {
  num: '12',
  left: 521,
  top: 508,
}, {
  num: '13',
  left: 42,
  top: 662,
}, {
  num: '15',
  left: 206,
  top: 662,
}, {
  num: '16',
  left: 360,
  top: 662,
}, {
  num: '17',
  left: 526,
  top: 662,
}, {
  num: '18',
  left: 117,
  top: 814,
}, {
  num: '19',
  left: 279,
  top: 814,
}, {
  num: '20',
  left: 444,
  top: 814,
}, ];
const giftList = [{
  id: 1,
  gift: 'rocket1',
  name: 'å°å·ç«ç®­',
  imgUrl: 'https://static.hudongmiao.com/joymewMp/zyz/rocket1.png',
}, {
  id: 2,
  gift: 'rocket2',
  name: 'ä¸­å·ç«ç®­',
  imgUrl: 'https://static.hudongmiao.com/joymewMp/zyz/rocket2.png',
}, {
  id: 3,
  gift: 'rocket3',
  name: 'å¤§å·ç«ç®­',
  imgUrl: 'https://static.hudongmiao.com/joymewMp/zyz/rocket3.png',
}];
const wishList = [
  'é†‰é…’é¥±å¾·ï¼Œä¸èƒœæ„Ÿæ¿€',
  'ç¾é…’ä½³è‚´,ä¸ç”šè£å¹¸',
  'æ„Ÿè°¢æ‹›å¾…,ç¥æ„¿å®‰åº·',
  'å°å°çº¢åŒ…,æ„Ÿè°¢æ‹›å¾…'
];
let requestLock = false;
Page({
  data: {
    gameStatus: 1, // æ¸¸æˆçŠ¶æ€(æ§åˆ¶é¡µé¢æ˜¾ç¤º)
    myBoxesVisible: false,
    boxes: [],
    chooseBoxIds: [],
    remain: 3,
    money: 0,
    gift_show: { //å½“å‰æ˜¾ç¤ºçš„ç¤¼ç‰©
      id: 3,
      gift: 'rocket3',
      name: 'å¤§å·ç«ç®­',
      imgUrl: 'https://static.hudongmiao.com/joymewMp/zyz/rocket3.png',
      price: 0,
    },
    userId: '',
    openId: '',
    name: '',
    headImg: '',
    isForbidBuyHbq: false,
    luckyBoxes: [],
  },
  onLoad: function (options) {
    requestLock = false;
    this.setData({
      userId: options.userId,
      openId: options.openId,
      name: options.name,
      headImg: options.headImg,
      isForbidBuyHbq: options.isForbidBuyHbq === 'true' ? true : false,
    });
    reqGetGameState({
      userId: this.data.userId
    }).then((res) => {
      if (res.success) {
        if (res.data.status === '1') {
          this.setData({
            gameStatus: 2,
          });
          this.getBoxes();
        } else if (res.data.status === '2') {
          wx.showToast({
            title: 'æœ¬è½®å¼€å®ç®±å·²ç»ç»“æŸ!',
            icon: 'none'
          });
          timeoutTask(() => {
            wx.navigateBack();
          }, 1500);
        }
      }
    })

  },
  onShow: function () {

  },
  onUnload: function () {},
  // è·å–å®ç®±åˆ—è¡¨
  getBoxes: function () {
    reqGetBoxesList().then((res) => {
      console.log('å®ç®±åˆ—è¡¨:', res);
      if (res.success && res.data) {
        const tmpLen = res.data.length;
        const tmpBoxes = [];
        for (let i = 0; i < tmpLen; i += 1) {
          tmpBoxes.push({
            id: res.data[i].eggId,
            isBuyed: res.data[i].userId === '0' ? false : true,
            isChoosed: false,
            buyerId: res.data[i].userId,
            num: BX[i].num,
            left: BX[i].left,
            top: BX[i].top,
          });
        }
        this.setData({
          boxes: tmpBoxes,
          money: parseFloat(res.message),
        });
        this.setRemain();
        this.updateGift();
        console.log('å®ç®±åˆ—è¡¨:', this.data.boxes);
      } else {
        wx.showToast({
          title: 'è·å–å®ç®±ä¿¡æ¯å¤±è´¥',
          icon: 'none'
        });
      }
    })
  },
  // è·å–å·²ç»é€‰æ‹©å®ç®±çš„æ•°ç›®
  getChoosedBoxesNum: function (isIncludeBuyed) {
    const boxes = this.data.boxes;
    const len = boxes.length;
    let tmpNum = 0;
    if (isIncludeBuyed) {
      for (let i = 0; i < len; i += 1) {
        if (boxes[i].isChoosed || boxes[i].buyerId === this.data.userId) {
          tmpNum += 1;
        }
      }
    } else {
      for (let i = 0; i < len; i += 1) {
        if (boxes[i].isChoosed) {
          tmpNum += 1;
        }
      }
    }
    return tmpNum;
  },
  // è·å–å·²ç»é€‰æ‹©çš„å®ç®±åˆ—è¡¨
  getChoosedBoxesList: function () {
    const boxes = this.data.boxes;
    const len = boxes.length;
    const tmpChoosedBoxes = [];
    for (let i = 0; i < len; i += 1) {
      if (boxes[i].isChoosed) {
        tmpChoosedBoxes.push(boxes[i]);
      }
    }
    return tmpChoosedBoxes;
  },
  // è®¾ç½®è¿˜å¯ä»¥è´­ä¹°çš„å®ç®±ä¸ªæ•°(ä¸€å…±å¯è´­ä¹°ä¸‰ä¸ª)
  setRemain: function () {
    let tmpRemain = 0;
    const tmpLen = this.data.boxes.length;
    for (let i = 0; i < tmpLen; i += 1) {
      if (this.data.boxes[i].buyerId === this.data.userId) {
        tmpRemain += 1;
      }
    }
    this.setData({
      remain: tmpRemain,
    });
  },
  // è·å–é€‰æ‹©çš„å®ç®±æ•°ç›®æ—¶æ›´æ–°ç¥ç¦åˆ—è¡¨
  updateGift: function () {
    const hasChoosedNum = this.getChoosedBoxesNum(false);
    this.boxesMapGift(hasChoosedNum);
  },
  // ç¥ç¦å’Œå·²é€‰æ‹©çš„å®ç®±æ•°çš„æ˜ å°„
  boxesMapGift: function (choosedNum) {
    const tmpMoney = this.data.money;
    giftList[0].price = tmpMoney.toFixed(2);
    giftList[1].price = (tmpMoney * 2).toFixed(2);
    giftList[2].price = (tmpMoney * 3).toFixed(2);
    if (choosedNum == 3) {
      //é€‰äº†3ä¸ªå®ç®±<---> å¤§ç«ç®­
      this.setData({
        gift_show: giftList[2],
      })
    } else if (choosedNum == 2) {
      //é€‰äº†2ä¸ªå®ç®±<---> ä¸­ç«ç®­
      this.setData({
        gift_show: giftList[1],
      })
    } else {
      //é€‰äº†1ä¸ªå®ç®±æˆ–è€…è¿˜æ²¡æœ‰é€‰è›‹<--->å°ç«ç®­
      this.setData({
        gift_show: giftList[0],
      })
    }
  },
  enterGame: function () {
    reqGetGameState(this.data.userId).then((res) => {
      console.log('***è·å–æ¸¸æˆçŠ¶æ€***');
      console.log(res);
      if (res.success) {
        if (res.data.status === '0') {
          wx.showToast({
            title: 'è¯·ç­‰å¾…å¤§å±å¼€å¯æ¸¸æˆ',
            icon: 'none'
          });
        } else if (res.data.status === '1') {
          // æ¸¸æˆè¿›è¡Œä¸­
          this.getBoxes();
          this.setData({
            gameStatus: 2,
          })
        } else if (res.data.status === '2') {
          wx.showToast({
            title: 'æœ¬è½®å¼€å®ç®±å·²ç»ç»“æŸ',
            icon: 'none'
          });
          timeoutTask(() => {
            wx.navigateBack();
          }, 1500);
        } else {
          wx.showToast({
            title: 'è¯·ç­‰å¾…å¤§å±å¼€å¯æ¸¸æˆ',
            icon: 'none'
          });
        }
      }
    }).catch((err) => {
      console.log(err);
    });
  },
  // é€‰æ‹©å®ç®±
  chooseBoxes: function (e) {
    const index = this.findBoxIndexByBoxId(e.currentTarget.dataset.id);
    const boxes = this.data.boxes;
    if (boxes[index].isBuyed) {
      wx.showToast({
        title: 'è¿™ä¸ªå®ç®±å·²ç»è¢«æŠ¢èµ°å•¦',
        icon: 'none'
      });
      return;
    }
    // å¦‚æœé€‰ä¸­ å–æ¶ˆé€‰ä¸­
    if (boxes[index].isChoosed) {
      boxes[index].isChoosed = false;
      this.setData({
        boxes,
      });
      this.updateGift();
      return;
    }
    // æœ€å¤š3ä¸ªå®ç®± åŒ…æ‹¬å·²ç»è´­ä¹°çš„
    const hasChoosedNum = this.getChoosedBoxesNum(true);
    if (hasChoosedNum >= 3) {
      wx.showToast({
        title: 'æœ€å¤šåªèƒ½é€‰æ‹©ä¸‰ä¸ªå®ç®±å“¦',
        icon: 'none'
      });
      return;
    }
    if (!boxes[index].isChoosed) {
      boxes[index].isChoosed = true;
      this.setData({
        boxes,
      })
      this.updateGift();
    }
  },
  // é€šè¿‡boxesIdæŸ¥æ‰¾å®ç®±æ‰€åœ¨æ•°ç»„çš„ç´¢å¼•
  findBoxIndexByBoxId: function (boxId) {
    let tmpIndex = -1;
    const tmpLen = this.data.boxes.length;
    for (let i = 0; i < tmpLen; i += 1) {
      if (this.data.boxes[i].id === boxId) {
        tmpIndex = i;
        break;
      }
    }
    return tmpIndex;
  },
  // æ‰“å¼€æˆ‘çš„å®ç®±é¡µé¢
  toMyBoxes: function () {
    this.getLuckyBoxes();
    this.setData({
      myBoxesVisible: true,
    });
  },
  // æ‰“å¼€å®ç®±è´­ä¹°é¡µé¢
  toBuyBoxes: function () {
    this.setData({
      myBoxesVisible: false,
    });
  },
  // ä¹°å®ç®±
  buy: function () {
    // è·å–é€‰ä¸­çš„å®ç®±
    const choosed = this.getChoosedBoxesList();
    if (choosed.length == 0) {
      wx.showToast({
        title: 'è¯·å…ˆé€‰ä¸€ä¸ªå®ç®±',
        icon: 'none'
      });
      return;
    }
    if (requestLock) {
      return;
    }
    if (this.data.isForbidBuyHbq) {
      wx.showToast({
        title: 'å¾ˆé—æ†¾æ‚¨é€‰æ‹©çš„å®ç®±éƒ½è¢«æŠ¢èµ°äº†!',
        icon: 'none'
      });
      return;
    }
    requestLock = true;
    let choosedStr = choosed.map((item) => {
      return item.id;
    }).join(',');
    this.robBox(choosedStr, 0).then((res) => {
      console.log(res);
      if (res.code === 'success') {
        requestLock = false;
        if (res.resultList.length == 0) {
          wx.showModal({
            showCancel: false,
            title: 'æ¸©é¦¨æç¤º',
            content: 'å¾ˆé—æ†¾æ‚¨é€‰æ‹©çš„å®ç®±éƒ½è¢«æŠ¢èµ°äº†\r\nå·²é€€å›è‡³æ‚¨çš„è´¦æˆ·ä¸­',
            confirmText: 'ç¡®å®š',
            success: () => {}
          });
        } else {
          if (choosed.length > res.resultList.length) {
            wx.showModal({
              showCancel: false,
              title: 'æ¸©é¦¨æç¤º',
              content: 'æ­å–œæ‚¨,æˆåŠŸæŠ¢åˆ°äº†' + res.resultList.length + 'ä¸ªå®ç®±ï¼ \r\n æœªæŠ¢åˆ°çš„å®ç®±ï¼Œå·²é€€å›è‡³æ‚¨çš„è´¦æˆ·ä¸­',
              confirmText: 'æŸ¥çœ‹å®ç®±',
              success: () => {
                this.getLuckyBoxes();
                this.setData({
                  myBoxesVisible: true,
                });
              }
            })
          } else {
            wx.showModal({
              showCancel: false,
              title: 'æ¸©é¦¨æç¤º',
              content: 'æ­å–œæ‚¨,æˆåŠŸæŠ¢åˆ°äº†' + res.resultList.length + 'ä¸ªå®ç®±!',
              confirmText: 'æŸ¥çœ‹å®ç®±',
              success: () => {
                this.getLuckyBoxes();
                this.setData({
                  myBoxesVisible: true,
                });
              }
            })
          }
          console.log(res.resultList);
          let tmpCode = '';
          if (this.data.gift_show.id === 3) {
            tmpCode = 7002;
          } else if (this.data.gift_show.id === 2) {
            tmpCode = 6002;
          } else if (this.data.gift_show.id === 1) {
            tmpCode = 5002;
          }
          let c = JSON.stringify({
            code: tmpCode,
            param: {
              headImg: this.data.headImg,
              nickname: this.data.name,
              wish: wishList[getRandom(0, 4)],
            }
          });
          // å‘é€å¹¿æ’­
          reqSendBroadCast({
            c,
          });
        }
        this.getBoxes();
      } else if (res.code === 'error3') {
        if (res.NeedMoney) {
          // è°ƒèµ·æ”¯ä»˜
          return this.recharge(res.NeedMoney);
        } else {
          wx.showToast({
            title: 'è´­ä¹°å¤±è´¥!',
            icon: 'none'
          });
        }
      } else if (res.code === 'error4') {
        wx.showToast({
          title: 'å¼€å®ç®±å·²ç»ç»“æŸ',
          icon: 'none'
        });
        requestLock = false;
      } else {
        wx.showToast({
          title: 'è´­ä¹°å¤±è´¥',
          icon: 'none'
        });
        requestLock = false;
      }
    }).catch((err) => {
      console.log(err);
    })
  },
  // æŠ¢å®ç®±
  robBox: function (boxId, sort) {
    return new Promise((resolve, reject) => {
      wx.showLoading({
        title: 'å¥‹åŠ›äº‰æŠ¢ä¸­...',
        mask: true,
      });
      reqRobBox({
        boxIds: boxId,
        sort: 0,
      }).then((res) => {
        console.log(res);
        wx.hideLoading();
        resolve(res);
      }).catch((err) => {
        console.log(err);
        reject(err);
        wx.hideLoading();
        wx.showToast({
          title: 'æŠ¢è´­å¤±è´¥',
          icon: 'none'
        });
      })
    });
  },
  // æ”¯ä»˜
  recharge: function (money) {
    return new Promise((resolve, reject) => {
      reqKbxRecharge({
        userId: this.data.userId,
        openid: this.data.openId,
        money,
      }).then((res) => {
        console.log(res);
        resolve(res);
        wx.showToast({
          title: 'å……å€¼æˆåŠŸ!',
          icon: 'none'
        });
        requestLock = false;
        //å……å€¼å®Œæˆ ç­‰å¾…åå°åŠ å–µé’»é€»è¾‘å®Œæˆå å»ä¹°å®ç®±
        timeoutTask(() => {
          this.buy();
        }, 500);
      }).catch((err) => {
        console.log(err);
        reject(err);
      })
    });
  },
  // è·å–æˆ‘çš„å®ç®±
  getLuckyBoxes: function () {
    reqGetMyBoxes().then((res) => {
      console.log(res);
      if (res.success) {
        if (res.data && res.data.length > 0) {
          const tmpBoxes = [];
          const tmpLen = res.data.length;
          for (let i = 0; i < tmpLen; i += 1) {
            if (res.data[i].eggId) {
              let tmpEggId = parseInt(res.data[i].eggId);
              if (tmpEggId <= 3) {
                res.data[i].num = `0${tmpEggId}`;
              } else if (tmpEggId >= 4 && tmpEggId <= 8) {
                res.data[i].num = `0${tmpEggId + 1}`;
              } else if (tmpEggId >= 9 && tmpEggId <= 12) {
                res.data[i].num = `${tmpEggId + 1}`;
              } else {
                res.data[i].num = `${tmpEggId + 2}`;
              }
              tmpBoxes.push(res.data[i]);
            }
          }
          this.setData({
            luckyBoxes: tmpBoxes
          });
        }
      } else {
        wx.showToast({
          title: 'è·å–å®ç®±ä¿¡æ¯å¤±è´¥!',
          icon: 'none'
        });
      }
    }).catch((err) => {
      console.log(err);
      wx.showToast({
        title: 'è·å–å®ç®±ä¿¡æ¯å¤±è´¥!',
        icon: 'none'
      });
    })
  },
  toAgreement: function () {
    wx.navigateTo({
      url: '/packageC/pages/agreement/agreement'
    });
  },
});
````

## File: packageGame/pages/luckyWheel/luckyWheel.js
````javascript
import {
  reqGetZyzInfo, // è·å–æ¸¸æˆä¿¡æ¯
  reqGetPoolMoney, // ä¸åªæ˜¯è·å–å¥–æ± é‡‘é¢ï¼Œè¿˜èƒ½è·å–æ¸¸æˆçŠ¶æ€
} from "../../api/zyz";

Page({
  data: {
    turnId: 0, // æŠ½å¥–è½®æ¬¡id
    poolMoney: "0", // å¥–æ± é‡‘é¢
    gameStatus: 1, // å½“å‰æ¸¸æˆçŠ¶æ€ï¼Œç”¨äºæ§åˆ¶é¡µé¢æ˜¾ç¤º
    prizeItemList: [], // å¥–é¡¹åˆ—è¡¨(å¸¦æ±‰å­—å•ä½)
    prizeItemValList: [], // å¥–é¡¹æ•°å€¼åˆ—è¡¨(ä¸å¸¦æ±‰å­—å•ä½)
    countDown: 0, // æ¸¸æˆç•Œé¢çš„å€’è®¡æ—¶
    countDownInterval: null, // æ›´æ–°å€’è®¡æ—¶çš„å®šæ—¶å™¨
    userId: "", // ç”¨æˆ·idï¼Œä¼ ç»™FeedbackEntryå’ŒLuckyWheelMainç»„ä»¶
    openId: "", // ç”¨æˆ·openIdï¼Œä¼ ç»™FeedbackEntryå’ŒLuckyWheelMainç»„ä»¶
    name: "", // ä¼ é€’ç»™LuckyWheelMainç»„ä»¶ç”¨æ¥å‘é€ç¤¼ç‰©å¹¿æ’­çš„
    headImg: "", // ä¼ é€’ç»™LuckyWheelMainç»„ä»¶ç”¨æ¥å‘é€ç¤¼ç‰©å¹¿æ’­çš„
    targetId: "", // é”šç‚¹ï¼Œç”¨äºæ§åˆ¶æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
  },
  // æ–¹æ³•
  // ä¿®æ”¹å¥–æ± é‡‘é¢ï¼Œç»™å­ç»„ä»¶ç”¨çš„
  changePoolMoney({ poolMoney: poolMoney }) {
    this.setData({
      poolMoney,
    });
  },
  // è¿”å›å‰©ä½™å€’è®¡æ—¶æ•°å€¼ï¼ˆç§’ï¼‰
  remainCountdown(endTime) {
    var nowTime = new Date().getTime();
    var subTime = parseInt((parseInt(endTime) - parseInt(nowTime)) / 1000);
    if (subTime < 0) {
      subTime = 0;
    }
    return subTime;
  },
  // è·å–å¹¶è®¾ç½®å¥–æ± é‡‘é¢ï¼Œåœ¨é¡µé¢onLoadæ—¶è°ƒç”¨
  setPoolMoneyOnLoad() {
    reqGetPoolMoney()
      .then((res) => {
        this.setData({
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log("è·å–å¥–æ± é‡‘é¢å¤±è´¥", err);
      });
  },
  // å°è¯•è¿›å…¥æ¸¸æˆ
  tryEnterGame({ isFirst = false }) {
    reqGetZyzInfo()
      .then((res) => {
        // æ›´æ–°turnId
        this.setData({
          turnId: res.data.id,
        });

        // æ ¹æ®endTimeæ›´æ–°æ¸¸æˆçŠ¶æ€
        if (res.data.endTime === "0") {
          !isFirst ? wx.showToast({title: "æ¸¸æˆå°šæœªå¼€å§‹!", icon: "none"}) : null;
        } else {
          let countDownTotalTime = this.remainCountdown(res.data.endTime);
          this.startCountDown(countDownTotalTime);
          this.setData({
            gameStatus: 2,
          });
        }
      })
      .catch((err) => {
        wx.showToast({
          title: "è·å–æ¸¸æˆä¿¡æ¯å¤±è´¥!",
          icon: "none",
        });
      });
  },
  // å¯åŠ¨ä¸€ä¸ªIntervalï¼Œä»è€Œæ›´æ–°å€’è®¡æ—¶ã€å……å€¼å…¥å£çŠ¶æ€å’Œæ§åˆ¶æ¸¸æˆç»“æŸ
  startCountDown(countDownTotalTime) {
    if (this.countDownInterval) {
      return;
    }
    // å¼€å¯å……å€¼å…¥å£
    this.setData({
      isEntry: true,
    });
    let countTime = countDownTotalTime;
    // æ¯ç§’å€’è®¡æ—¶å‡1
    this.countDownInterval = setInterval(() => {
      // å°äº15ç§’æ—¶å…³é—­å……å€¼å…¥å£
      if (countTime <= 15) {
        this.setData({
          isEntry: false,
        });
      }
      // å°äº1ç§’æ—¶åœæ­¢å€’è®¡æ—¶ï¼Œå¹¶ä¸”ç»“æŸæ¸¸æˆ
      if (countTime <= 1) {
        this.endGame();
        clearInterval(this.countDownInterval);
      }
      // åªè¦å€’è®¡æ—¶å¤§äº0ï¼Œå°±ä¸€ç›´å€’è®¡æ—¶
      if (countTime > 0) {
        countTime -= 1;
        this.setData({
          countDown: countTime,
        });
      }
      // æ¯4ç§’å‘åç«¯ç¡®è®¤ä¸€ä¸‹æ¸¸æˆçŠ¶æ€
      if (countTime % 4 === 0) {
        this.updateWhileGaming();
      }
    }, 1000);
  },
  // åœ¨æ¸¸æˆä¸­è¿›è¡Œçš„æ¸¸æˆçŠ¶æ€æ£€æŸ¥å’Œæ›´æ–°
  updateWhileGaming() {
    reqGetPoolMoney()
      .then((res) => {
        const remainCountdown = this.remainCountdown(res.data.endTime);
        if (remainCountdown <= 0) {
          this.endGame();
        }
        this.setData({
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "è·å–å¥–æ± é‡‘é¢å¤±è´¥",
          icon: "none",
        });
      });
  },
  // ç»“æŸæ¸¸æˆ
  endGame() {
    this.setData({
      gameStatus: 3,
    });
  },

  onLoad(options) {
    this.setData({
      userId: options.userId,
      openId: options.openId,
      name: options.name,
      headImg: options.headImg,
      prizeItemList: getApp().globalData.gameInfo_luckyWheelPrizeItemList,
    });
    // è·å–å¥–æ± é‡‘é¢
    this.setPoolMoneyOnLoad();
  },
  onShow: function () {
    this.tryEnterGame({ isFirst: true });
  },
  onHide: function () {
    clearInterval(this.data.countDownInterval);
    this.data.countDownInterval = null;
  },
  onUnload: function () {
    clearInterval(this.data.countDownInterval);
    this.data.countDownInterval = null;
  },
});
````

## File: packageGame/pages/luckyWheel/luckyWheel.wxml
````
<scroll-view class="luckyWheel-wrap" scroll-y="true" scroll-into-view="{{targetId}}" 	scroll-with-animation="true" >
  <!-- åé¦ˆå…¥å£ -->
  <FeedbackEntry userId="{{userId}}" openId="{{openId}}"></FeedbackEntry>
  <!-- ç­‰å¾…é¡µé¢ -->
  <Wait wx:if="{{gameStatus === 1}}" bind:tryEnterGame="tryEnterGame" />
  <!-- æ¸¸æˆç•Œé¢ -->
  <LuckyWheelMain wx:if="{{gameStatus===2}}" poolMoney="{{poolMoney}}" bind:changePoolMoney="changePoolMoney"
    prizeItemList="{{prizeItemList}}" countDown="{{countDown}}" isEntry="{{isEntry}}" userId="{{userId}}"
    openId="{{openId}}" name="{{name}}" headImg="{{headImg}}" bind:requestGameInitInfo="requestGameInitInfo" />
  <!-- æ’è¡Œæ¦œç•Œé¢ -->
  <PrizeSheet wx:if="{{gameStatus===3}}" />
  <!-- ç©ºç½®çš„é”šç‚¹å…ƒç´ ï¼Œç”¨äºé¡µé¢æ»šåŠ¨å®šä½ -->
  <view id="bottom-anchor"></view>
</scroll-view>
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.json
````json
{
  "component": true,
  "usingComponents": {
    "Congratulate" : "./luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2"
  }
  
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.wxml
````
<view class="lucky-wheel-main">
  <!-- æ­å–œä¸­å¥–æç¤º -->
  <Congratulate wx:if="{{isWin}}" bind:close="closeWinDialog" bind:playAgain="sendGift" prizeMoney="{{prizeMoney}}" userAvatar="{{userAvatar}}" userNickname="{{userNickname}}" />
  <!-- å¥–é‡‘æ± æ€»é‡‘é¢ -->
  <view class="total-money publicHvCenter">
    <view class="text">å¥–æ± æ€»é‡‘é¢ï¼š {{ poolMoney }}å…ƒ</view>
  </view>
  <!-- è½¬ç›˜åŒºåŸŸ -->
  <view class="wheel-area">
    <!-- è½¬ç›˜çš„å‰5ä¸ªä¸­å¥–é€‰é¡¹ -->
    <!-- XXX æœ€å¥½è¿˜æ˜¯è¦è®©æ‰€æœ‰å¥–é¡¹å‡é€†æ—¶é’ˆæ’åˆ—ï¼Œè¿™æ ·å°±å¯ä»¥ç®€åŒ–è½¬ç›˜åŠ¨ç”»ä¸­çš„é€»è¾‘äº† -->
    <view class="prize-item {{brightItemIndex === index? 'bright': ''}}" wx:for="{{firstFivePrizeItems}}"
      wx:for-index="index" wx:for-item="item" wx:key="index">
      <view class="content">{{ item }}</view>
    </view>
    <!-- è½¬ç›˜å€’è®¡æ—¶ -->
    <view class="count-down publicHCenter" style="opacity: {{opacity}}; transition: opacity 2s ease-in-out;">
      <i class="i">{{ formattedCountDown }}</i>
    </view>
    <!-- è½¬ç›˜å5ä¸ªä¸­å¥–é€‰é¡¹ -->
    <view class="prize-item" class="prize-item {{brightItemIndex === index+5? 'bright': ''}}"
      wx:for="{{lastFivePrizeItems}}" wx:key="index" wx:for-item="item" wx:key="index">
      <view class="content">{{ item }}</view>
    </view>
  </view>
  <!-- å¼¹å¹•ç¤¼ç‰©åŒºåŸŸ -->
  <view class="gift-area">
    <view class="gift-tip">è´­ä¹°ä»»æ„ä¸€æ¬¾å¼¹å¹•ç¤¼ç‰©ï¼Œç³»ç»Ÿå°†èµ é€ä¸€æ¬¡æŠ½å¥–æœºä¼š</view>
    <view class="gift-items">
      <view class="gift-item {{item.isChoosed?'active':''}}" wx:for="{{giftItems}}" wx:key="id" data-id="{{item.id}}"
        bind:tap="chooseGift">
        <image class="gift-item-img" mode="heightFix" src="{{item.imgUrl}}" alt="{{item.name}}"></image>
      </view>
    </view>
  </view>
  <!-- å……å€¼æœåŠ¡åè®® -->
  <view class="agreement" bindtap='toAgreement'>é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
  <!-- å‘é€ç¤¼ç‰©æŒ‰é’® -->
  <view class="send-gift-btn {{isClicked?'clicked':''}}" bind:tap="sendGift">
    <text>å‘é€ç¤¼ç‰©</text>
  </view>
</view>
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.wxss
````
.lucky-wheel-main {
  position: relative;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding-bottom: 60rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/main-bg.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
}
.lucky-wheel-main .total-money {
  width: 600rpx;
  height: 200rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/total-bg.png");
  background-size: 100% 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.lucky-wheel-main .total-money .text {
  transform: translateY(10rpx);
  width: 500rpx;
  height:100rpx;
  font-family: 'Impact', 'Arial Black', 'Noto Sans SC', sans-serif;
  font-size: 40rpx;
  font-weight: bold;
  color: #fff;
  letter-spacing: 4rpx;
  font-style: italic;
  display: flex;
  align-items: center;
  justify-content: center;
}

.lucky-wheel-main .wheel-area {
  width: 650rpx;
  height: 805.923rpx;
  margin-top: 0rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/wheel-bg.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: center;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  justify-content: space-around;
  align-content: space-around;
  padding: 63.5rpx 70rpx;
}

.lucky-wheel-main .wheel-area .prize-item {
  width: 150rpx;
  height: 150rpx;
  background:#0000;
}

.lucky-wheel-main .wheel-area .prize-item .content {
  width: 150rpx;
  height: 150rpx;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/item-bg4.png");
  border-radius: 28.846rpx;
  font-size: 32rpx;
  font-weight: bold;
  line-height: 150rpx;
  font-weight: 700;
  text-align: center;
  color: #fff;
  letter-spacing: 2.385rpx;
}

.lucky-wheel-main .wheel-area .prize-item.bright {
  background:url("https://ustatic.hudongmiao.com/joymewScreen/img/luckyWheel/item-effect2.png") no-repeat center center;
  background-size: 110% 110%;
}
.lucky-wheel-main .wheel-area .prize-item.bright .content{
      box-shadow: 0px 0px 10px 3px rgba(255, 215, 0, 0.8), 0px 0px 20px 8px rgba(255, 215, 0, 0.6), inset 0px 0px 30px 15px rgba(255, 255, 255, 0.3);
      border: 2px solid #FFD700;
}

.lucky-wheel-main .wheel-area .prize-item:nth-child(2) .content,
.lucky-wheel-main .wheel-area .prize-item:nth-child(11) .content{
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/item-bg1.png");
}
.lucky-wheel-main .wheel-area .prize-item:nth-child(3) .content,
.lucky-wheel-main .wheel-area .prize-item:nth-child(8) .content{
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/item-bg2.png");
}
.lucky-wheel-main .wheel-area .prize-item:nth-child(4) .content,
.lucky-wheel-main .wheel-area .prize-item:nth-child(5).content ,
.lucky-wheel-main .wheel-area .prize-item:nth-child(10) .content{
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/item-bg3.png");
}
.lucky-wheel-main .wheel-area .count-down {
  width: 150rpx;
  height: 320rpx;
  font-size: 34.615rpx;
  color: #fff;
  letter-spacing: 0.692rpx;
  text-align: center;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/time-bg.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.lucky-wheel-main .wheel-area .count-down .i {
  font-style: normal;
  font-size: 34.231rpx;
  font-weight: 700;
  letter-spacing: 0.13844 0.231rpx;
  margin-top: 30.769rpx;
}
.lucky-wheel-main .gift-area {
  width: 100%;
  height: 173.077rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.lucky-wheel-main .gift-area .gift-tip {
  width: 650rpx;
  height: 46.923rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/tip-bg.png");
  background-size: 100% 100%;
  background-repeat: no-repeat;
  line-height: 46.923rpx;
  font-size: 22.923rpx;
  font-family: "Noto Sans SC";
  color: #fff;
  text-align: center;
  margin-top: 20rpx;
  margin-bottom: 23.077rpx;
}
.lucky-wheel-main .gift-area .gift-items {
  width: 586.538rpx;
  height: 121.153rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.lucky-wheel-main .gift-area .gift-items .gift-item {
  width: 132rpx;
  height: 132rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/rocket-bg.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: center;
  border-radius: 50%;
  position: relative;
  
  filter: brightness(0.9);
  border: 1px solid #fff;
  box-shadow: 0 0 16rpx 6rpx rgba(255,255,255,0.7);
}
.lucky-wheel-main .gift-area .gift-items .gift-item.active {
  filter: brightness(1);
  border: 1px solid #FFD700;
  box-shadow: 0 0 20rpx 8rpx rgba(255,215,0,0.7);
}
.lucky-wheel-main .gift-area .gift-items .gift-item .gift-item-img {
  height: 101rpx;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.lucky-wheel-main .agreement {
  margin-top: 50rpx;
  font-size: 24rpx;
  font-weight: 400;
  color: #fff;
  background: rgba(0,0,0,0.18);
  border-radius: 32rpx;
  padding: 8rpx 32rpx;
  display: inline-block;
}
.lucky-wheel-main .send-gift-btn {
  width: 394.231rpx;
  height: 130.769rpx;
  margin-top: 16.908rpx;
  line-height: 120rpx;
  font-size: 34.616rpx;
  font-family: "Noto Sans SC";
  font-weight: 500;
  color: #fff;
  letter-spacing: 0.69 0.231rpx;
  text-align: center;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/send-btn.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: center;
  transition: 0.05s all;
}
.lucky-wheel-main .send-gift-btn.clicked {
  transform: scale(0.9);
  filter: brightness(0.8);
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.js
````javascript
Component({
  properties: {
    // ä¸­å¥–é‡‘é¢
    prizeMoney: {
      type: String,
      default: "0",
    },
    // ç”¨æˆ·å¤´åƒ
    userAvatar: {
      type: String,
      default: "",
    },
    // ç”¨æˆ·æ˜µç§°
    userNickname: {
      type: String,
      default: "",
    },
  },
  methods: {
    // ç‚¹å‡»å…³é—­æŒ‰é’®
    close() {
      this.triggerEvent("close");
    },
    // å†ç©ä¸€é
    playAgain() {
      this.triggerEvent("close");
      this.triggerEvent("playAgain");
    },
  },
});
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.wxml
````
<view class="congratulate">
  <!-- æ­å–œä¸­å¥–æç¤º -->
  <view class="congratulate-tip">
    <view class="bg">
      <image class="shine" mode="" src="https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/pop-light.png" alt="shine" />
      <image class="red-packet" mode="widthFix" src="https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/pop-bg.png"
        alt="congratulate" />
    </view>
    <view class="info">
      <view class="avatar">
        <image class="avatar-img" mode="aspectFill" src="{{userAvatar}}" alt="avatar" />
        <image class="avatar-dec" mode="widthFix" src="https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/avatar-dec.png"
          alt="avatar-dec" />
      </view>
      <view class="info-text">æ­å–œ{{userNickname}}è·å¾—</view>
      <view class="info-money">
        <text>{{prizeMoney}}</text>
        <text>å…ƒ</text>
      </view>
      <view class="info-tip"><text>å¾®ä¿¡é’±åŒ…å·²å®æ—¶åˆ°è´¦</text></view>
      <view class="info-again-btn" bindtap="playAgain">
        <view class="info-again-btn-text">å†æ¥ä¸€æ¬¡</view>
        <image class="info-again-btn-img" mode="widthFix"
          src="https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/tryagain-btn.png" alt="again" />
      </view>
    </view>
  </view>
  <!-- å…³é—­æŒ‰é’® -->
  <view class="close-btn" bind:tap="close">
    <image class="close-btn-img" mode="widthFix" src="https://static.joymew.com/joymewMp/miniWheel/close.png"
      alt="close" />
  </view>
</view>
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMainCongratulateV2/luckyWheelMainCongratulateV2.wxss
````
.congratulate {
  z-index: 100;
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
}
.congratulate .congratulate-tip {
  margin-top: 5vh;
  width: 100%;
  height: 961.538rpx;
  animation: popUp 0.2s ease-in-out forwards;
}
@keyframes popUp {
  0% {
    transform: scale(0);
  }
  100% {
    transform: scale(1);
  }
}
.congratulate .congratulate-tip .bg {
  position: absolute;
  width: 100%;
  height: 886.538rpx;
  z-index: -1;
  display: flex;
  justify-content: center;
  align-items: center;
}
.congratulate .congratulate-tip .bg .shine {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform: scale(1.2);
  animation: rotate 10s linear infinite;
}
@keyframes rotate {
  0% {
    transform: scale(1.2) rotate(0deg);
  }
  100% {
    transform: scale(1.2) rotate(360deg);
  }
}
.congratulate .congratulate-tip .bg .red-packet {
  position: relative;
  margin-top: 92.308rpx;
  width: 704.923rpx;
  height: 809.615rpx;
}

.congratulate .congratulate-tip .avatar {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 60rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.congratulate .congratulate-tip .avatar .avatar-img {
  position: absolute;
  top: 220rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 60rpx;
  height: 60rpx;
  border-radius: 50%;
}

.congratulate .congratulate-tip .avatar .avatar-dec {
  position: absolute;
  top: 250rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 300rpx;
  height: 60rpx;
}

.congratulate .congratulate-tip .info {
  position: relative;
  margin-top: 92.308rpx;
  height: 809.615rpx;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: start;
  align-items: center;
}
.congratulate .congratulate-tip .info .info-text {
  position: absolute;
  top: 320rpx;
  left: 50%;
  max-width: 400rpx;
  transform: translateX(-50%);
  font-size: 32.846rpx;
  font-family: Noto sans sc;
  font-weight: 700;
  text-align: center;
  color: #E87C1A;
  text-shadow: none;
  letter-spacing: 2rpx;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.congratulate .congratulate-tip .info .info-money {
  position: absolute;
  top: 400rpx;
  left: 50%;
  transform: translateX(-50%);
  font-size: 92.308rpx;
  font-weight: bold;
  text-align: center;
  color: red;
  text-shadow: -0.904rpx 5.692rpx 13.462rpx 0rpx rgba(168, 33, 33, 0.65);
}
.congratulate .congratulate-tip .info .info-tip {
  position: absolute;
  top: 560rpx;
  left: 50%;
  max-width: 400rpx;
  transform: translateX(-50%);
  font-size: 22.846rpx;
  font-family: Noto sans sc;
  font-weight: 700;
  text-align: center;
  color: #E87C1A;
  text-shadow: none;
  letter-spacing: 2rpx;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: -0.904rpx 5.692rpx 13.462rpx 0rpx rgba(168, 33, 33, 0.65);
}
.congratulate .congratulate-tip .info .info-again-btn {
  position: relative;
  margin-top: 650rpx;
  width: 392.308rpx;
  height: 80.769rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  
}
.congratulate .congratulate-tip .info .info-again-btn .info-again-btn-text{
  color: #fff;
  font-size: 42rpx;
  font-weight: bold;
  text-align: center;
  letter-spacing: 2rpx;
  text-shadow: 0 2rpx 8rpx rgba(255,168,0,0.18);
  transform: translateY(10rpx);
}

.congratulate .congratulate-tip .info .info-again-btn .info-again-btn-img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
}
.congratulate .close-btn {
  width: 71.154rpx;
  height: 71.154rpx;
}
.congratulate .close-btn .close-btn-img {
  width: 100%;
  height: 100%;
}
````

## File: packageGame/pages/luckyWheel/wait/wait.wxml
````
<view class="wait">
  <view>
    <!-- è§„åˆ™ä»‹ç» -->
    <view class="rule">
      <view class="rule-item-content">
        <view class="p">1.ä¸»æŒäººç‚¹å‡»å¼€å§‹æŒ‰é’®ï¼Œæ¸¸æˆç«‹å³å¼€å§‹ï¼›</view>
        <view class="p">2.æ¸¸æˆæ—¶å¸¸150ç§’ï¼Œåœ¨å€’è®¡æ—¶ç»“æŸå‰å•ä¸ªå‚ä¸è€…å¯ä»¥ä¸é™æ¬¡æ•°å‚ä¸æ¸¸æˆï¼›</view>
        <view class="p">3.å‚ä¸è€…è´­ä¹°é«˜çº§åˆ«å¼¹å¹•åï¼Œç³»ç»Ÿå°†å…è´¹èµ é€æœºä¼šï¼›</view>
        <view class="p">4.æ‰€æœ‰å¥–é¡¹å‡ä¸ºéšæœºäº‹ä»¶ï¼Œå‚ä¸è€…çš„èŠ±è´¹å°†è¢«è®¡å…¥æ€»å¥–æ± ï¼Œä¸­å¥–è€…çš„å¥–é‡‘å°†ä»å¥–é‡‘æ± ä¸­æ‰£é™¤ã€‚</view>
      </view>
    </view>
    <!-- ç­‰å¾…å¼€å§‹æç¤º -->
    <view class="wait-start" bind:tap="startGame">
      <image class="wait-start-bg" src="https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/start-btn.png" alt="wait-start" />
    </view>

    <!-- ç¤¼ç›’ç‰¹æ•ˆ -->
    <view class="bottom-box">
        <view class="gift1"></view> 
        <view class="gift2"></view> 
        <view class="gift3"></view> 
        <view class="particle"></view> 
    </view>
  </view>


</view>
````

## File: packageGame/pages/luckyWheel/wait/wait.wxss
````
.wait {
  position: absolute;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/game-start-bg.png");
  background-repeat: no-repeat;
  background-size: 100% 100%;
}
.wait .rule-title {
  position: absolute;
  top: 146.154rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 236.539rpx;
  height: 61.019rpx;
}
.wait .rule-title .rule-title-img {
  width: 100%;
  height: 100%;
}
.wait .rule {
  position: relative;
  width: 750rpx;
  height: 1046rpx;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/rule-bg.png");
  background-size: 100% 100%;
}
.wait .rule .rule-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
}
.wait .rule .rule-item-content {
  position: absolute;
  width: 640rpx;
  top: 220rpx;
  left:60rpx;
  padding:0rpx 30rpx;
}
.wait .rule .rule-item-content .p {
  border-bottom: 1px dashed #fff;
  padding-bottom: 25rpx;
  margin-bottom: 25.308rpx;
  font-family: Noto Sans SC;
  font-size: 34.616rpx;
  font-weight: 500;
  line-height: 48.077rpx;
  color: #fff;
}
.wait .wait-start {
  position: absolute;
  top: 876.923rpx;
  left: 50%;
  width: 333.692rpx;
  height:126.616rpx;
  font-size: 55rpx;
  font-family: Noto sans SC;
  text-align: center;
  color: #fff;
  z-index: 2;
  animation: breathe 0.4s ease-in-out infinite alternate;
}
@keyframes breathe {
  from {
    transform: translateX(-50%) scale(1);
  }
  to {
    transform: translateX(-50%) scale(1.05);
  }
}
.wait .wait-start .wait-start-bg {
  position: absolute;
  display: block;
  width: 100%;
  height: 100%;
  z-index: -1;
}
.wait .bottom-box{
    position: relative;
    width: 100%;
    height: 300rpx;
}
.particle{
    width: 750rpx;
    height: 480rpx;
    position: absolute;
    bottom: 0rpx;
    left:0rpx;
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/particle1.png");
    background-size: 100% 100%;
    z-index: 1;
}
.gift1{
    width: 285rpx;
    height: 285rpx;
    position: absolute;
    bottom: 20rpx;
    left:230rpx;
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/small-gift1.png");
    background-size: 100% 100%;
    animation: shake 1.2s infinite ease-in-out;
}

@keyframes shake {
  0% { transform: rotate(0deg);}
  20% { transform: rotate(-6deg);}
  40% { transform: rotate(6deg);}
  60% { transform: rotate(-4deg);}
  80% { transform: rotate(4deg);}
  100% { transform: rotate(0deg);}
}

.gift2 {
    width: 113rpx;
    height: 115rpx;
    position: absolute;
    bottom: 50rpx;
    left: 600rpx;
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/small-gift2.png");
    background-size: 100% 100%;
    animation: shake2 1s infinite ease-in-out;
}
@keyframes shake2 {
    0% { transform: rotate(0deg);}
    25% { transform: rotate(4deg);}
    50% { transform: rotate(-4deg);}
    75% { transform: rotate(4deg);}
    100% { transform: rotate(0deg);}
}

.gift3 {
    width: 164rpx;
    height: 173rpx;
    position: absolute;
    bottom: 60rpx;
    left: 0rpx;
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/small-gift3.png");
    background-size: 100% 100%;
    animation: shake3 1.5s infinite ease-in-out;
}
@keyframes shake3 {
    0% { transform: rotate(0deg) translateY(0);}
    20% { transform: rotate(8deg) translateY(-8rpx);}
    40% { transform: rotate(-8deg) translateY(8rpx);}
    60% { transform: rotate(6deg) translateY(-6rpx);}
    80% { transform: rotate(-6deg) translateY(6rpx);}
    100% { transform: rotate(0deg) translateY(0);}
}
````

## File: packageGame/pages/nyn/nyn.js
````javascript
import {
  timeoutTask,
  getRandom,
} from "../../../utils/index";
import {
  reqGetPoolMoney,
  reqGetNynInfo,
  reqGetNynRank,
  reqNynRecharge,
  reqStartNyn,
  reqSendPrizeInfo,
  reqSendBroadCast,
} from "../../api/nyn";
import {
  reqGetLiveInfo
} from '../../../api/index'
import defaultContent from "../../../assets/constant/default";

const app = getApp();
// è›‹ä½ç½®ä¿¡æ¯
const locatInfo = [{
    x: 118,
    y: 0,
    fallAniDelay: 0.2,
    rotateAniDelay: 0.1,
    upAniDelay: 1.6,
    rotateAniDelay2: 1.5,
  },
  {
    x: 258,
    y: 26,
    fallAniDelay: 0.4,
    rotateAniDelay: 0.3,
    upAniDelay: 1.4,
    rotateAniDelay2: 1.3,
  },
  {
    x: 392,
    y: 62,
    fallAniDelay: 0.6,
    rotateAniDelay: 0.5,
    upAniDelay: 1.2,
    rotateAniDelay2: 1.1,
  },
  {
    x: 0,
    y: 80,
    fallAniDelay: 0.8,
    rotateAniDelay: 0.7,
    upAniDelay: 1,
    rotateAniDelay2: 0.9,
  },
  {
    x: 124,
    y: 128,
    fallAniDelay: 1,
    rotateAniDelay: 0.9,
    upAniDelay: 0.8,
    rotateAniDelay2: 0.7,
  },
  {
    x: 264,
    y: 162,
    fallAniDelay: 1.2,
    rotateAniDelay: 1.1,
    upAniDelay: 0.6,
    rotateAniDelay2: 0.5,
  },
  {
    x: 412,
    y: 192,
    fallAniDelay: 1.4,
    rotateAniDelay: 1.3,
    upAniDelay: 0.4,
    rotateAniDelay2: 0.3,
  },
  {
    x: 8,
    y: 212,
    fallAniDelay: 1.6,
    rotateAniDelay: 1.5,
    upAniDelay: 0.2,
    rotateAniDelay2: 0.1,
  },
];
// è›‹ç±»å‹
const eggType = [{
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/egg1-01.png",
    width: 141,
    height: 155,
    luckyBeginY: -148,
  },
  {
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/egg2.png",
    width: 141,
    height: 140,
    luckyBeginY: -136,
  },
  {
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/egg3.png",
    width: 141,
    height: 140,
    luckyBeginY: -136,
  },
  {
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/egg4-01.png",
    width: 141,
    height: 141,
    luckyBeginY: -140,
  },
];
// ç¤¼ç‰©æ•°ç»„
const giftList = [{
    id: 1,
    gift: "rocket1",
    name: "å°å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/rocket1.png",
    isChoosed: true,
  },
  {
    id: 2,
    gift: "rocket2",
    name: "ä¸­å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/rocket2.png",
    isChoosed: false,
  },
  {
    id: 3,
    gift: "rocket3",
    name: "å¤§å·ç«ç®­",
    imgUrl: "https://static.hudongmiao.com/joymewMp/nyn/rocket3.png",
    isChoosed: false,
  },
];
const wishList = [
  "é†‰é…’é¥±å¾·ï¼Œä¸èƒœæ„Ÿæ¿€",
  "ç¾é…’ä½³è‚´,ä¸ç”šè£å¹¸",
  "æ„Ÿè°¢æ‹›å¾…,ç¥æ„¿å®‰åº·",
  "å°å°çº¢åŒ…,æ„Ÿè°¢æ‹›å¾…",
];

let tmpInterval; //ç”¨äºå€’è®¡æ—¶
let lock = false; //é”ï¼Œç”¨äºç¡®ä¿ å¼€å§‹æ¸¸æˆæŒ‰é’®ä¸èƒ½è¿ç»­ç‚¹å‡»
let lock2 = false; //é”ï¼Œç”¨äºç¡®ä¿ æ‰§è¡ŒåŠ¨ç”»çš„è¿‡ç¨‹ä¸­ä¸å¯ä»¥ç‚¹æŒ‰é’®
const nynGlobalData = {
  nynRechargeIndex: 0, //ç´¢å¼• æ‰­ä¸€æ‰­å……å€¼åˆ—è¡¨çš„ç´¢å¼•
  nynLuckyIndex: 0, //ç´¢å¼• æ‰­ä¸€æ‰­ä¸­å¥–åˆ—è¡¨çš„ç´¢å¼•
  updateNynRechargeIndex() {
    this.nynRechargeIndex += 1;
  },
  updateNynLuckyIndex() {
    this.globalData.nynLuckyIndex += 1;
  },
}

Page({
  data: {
    gameStatus: 1, // æ¸¸æˆçŠ¶æ€(æ§åˆ¶é¡µé¢æ˜¾ç¤º)
    eggList: [], // æ‰­è›‹åˆ—è¡¨
    prizeItemList: [], // å¥–é¡¹åˆ—è¡¨
    poolMoney: 0, //å¥–æ± é‡‘é¢
    countDownNum: 0, // å€’è®¡æ—¶
    isEntry: false, // å……å€¼å…¥å£
    rechargeTipList: [], //å……å€¼æç¤ºåˆ—è¡¨
    luckyTipList: [], //ä¸­å¥–æç¤ºåˆ—è¡¨
    topRankList: [], // æ’è¡Œæ¦œåˆ—è¡¨
    otherRankList: [],
    isRechargeTipShow: false, //æ§åˆ¶å……å€¼æç¤ºæ˜¾ç¤ºéšè—
    isResultTipShow: false, //æ§åˆ¶æ‰­ä¸€æ‰­ç»“æœæç¤ºæ˜¾ç¤ºéšè—
    user: {
      nickname: "player",
      money: 0,
    }, //å……å€¼ç”¨æˆ·
    resultTipContent: {
      resultImgSrc: "",
      para1: "",
      para2: "",
      result: "",
      ptVal: 44,
    }, //å……å€¼ç»“æœå†…å®¹
    btnText: "å‘é€ç¤¼ç‰©",
    btnType: "0",
    userId: "",
    openId: "",
    name: "",
    headImg: "",
    turnId: "", //ä¸€åœºæ¸¸æˆçš„id 0ä»£è¡¨è¦å……å€¼ å¦åˆ™ä»£è¡¨è¿™åœºæ¸¸æˆçš„åœºid
    giftList: giftList,
    giftListShow: true,
    rechargeTipAni: "",
    resultTipAni: "",
    luckyEgg: {
      imgUrl: "",
      width: "",
      height: "",
      luckyBeginY: 0,
      isFallLuckyAni: false,
      isRotateAni: false,
      left: 22,
      top: -124,
    },
  },
  onLoad(options) {
    tmpInterval = null;
    lock2 = false;
    lock = false;
    this.setData({
      userId: options.userId,
      openId: options.openId,
      name: options.name,
      headImg: options.headImg,
    });
    this.requestPoolMoney();
    this.initEggList();
  },
  onShow: function () {
    this.toGame();
  },
  onHide: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    tmpInterval = null;
  },
  onUnload: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    tmpInterval = null;
  },
  async initEggList() {
    if (app.globalData.gameInfo_nynList.length > 0) {
      this.setData({
        prizeItemList: app.globalData.gameInfo_nynList
      });
    } else {
      const res = await reqGetLiveInfo(wx.getStorageSync('liveId'));
      // è®¾ç½®æ¸¸æˆç›¸å…³ä¿¡æ¯(æ‰­ä¸€æ‰­å’Œå¹¸è¿å°è½¬ç›˜çš„å¥–é¡¹åˆ—è¡¨)
      app.gameInfo_initNynAndluckyWheel(res.data.nynList, res.data.luckySmallList);
      this.setData({
        prizeItemList: app.globalData.gameInfo_nynList
      });
    }
    const len = this.data.prizeItemList.length;
    const tmpEggList = this.data.eggList;
    for (let i = 0; i < len; i += 1) {
      let typeIndex = i > 3 ? i - 4 : i;
      tmpEggList.push({
        num: i + 1,
        imgUrl: eggType[typeIndex].imgUrl,
        width: eggType[typeIndex].width,
        height: eggType[typeIndex].height,
        left: locatInfo[i].x,
        bottom: locatInfo[i].y,
        fallAniDelay: locatInfo[i].fallAniDelay,
        rotateAniDelay: locatInfo[i].rotateAniDelay,
        isFallAni: false,
        prize: this.data.prizeItemList[i].desc,
      });
    }
    this.setData({
      eggList: tmpEggList,
    });
  },
  fallEgg() {
    for (let i = 0; i < 8; i += 1) {
      this.setData({
        [`eggList[${i}].isFallAni`]: true,
        [`eggList[${i}].isRotateAni`]: true,
      });
    }
    timeoutTask(() => {
      for (let i = 0; i < 8; i += 1) {
        this.setData({
          [`eggList[${i}].isFallAni`]: false,
          [`eggList[${i}].isRotateAni`]: false,
        });
      }
    }, 2000);
  },
  beginAroundAni() {
    for (let i = 0; i < 8; i += 1) {
      this.setData({
        [`eggList[${i}].fallAniDelay`]: locatInfo[i].upAniDelay,
        [`eggList[${i}].rotateAniDelay`]: locatInfo[i].rotateAniDelay2,
        [`eggList[${i}].isRotateAni`]: true,
        [`eggList[${i}].aroundAni`]: `aroundAni${this.data.eggList[i].num}`,
      });
    }
  },
  endAroundAni() {
    for (let i = 0; i < 8; i += 1) {
      this.setData({
        [`eggList[${i}].isRotateAni`]: false,
        [`eggList[${i}].aroundAni`]: "",
      });
    }
  },
  handleStartBtnTap() {
    if (this.data.btnType === "1") {
      return;
    }
    //åˆ¤æ–­æ˜¯å¦é€‰ä¸­æŸä¸ªç¤¼ç‰©
    const resultIndex = this.data.giftList.findIndex((item) => {
      return item.isChoosed;
    });
    if (resultIndex === -1) {
      wx.showToast({
        title: "è¯·é€‰æ‹©ä¸€ä¸ªç¤¼ç‰©",
        icon: "none",
      });
    } else if (this.data.isEntry) {
      // å……å€¼å…¥å£å¼€ç€
      this.recharge();
    } else {
      // æœ€ååäº”ç§’è´­ä¹°å…¥å£å…³é—­
      wx.showToast({
        title: "è´­ä¹°å…¥å£å…³é—­",
        icon: "none",
      });
    }
  },
  tapstartNyn() {
    reqGetNynInfo()
      .then((res) => {
        console.log(res);
        this.setData({
          turnId: res.data.id,
        });
        this.startGame();
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "ç½‘ç»œå¼‚å¸¸",
          icon: "none",
        });
      });
  },
  // é€‰æ‹©ç¤¼ç‰©
  chooseGift(e) {
    console.log(e);
    const choosedId = e.currentTarget.dataset.id;
    const tmpGiftList = this.data.giftList;
    tmpGiftList.forEach((item, index) => {
      if (item.id === choosedId) {
        this.setData({
          [`giftList[${index}].isChoosed`]: true,
        });
      } else {
        this.setData({
          [`giftList[${index}].isChoosed`]: false,
        });
      }
    });
  },
  // æ‰­ä¸€æ‰­åŠ¨ç”»
  gameAniStart(endMoney, desc) {
    this.beginAroundAni();
    timeoutTask(() => {
      console.log("***5såç»“æŸæ‰­ä¸€æ‰­åŠ¨ç”» å±•ç¤ºluckyEgg***");
      this.endAroundAni();
      this.showLuckyEgg(endMoney);
    }, 5000);
    timeoutTask(() => {
      console.log("***6så å±•ç¤ºresultTip***");
      this.showResultTip(endMoney, desc);
    }, 6000);
    timeoutTask(() => {
      console.log("***10såæ¢å¤çŠ¶æ€***");
      this.setData({
        btnText: "å‘é€ç¤¼ç‰©",
        btnType: "0",
        giftListShow: true,
      });
    }, 10000);
  },
  // å……é’±ç©æ‰­ä¸€æ‰­
  recharge() {
    if (lock2) {
      return;
    }
    lock2 = true;
    reqNynRecharge({
        userId: this.data.userId,
        openId: this.data.openId,
      })
      .then(() => {
        wx.showToast({
          title: "ç¤¼ç‰©å‘é€æˆåŠŸ!",
          icon: "none",
        });
        this.sendGift(this.getChoosedGift());
        //å……å€¼æˆåŠŸæŒ‰é’®çŠ¶æ€ç«‹å³æ”¹å˜
        this.setData({
          btnText: "æ‰­ä¸€æ‰­",
          btnType: "1",
          giftListShow: false,
        });
        // startGame
        timeoutTask(() => {
          // this.handleStartBtnTap();
          console.log("***2såè‡ªåŠ¨æ‰­ä¸€æ‰­***");
          this.tapstartNyn();
        }, 2000);
      })
      .catch((err) => {
        console.log(err);
        lock2 = false;
        wx.showToast({
          title: "æ”¯ä»˜å¤±è´¥!",
          icon: "none",
        });
      });
  },
  getChoosedGift() {
    return this.data.giftList.find((item) => {
      return item.isChoosed;
    });
  },
  sendGift(giftChoosed) {
    let tmpCode = "";
    if (giftChoosed.id == 1) {
      tmpCode = 5002;
    } else if (giftChoosed.id == 2) {
      tmpCode = 6002;
    } else if (giftChoosed.id == 3) {
      tmpCode = 7002;
    }
    const c = JSON.stringify({
      code: tmpCode,
      param: {
        headImg: this.data.headImg,
        nickname: this.data.name,
        wish: wishList[getRandom(0, 4)],
      },
    });
    reqSendBroadCast({
      c,
    });
  },
  // æ‰­ä¸€æ‰­
  startGame() {
    reqStartNyn({
        turnId: this.data.turnId,
      })
      .then((res) => {
        console.log("startNyn result:", res);
        //res.data.desc å¥–é¡¹ï¼›endMoneyä¸­å¥–çš„é‡‘é¢ï¼›totalMoney å¥–æ± é‡‘é¢
        //å¥–æ± é‡‘é¢åˆ·æ–°
        if (res.data.totalMoney.balance) {
          this.setData({
            poolMoney: res.data.totalMoney.balance,
          });
        }
        //æ¸¸æˆåŠ¨ç”»å¼€å§‹
        this.gameAniStart(res.data.endMoney, res.data.desc);

        // 5såŠ¨ç”»åœæ­¢åå‘é€å¹¿æ’­(å¿…é¡»è¦ä¸­å¥–çš„æƒ…å†µ)
        if (parseInt(res.data.endMoney, 10) > 0) {
          timeoutTask(() => {
            this.sendBroad(res.data.endMoney, res.data.totalMoney.balance);
          }, 5000);
        }
        timeoutTask(() => {
          lock2 = false;
        }, 5000);
      })
      .catch((err) => {
        console.log(err);
        lock2 = false;
      });
  },
  // ç‚¹å‡»è¿›å…¥æ¸¸æˆ
  toGame() {
    if (lock) {
      return;
    }
    lock = true;
    this.requestGameInitInfo();
  },
  // è·å–å¥–æ± é‡‘é¢
  requestPoolMoney() {
    reqGetPoolMoney()
      .then((res) => {
        console.log(res);
        this.setData({
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // è·å–æ¸¸æˆç›¸å…³ä¿¡æ¯
  requestGameInitInfo() {
    reqGetNynInfo()
      .then((res) => {
        console.log("***è·å–æ‰­ä¸€æ‰­åŸºæœ¬ä¿¡æ¯***");
        console.log(res);
        //res.data.id å‘é€ç¤¼ç‰© 1æ‰­ä¸€æ‰­
        if (res.data.id === "0") {
          this.setData({
            btnText: "å‘é€ç¤¼ç‰©",
            btnType: "0",
            giftListShow: true,
            turnId: res.data.id,
          });
        } else {
          this.setData({
            btnText: "æ‰­ä¸€æ‰­",
            btnType: "1",
            giftListShow: false,
            turnId: res.data.id,
          });
        }
        // æ—¶é—´å¤„ç†(ç”¨äºå€’è®¡æ—¶) res.data.endTime
        if (res.data.endTime === "0") {
          // æ¸¸æˆæœªå¼€å§‹çš„æƒ…å†µå¤„ç†
          wx.showToast({
            title: "æ¸¸æˆå°šæœªå¼€å§‹!",
            icon: "none",
          });
        } else {
          let countTime = this.timeHandle(res.data.endTime);
          this.countDown(countTime);
          this.setData({
            gameStatus: 2,
          });
          this.fallEgg();
        }
        lock = false;
      })
      .catch((err) => {
        console.log(err);
        lock = false;
      });
  },
  // è·å–å……å€¼å’Œä¸­å¥–åˆ—è¡¨
  requestTipList() {
    let tmpLuckyTipList = [];
    let tmpRechargeTipList = [];
    reqGetPoolMoney()
      .then((res) => {
        console.log("***getPoolMoney***", res);
        const subTime = this.timeHandle(res.data.endTime);
        if (subTime <= 0) {
          // æ¸¸æˆæå‰ç»“æŸ
          this.requestRankList();
        }
        for (let i = 0; i < res.data.list.length; i += 1) {
          tmpRechargeTipList.push({
            nickname: res.data.list[i].wx_name,
            money: res.data.list[i].gsum,
          });
          if (
            parseInt(res.data.list[i].c01, 10) > 0 &&
            res.data.list[i].USER_ID !== this.data.userId
          ) {
            //ç¡®ä¿ â€œè°¢è°¢å‚ä¸çš„â€ å¥–é¡¹ä¸å¼¹å‡º å’Œ è‡ªå·±çš„ä¸­å¥–çš„å¥–é¡¹ä¸å¼¹å‡º
            tmpLuckyTipList.push({
              nickname: res.data.list[i].wx_name,
              endMoney: res.data.list[i].c01,
            });
          }
        }
        this.setData({
          rechargeTipList: tmpRechargeTipList,
          luckyTipList: tmpLuckyTipList,
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // æ—¶é—´æˆ³å¤„ç†
  timeHandle(endTime) {
    //è·å–å½“å‰æ—¶é—´æˆ³
    const nowTime = new Date().getTime();
    let subTime = parseInt(
      (parseInt(endTime, 10) - parseInt(nowTime, 10)) / 1000,
      10
    );
    if (subTime < 0) {
      subTime = 0;
    }
    return subTime;
  },
  // ä¸å¸¦æ¯«ç§’çš„å€’è®¡æ—¶
  countDown(second) {
    if (tmpInterval) {
      return;
    }
    this.setData({
      isEntry: true,
    });
    tmpInterval = setInterval(() => {
      console.log("tmpInterval");
      if (second <= 1) {
        this.requestRankList();
      } else if (second <= 15) {
        this.setData({
          isEntry: false,
        });
      }
      if (second >= 1) {
        second -= 1;
        this.setData({
          countDownNum: second,
        });
      }
      if (second % 4 === 0) {
        this.noticeShow();
      }
    }, 1000);
  },
  // å¼¹å‡ºæ¶ˆæ¯(åŒ…æ‹¬å……å€¼å’Œä¸­å¥–)
  noticeShow() {
    const tempRechargeTip =
      this.data.rechargeTipList[nynGlobalData.nynRechargeIndex];
    const tempLuckyTip = this.data.luckyTipList[nynGlobalData.nynLuckyIndex];

    if (tempRechargeTip && !this.data.isRechargeTipShow) {
      // å½“å‰å­˜åœ¨æœªå¼¹å‡ºçš„å……å€¼æ¶ˆæ¯
      this.setData({
        ["user.nickname"]: tempRechargeTip.nickname,
        ["user.money"]: tempRechargeTip.money,
      });
      this.showRechargeTip();
    }
    if (tempLuckyTip && !this.data.isResultTipShow) {
      // å½“å‰å­˜åœ¨æœªå¼¹å‡ºçš„ä¸­å¥–æ¶ˆæ¯
      this.loopShowResultTip(tempLuckyTip.nickname, tempLuckyTip.endMoney);
    }
    //æ›´æ–°æ•°ç»„
    this.requestTipList();
  },
  // è·å–æ’è¡Œæ¦œåˆ—è¡¨
  requestRankList() {
    reqGetNynRank()
      .then((res) => {
        console.log(res);
        let tmpTopRankArray = [];
        let tmpOtherRankArray = [];
        let count = 0;
        let tmpLen = res.data.list.length;
        // é™åˆ¶ä¸­å¥–åå•äººæ•°æœ€å¤šä¸è¶…è¿‡10ä¸ª
        if (tmpLen > 10) {
          tmpLen = 10;
        }
        while (count < tmpLen) {
          if (count < 3) {
            tmpTopRankArray.push({
              nickname: res.data.list[count].wx_name,
              headimgurl: res.data.list[count].avator,
              money: Math.floor(parseFloat(res.data.list[count].money)),
            });
          } else {
            tmpOtherRankArray.push({
              num: count < 0 ? `0${count + 1}` : count + 1,
              nickname: res.data.list[count].wx_name,
              headimgurl: res.data.list[count].avator,
              money: Math.floor(parseFloat(res.data.list[count].money)),
            });
          }
          count += 1;
        }
        // è¡¥é½
        if (tmpTopRankArray.length < 3) {
          const tmpLen2 = tmpTopRankArray.length;
          for (let i = tmpLen2; i < 3; i += 1) {
            tmpTopRankArray.push({
              nickname: "Player",
              headimgurl: defaultContent.defaultJoymewAvatar,
              money: 0,
            });
          }
        }
        if (tmpOtherRankArray.length < 7) {
          const tmpLen3 = tmpOtherRankArray.length;
          for (let i = tmpLen3; i < 7; i += 1) {
            tmpOtherRankArray.push({
              num: i + 3 < 0 ? `0${i + 4}` : i + 4,
              nickname: "Player",
              headimgurl: defaultContent.defaultJoymewAvatar,
              money: 0,
            });
          }
        }
        this.setData({
          topRankList: tmpTopRankArray,
          otherRankList: tmpOtherRankArray,
          gameStatus: 3,
        });
        // åœæ­¢è½®è¯¢
        clearInterval(tmpInterval);
        tmpInterval = null;
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // è½®è¯¢ä¸€æ¬¡å±•ç¤ºé˜Ÿåˆ—ä¸­çš„å……å€¼ä¿¡æ¯
  showRechargeTip() {
    this.setData({
      isRechargeTipShow: true,
      rechargeTipAni: "rechargeTipAni",
    });
    timeoutTask(() => {
      this.setData({
        isRechargeTipShow: false,
      });
      nynGlobalData.updateNynRechargeIndex();
    }, 3800);
  },
  // è½®è¯¢ä¾æ¬¡å±•ç¤ºé˜Ÿåˆ—ä¸­çš„ä¸­å¥–ä¿¡æ¯(ä¸åŒ…æ‹¬è‡ªå·±)
  loopShowResultTip(pNickname, money) {
    if (parseInt(money, 10) > 0) {
      // ä¸­å¥–
      this.setData({
        ["resultTipContent.resultImgSrc"]: "https://static.hudongmiao.com/joymewMp/nyn/happyMew-01.png",
        ["resultTipContent.para1"]: `æ­å–œ${pNickname}`,
        ["resultTipContent.para2"]: `è·å¾—${money}å¥–åŠ±`,
        ["resultTipContent.result"]: 1,
        ["resultTipContent.ptVal"]: 34,
        isResultTipShow: true,
        resultTipAni: "resultTipAni",
      });
      timeoutTask(() => {
        this.setData({
          isResultTipShow: false,
        });
        nynGlobalData.updateNynLuckyIndex();
      }, 3800);
    } else {
      // æœªä¸­å¥–
      this.setData({
        ["resultTipContent.resultImgSrc"]: "https://static.hudongmiao.com/joymewMp/nyn/sadMew-01.png",
        ["resultTipContent.para1"]: "å¾ˆé—æ†¾æ²¡æœ‰æŠ½ä¸­",
        ["resultTipContent.para2"]: "è°¢è°¢æƒ é¡¾ï¼Œå†æ¥å†å‰",
        ["resultTipContent.result"]: 0,
        ["resultTipContent.ptVal"]: 44,
        isResultTipShow: true,
        resultTipAni: "resultTipAni",
      });
      timeoutTask(() => {
        this.setData({
          isResultTipShow: false,
        });
      }, 3800);
    }
  },
  // å±•ç¤ºè‡ªå·±çš„ä¸­å¥–ä¿¡æ¯
  showResultTip(money, desc) {
    if (parseInt(money, 10) === 0) {
      // æœªä¸­å¥–
      this.setData({
        ["resultTipContent.resultImgSrc"]: "https://static.hudongmiao.com/joymewMp/nyn/sadMew-01.png",
        ["resultTipContent.para1"]: "å¾ˆé—æ†¾æ²¡æœ‰æŠ½ä¸­",
        ["resultTipContent.para2"]: "è°¢è°¢æƒ é¡¾ï¼Œå†æ¥å†å‰",
        ["resultTipContent.result"]: 0,
        ["resultTipContent.ptVal"]: 44,
        isResultTipShow: true,
        resultTipAni: "resultTipAni",
      });
      timeoutTask(() => {
        this.setData({
          isResultTipShow: false,
        });
      }, 3800);
    } else {
      // ä¸­å¥–
      this.setData({
        ["resultTipContent.resultImgSrc"]: "https://static.hudongmiao.com/joymewMp/nyn/happyMew-01.png",
        ["resultTipContent.para1"]: `æ­å–œ${this.data.name}`,
        ["resultTipContent.para2"]: `è·å¾—${desc}å¥–åŠ±`,
        ["resultTipContent.result"]: 1,
        ["resultTipContent.ptVal"]: 34,
        isResultTipShow: true,
        resultTipAni: "resultTipAni",
      });
      timeoutTask(() => {
        this.setData({
          isResultTipShow: false,
        });
      }, 3800);
    }
  },
  // å‘å¹¿æ’­
  sendBroad(golds, remainCoins) {
    reqSendPrizeInfo({
        gold: golds,
        remainCoin: remainCoins,
        turnId: this.data.turnId,
      })
      .then((res) => {
        console.log(res);
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "ç½‘ç»œå¼‚å¸¸!",
          icon: "none",
        });
      });
  },
  // è›‹æ‰è½ ä»è›‹ä¸‹è½å¹¶åœç•™åˆ°æ¶ˆå¤± è€—æ—¶ 3s
  showLuckyEgg(endMoney) {
    this.createLuckyEgg(endMoney);
    this.setData({
      ["luckyEgg.top"]: this.data.luckyEgg.luckyBeginY,
      ["luckyEgg.isFallLuckyAni"]: true,
      ["luckyEgg.isRotateAni"]: true,
    });
    // ä¸‹è½åä¿æŒåœ¨ç»ˆç‚¹ä½ç½®
    timeoutTask(() => {
      this.setData({
        ["luckyEgg.end"]: 208,
        ["luckyEgg.isRotateAni"]: false,
      });
    }, 1000);
    // æ¢å¤åˆå§‹çŠ¶æ€
    timeoutTask(() => {
      this.setData({
        ["luckyEgg.isFallLuckyAni"]: false,
        ["luckyEgg.end"]: "",
        ["luckyEgg.top"]: this.data.luckyEgg.luckyBeginY,
      });
    }, 4000);
  },
  // åˆ›å»ºä¸­å¥–æ‰­è›‹
  createLuckyEgg(money) {
    const eggTypeIndex = getRandom(0, 4);
    this.setData({
      ["luckyEgg.imgUrl"]: eggType[eggTypeIndex].imgUrl,
      ["luckyEgg.width"]: eggType[eggTypeIndex].width,
      ["luckyEgg.height"]: eggType[eggTypeIndex].height,
      ["luckyEgg.luckyBeginY"]: eggType[eggTypeIndex].luckyBeginY,
      ["luckyEgg.prize"]: parseInt(money, 10) > 0 ? money : "è°¢è°¢å‚ä¸",
    });
  },
  toAgreement: function () {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
});
````

## File: packageGame/pages/shoutHb/components/danmu/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/components/microphone/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/components/ready/index.scss
````scss
.ready-container {
  position: fixed;
  z-index: 9999;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.6);
}

.ready-text {
  font-size: 100rpx;
  font-weight: 400;
  color: #fcff67;
  text-shadow: 4rpx 8rpx 0px 0px #ff325b;
  transform: scale(0);
}

.ready-text.show {
  transform: scale(1);
  transition: all 0.3s ease-in-out;
}

.ready-text.first {
  font-size: 144rpx;
}
````

## File: packageGame/pages/shoutHb/components/resPopup/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/components/resPopup/index.wxss
````
.resPopup {
  position: fixed;
  z-index: 9999;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
}
.shade {
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.3);
  position: absolute;
  top: 0;
  left: 0;
}
.popup-box {
  width: 560rpx;
  height: 740rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.joymew.com/joymewScreen/img/shoutHb/popbg.png");
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
}
.congratu {
  width: 478rpx;
  height: 208rpx;
  position: absolute;
  top: -200rpx;
}

.hb {
  width: 246rpx;
  height: 320rpx;
  margin-top: 80rpx;
}
.money {
  font-size: 48rpx;
  font-weight: 700;
  color: #ff3e55;
  margin-top: 40rpx;
}
.attend-btn {
  width: 440rpx;
  height: 104rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.joymew.com/joymewScreen/img/shoutHb/ated.png");
  margin-top: 40rpx;
}
.close-icon {
  width: 68rpx;
  height: 68rpx;
  background-size: 100% 100%;
  background-image: url("https://static.joymew.com/joymewMp/authDialog/closeIcon.png");
  position: absolute;
  bottom: -100rpx;
}
````

## File: packageGame/pages/shoutHb/components/textBoard/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/modules/rank/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/zfdm/zfdm.js
````javascript
import {
  reqZfdmRecharge,
  reqGetZfdmInfo,
  reqStartZfdm,
  reqGetZfdmRankList,
  reqGetZfdmMessageList,
} from "../../api/zfdm";
import defaultContent from "../../../assets/constant/default";
const app = getApp();

let second = 0;
let m1 = 0;
let m2 = 0;
let m3 = 0;
let m4 = 0;
let millisecondReal = 0;
let timeStr = "00:0000";
let tmpInterval; //ç”¨äºå€’è®¡æ—¶
let tmpInterval2;
let tmpIntervaLoop; // ç”¨äºè½®è¯¢
let loopCount = 0;
let inPay = false;
let btnLock = false;
let innerAudioContextStart = null;
let innerAudioContextEnd = null;

const zfdmGlobalData = {
  zfdmIndex: 0, // ç´¢å¼• äº‰åˆ†å¤ºç§’æ¶ˆæ¯é˜Ÿåˆ—çš„ç´¢å¼•
  zfdmId: '', // äº‰åˆ†å¤ºç§’è½®æ¬¡id
  initZfdmId(id) {
    if (!this.zfdmId) {
      // é¦–æ¬¡ç©
      this.zfdmId = id;
    } else if (this.zfdmId !== id) {
      // æ–°çš„ä¸€è½®ç´¢å¼•éœ€è¦é‡ç½®
      this.zfdmId = id;
      this.resetZfdmIndex();
    }
  },
  updateZfdmIndex() {
    this.zfdmIndex += 1;
  },
  resetZfdmIndex() {
    this.zfdmIndex = 0;
  }
}

Page({
  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {
    userId: "",
    openId: "",
    avator: "",
    timestr: "00:0000",
    resultTime: "",
    koPercentVal: "", // å‡»è´¥äº†å¤šå°‘äºº%
    koDis: "", // è·ç¦»ç›®æ ‡è¿˜å·®å¤šå°‘ç§’
    koBonus: "", // ç›®æ ‡å¥–åŠ±é‡‘é¢
    koOtherName: "", // å‡»è´¥åˆ«äººçš„äººæˆ–è€…å‡»è´¥æˆ‘çš„äºº
    koOtherAvator: "",
    ruleBoxVisible: false,
    rankVisible: false,
    guessInfoId: "", // å‚ä¸id
    redpackageId: "", // è½®æ¬¡id
    isFree: false, // æœ¬æ¬¡æŒ‘æˆ˜æ˜¯å¦å…è´¹
    raceTime: "", // æœ¬æ¬¡æŒ‘æˆ˜çš„ç›®æ ‡æ—¶é—´
    raceStatus: "2", // 0: æ¸¸æˆä¸­ 1: æ¸¸æˆç»“æŸ 2: æ¸¸æˆç­‰å¾…
    tipVisible: false,
    tipBoxType: 0, // 0:æŒ‘æˆ˜å¤±è´¥(åºŸå¼ƒ) 1:æŒ‘æˆ˜æˆåŠŸ 2:æ”¾å¼ƒæŒ‘æˆ˜ 3:åˆ«äººçš„koä¿¡æ¯(åºŸå¼ƒè½¬ä¸ºå¼¹å¹•å½¢å¼) 4:æˆ‘è¢«koçš„ä¿¡æ¯ 5:æ—¶é—´åˆ°æŒ‘æˆ˜æˆåŠŸ 6:æ—¶é—´åˆ°æŒ‘æˆ˜å¤±è´¥
    currentRank: 0, // å½“å‰åæ¬¡
    rankList: [], // æ’è¡Œæ¦œ
    isOnTimer: false, // æ˜¯å¦æŒ‘æˆ˜ä¸­
    needPrice: 0,
    messageQueue: [],
    isShowTipBoxAni: false,
    bonusList: [],
    myRankStr: "",
    myGradeStr: "",
    myMoney: "",
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad: function (options) {
    console.log(options);
    tmpIntervaLoop = null;
    loopCount = 0;
    inPay = false;
    this.resetTimer();
    this.setData({
      userId: options.userId,
      openId: options.openId,
      avator: options.headImg,
    });
    this.initZfdmInfo();
    btnLock = false;
    innerAudioContextStart = wx.createInnerAudioContext({
      useWebAudioImplement: true,
    });
    innerAudioContextStart.src =
      "https://ustatic.hudongmiao.com/joymewMp/zfdm/zfdmStart.mp3";
    innerAudioContextEnd = wx.createInnerAudioContext({
      useWebAudioImplement: true,
    });
    innerAudioContextEnd.src =
      "https://ustatic.hudongmiao.com/joymewMp/zfdm/zfdmEnd.mp3";
  },
  onUnload: function () {
    this.resetTimer();
    clearInterval(tmpIntervaLoop);
    tmpIntervaLoop = null;
    loopCount = 0;
    inPay = false;
    btnLock = false;
    innerAudioContextStart.destroy();
    innerAudioContextStart = null;
    innerAudioContextEnd.destroy();
    innerAudioContextEnd = null;
  },
  replay: function () {
    this.closeTipBox();
    this.start();
  },
  bgAidStart: function (type) {
    if (type === "start") {
      innerAudioContextStart.play();
    } else if (type === "end") {
      innerAudioContextEnd.play();
    }
    wx.vibrateLong();
  },
  handleBtnTap: function () {
    if (this.data.isOnTimer) {
      this.end();
    } else {
      this.start();
    }
  },
  start: function () {
    if (btnLock) {
      return;
    }
    this.bgAidStart("start");
    if (this.data.isFree) {
      tmpInterval = setInterval(this.timer, 10);
      this.setData({
        isOnTimer: true,
      });
    } else {
      inPay = true;
      reqZfdmRecharge({
          userId: this.data.userId,
          openId: this.data.openId,
        })
        .then((res) => {
          console.log(res);
          return this.updateZfdmInfo();
        })
        .then(() => {
          inPay = false;
          tmpInterval = setInterval(this.timer, 10);
          this.setData({
            isOnTimer: true,
          });
        })
        .catch((err) => {
          wx.showToast({
            title: "æ”¯ä»˜å¤±è´¥!",
            icon: "none",
          });
          inPay = false;
          console.log(err);
        });
    }
  },
  end: function () {
    if (btnLock) {
      return;
    }
    console.log(this.transformTimeStr());
    if (tmpInterval) {
      this.bgAidStart("end");
      clearInterval(tmpInterval);
      tmpInterval = null;
      this.startGame(this.data.isFree);
      this.setData({
        isOnTimer: false,
      });
    } else {
      wx.showToast({
        title: "è¯·ç‚¹å‡»æŒ‘æˆ˜",
        icon: "none",
      });
    }
  },
  startGame: function (isFree) {
    btnLock = true;
    this.setData({
      resultTime: this.transformTimeStr(),
    });
    reqStartZfdm({
        guessInfoId: isFree ? "free_id" : this.data.guessInfoId,
        raceTime: this.data.resultTime,
      })
      .then((res) => {
        console.log("å¼€å§‹æ¸¸æˆåçš„ç»“æœï¼š", res);
        btnLock = false;
        if (isFree) {
          this.setData({
            isFree: false,
          });
        }
        if (res.data.code === "200" && res.data.myRank) {
          let tmpRank = parseInt(res.data.myRank.size, 10);
          this.setData({
            tipVisible: true,
            tipBoxType: 1,
            currentRank: tmpRank,
            koPercentVal: res.data.myRank.chaoYueVal,
            koDis: res.data.myRank.raceTime_val_distance,
            koBonus: res.data.myRank.red_bao_money,
            isShowTipBoxAni: true,
          });
        }
      })
      .catch((err) => {
        console.log(err);
        btnLock = false;
      });
  },
  // æ—¶é—´è½¬åŒ–
  transformTimeStr: function () {
    let tmpLastTime = "";
    let zPart = "";
    let xPart = "";
    const tmpTimeArr = this.data.timestr.split("");
    console.log(tmpTimeArr);
    if (tmpTimeArr[0] === "0") {
      zPart = tmpTimeArr[1];
    } else {
      zPart = tmpTimeArr[0] + tmpTimeArr[1];
    }
    // for (let i = 6; i >= 3; i -= 1) {
    //   if (tmpTimeArr[i] !== '0') {
    //     break;
    //   } else {
    //     tmpTimeArr[i] = '';
    //   }
    // }
    xPart = tmpTimeArr[3] + tmpTimeArr[4] + tmpTimeArr[5] + tmpTimeArr[6];

    if (xPart) {
      tmpLastTime = `${zPart}.${xPart}`;
    } else {
      tmpLastTime = zPart;
    }
    return tmpLastTime;
  },
  resetTimer: function () {
    if (tmpInterval) {
      clearInterval(tmpInterval);
      tmpInterval = null;
      this.setData({
        isOnTimer: false,
      });
    }
    if (tmpInterval2) {
      clearInterval(tmpInterval2);
      tmpInterval2 = null;
    }
    second = 0;
    // millisecond = 0;
    m1 = 0;
    m2 = 0;
    m3 = 0;
    m4 = 0;
    millisecondReal = 0;
    timeStr = "00:0000";
    this.setData({
      timestr: timeStr,
    });
  },
  timer: function () {
    if (millisecondReal >= 100) {
      // millisecond = 0;
      millisecondReal = 0;
      second += 1;
      if (second === 99) {
        this.end();
      }
    }
    millisecondReal = millisecondReal + 1;
    // millisecond = getRandom(0, 9999);
    m4 += 1;
    if (millisecondReal % 3 === 0) {
      m3 += 1;
    }
    if (millisecondReal % 6 === 0) {
      m2 += 1;
    }
    if (millisecondReal % 10 === 0) {
      m1 += 1;
    }
    if (m4 > 9) {
      m4 = 0;
    }
    if (m3 > 9) {
      m3 = 0;
    }
    if (m2 > 9) {
      m2 = 0;
    }
    if (m1 > 9) {
      m1 = 0;
    }
    // timeStr =
    //   this.getConvertSecond(second) +
    //   ':' +
    //   this.getConvertMilliSecond(millisecond);
    timeStr = this.getConvertSecond(second) + ":" + m1 + m2 + m3 + m4;
    this.setData({
      timestr: timeStr,
    });
  },
  getConvertSecond: function (second) {
    const secondStr = second.toString();
    let resultStr;
    if (secondStr.length === 1) {
      resultStr = "0" + secondStr;
    } else if (secondStr.length === 2) {
      resultStr = secondStr;
    } else {
      resultStr = "00";
    }
    return resultStr;
  },
  getConvertMilliSecond: function (millisecond) {
    const millisecondStr = millisecond.toString();
    let resultStr;
    if (millisecondStr.length === 1) {
      resultStr = "000" + millisecondStr;
    } else if (millisecondStr.length === 2) {
      resultStr = "00" + millisecondStr;
    } else if (millisecondStr.length === 3) {
      resultStr = "0" + millisecondStr;
    } else {
      resultStr = millisecondStr;
    }
    return resultStr;
  },
  getIt: function () {
    this.setData({
      ruleBoxVisible: false,
      isShowTipBoxAni: false,
    });
  },
  openRuleBox: function () {
    this.setData({
      ruleBoxVisible: true,
      isShowTipBoxAni: true,
    });
  },
  closeTipBox: function () {
    // å¦‚æœå…³é—­çš„æ˜¯koä¿¡æ¯å¼¹çª—åˆ™æ›´æ–°æ¶ˆæ¯é˜Ÿåˆ—çš„ç´¢å¼•
    if (this.data.tipBoxType === 3 || this.data.tipBoxType === 4) {
      zfdmGlobalData.updateZfdmIndex();
    }
    this.setData({
      tipVisible: false,
      tipBoxType: 0,
      currentRank: 0,
      resultTime: "",
      koPercentVal: "",
      koDis: "",
      koBonus: "",
      koOtherName: "",
      isShowTipBoxAni: false,
    });
    this.resetTimer();
  },
  initZfdmInfo: function () {
    reqGetZfdmInfo()
      .then((res) => {
        console.log(res);
        this.setData({
          raceStatus: res.data.race_status,
          raceTime: res.data.raceTime,
          isFree: res.data.isUseFreeChance === "0",
          bonusList: res.data.lotteryMoneyStr.split(","),
        });
        if (this.data.raceStatus === "1") {
          this.getRankList();
        } else {
          if (this.data.raceStatus === "2") {
            this.openRuleBox();
          }
          this.loopGetZfdmInfo();
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  updateZfdmInfo: function () {
    return new Promise((resolve, reject) => {
      reqGetZfdmInfo()
        .then((res) => {
          console.log("æ›´æ–°guessInfoId", res);
          this.setData({
            guessInfoId: res.data.guess_info_id,
            redpackageId: res.data.red_package_id,
            isFree: res.data.isUseFreeChance === "0",
            raceTime: res.data.raceTime,
            raceStatus: res.data.race_status,
            needPrice: res.data.race_one_money,
          });
          resolve();
        })
        .catch((err) => {
          console.log(err);
          reject(err);
        });
    });
  },
  loopGetZfdmInfo: function () {
    if (tmpIntervaLoop) {
      return;
    }
    tmpIntervaLoop = setInterval(() => {
      loopCount += 1;
      reqGetZfdmInfo(true)
        .then((res) => {
          console.log(res);
          this.setData({
            guessInfoId: res.data.guess_info_id,
            redpackageId: res.data.red_package_id,
            isFree: res.data.isUseFreeChance === "0",
            raceTime: res.data.raceTime,
            raceStatus: res.data.race_status,
            needPrice: res.data.race_one_money,
            bonusList: res.data.lotteryMoneyStr.split(","),
          });
          if (this.data.raceStatus === "1") {
            loopCount = 0;
            clearInterval(tmpIntervaLoop);
            tmpIntervaLoop = null;
            this.getRankList();
          } else if (loopCount % 3 === 0) {
            this.updateMessageQueue();
          }
        })
        .catch((err) => {
          console.log(err);
          clearInterval(tmpIntervaLoop);
          tmpIntervaLoop = null;
        });
    }, 2000);
  },
  updateMessageQueue() {
    if (!this.data.redpackageId) {
      // æœ¬è½®è¿˜æœªå¼€å§‹
      return;
    }
    zfdmGlobalData.initZfdmId(this.data.redpackageId);
    reqGetZfdmMessageList(this.data.redpackageId)
      .then((res) => {
        if (res && res.data) {
          this.setData({
            messageQueue: res.data.playList,
          });
          console.log("æ¶ˆæ¯åˆ—è¡¨ï¼š", this.data.messageQueue);
          this.popupMessage();
        }
      })
      .catch((err) => {
        console.log(err);
      });
  },
  popupMessage() {
    if (btnLock || tmpInterval || inPay) {
      // æ“ä½œä¸­(æ”¯ä»˜ä¸­ã€ç§’è¡¨è½¬åŠ¨ã€æŸ¥çœ‹ç»“æœ)
      return;
    }
    if (this.data.tipVisible || this.data.ruleBoxVisible) {
      // å¼¹å‡ºä¸­
      return;
    }
    const tmpQueue = this.data.messageQueue;
    const tmpCurrentMsg = tmpQueue[zfdmGlobalData.zfdmIndex];
    if (!tmpCurrentMsg) {
      // æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ— æ¶ˆæ¯
      return;
    }
    console.log("å¼¹å‡ºæ¶ˆæ¯");
    try {
      // è§£æå‡ºæ¶ˆæ¯å¯¹è±¡
      const tmpMsgObj = JSON.parse(tmpCurrentMsg.element);
      // åˆ¤æ–­æ˜¯åˆ«äººçš„koä¿¡æ¯è¿˜æ˜¯æˆ‘è¢«koçš„ä¿¡æ¯
      if (tmpMsgObj.jb_userId === this.data.userId) {
        // å¼¹å‡ºæˆ‘è¢«koçš„æ¶ˆæ¯
        this.setData({
          tipVisible: true,
          tipBoxType: 4,
          koOtherAvator: tmpMsgObj.my_avator,
          koOtherName: tmpMsgObj.my_name,
          koPercentVal: tmpMsgObj.chaoYueVal,
          koBonus: tmpMsgObj.rank_money,
          isShowTipBoxAni: true,
        });
      } else {
        this.setData({
          tipVisible: true,
          tipBoxType: 3,
          koOtherAvator: tmpMsgObj.my_avator,
          koOtherName: tmpMsgObj.my_name,
          resultTime: tmpMsgObj.my_guess_money,
          koPercentVal: tmpMsgObj.chaoYueVal,
          koBonus: tmpMsgObj.rank_money,
          isShowTipBoxAni: true,
        });
        // æ‰§è¡Œå€’è®¡æ—¶é€»è¾‘
        if (!tmpInterval2) {
          let tmpCd = 8;
          tmpInterval2 = setInterval(() => {
            if (tmpCd === 1) {
              clearInterval(tmpInterval2);
              tmpInterval2 = null;
              this.closeTipBox();
            } else {
              tmpCd -= 1;
            }
          }, 1000);
        }
      }
    } catch (err) {
      console.log(err);
    }
  },
  getRankList: function () {
    reqGetZfdmRankList(this.data.redpackageId)
      .then((res) => {
        console.log("æ’è¡Œæ¦œï¼š", res);
        let tmpList = [];
        let tmpType = 5;
        const tmpLen = res.data.list.length;
        if (tmpLen > 8) {
          tmpList = res.data.list.slice(0, 8);
        } else {
          tmpList = res.data.list;
          // è¡¥é½
          for (let i = tmpLen; i < 8; i += 1) {
            tmpList.push({
              avator: defaultContent.defaultJoymewAvatar,
              wx_name: "Player",
              guess_money: 0,
              lottery_money: 0,
            });
          }
        }
        if (res.data.my_money === "0" || !res.data.my_money) {
          tmpType = 6;
        }
        this.setData({
          rankList: tmpList,
          tipVisible: true,
          tipBoxType: tmpType,
          isShowTipBoxAni: true,
          myRankStr: res.data.my_rank_str,
          myGradeStr: res.data.my_grade_str,
          myMoney: res.data.my_money,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  handleBack: function () {
    this.setData({
      tipBoxType: 2,
    });
  },
  toHome: function () {
    wx.navigateBack();
  },
});
````

## File: packageGame/pages/zyz/zyz.js
````javascript
import {
  timeoutTask,
} from "../../../utils/index";
import {
  reqGetPoolMoney,
  reqGetZyzInfo,
  reqGetZyzRank,
  reqZyzRecharge,
  reqStartZyz,
  reqSendPrizeInfo,
  reqSendBroadCast,
} from "../../api/zyz";
import defaultContent from "../../../assets/constant/default";

const zhufuList = [
  "ç¾é…’ä½³è‚´,ä¸ç”šè£å¹¸",
  "é†‰é…’é¥±å¾·ï¼Œä¸èƒœæ„Ÿæ¿€",
  "å°å°çº¢åŒ…,æ„Ÿè°¢æ‹›å¾…",
  "æ„Ÿè°¢æ‹›å¾…,ç¥æ„¿å®‰åº·",
];
// ç¤¼ç‰©æ•°ç»„
const giftList = [{
    id: 1,
    gift: "rocket1",
    name: "ç«ç®­å°å·",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket1.png",
    isChoosed: true,
  },
  {
    id: 2,
    gift: "rocket2",
    name: "ç«ç®­ä¸­å·",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket2.png",
    isChoosed: false,
  },
  {
    id: 3,
    gift: "rocket3",
    name: "å¤§å·å¤§å·",
    imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket3.png",
    isChoosed: false,
  },
];

let tmpInterval = null; //ç”¨äºå€’è®¡æ—¶
let lock2 = false; //é”ï¼Œç”¨äºç¡®ä¿ æ‰§è¡ŒåŠ¨ç”»çš„è¿‡ç¨‹ä¸­ä¸å¯ä»¥ç‚¹æŒ‰é’®
let lock = false; //é”ï¼Œç”¨äºç¡®ä¿ å¼€å§‹æ¸¸æˆæŒ‰é’®ä¸èƒ½è¿ç»­ç‚¹å‡»

Page({
  data: {
    luckyMoney: 0,
    wheelRodateDeg: 0,
    isLuckyShow: false,
    luckyAni: "",
    gameStatus: 1, // æ¸¸æˆçŠ¶æ€(æ§åˆ¶é¡µé¢æ˜¾ç¤º)
    prizeItemList: [], // å¥–é¡¹åˆ—è¡¨(å¸¦æ±‰å­—å•ä½)
    prizeItemValList: [], // å¥–é¡¹æ•°å€¼åˆ—è¡¨(ä¸å¸¦æ±‰å­—å•ä½)
    poolMoney: 0, //å¥–æ± é‡‘é¢
    countDownNum: 0, // å€’è®¡æ—¶
    isEntry: false, // å……å€¼å…¥å£
    topRankList: [], // æ’è¡Œæ¦œåˆ—è¡¨
    otherRankList: [],
    userId: "",
    openId: "",
    name: "",
    headImg: "",
    turnId: "", //ä¸€åœºæ¸¸æˆçš„id 0ä»£è¡¨è¦å……å€¼ å¦åˆ™ä»£è¡¨è¿™åœºæ¸¸æˆçš„åœºid
    giftList: giftList,
  },
  onLoad: function (options) {
    lock2 = false;
    lock = false;
    tmpInterval = null;
    this.setData({
      userId: options.userId,
      openId: options.openId,
      name: options.name,
      headImg: options.headImg,
      prizeItemList: options.zyzList.split(","),
      prizeItemValList: options.zyzList
        .replace(/[\u4e00-\u9fa5]/g, "")
        .split(","),
    });
    this.requestPoolMoney();
  },
  onShow: function () {
    this.toGame();
  },
  onHide: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    tmpInterval = null;
  },
  onUnload: function () {
    //æ¸…é™¤å®šæ—¶å™¨
    clearInterval(tmpInterval);
    tmpInterval = null;
  },
  showLucky() {
    this.setData({
      luckyAni: "showLuckyAni",
      isLuckyShow: true,
    });
    // 4såæ¶ˆå¤±
    timeoutTask(() => {
      this.setData({
        luckyAni: "hideLuckyAni",
      });
      timeoutTask(() => {
        this.setData({
          isLuckyShow: false,
        });
      }, 100);
    }, 4000);
  },
  tapstartNyn() {
    reqGetZyzInfo()
      .then((res) => {
        console.log(res);
        this.setData({
          turnId: res.data.id,
        });
        this.startGame();
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "ç½‘ç»œå¼‚å¸¸!",
          icon: "none",
        });
      });
  },
  // é€‰æ‹©ç¤¼ç‰©
  chooseGift(e) {
    console.log(e);
    const choosedId = e.currentTarget.dataset.id;
    const tmpGiftList = this.data.giftList;
    tmpGiftList.forEach((item, index) => {
      if (item.id === choosedId) {
        this.setData({
          [`giftList[${index}].isChoosed`]: true,
        });
      } else {
        this.setData({
          [`giftList[${index}].isChoosed`]: false,
        });
      }
    });
  },
  // è½¬ä¸€è½¬åŠ¨ç”»
  gameAniStart(endMoney) {
    console.log('åœæ­¢çš„é‡‘é¢ï¼š', endMoney);
    let endIndex = this.findIndexByPrizeItem(endMoney);
    console.log('åœæ­¢çš„ç´¢å¼•ï¼š', endIndex);
    // è½¬ç›˜å½“å‰é€‰ä¸­é¡¹
    let nowIndex = 0;
    // åœˆæ•°(å‘¨æœŸ)
    let circle = 0;
    //è½¬ç›˜ åŠ é€Ÿé˜¶æ®µ ç¼“å†²é˜¶æ®µ(ç¡®ä¿<=5)
    //æƒ…å†µ1ï¼šå‰ä¸‰ä¸ªå‘¨æœŸ->æœ€åä¸€ä¸ªå‘¨æœŸå°äº5   ani1 ani2
    //æƒ…å†µ2:å‰ä¸‰ä¸ªå‘¨æœŸ->æœ€åä¸€ä¸ªå‘¨æœŸå¤§äº5   ani1 + endIndex-4
    let step1 = setInterval(() => {
      if (nowIndex === 9) {
        nowIndex = 0;
        this.setData({
          wheelRodateDeg: nowIndex * 36,
        });
        circle += 1;
      }
      if (circle === 3) {
        // ä¸‰åœˆååˆ¤æ–­æ˜¯å¦è¿›å…¥ç¼“å†²é˜¶æ®µ
        if (endIndex < 4) {
          clearInterval(step1);
          let step2 = setInterval(() => {
            if (nowIndex === endIndex) {
              clearInterval(step2);
              this.setData({
                wheelRodateDeg: nowIndex * 36,
              });
              timeoutTask(() => {
                this.showLucky();
              }, 500);
            } else {
              this.setData({
                wheelRodateDeg: nowIndex * 36,
              });
              if (nowIndex == 9) {
                nowIndex = 0;
              } else {
                nowIndex += 1;
              }
            }
          }, 500);
        } else {
          //åŠ é€Ÿé˜¶æ®µåœæ­¢ä½ç½® endIndex-4
          if (nowIndex === endIndex - 4) {
            clearInterval(step1);
            let step2 = setInterval(() => {
              if (nowIndex === endIndex) {
                clearInterval(step2);
                this.setData({
                  wheelRodateDeg: nowIndex * 36,
                });
                timeoutTask(() => {
                  this.showLucky();
                }, 500);
              } else {
                this.setData({
                  wheelRodateDeg: nowIndex * 36,
                });
                if (nowIndex == 9) {
                  nowIndex = 0;
                } else {
                  nowIndex += 1;
                }
              }
            }, 500);
          } else {
            this.setData({
              wheelRodateDeg: nowIndex * 36,
            });
            nowIndex += 1;
          }
        }
      } else {
        this.setData({
          wheelRodateDeg: nowIndex * 36,
        });
        nowIndex += 1;
      }
    }, 100);
  },
  // å……é’±ç©è½¬ä¸€è½¬
  recharge() {
    if (!this.data.isEntry) {
      // æœ€ååäº”ç§’è´­ä¹°å…¥å£å…³é—­
      wx.showToast({
        title: "è´­ä¹°å…¥å£å…³é—­",
        icon: "none",
      });
      return;
    }
    if (lock2) {
      return;
    }
    lock2 = true;
    reqZyzRecharge({
        userId: this.data.userId,
        openId: this.data.openId,
      })
      .then(() => {
        wx.showToast({
          title: "ç¤¼ç‰©å‘é€æˆåŠŸ!",
          icon: "none",
        });
        this.sendGift(this.getChoosedGift());
        // startGame
        timeoutTask(() => {
          console.log("***2såè‡ªåŠ¨è½¬ä¸€è½¬***");
          this.tapstartNyn();
        }, 2000);
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "æ”¯ä»˜å¤±è´¥!",
          icon: "none",
        });
        lock2 = false;
      });
  },
  getChoosedGift() {
    return this.data.giftList.find((item) => {
      return item.isChoosed;
    });
  },
  sendGift(giftChoosed) {
    let tmpCode = "";
    if (giftChoosed.id == 1) {
      tmpCode = 5002;
    } else if (giftChoosed.id == 2) {
      tmpCode = 6002;
    } else if (giftChoosed.id == 3) {
      tmpCode = 7002;
    }
    const c = JSON.stringify({
      code: tmpCode,
      param: {
        headImg: this.data.headImg,
        nickname: this.data.name,
        wish: zhufuList[parseInt(Math.random() * 3)],
      },
    });
    reqSendBroadCast({
      c,
    });
  },
  // è½¬ä¸€è½¬
  startGame() {
    reqStartZyz({
        turnId: this.data.turnId,
      })
      .then((res) => {
        console.log("startNyn result:", res);
        //res.data.desc å¥–é¡¹ï¼›endMoneyä¸­å¥–çš„é‡‘é¢ï¼›totalMoney å¥–æ± é‡‘é¢
        //å¥–æ± é‡‘é¢åˆ·æ–°
        if (res.data.totalMoney.remainCoin) {
          this.setData({
            poolMoney: res.data.totalMoney.remainCoin,
          });
        }
        this.setData({
          luckyMoney: res.data.endMoney,
        });
        //æ¸¸æˆåŠ¨ç”»å¼€å§‹
        this.gameAniStart(res.data.endMoney);

        // 4såŠ¨ç”»åœæ­¢åå‘é€å¹¿æ’­(å¿…é¡»è¦ä¸­å¥–çš„æƒ…å†µ)
        if (parseInt(res.data.endMoney) > 0) {
          timeoutTask(() => {
            this.sendBroad(res.data.endMoney, res.data.totalMoney.balance);
          }, 4000);
        }
        timeoutTask(() => {
          lock2 = false;
        }, 4000);
      })
      .catch((err) => {
        console.log(err);
        lock2 = false;
      });
  },
  // ç‚¹å‡»è¿›å…¥æ¸¸æˆ
  toGame() {
    if (lock) {
      return;
    }
    lock = true;
    this.requestGameInitInfo();
  },
  // è·å–å¥–æ± é‡‘é¢
  requestPoolMoney() {
    reqGetPoolMoney()
      .then((res) => {
        console.log(res);
        this.setData({
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // è·å–æ¸¸æˆç›¸å…³ä¿¡æ¯
  requestGameInitInfo() {
    reqGetZyzInfo()
      .then((res) => {
        console.log("***è·å–è½¬ä¸€è½¬åŸºæœ¬ä¿¡æ¯***");
        console.log(res);
        //res.data.id å‘é€ç¤¼ç‰© 1è½¬ä¸€è½¬
        if (res.data.id == 0) {
          this.setData({
            turnId: res.data.id,
          });
        } else {
          this.setData({
            turnId: res.data.id,
          });
        }
        // æ—¶é—´å¤„ç†(ç”¨äºå€’è®¡æ—¶) res.data.endTime
        if (res.data.endTime === "0") {
          // æ¸¸æˆæœªå¼€å§‹çš„æƒ…å†µå¤„ç†
          wx.showToast({
            title: "æ¸¸æˆå°šæœªå¼€å§‹!",
            icon: "none",
          });
        } else {
          let countTime = this.timeHandle(res.data.endTime);
          this.countDown(countTime);
          this.setData({
            gameStatus: 2,
          });
        }
        lock = false;
      })
      .catch((err) => {
        console.log(err);
        lock = false;
      });
  },
  timeHandle(endTime) {
    //è·å–å½“å‰æ—¶é—´æˆ³
    var nowTime = new Date().getTime();
    var subTime = parseInt((parseInt(endTime) - parseInt(nowTime)) / 1000);
    if (subTime < 0) {
      subTime = 0;
    }
    return subTime;
  },
  countDown(second) {
    if (tmpInterval) {
      return;
    }
    this.setData({
      isEntry: true,
    });
    tmpInterval = setInterval(() => {
      console.log("tmpInterval");
      if (second <= 1) {
        this.requestRankList();
      } else if (second <= 15) {
        this.setData({
          isEntry: false,
        });
      }
      if (second >= 1) {
        second -= 1;
        this.setData({
          countDownNum: second,
        });
      }
      if (second % 4 === 0) {
        this.requestTipList();
      }
    }, 1000);
  },
  // è·å–æ’è¡Œæ¦œåˆ—è¡¨
  requestRankList() {
    reqGetZyzRank()
      .then((res) => {
        console.log(res);
        let tmpTopRankArray = [];
        let tmpOtherRankArray = [];
        let count = 0;
        let tmpLen = res.data.list.length;
        // é™åˆ¶ä¸­å¥–åå•äººæ•°æœ€å¤šä¸è¶…è¿‡10ä¸ª
        if (tmpLen > 10) {
          tmpLen = 10;
        }
        while (count < tmpLen) {
          if (count < 3) {
            tmpTopRankArray.push({
              nickname: res.data.list[count].wx_name,
              headimgurl: res.data.list[count].avator,
              money: Math.floor(parseFloat(res.data.list[count].money)),
            });
          } else {
            tmpOtherRankArray.push({
              num: count < 0 ? `0${count + 1}` : count + 1,
              nickname: res.data.list[count].wx_name,
              headimgurl: res.data.list[count].avator,
              money: Math.floor(parseFloat(res.data.list[count].money)),
            });
          }
          count += 1;
        }
        if (tmpTopRankArray.length < 3) {
          const tmpLen2 = tmpTopRankArray.length;
          for (let i = tmpLen2; i < 3; i += 1) {
            tmpTopRankArray.push({
              nickname: "Player",
              headimgurl: defaultContent.defaultJoymewAvatar,
              money: 0,
            });
          }
        }
        // ä¸è¶³ä¸ƒä¸ªè¡¥é½
        if (tmpOtherRankArray.length < 7) {
          const tmpLen3 = tmpOtherRankArray.length;
          for (let i = tmpLen3; i < 7; i += 1) {
            tmpOtherRankArray.push({
              num: i + 3 < 0 ? `0${i + 4}` : i + 4,
              nickname: "Player",
              headimgurl: defaultContent.defaultJoymewAvatar,
              money: 0,
            });
          }
        }

        console.log(tmpOtherRankArray);
        this.setData({
          topRankList: tmpTopRankArray,
          otherRankList: tmpOtherRankArray,
          gameStatus: 3,
        });
        // åœæ­¢è½®è¯¢
        clearInterval(tmpInterval);
        tmpInterval = null;
      })
      .catch((err) => {
        console.log(err);
      });
  },
  // å‘å¹¿æ’­
  sendBroad(golds, remainCoins) {
    reqSendPrizeInfo({
        gold: golds,
        remainCoin: remainCoins,
        turnId: this.data.turnId,
      })
      .then((res) => {
        console.log(res);
      })
      .catch((err) => {
        console.log(err);
        wx.showToast({
          title: "ç½‘ç»œå¼‚å¸¸",
          icon: "none",
        });
      });
  },
  // æ ¹æ®å¥–é¡¹æŸ¥æ‰¾ä¸‹æ ‡
  findIndexByPrizeItem(prizeItem) {
    let tmpLen = this.data.prizeItemValList.length;
    let tmpArr = this.data.prizeItemValList;
    let tmpIndex = -1;
    for (let i = 0; i < tmpLen; i += 1) {
      if (tmpArr[i] === prizeItem) {
        tmpIndex = i;
        break;
      }
    }
    return tmpIndex;
  },
  requestTipList() {
    reqGetPoolMoney()
      .then((res) => {
        console.log(res);
        const subTime = this.timeHandle(res.data.endTime);
        if (subTime <= 0) {
          // æ¸¸æˆæå‰ç»“æŸ
          this.requestRankList();
        }
        this.setData({
          poolMoney: res.data.balance,
        });
      })
      .catch((err) => {
        console.log(err);
      });
  },
  toAgreement() {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
});
````

## File: pages/estimate/components/eFooter/eFooter.js
````javascript
export const MENUS = [
  {
    name: "ä¸»æŒè¯„åˆ†",
    page: "mark",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/com-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/com-active-icon.png",
  },
  {
    name: "ç°åœºå›é¡¾",
    page: "review",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/rev-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/rev-active-icon.png",
  },
  {
    name: "ä¸»æŒé¢„å®š",
    page: "reserve",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/host-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/host-active-icon.png",
  },
];
const app = getApp();
Component({
  properties: {
    activePage: {
      type: String,
      value: 'mark',
    }
  },

  data: {
    menus: MENUS,
    bottomLift: 0,
  },
  lifetimes: {
    attached() {
      this.setData({
        bottomLift: app.globalData.systemInfo_bottomLift,
      });
    },
  },
  methods: {
    /**
     * é¡µé¢è·³è½¬ 
     */
    changePage(e) {
      const page = e.currentTarget.dataset.page;
      console.log(page, this.data.activePage);
      // this.triggerEvent('pageChange', { page });
      if(page === this.data.activePage) {
        return;
      }
      if(page === 'mark') {
        wx.redirectTo({
          url: `/pages/estimate/estimate?splid=${wx.getStorageSync("liveId")}`,
        });
      } else if(page === 'review') {
        wx.redirectTo({
          url: `/pages/review/review?splid=${wx.getStorageSync("liveId")}&inTabbarMode=1`,
        });
      } else if(page === 'reserve') {
        wx.redirectTo({
          url: '/pages/reserve/reserve?inTabbarMode=1',
        });
      }
    },
  },
});
````

## File: pages/estimate/components/mark/aiLiveReplyStorage.js
````javascript
/**
 * @description: æœ¬åœºæ´»åŠ¨aiä½¿ç”¨æ¬¡æ•°ç¼“å­˜
 * ç¼“å­˜ä¸­çš„æ•°æ®ç»“æ„:
 * key: aiLiveReply
 * value: {
 *  count: number,
 *  liveId: string
 * }
 *
 */

export const MAX_COUNT = 5;

/**
 * ç¼“å­˜æœ¬åœºæ´»åŠ¨aiä½¿ç”¨æ¬¡æ•°
 */
export function saveAiLiveReplyCount(count) {
  const data = {
    count,
    liveId: wx.getStorageSync("liveId"),
  };
  wx.setStorageSync("aiLiveReply", JSON.stringify(data));
}

/**
 * è·å–ç¼“å­˜ä¸­æœ¬åœºæ´»åŠ¨aiä½¿ç”¨æ¬¡æ•°
 */
export function getAiLiveReplyCount() {
  const currentLiveId = wx.getStorageSync("liveId");
  const data = JSON.parse(wx.getStorageSync("aiLiveReply") || "{}");
  if(!data) {
    return 0;
  }
  if(data.liveId !== currentLiveId) {
    wx.removeStorageSync("aiLiveReply");
    return 0;
  }
  return data.count;
}
````

## File: pages/estimate/components/mark/mark.wxss
````
/* ä¸»æŒäººè¯„åˆ†å¡ç‰‡ */
.estimate-card {
    width: 702rpx;
    background-color: rgba(255, 255, 255, 0);
    min-height: 75vh;
    padding-bottom: 20rpx;
    margin: 0 auto;
    border-radius: 12rpx;
    position: relative;
}

.card-host {
    padding-top: 30rpx;
    padding-bottom: 30rpx;
    width: 100%;
    display: flex;
    align-items: center;
    flex-direction: row;
}

.card-star {
    padding-top: 30rpx;
    padding-bottom: 30rpx;
    width: 702rpx;
    height: 140rpx;
    display: flex;
    align-items: center;
    flex-direction: row;
    background: rgb(249, 247, 247, 0.3);
    border-radius: 20px;
    border: 1px solid white;
}

.host-img {
    width: 156rpx;
    height: 156rpx;
    background-position: center;
    background-size: 100% 100%;
    border-radius: 50%;
}

.star-image {
    width: 160rpx;
    height: 130rpx;
    background-position: center;
    background-size: 100% 100%;
}

.host-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: left;
    padding-left: 20rpx;
    height: 156rpx;
}

.estimate-part1 {
    height: 62rpx;
    max-width: 517rpx;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}

.estimate-part2 {
    display: flex;
    flex-direction: row;
    align-items: center;
}

.estimate-text1 {
    font-size: 44rpx;
    font-family: PingFang SC, PingFang SC-500;
    font-weight: 500;
    text-align: left;
    color: #333333;
}

.estimate-text2 {
    font-size: 36rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: left;
    color: #333333;
    /* line-height: 42rpx; */
}

.estimate-text3 {
    font-size: 36rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: left;
    color: #ee4c1e;
    /* line-height: 42rpx; */
}

.contact-icon {
    width: 12rpx;
    height: 20rpx;
    margin-left: 8rpx;
}

.contact-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 165rpx;
    height: 56rpx;
    margin-left: 50rpx;
    color: #fff;
    text-align: center;
    line-height: 32px;
    background: linear-gradient(72deg, #ffa06b 0%, #ffc634 100%);
    border-radius: 42px;
    font-size: 28rpx;
}

.qrcode {
    width: 40rpx;
    height: 40rpx;
    margin-left: 30rpx;
    background-size: 100% 100%;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/estimate-new/qrcode-icon.png');
    animation: swing 1s linear infinite;
}

.star-view {
    display: flex;
    flex-direction: column;
    align-items: left;
    padding-left: 0rpx;
}

.star-text-success {
    margin-top: 20rpx;
    height: 40rpx;
    font-size: 28rpx;
    font-family: PingFang SC, PingFang SC-500;
    font-weight: 500;
    text-align: left;
    padding-left: 20rpx;
    color: #ff8d19;
    line-height: 32rpx;
}

.star-text-default {
    margin-top: 20rpx;
    padding-left: 20rpx;
    height: 40rpx;
    font-size: 28rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: #5a5a5a;
    line-height: 32rpx;
}

.star-text2 {
    font-size: 20rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: #ff8d19;
    line-height: 24rpx;
    margin-left: 20rpx;
}

.comment-area {
    position: relative;
}

.ai-button {
    position: absolute;
    bottom: 80rpx;
    right: 8rpx;
    padding: 0;
    color: white;
    background: rgb(48, 118, 255);
    display: flex;
    align-items: center;
    justify-content: start;
    background: rgba(48, 118, 255, 0.2);
    width: 190rpx;
    height: 52rpx;
    border-radius: 38rpx;
}

.ai-button-text {
    margin-left: 10rpx;
    font-size: 28rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: center;
    color: #3076ff;
    line-height: 32rpx;
}

.ai-button-image {
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44rpx;
    height: 44rpx;
    background-size: 100% 100%;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/estimate-new/aiicon.png');
}

.nameAnddate {
    display: flex;
    flex-direction: column;
    height: 70rpx;
}

.comment-name {
    font-size: 28rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: #000000;
    line-height: 32rpx;
    margin-bottom: 10rpx;
}

.comment-content {
    font-size: 32rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: #000000;
    line-height: 38rpx;
    margin-top: 30rpx;
}

.reply-btn {
    font-size: 24rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: rgba(0, 0, 0, 0.25);
    line-height: 28rpx;
}

.phone {
    width: 32rpx;
    height: 32rpx;
    background-size: 100% 100%;
    background-image: url('https://static.hudongmiao.com/joymewMp/joymewIndex/estimate/phone.png');
    margin-left: 16rpx;
}

.satisfied-degree {
    margin-top: 48rpx;
    color: #ff8d19;
    font-size: 24rpx;
    display: flex;
    justify-content: center;
    align-items: center;
}

.star-wrap {
    margin-left: 0rpx;
}

.star-comment-wrap {
    display: flex;
    flex-direction: row;
    height: 140rpx;
    align-items: center;
}

.icon-star {
    width: 24rpx;
    height: 24rpx;
    margin-left: 12rpx;
}

.card-tags {
    margin-top: 40rpx;
    width: 702rpx;
    height: 598rpx;
    /* background: #ffffff; */
    background: #ffffff;
    border-radius: 20px;
}

.border-wrap {
    margin: 0 auto;
    width: 616rpx;
    height: 2rpx;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: nowrap;
}

.border {
    width: 18rpx;
    flex-grow: 0;
    height: 2rpx;
    background: #dddddd;
}

.card-tags {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 40rpx;
    /* padding-bottom: 90rpx; */
    flex-direction: column;
}

.tags-title {
    margin: 0 auto;
    font-size: 24rpx;
    font-weight: 400;
    color: #383838;
    display: flex;
    justify-content: center;
    align-items: center;
}

.tags {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    padding: 20rpx 30rpx;
}

.tag {
    margin-top: 20rpx;
    margin-left: 10rpx;
    margin-right: 10rpx;
    height: 56rpx;
    padding: 10rpx 20rpx;
    box-sizing: border-box;
    border-radius: 28rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2rpx solid #eeeeee;
    color: #999999;
}

.selected {
    border: 2rpx solid #de2748;
    color: #de2748;
}

.comment-area-wrap {
    width: 702rpx;
    height: 600rpx;
    padding-left: 50rpx;
    padding-top: 30rpx;
    font-size: 32rpx;
    color: #000;
    margin-top: 40rpx;
    background: #ffffff;
    border-radius: 20rpx;
}

.textarea {
    width: 600rpx;
    height: 400rpx;
    padding: 0;
    font-size: 32rpx;
    color: #000;
}

.textarea-p {
    color: #999999;
}

.btn-wrap {
    display: flex;
    justify-content: space-around;
    align-items: center;
}

.btn-wrap .submit {
    margin-right: 20rpx;
    width: 686rpx;
    height: 88rpx;
    /* background: #000; */
    background: linear-gradient(97deg, #ffbfb7, #ff2352 100%);
    border-radius: 96rpx;
    position: absolute;
    bottom: 0;
}

.submit {
    margin-top: 28rpx;
    width: 686rpx;
    height: 88rpx;
    background: #d8d8d8, linear-gradient(97deg, #ffbfb7, #ff2352 100%);
    border-radius: 40rpx;
    font-size: 32rpx;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
}

.disabled {
    width: 248rpx;
    height: 72rpx;
    color: #a42c21;
    background: #e7e7e7;
    border-radius: 50rpx;
}

.qrcodeAdd {
    display: flex;
    align-items: center;
    font-size: 24rpx;
    color: #999999;
    margin-top: 16rpx;
}



.more {
    width: 10rpx;
    height: 18rpx;
    margin-left: 8rpx;
    background-size: 100% 100%;
    background-image: url('https://static.joymew.com/joymewMp/joymewIndex/estimate/comment-more.png');
}

@keyframes swing {
    20% {
        -webkit-transform: rotate3d(0, 0, 1, 15deg);
        transform: rotate3d(0, 0, 1, 15deg);
    }

    40% {
        -webkit-transform: rotate3d(0, 0, 1, -10deg);
        transform: rotate3d(0, 0, 1, -10deg);
    }

    60% {
        -webkit-transform: rotate3d(0, 0, 1, 5deg);
        transform: rotate3d(0, 0, 1, 5deg);
    }

    80% {
        -webkit-transform: rotate3d(0, 0, 1, -5deg);
        transform: rotate3d(0, 0, 1, -5deg);
    }

    to {
        -webkit-transform: rotate3d(0, 0, 1, 0deg);
        transform: rotate3d(0, 0, 1, 0deg);
    }
}


@import './item.wxss';
````

## File: pages/estimate/components/mark/markAfterQuery/markAfterQuery.wxss
````
.leave-wrap,
.feedback-wrap,
.pay-wrap,
.startip-wrap {
    width: 100%;
    height: 100%;
    position: fixed;
    left: 0;
    top: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 100;
}

.leave-modal,
.feedback-modal {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 538rpx;
    height: 546rpx;
    background: #ffffff;
    border-radius: 16rpx;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.startip-modal {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -40%);
    width: 602rpx;
    height: 582rpx;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/estimate-new/startipbg.png');
    background-size: cover;
    border-radius: 64rpx;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.startip-image-modal {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -140%);
    width: 296rpx;
    height: 248rpx;
    z-index: 200;
}

.startip-image2-modal {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -350%);
    width: 398rpx;
    height: 92rpx;
    z-index: 199;
}



.feedback-modal {
    background-size: 100% auto;
    background-position-y: -2rpx;
    background-image: url('https://static.hudongmiao.com/joymewMp/joymewIndex/estimate/top.png');
    background-repeat: no-repeat;
}

.leave-modal .leave {
    width: 100%;
    margin-top: 20rpx;
    padding: 0 30rpx;
    font-size: 32rpx;
    font-weight: 400;
    color: #333333;
    letter-spacing: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}

.feedback-modal .thanks {
    width: 100%;
    margin-top: 220rpx;
    font-size: 34rpx;
    font-family: PingFang SC, PingFang SC-500;
    font-weight: 500;
    text-align: LEFT;
    color: #f66f7e;
    line-height: 40rpx;
    letter-spacing: 0.07rpx;
    display: flex;
    align-items: center;
    justify-content: center;
}

.startip-modal .thanks {
    margin-top: 80rpx;
    width: 100%;
    font-size: 56rpx;
    font-family: DouyinSans, DouyinSans-400;
    font-weight: 400;
    text-align: center;
    color: #000000;
    /* line-height: 66rpx; */
}

.startip-modal .tips {
    margin-top: 50rpx;
    width: 100%;
    padding: 0;
    font-size: 32rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: center;
    color: #000000;
    line-height: 38rpx;
    display: flex;
    align-items: center;
    justify-content: center;
}

.emjoy {
    width: 184rpx;
    height: 188rpx;
    background-image: url('https://ustatic.hudongmiao.com/joymewMp/joymewIndex/estimatehappy.png');
    background-size: 100% 100%;
}

.tips {
    margin-top: 20rpx;
    padding: 0 30rpx;
    font-size: 24rpx;
    font-family: PingFang SC, PingFang SC-400;
    font-weight: 400;
    text-align: LEFT;
    color: #333333;
    line-height: 28rpx;
}

.btn-group {
    width: 100%;
    margin-top: 50rpx;
    display: flex;
    align-items: center;
    justify-content: space-around;
}

.startip-modal .btn-group {
    width: 100%;
    margin-top: 120rpx;
}

.btn-leave,
.btn-encourage {
    width: 324rpx;
    height: 72rpx;
    background: linear-gradient(102deg, #ffbfb7, #ff2352 100%);
    border-radius: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-leave {
    color: #a42c21;
    background: linear-gradient(180deg, #fff6f6 0%, #ffd4d7 100%);
}

.btn-encourage {
    color: #ffffff;
    background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
}

.btn-ok {
    width: 452rpx;
    height: 92rpx;
    background: linear-gradient(101deg, #ff457a, #ff759d 100%), linear-gradient(101deg, #ffbfb7, #ff2352 100%);
    border-radius: 60rpx;

    font-size: 32rpx;
    font-family: PingFang SC, PingFang SC-500;
    font-weight: 500;
    color: #ffffff;
    line-height: 92rpx;
    text-align: center;
}


.pay-modal {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 672rpx;

    box-sizing: content-box;
    background: #fff;
    border-radius: 24rpx 24rpx 0rpx 0rpx;
}

.pay-modal.spe {
    padding-bottom: 240rpx;
}

.end-poem {
    width: 100%;
    height: 210rpx;
    background: linear-gradient(133deg, #dc2244 0%, #ff869c 100%);
    border-radius: 24rpx 24rpx 0rpx 0rpx;
    color: white;
    padding-top: 30rpx;
    padding-left: 60rpx;
}

.pay-modal.other .end-poem {
    height: 100rpx;
}

.p1 {
    font-size: 32rpx;
}

.p2 {
    margin-top: 16rpx;
    font-size: 24rpx;
}

.p3 {
    width: 60%;
    margin-top: 16rpx;
    font-size: 20rpx;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.divider {
    width: 2rpx;
    height: 20rpx;
    opacity: 0.4;
    border: 1rpx solid #ffffff;
}

.charge-wrap {
    padding: 48rpx 54rpx;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.charge {
    width: 148rpx;
    height: 118rpx;
    background: linear-gradient(180deg, #fff6f6 0%, #ffd4d7 100%);
    border-radius: 8rpx;
    color: #a42c21;
    font-size: 32rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.chargeSelected {
    color: white;
    background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
}

.money {
    display: flex;
    justify-content: center;
    align-items: center;
}

.cusmoney {
    font-size: 24rpx;
    flex-direction: column;
}

.focusmoney {
    flex-direction: row;
    padding: 5rpx;
}

.solid {
    font-size: 24rpx;
}

.unit {
    font-size: 22rpx;
}

.director {
    font-size: 24rpx;
    margin: 0 auto;
    text-align: center;
}

.charge-btn {
    margin: 0 auto;
    width: 462rpx;
    height: 80rpx;
    background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
    border-radius: 40rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 64rpx;
    font-size: 32rpx;
    font-weight: 400;
    color: #ffffff;
}
````

## File: pages/estimate/components/mark/rateStar/rateStar.wxml
````
<view class="wrapper">
  <block wx:for="{{[1,2,3,4,5]}}" wx:for-item="item" wx:for-index="index" wx:key="index" >
    <image class="star-icon {{size}}" src="https://ustatic.hudongmiao.com/joymewMp/estimate-new/star.png" data-rate="{{item}}" bindtap="setRate" wx:if="{{rate<item}}"></image>
    <image class="star-icon {{size}}" src="https://ustatic.hudongmiao.com/joymewMp/estimate-new/star-active.png" data-rate="{{item}}" bindtap="setRate" wx:if="{{rate>=item}}"></image>
  </block>
</view>
````

## File: pages/estimate/components/mark/rateStar/rateStar.wxss
````
/* components/rateStar/rateStar.wxss */
.wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.star-icon{
  width: 28rpx;
  height: 28rpx;
}
.big{
  width: 48rpx;
  height: 48rpx;
  margin: 0 6rpx;
}
.bigger{
  width: 52rpx;
  height: 52rpx;
  margin: 0 20rpx;
}
````

## File: pages/estimate/components/mark/star.wxs
````
function getStarName(starNum) {
    var SATISFACTIONS = ['', 'éå¸¸å·®', 'å·®', 'ä¸€èˆ¬', 'æ»¡æ„', 'è¶…èµ'];
    starNum = parseInt(starNum);
    // console.log("starNum",starNum)
    // console.log("name", SATISFACTIONS[starNum])
    // æ»¡æ„åº¦åˆ—è¡¨
    return SATISFACTIONS[starNum];
}
function getScore(starNum) {
    var Scores = ['æœªè¯„åˆ†', '1.0', '2.0', '3.0', '4.0', '5.0'];
    starNum = parseInt(starNum);
    // console.log("starNum",starNum)
    // console.log("name", SATISFACTIONS[starNum])
    // æ»¡æ„åº¦åˆ—è¡¨
    return Scores[starNum];
}
function getStarEmoUrl(starNum) {
    var staremoUrls = [
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo0.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo1.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo2.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo3.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo4.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremo5.png',
    ];
    starNum = parseInt(starNum);
    return staremoUrls[starNum];
}
function parseNumber(starNum) {
    return parseInt(starNum);
}
function startextflag(starNum) {
    starNum = parseInt(starNum);
    if (starNum === 0)
        return false;
    else
        return true;
}
function commentAreaFlag(hasMarked, starNum) {
    starNum = parseInt(starNum);
    if (starNum < 3)
        return false;
    else {
        if (!hasMarked)
            return true;
    }
    return false;
}
function commentflag(hasMarked, starNum) {
    starNum = parseInt(starNum);
    if (starNum < 3)
        return false;
    else {
        if (hasMarked)
            return true;
        else
            return false;
    }
}
function submitflag(starNum) {
    starNum = parseInt(starNum);
    if (starNum <3)
        return false;
    else {
       return true;
    }
}

module.exports = {
    getStarName: getStarName,
    getScore: getScore,
    getStarEmoUrl: getStarEmoUrl,
    parseNumber: parseNumber,
    startextflag: startextflag,
    commentflag: commentflag,
    commentAreaFlag: commentAreaFlag,
    submitflag: submitflag
}
````

## File: pages/estimate/estimate.json
````json
{
  "usingComponents": {
    "mark": "./components/mark/mark",
    "eFooter": "./components/eFooter/eFooter"
  },
  "navigationBarTitleText": "ä¸»æŒè¯„åˆ†",
  "navigationStyle": "custom"
}
````

## File: pages/estimate/estimate.wxml
````
<view class="estimate">
 <view class="bg"></view>
  <!-- è‡ªå®šä¹‰å†…å®¹åŠæ ·å¼çš„æ ‡é¢˜ -->
  <view class="title" style="height: {{ titleBarHeight }}px; padding-top:{{ statusBarHeight }}px">
    ä¸»æŒè¯„åˆ†
  </view>
    <!-- è¯„åˆ†æ¨¡å— -->
    <mark class="mark-wrap" markData="{{markData}}" sceneType="{{sceneType}}" bindrefreshData="initData" bindmarkdataChange="onMarkDataChange"/>
    <!-- åº•éƒ¨èœå• -->
    <eFooter activePage="mark" bindpageChange="onChangePage" />
</view>
````

## File: pages/estimate/estimate.wxss
````
.estimate {
    width: 750rpx;
    max-height: 100%;
    overflow-x: hidden;
    position: relative;
}

.estimate .bg {
    background: linear-gradient(180deg, #ffe5eb, rgba(255, 229, 235, 0.00) 100%);
    overflow-x: hidden;
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: 50%;
    filter: blur(4px);
}

.estimate .title {
    width: 750rpx;
    height: 44rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: content-box;
    color: #ffffff;
    font-size: 34rpx;
    opacity: 0.9;
    font-family: PingFang SC, PingFang SC-500;
    font-weight: 500;
    text-align: CENTER;
    color: #000000;
    line-height: 40rpx;
}

.estimate .action-op {
    width: 750rpx;
    padding: 0 32rpx;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    align-items: center;
    position: fixed;
    bottom: 130rpx;
}

.estimate .action-op .op-btn {
    width: 316rpx;
    height: 78rpx;
    background: linear-gradient(103deg, #ffbfb7, #ff2352 100%);
    border-radius: 114rpx;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 32rpx;
    font-weight: 500;
    color: #ffffff;
}

.estimate .action-op .op-btn.share {
    margin: 0;
    padding: 0;
}

.estimate .action-op .op-btn.share::before {
    margin: 0;
    padding: 0;
}

.estimate .action-op .op-btn.share::after {
    border: none;
}

.mark-wrap {
    width: 100%;
}
````

## File: pages/estimateOld/components/eFooter/eFooter.js
````javascript
export const MENUS = [
  {
    name: "ä¸»æŒè¯„åˆ†",
    page: "mark",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/com-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/com-active-icon.png",
  },
  {
    name: "ç°åœºå›é¡¾",
    page: "review",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/rev-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/rev-active-icon.png",
  },
  {
    name: "ä¸»æŒé¢„å®š",
    page: "reserve",
    icon: "https://ustatic.hudongmiao.com/joymew-mp/review/host-icon.png",
    iconActive:
      "https://ustatic.hudongmiao.com/joymew-mp/review/host-active-icon.png",
  },
];
const app = getApp();
Component({
  properties: {
    activePage: {
      type: String,
      value: 'mark',
    }
  },

  data: {
    menus: MENUS,
    bottomLift: 0,
  },
  lifetimes: {
    attached() {
      this.setData({
        bottomLift: app.globalData.systemInfo_bottomLift,
      });
    },
  },
  methods: {
    /**
     * é¡µé¢è·³è½¬ 
     */
    changePage(e) {
      const page = e.currentTarget.dataset.page;
      console.log(page, this.data.activePage);
      // this.triggerEvent('pageChange', { page });
      if(page === this.data.activePage) {
        return;
      }
      if(page === 'mark') {
        wx.redirectTo({
          url: `/pages/estimate/estimate?splid=${wx.getStorageSync("liveId")}`,
        });
      } else if(page === 'review') {
        wx.redirectTo({
          url: `/pages/review/review?splid=${wx.getStorageSync("liveId")}&inTabbarMode=1`,
        });
      } else if(page === 'reserve') {
        wx.redirectTo({
          url: '/pages/reserve/reserve?inTabbarMode=1',
        });
      }
    },
  },
});
````

## File: pages/estimateOld/components/eFooter/eFooter.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/eFooter/eFooter.wxml
````
<cover-view class="footer" style="padding-bottom: {{bottomLift}}px">
  <cover-view class="btn-wrap {{activePage===item.page?'active':''}} {{item.page}}" wx:for="{{menus}}" data-page="{{item.page}}" wx:key="id" bindtap="changePage">
    <cover-image class="icon" src="{{item.iconActive}}" wx:if="{{activePage===item.page}}"></cover-image>
    <cover-image class="icon" src="{{item.icon}}" wx:else></cover-image>
    <cover-view class="text">{{item.name}}</cover-view>
  </cover-view>
</cover-view>
````

## File: pages/estimateOld/components/eFooter/eFooter.wxss
````
.footer {
  width: 750rpx;
  height: 98rpx;
  background: #ffffff;
  position: fixed;
  bottom: 0;
  left: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 1000;
  box-sizing: content-box;
}

.footer .btn-wrap {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 20rpx;
  flex: 1;
}

.footer .btn-wrap .icon {
  width: 48rpx;
  height: 48rpx;
}

.footer .btn-wrap.active {
  color: #ff2352;
}
````

## File: pages/estimateOld/components/mark/danmu/danmu.js
````javascript
import { getRandom, timeoutTask } from '../../../../../utils/index';
import defaultContent from '../../../../../assets/constant/default';

const danmusLen = defaultContent.commentDanmu.length;
let timer = undefined;
let indexArr = [];
Component({
  data: {
    danmu: {
      avator: '',
      comment: '',
      moveDistance: 0,
      type: -1,
    },
  },
  lifetimes: {
    attached() {
      timer = undefined;
      indexArr = [];
      this.loopShowDanmu();
    },
    detached() {
      this.endLoop();
    }
  },
  methods: {
    loopShowDanmu() {
      if (timer) {
        return;
      }
      this.sendDanmu();
      timer = setInterval(() => {
        this.sendDanmu();
      }, 9000);
    },
    // å‘é€å¼¹å¹•
    sendDanmu() {
      const danmuIndex = this.generateDanmuIndex();
      this.setData({
        ['danmu.avator']: defaultContent.commentDanmu[danmuIndex].avator,
        ['danmu.comment']: defaultContent.commentDanmu[danmuIndex].comment,
        ['danmu.moveDistance']: 0,
        ['danmu.type']: getRandom(1, 4),
      });
      timeoutTask(() => {
        this.setData({
          ['danmu.moveDistance']: -(
            defaultContent.commentDanmu[danmuIndex].comment.length * 17 +
            400
          ),
        });
        // console.log(this.data.danmu);
      }, 500);
      timeoutTask(() => {
        this.setData({
          ['danmu.avator']: '',
          ['danmu.comment']: '',
          ['danmu.moveDistance']: 0,
          ['danmu.type']: -1,
        });
      }, 8500);
    },
    // åˆ›å»ºä¸€ä¸ªæ‰“ä¹±é¡ºåºçš„ç´¢å¼•æ•°ç»„
    generateIndexArr() {
      const tmpIndexArr = [];
      for (let i = 0; i < danmusLen; i += 1) {
        tmpIndexArr.push(i);
      }
      tmpIndexArr.sort((a, b) => {
        return Math.random() > 0.5 ? -1 : 1;
      });
      return tmpIndexArr;
    },
    // å¼¹å¹•ç´¢å¼•
    generateDanmuIndex() {
      let tmpIndex = -1;
      if (indexArr.length > 0) {
        tmpIndex = indexArr.pop();
      } else {
        indexArr = this.generateIndexArr();
        tmpIndex = indexArr.pop();
      }
      return tmpIndex;
    },
    endLoop() {
      console.log('ç»“æŸå¾ªç¯!');
      clearInterval(timer);
      timer = undefined;
    },
  },
});
````

## File: pages/estimateOld/components/mark/danmu/danmu.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/mark/danmu/danmu.wxml
````
<view class="danmuArea">
  <view class="danmu {{danmu.type === 1 ? 't1' : ''}} {{danmu.type === 2 ? 't2' : ''}} {{danmu.type === 3 ? 't3' : ''}}" style="transform:translateX({{danmu.moveDistance}}px)" wx:if="{{danmu.comment}}">
    <image class="avator" src="{{danmu.avator}}"></image>
    <view class="content">{{danmu.comment}}</view>
  </view>
</view>
````

## File: pages/estimateOld/components/mark/danmu/danmu.wxss
````
.danmuArea {
  position: fixed;
  width: 100%;
  height: 208rpx;
  top: 32rpx;
}

.danmu {
  height: 48rpx;
  background: rgba(255, 56, 56, 0.30);
  border: 2rpx solid #fff0f0;
  border-radius: 50rpx;
  display: flex;
  align-items: center;
  padding: 4rpx 16rpx 4rpx 0;
  position: absolute;
  left: 750rpx;
  transition: all 8s linear;
  transform: translateX(0);
}
.danmu.t1 {
  top: 26rpx;
}
.danmu.t2 {
  top: 96rpx;
}
.danmu.t3 {
  top: 170rpx;
}
.avator {
  width: 44rpx;
  height: 44rpx;
  border-radius: 50%;
}
.content {
  font-size: 28rpx;
  font-weight: 400;
  color: #ffffff;
  margin-left: 4rpx;
  white-space: nowrap;
}
````

## File: pages/estimateOld/components/mark/item.wxss
````
.comment-item{
    margin: 0 auto;
    width: 616rpx;
    
    /* background-color: orange; */
    display: flex;
    flex-direction: column;
    
  }
  .my-c{
    display: flex;
    justify-content: flex-start;
  }
  .my-avator{
    width: 68rpx;
    height: 68rpx;
    border-radius: 50%;
    margin-right: 16rpx;
  }
  .nameAnddate{
    display: flex;
    flex-direction: column;
  }
  .nameAnddate .name{
    font-size: 26rpx;
  
    color: #333;
  }
  .nameAnddate .date{
    font-size: 24rpx;
    color: #999999;
  }
  .comment-item .content{
    font-size: 32rpx;
    margin-top: 22rpx;
  }
  .sub-comment{
  
    margin-top: 20rpx;
    background: #f5f5f3;
    border-radius: 4rpx;
    padding: 10rpx;
    padding-left: 24rpx;
    font-size: 24rpx;
  }
  .reply-btn{
    width: 100%;
    height: 50rpx;
    background: #f5f5f3;
    border-radius: 4rpx;
    font-size: 24rpx;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding-left: 24rpx;
    margin-top:20rpx;
  }
  .sub-item{
    /* display: flex;
    flex-direction: column; */
    margin-top: 8rpx;
  }
  .sub-name{
    margin-right: 20rpx;
    max-width: 200rpx;
    color: #333;
    font-weight: bold;
  }
  .sub-content{
    color: #666;
  }
````

## File: pages/estimateOld/components/mark/mark.js
````javascript
import { reqCommitComment, reqReplyUser } from "../../../../api/estimate";
import { reqSecurityMsgCheck } from "../../../../api/message";
import { reqSubscribeMessage } from "../../../../api/index.js";

const app = getApp();

Component({
  properties: {
    markData: {
      type: Object,
      value: {
        hostAvatar: "", // ä¸»æŒäººå¤´åƒ
        hostName: "", // ä¸»æŒäººæ˜µç§°
        hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
        hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
        starNum: 0, // æ‰“å‡ åˆ†?
        tags: [], // æ ‡ç­¾åˆ—è¡¨
        markContent: "", // è¯„åˆ†å†…å®¹
        commentInfo: {
          // è¯„è®ºç›¸å…³å†…å®¹
          my: {
            // æˆ‘çš„è¯„è®ºä¿¡æ¯
            id: "",
            avatar: "",
            nickname: "",
            content: "",
            time: "",
          },
          chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
        },
      },
    },
    sceneType: {
      type: String,
      value: "",
    },
  },

  data: {
    borderList: new Array(26), // åˆ†å‰²çº¿
    commentfocus: false, // è¯„ä»·è¾“å…¥æ¡†èšç„¦
    qrcodeVisible: false, // å¾®ä¿¡äºŒç»´ç å¼¹çª—å¯è§æ€§
    replyInputVisible: false, // å›å¤è¾“å…¥æ¡†å¯è§æ€§
    replyInputFocus: false, // å›å¤è¾“å…¥æ¡†èšç„¦
    replyContent: "", // å›å¤å†…å®¹
    popupName: "", // å¼¹çª—åç§°
    popupVisible: false, // å¼¹çª—æ˜¯å¦å¯è§
  },
  methods: {
    /**
     * æ‰“åˆ†
     */
    onstarChange(e) {
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        starNum: e.detail,
      });
    },
    /**
     * æ‰“æ ‡ç­¾
     */
    selectTag(e) {
      let choosedIndex = e.currentTarget.dataset.index;
      const tags = this.data.markData.tags;
      tags[choosedIndex].selected = !tags[choosedIndex].selected;
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        tags,
      });
    },
    /**
     * è¾“å…¥è¯„ä»·å†…å®¹
     */
    inputMarkContent(e) {
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        markContent: e.detail.value,
      });
    },
    /**
     * è·³è½¬æŠ½å¥–é¡µé¢
     */
    toLottery() {
      if (!this.data.markData.hasMarked) {
        wx.showToast({
          title: "æäº¤è¯„ä»·åå¯ä»¥å‚ä¸æŠ½å¥–!",
          icon: "none",
        });
        return;
      }
      wx.navigateTo({
        url: '/packageC/pages/draw/draw',
      });
    },
    /**
     * å¤„ç†æäº¤è¯„ä»·/æ‰“èµ
     */
    onMarkSubmit() {
      if (this.data.markData.hasMarked) {
        // æ‰“èµ
        this.showRewardPopup();
      } else {
        // æäº¤è¯„ä»·
        this.markHe();
      }
    },
    /**
     * å±•ç¤ºæ‰“èµå¼¹çª—
     */
    showRewardPopup() {
      this.setData({
        popupName: "reward",
        popupVisible: true,
      });
    },
    /**
     * è¯„ä»·
     */
    async markHe() {
      if (!this.markInfoValidate()) {
        return;
      }
      const labelStr = this.data.markData.tags
        .filter((item) => item.selected)
        .map((item) => item.id)
        .join(",");
      try {
        const validateRes = await reqSecurityMsgCheck(
          this.data.markData.markContent
        );
        const tmpResult = JSON.parse(validateRes.data.msg_sec_check);
        if (tmpResult.result.suggest === "pass") {
          const commentRes = await reqCommitComment({
            splid: wx.getStorageSync("liveId"),
            content: this.data.markData.markContent,
            label: labelStr,
            satisfaction: this.data.markData.starNum,
          });
          if (commentRes.code === 200) {
            // 1ã€è®¢é˜…æ¶ˆæ¯
            const msgIds = [
              app.globalData.accountInfo_subscribeTpMsg.comment.reply,
            ];
            reqSubscribeMessage(msgIds);
            // 2ã€é‡æ–°è·å–é¡µé¢åŸºæœ¬ä¿¡æ¯
            this.triggerEvent("refreshData");
            // 3ã€æç¤ºæˆåŠŸ
            wx.showToast({
              title: "è¯„ä»·æˆåŠŸ",
              icon: "success",
            });
            // 4ã€æ˜¾ç¤ºå¼•å¯¼æ‰“èµå¼¹çª—
            this.setData({
              popupName: "askReward",
              popupVisible: true,
            });
          } else {
            throw "commentError";
          }
        } else {
          wx.showToast({
            title: "è¯„è®ºå†…å®¹éæ³•!",
            icon: "none",
            duration: 3000,
          });
        }
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "è¯„è®ºå¤±è´¥!",
          icon: "none",
        });
      }
    },
    /**
     * è¯„ä»·ä¿¡æ¯éªŒè¯
     */
    markInfoValidate() {
      const markContent = this.data.markData.markContent.trim();
      const starNum = this.data.markData.starNum;
      if (!markContent) {
        wx.showToast({
          title: "è¯„ä»·ä¸€ä¸‹å§!",
          icon: "none",
        });
        return false;
      }
      if (starNum <= 3 && markContent.length < 10) {
        wx.showToast({
          title: "æ‚¨çš„è¯„ä»·ä¸è¶³10ä¸ªå­—ï¼Œè¯¦ç»†çš„è¯´æ˜èƒ½å¸®åŠ©ä¸»æŒäººæ›´å¥½çš„ä¸ºæ‚¨æœåŠ¡!",
          icon: "none",
        });
        return false;
      }
      return true;
    },
    /**
     * äºŒç»´ç æ‰“å¼€/å…³é—­
     */
    toggleQrcode() {
      this.setData({
        qrcodeVisible: !this.data.qrcodeVisible,
      });
    },
    /**
     * æ˜¾ç¤ºå›å¤è¾“å…¥æ¡†
     */
    showReplyInput() {
      this.setData({
        replyInputVisible: true,
        replyInputFocus: true,
      });
    },
    /**
     * éšè—å›å¤è¾“å…¥æ¡†ã€æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹
     */
    hideReplyInput() {
      if (!this.data.replyInputVisible) {
        return;
      }
      this.setData({
        replyInputVisible: false,
        replyInputFocus: false,
        replyContent: '',
      });
    },
    /**
     * è¾“å…¥å›å¤å†…å®¹
     */
    inputReplyContent(e) {
      this.setData({
        replyContent: e.detail,
      });
    },
    /**
     * å‘é€å›å¤å†…å®¹
     */
    async sendReplyContent() {
      if (!this.data.replyContent) {
        wx.showToast({
          title: "è¯·è¾“å…¥å›å¤å†…å®¹!",
          icon: "none",
        });
        return;
      }
      console.log("å‘é€å›å¤å†…å®¹:", this.data.replyContent);
      try {
        const validateRes = await reqSecurityMsgCheck(this.data.replyContent);
        const tmpResult = JSON.parse(validateRes.data.msg_sec_check);
        if (tmpResult.result.suggest === "pass") {
          // 1ã€å›å¤
          await reqReplyUser({
            splid: wx.getStorageSync("liveId"),
            content: this.data.replyContent,
            album_comment_id: this.data.markData.commentInfo.my.id,
          });
          wx.showToast({
            title: 'å›å¤æˆåŠŸï¼',
            icon: 'none'
          });
          // 2ã€è®¢é˜…æ¶ˆæ¯
          const msgIds = [
            app.globalData.accountInfo_subscribeTpMsg.comment.reply,
          ];
          reqSubscribeMessage(msgIds);
          setTimeout(() => {
            // 3ã€å…³é—­å›å¤æ¡†ã€é‡æ–°è·å–é¡µé¢åŸºæœ¬ä¿¡æ¯
            this.hideReplyInput();
            this.triggerEvent("refreshData");
          }, 300);
        } else {
          wx.showToast({
            title: "è¯„è®ºå†…å®¹éæ³•!",
            icon: "none",
            duration: 3000,
          });
        }
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "è¯„è®ºå¤±è´¥!",
          icon: "none",
        });
      }
    },
    /**
     * å¤„ç†å¼¹çª—è¡Œä¸º
     */
    onPopupActionChange(e) {
      console.log(e.detail);
      if (e.detail === "closePopup") {
        // å…³é—­å¼¹çª—
        this.setData({
          popupName: "",
          popupVisible: false,
        });
      } else if (e.detail === "toAskLeave") {
        // æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—
        this.setData({
          popupName: "askLeave",
        });
      } else if (e.detail === "toAskReward") {
        // æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—
        this.setData({
          popupName: "askReward",
        });
      } else if (e.detail === "toReward") {
        // æ‰“å¼€æ‰“èµå¼¹çª—
        this.setData({
          popupName: "reward",
        });
      }
    },
  },
});
````

## File: pages/estimateOld/components/mark/mark.json
````json
{
  "component": true,
  "usingComponents": {
    "rateStar": "./rateStar/rateStar",
    "qrcode": "./qrcode/qrcode",
    "danmu": "./danmu/danmu",
    "replyInput": "./replyInput/replyInput",
    "markAfterQuery": "./markAfterQuery/markAfterQuery"
  }
}
````

## File: pages/estimateOld/components/mark/mark.wxml
````
<wxs src="./star.wxs" module="star"></wxs>
<view class="markWrap" bindtap="hideReplyInput">
  <view class="estimate-card">
    <!-- ä¸»æŒäººå¤´åƒã€æ˜µç§°ã€ç»™ä»–æ‰“åˆ† -->
    <view class="card-host">
      <view class="host-img" style="background-image: url({{markData.hostAvatar}})"></view>
      <view class="host-name">
        <view>{{markData.hostName}}</view>
      </view>
      <view class="qrcodeAdd" bindtap="toggleQrcode" wx:if="{{markData.hostWechatQrcode}}">
        ç‚¹å‡»æ·»åŠ TAçš„å¾®ä¿¡
        <view class="qrcode"></view>
        <view class="more"></view>
      </view>
      <view class="satisfied-degree">
        <text>{{star.getStarName(markData.starNum)}}</text>
        <view class="star-wrap">
          <rateStar rate="{{markData.starNum}}" bind:change="onstarChange" edit="{{!markData.hasMarked}}" size="{{'bigger'}}"></rateStar>
        </view>
      </view>
    </view>
    <!-- åˆ†å‰²çº¿ -->
    <view class="border-wrap">
      <view class="border" wx:for="{{borderList}}" wx:key="index"></view>
    </view>
    <!-- æœªè¯„ä»·çŠ¶æ€çš„è¯„ä»·æ ‡ç­¾é€‰æ‹©ã€è¾“å…¥è¯„ä»·å†…å®¹ -->
    <view class="card-tags" wx:if="{{!markData.hasMarked}}">
      <view class="tags-title">â€”â€” è¯·é€‰æ‹©æ ‡ç­¾ â€”â€”</view>
      <view class="tags ">
        <view class="tag {{item.selected?'selected':''}}" wx:for="{{markData.tags}}" bindtap="selectTag" wx:key="index" data-index="{{index}}">
          {{item.info}}
        </view>
      </view>
      <textarea placeholder="å¸ä»ªå°å“¥é‚£ä¹ˆè¾›è‹¦ï¼Œé¼“åŠ±ä¸€ä¸‹å§ï¼Œç»™ä¸»æŒäººè¯„ä»·è¿˜å¯è·å¾—æŠ½å¥–æœºä¼šå“¦~" placeholder-class="textarea-p" class="textarea" value="{{markData.markContent}}" bindinput="inputMarkContent" focus="{{commentfocus}}" />
    </view>
    <!-- å·²è¯„ä»·çŠ¶æ€çš„è¯„ä»·è¯„ä»·åˆ—è¡¨ã€å›å¤å†…å®¹ -->
    <view class="card-tags" wx:if="{{markData.hasMarked}}">
      <view class="comment-item">
        <view class="my-c">
          <image src="{{markData.commentInfo.my.avatar}}" class="my-avator"></image>
          <view class="nameAnddate">
            <view class="name">{{markData.commentInfo.my.nickname}}</view>
            <view class="date">{{markData.commentInfo.my.comment_time}}</view>
          </view>
        </view>
        <view class="content">{{markData.commentInfo.my.content}}</view>
        <view class="sub-comment" wx:if="{{markData.commentInfo.chatList.length>0}}">
          <view class="sub-item" wx:for="{{markData.commentInfo.chatList}}" wx:key="index">
            <text class="sub-name">{{item.nickname}}:</text>
            <text class="sub-content">{{item.content}}</text>
          </view>
        </view>
        <view class="reply-btn" catchtap="showReplyInput">å›å¤TA</view>
      </view>
    </view>
    <!-- æŒ‰é’® -->
    <view class="btn-wrap">
      <view class="submit {{markData.hasMarked?'': 'disabled'}}" bindtap="toLottery">æŠ½å¥–</view>
      <view class="submit" bindtap="onMarkSubmit">{{markData.hasMarked ? 'æ‰“èµ' : 'æäº¤è¯„ä»·'}}</view>
    </view>
  </view>
  <!-- äºŒç»´ç  -->
  <qrcode hostWechatQrcode="{{markData.hostWechatQrcode}}" bindtoggleQrcode="toggleQrcode" wx:if="{{qrcodeVisible}}" />
  <!-- å›å¤è¾“å…¥æ¡† -->
  <replyInput wx:if="{{replyInputVisible}}" focus="{{replyInputFocus}}" initContent="{{replyContent}}" bind:input="inputReplyContent" bind:send="sendReplyContent" username="{{markData.hostName}}" />
  <!-- è¯„ä»·åçš„è¯¢é—®å¼¹çª— -->
  <markAfterQuery sceneType="{{sceneType}}" popupName="{{popupName}}" bindactionChange="onPopupActionChange" wx:if="{{popupVisible}}"/>
  <!-- å©šç¤¼ç‰ˆä¸“å±è™šæ‹Ÿå¼¹å¹• -->
  <danmu wx:if="{{sceneType === '0'}}" />
</view>
````

## File: pages/estimateOld/components/mark/mark.wxss
````
/* ä¸»æŒäººè¯„åˆ†å¡ç‰‡ */
.estimate-card {
  width: 682rpx;
  background-color: #fff;
  min-height: 80vh;
  padding-bottom: 40rpx;
  margin: 0 auto;
  border-radius: 12rpx;
}
.card-host {
  padding-top: 30rpx;
  padding-bottom: 30rpx;
  width: 100%;
  height: 35%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.host-img {
  width: 148rpx;
  height: 148rpx;
  background-position: center;
  background-size: 100% 100%;
  border-radius: 50%;
}
.host-name {
  font-size: 36rpx;
  margin-top: 20rpx;
  color: #333333;
  font-weight: 400;
  display: flex;
  justify-content: center;
  align-items: center;
}
.phone {
  width: 32rpx;
  height: 32rpx;
  background-size: 100% 100%;
  background-image: url('https://static.hudongmiao.com/joymewMp/joymewIndex/estimate/phone.png');
  margin-left: 16rpx;
}
.satisfied-degree {
  margin-top: 48rpx;
  color: #ff8d19;
  font-size: 24rpx;
  display: flex;
  justify-content: center;
  align-items: center;
}
.star-wrap {
  margin-left: 20rpx;
}
.icon-star {
  width: 24rpx;
  height: 24rpx;
  margin-left: 12rpx;
}
.card-tags {
  width: 100%;
  height: 65%;
}

.border-wrap {
  margin: 0 auto;
  width: 616rpx;
  height: 2rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: nowrap;
}
.border {
  width: 18rpx;
  flex-grow: 0;
  height: 2rpx;
  background: #dddddd;
}

.card-tags {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 40rpx;
  /* padding-bottom: 90rpx; */
  flex-direction: column;
}
.tags-title {
  margin: 0 auto;
  font-size: 24rpx;
  font-weight: 400;
  color: #383838;
  display: flex;
  justify-content: center;
  align-items: center;
}

.tags {
  display: flex;
  justify-content: space-around;
  align-items: center;
  flex-wrap: wrap;
  padding: 20rpx 30rpx;
}
.tag {
  margin-top: 20rpx;
  margin-left: 10rpx;
  margin-right: 10rpx;
  height: 56rpx;
  padding: 10rpx 20rpx;
  box-sizing: border-box;
  border-radius: 28rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2rpx solid #eeeeee;
  color: #999999;
}
.selected {
  border: 2rpx solid #de2748;
  color: #de2748;
}
.textarea {
  width: 580rpx;
  height: 250rpx;
  height: 150rpx;
  padding-top: 18rpx;
  padding-left: 30rpx;
  font-size: 24rpx;
  color: #333;
  border: 2rpx solid #eeeeee;
  margin-top: 28rpx;
}
.textarea-p {
  color: #999999;
}
.btn-wrap {
  display: flex;
  justify-content: space-around;
  align-items: center;
}
.btn-wrap .submit {
  margin-right: 20rpx;
  width: 230rpx;
  height: 80rpx;
}
.submit {
  margin-top: 28rpx;
  width: 462rpx;
  height: 80rpx;
  background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
  border-radius: 40rpx;
  font-size: 32rpx;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
.disabled {
  width: 248rpx;
  height: 72rpx;
  color: #a42c21;
  background: #e7e7e7;
  border-radius: 50rpx;
}

.qrcodeAdd {
  display: flex;
  align-items: center;
  font-size: 24rpx;
  color: #999999;
  margin-top: 16rpx;
}
.qrcode {
  width: 40rpx;
  height: 40rpx;
  margin-left: 12rpx;
  background-size: 100% 100%;
  background-image: url('https://static.joymew.com/joymewMp/joymewIndex/estimate/comment-qrcode.png');
  animation: swing 1s linear infinite;
}
.more {
  width: 10rpx;
  height: 18rpx;
  margin-left: 8rpx;
  background-size: 100% 100%;
  background-image: url('https://static.joymew.com/joymewMp/joymewIndex/estimate/comment-more.png');
}

@keyframes swing {
  20% {
    -webkit-transform: rotate3d(0, 0, 1, 15deg);
    transform: rotate3d(0, 0, 1, 15deg);
  }

  40% {
    -webkit-transform: rotate3d(0, 0, 1, -10deg);
    transform: rotate3d(0, 0, 1, -10deg);
  }

  60% {
    -webkit-transform: rotate3d(0, 0, 1, 5deg);
    transform: rotate3d(0, 0, 1, 5deg);
  }

  80% {
    -webkit-transform: rotate3d(0, 0, 1, -5deg);
    transform: rotate3d(0, 0, 1, -5deg);
  }

  to {
    -webkit-transform: rotate3d(0, 0, 1, 0deg);
    transform: rotate3d(0, 0, 1, 0deg);
  }
}


@import './item.wxss';
````

## File: pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.js
````javascript
import { reqReward } from "../../../../../api/estimate";

Component({
  properties: {
    /**
     * å¼¹çª—åç§°
     *  å–å€¼: askLeave(ç¦»å¼€æŒ½ç•™å¼¹çª—),askReward(å¼•å¯¼æ‰“èµå¼¹çª—),reward(æ‰“èµå¼¹çª—)
     */
    popupName: {
      type: String,
      value: "",
    },
    sceneType: {
      type: String,
      value: "",
    },
  },

  data: {
    // å……å€¼åˆ—è¡¨
    charges: [
      {
        selected: false,
        price: 8.88,
      },
      {
        selected: false,
        price: 68.88,
      },
      {
        selected: false,
        price: 88.88,
      },
      {
        selected: false,
        price: null,
        cus: true,
      },
    ],
    cusfocus: false, // è‡ªå®šä¹‰æ‰“èµé‡‘é¢èšç„¦
    moneyInput: "", // è‡ªå®šä¹‰æ‰“èµé‡‘é¢
  },
  methods: {
    /**
     * å¤„ç†è¡Œä¸º
     * @param {String} actionName è¡Œä¸ºåç§°
     * å–å€¼: toAskLeave(æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—),toAskReward(æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—),toReward(æ‰“å¼€æ‰“èµå¼¹çª—),
     * closePopup(å…³é—­å¼¹çª—),reward(æ‰“èµ)
     */
    handleAction(e) {
      const actionName = e.currentTarget.dataset.actionname;
      // æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—
      if (actionName === "toAskLeave") {
        this.triggerEvent("actionChange", "toAskLeave");
      } else if (actionName === "toAskReward") {
        // æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—
        this.triggerEvent("actionChange", "toAskReward");
      } else if (actionName === "toReward") {
        // æ‰“å¼€æ‰“èµå¼¹çª—
        this.triggerEvent("actionChange", "toReward");
      } else if (actionName === "closePopup") {
        // å…³é—­å¼¹çª—
        this.triggerEvent("actionChange", "closePopup");
      } else if (actionName === "reward") {
        // æ‰“èµ
        this.rewardHe();
      }
    },
    /**
     * æ‰“èµ
     */
    async rewardHe() {
      const rewardPrice = this.rewardValidate();
      if (!rewardPrice) {
        return;
      }
      console.log("æ‰“èµé‡‘é¢:", rewardPrice);
      try {
        // 1ã€æ‰“èµ
        await reqReward({
          splid: wx.getStorageSync("liveId"),
          totalfee: rewardPrice,
        });
        wx.showToast({
          title: "æ‰“èµæˆåŠŸ!",
          icon: "none",
        });
        // 2ã€å…³é—­æ‰“èµå¼¹çª—
        this.triggerEvent("actionChange", "closePopup");
        setTimeout(() => {
          // 3ã€è·³è½¬æŠ½å¥–é¡µé¢
          wx.navigateTo({
            url: "/packageC/pages/draw/draw",
          });
        }, 300);
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "æ‰“èµå¤±è´¥!",
          icon: "none",
        });
      }
    },
    /**
     * æ‰“èµå‰çš„éªŒè¯
     */
    rewardValidate() {
      const targetCharge = this.data.charges.find((item) => item.selected);
      if (!targetCharge) {
        wx.showToast({
          title: "è¯·é€‰æ‹©æ‰“èµé‡‘é¢!",
          icon: "none",
        });
        return false;
      }
      if (targetCharge.cus && !this.data.moneyInput) {
        wx.showToast({
          title: "è¯·è¾“å…¥æ‰“èµé‡‘é¢!",
          icon: "none",
        });
        return false;
      }
      const price = targetCharge.cus
        ? this.data.moneyInput
        : targetCharge.price;
      return price;
    },
    /**
     * é€‰æ‹©æ‰“èµé‡‘é¢
     */
    chooseCharge(e) {
      const choosedIndex = e.currentTarget.dataset.index;
      const charges = this.data.charges;
      charges.forEach((item, index) => {
        item.selected = index === choosedIndex;
      });
      this.setData({
        charges,
        cusfocus: !!charges[choosedIndex].cus,
      });
    },
    /**
     * è¾“å…¥æ‰“èµé‡‘é¢
     */
    handleMoneyInput(e) {
      let tmpMoneyStr = e.detail.value;
      let r = /^\+?[1-9][0-9]*$/; //æ­£æ•´æ•°
      let flag = r.test(tmpMoneyStr);
      let list = this.data.charges;
      if (flag || tmpMoneyStr === "0.01") {
        // åªèƒ½æ˜¯æ­£æ•´æ•°æˆ–è€…æ˜¯0.01
        this.setData({
          moneyInput: tmpMoneyStr,
        });
      } else {
        this.setData({
          moneyInput: "",
        });
      }
    },
    /**
     * è‡ªå®šä¹‰æ‰“èµé‡‘é¢å¤±ç„¦
     */
    handleMoneyBlur(e) {
      this.setData({
        cusfocus: false,
      });
    },
  },
});
````

## File: pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.wxml
````
<!-- å¼•å¯¼æ‰“èµ -->
<view class="feedback-wrap" wx:if="{{popupName === 'askReward'}}">
  <view class="feedback-modal">
    <view class="thanks">æ„Ÿè°¢æ‚¨çš„è¯„ä»·ï¼</view>
    <view class="tips">å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦ï¼Œæ‰“èµé¼“åŠ±ä¸€ä¸‹å—ï¼Ÿ</view>
    <view class="btn-group">
      <view class="btn-leave" data-actionName='toAskLeave' bindtap="handleAction">å–æ¶ˆ</view>
      <view class="btn-encourage" data-actionName='toReward' bindtap="handleAction">é¼“åŠ±ä»–</view>
    </view>
  </view>
</view>
<!-- å©šç¤¼ç‰ˆæ‰“èµä¸»æŒäºº -->
<view class="pay-wrap" wx:if="{{popupName === 'reward' && sceneType === '0'}}" data-actionName='toAskLeave' bindtap="handleAction">
  <view class="pay-modal  {{sceneType == '0'?'spe':''}}" catchtap="prevent">
    <view class="end-poem">
      <view class="p1">å©šç¤¼å®Œç¾è½å¹•</view>
      <view class="p2">æˆ‘ä»¬å§‹ç»ˆç›¸ä¿¡ï¼Œå©šçº±æ˜¯å±äºæ¯ä¸€ä¸ªå¥³äººçš„ç«¥è¯</view>
      <view class="p3">
        èµ„æ·±ä¸»æŒäºº
        <view class="viewider"></view>
        å·²åœ¨å©šç¤¼ä¸€çº¿å¥‹æˆ˜2012å¤©
      </view>
    </view>
    <view class="charge-wrap">
      <block wx:for="{{charges}}" wx:for-item="item" wx:for-index="index" wx:key="index">
        <view wx:if="{{!item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="solid">æ‰“èµ</view>
          <view class="money" wx:if="{{!item.cus}}">
            <view class="unit">ï¿¥</view>
            {{item.price}}
          </view>
        </view>
        <view wx:if="{{item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="money cusmoney {{cusfocus?'focusmoney':''}}">
            <block wx:if="{{moneyInput&&!cusfocus}}">
              <view style="display:flex">
                <view class="unit">ï¿¥</view>
                {{moneyInput}}
              </view>
            </block>
            <block wx:if="{{!moneyInput&&!cusfocus}}">
              <view>åœŸè±ª</view>
              <view>è‡ªå®šä¹‰</view>
            </block>
            <block wx:if="{{cusfocus}}">
              <view class="unit">ï¿¥</view>
              <input class="cusprice" type="number" maxlength="4" value="{{moneyInput}}" bindinput="handleMoneyInput" bindblur="handleMoneyBlur" focus="{{cusfocus}}" />
            </block>
          </view>
        </view>
      </block>
    </view>
    <view class="director">å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦ï¼Œæ‰“èµé¼“åŠ±ä¸€ä¸‹å—ï¼Ÿ</view>
    <view class="charge-btn" data-actionName='reward' catchtap="handleAction">ç¡®è®¤æ‰“èµ</view>
  </view>
</view>
<!-- éå©šç¤¼ç‰ˆæ‰“èµä¸»æŒäºº -->
<view class="pay-wrap" wx:if="{{popupName === 'reward' && sceneType !== '0'}}" data-actionName='toAskLeave' bindtap="handleAction">
  <view class="pay-modal other " catchtap="prevent">
    <view class="end-poem">
      <view class="p1">æ´»åŠ¨å®Œç¾ç»“æŸ!</view>
    </view>
    <view class="charge-wrap">
      <block wx:for="{{charges}}" wx:for-item="item" wx:for-index="index" wx:key="index">
        <view wx:if="{{!item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="solid">æ‰“èµ</view>
          <view class="money" wx:if="{{!item.cus}}">
            <view class="unit">ï¿¥</view>
            {{item.price}}
          </view>
        </view>
        <view wx:if="{{item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="money cusmoney {{cusfocus?'focusmoney':''}}">
            <block wx:if="{{moneyInput&&!cusfocus}}">
              <view style="display:flex">
                <view class="unit">ï¿¥</view>
                {{moneyInput}}
              </view>
            </block>
            <block wx:if="{{!moneyInput&&!cusfocus}}">
              <view>åœŸè±ª</view>
              <view>è‡ªå®šä¹‰</view>
            </block>
            <block wx:if="{{cusfocus}}">
              <view class="unit">ï¿¥</view>
              <input class="cusprice" type="number" maxlength="4" value="{{moneyInput}}" bindinput="handleMoneyInput" bindblur="handleMoneyBlur" focus="{{cusfocus}}" />
            </block>
          </view>
        </view>
      </block>
    </view>
    <view class="director">å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦ï¼Œæ‰“èµé¼“åŠ±ä¸€ä¸‹å—ï¼Ÿ</view>
    <view class="charge-btn" data-actionName='reward' bindtap="handleAction">ç¡®è®¤æ‰“èµ</view>
  </view>
</view>
````

## File: pages/estimateOld/components/mark/markAfterQuery/markAfterQuery.wxss
````
.leave-wrap,
.feedback-wrap,
.pay-wrap {
  width: 100%;
  height: 100%;
  position: fixed;
  left: 0;
  top: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 100;
}
.leave-modal,
.feedback-modal {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 538rpx;
  height: 546rpx;
  background: #ffffff;
  border-radius: 16rpx;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.feedback-modal {
  background-size: 100% auto;
  background-position-y: -2rpx;
  background-image: url('https://static.hudongmiao.com/joymewMp/joymewIndex/estimate/top.png');
  background-repeat: no-repeat;
}
.leave-modal .leave {
  width: 100%;
  margin-top: 20rpx;
  padding: 0 30rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #333333;
  letter-spacing: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}
.feedback-modal .thanks {
  width: 100%;
  margin-top: 220rpx;
  font-size: 34rpx;
  font-weight: 600;
  color: #e33555;
  letter-spacing: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.emjoy {
  width: 184rpx;
  height: 188rpx;
  background-image: url('https://ustatic.hudongmiao.com/joymewMp/joymewIndex/estimatehappy.png');
  background-size: 100% 100%;
}
.tips {
  margin-top: 20rpx;
  padding: 0 30rpx;
  font-size: 24rpx;
}
.btn-group {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-around;
}
.btn-leave,
.btn-encourage {
  margin-top: 40rpx;
  width: 218rpx;
  height: 72rpx;
  border-radius: 50rpx;
  display: flex;
  align-items: center;
  justify-content: center;
}
.btn-leave {
  color: #a42c21;
  background: linear-gradient(180deg, #fff6f6 0%, #ffd4d7 100%);
}
.btn-encourage {
  color: #ffffff;
  background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
}
.pay-modal {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 672rpx;

  box-sizing: content-box;
  background: #fff;
  border-radius: 24rpx 24rpx 0rpx 0rpx;
}
.pay-modal.spe{
  padding-bottom: 240rpx;
}

.end-poem {
  width: 100%;
  height: 210rpx;
  background: linear-gradient(133deg, #dc2244 0%, #ff869c 100%);
  border-radius: 24rpx 24rpx 0rpx 0rpx;
  color: white;
  padding-top: 30rpx;
  padding-left: 60rpx;
}
.pay-modal.other .end-poem {
  height: 100rpx;
}
.p1 {
  font-size: 32rpx;
}
.p2 {
  margin-top: 16rpx;
  font-size: 24rpx;
}
.p3 {
  width: 60%;
  margin-top: 16rpx;
  font-size: 20rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.divider {
  width: 2rpx;
  height: 20rpx;
  opacity: 0.4;
  border: 1rpx solid #ffffff;
}

.charge-wrap {
  padding: 48rpx 54rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.charge {
  width: 148rpx;
  height: 118rpx;
  background: linear-gradient(180deg, #fff6f6 0%, #ffd4d7 100%);
  border-radius: 8rpx;
  color: #a42c21;
  font-size: 32rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.chargeSelected {
  color: white;
  background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
}
.money {
  display: flex;
  justify-content: center;
  align-items: center;
}
.cusmoney {
  font-size: 24rpx;
  flex-direction: column;
}
.focusmoney {
  flex-direction: row;
  padding: 5rpx;
}

.solid {
  font-size: 24rpx;
}
.unit {
  font-size: 22rpx;
}
.director {
  font-size: 24rpx;
  margin: 0 auto;
  text-align: center;
}
.charge-btn {
  margin: 0 auto;
  width: 462rpx;
  height: 80rpx;
  background: linear-gradient(180deg, #ff869c 0%, #dc2244 100%);
  border-radius: 40rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 64rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #ffffff;
}
````

## File: pages/estimateOld/components/mark/qrcode/qrcode.js
````javascript
Component({
  properties: {
    hostWechatQrcode: {
      type: String,
      value: ''
    }
  },

  data: {

  },
  methods: {
    /**
     * å…³é—­äºŒç»´ç 
     */
    closeQrcode() {
      this.triggerEvent('toggleQrcode');
    }
  }
})
````

## File: pages/estimateOld/components/mark/qrcode/qrcode.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/mark/qrcode/qrcode.wxml
````
<view class="qrcode-wrap" catchtap="closeQrcode">
  <view class="qrcode-modal">
    <image src="{{hostWechatQrcode}}" class="qrcode-cus" show-menu-by-longpress='true'></image>
    <view class="save">å¦‚æœ‰ä¸»æŒéœ€æ±‚ï¼Œè¯·é•¿æŒ‰äºŒç»´ç æ·»åŠ ä¸»æŒäººå¾®ä¿¡ã€‚</view>
  </view>
  <view class="qrcode-close"></view>
</view>
````

## File: pages/estimateOld/components/mark/qrcode/qrcode.wxss
````
.qrcode-wrap {
  width: 100%;
  height: 100%;
  position: fixed;
  font-size: 32rpx;
  left: 0;
  top: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 100;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.qrcode-modal {
  width: 480rpx;
  height: 580rpx;
  padding: 20rpx;
  background-color: #fff;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  flex-direction: column;
  border-radius: 8rpx;
}
.qrcode-close {
  width: 68rpx;
  height: 68rpx;
  margin-top: 63rpx;
  background-size: 100% 100%;
  background-image: url('https://static.joymew.com/joymewMp/joymewIndex/estimate/comment_close.png');
}
.qrcode-cus {
  width: 440rpx;
  height: 440rpx;
}
.save {
  margin-top: 30rpx;
  font-size: 24rpx;
  padding: 0 10rpx;
}
````

## File: pages/estimateOld/components/mark/rateStar/rateStar.js
````javascript
// components/rateStar/rateStar.js
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    rate: {
      type: Number,
      value: 0
    },
    size: {
      type: String,
      value: ''
    },    
    edit: {
      type:Boolean,
      value: false
    }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {

  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    setRate(e){
      if(!this.data.edit){
        return 
      }
      let rate = e.currentTarget.dataset.rate
			this.triggerEvent('change', rate)
    }
  }
})
````

## File: pages/estimateOld/components/mark/rateStar/rateStar.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/mark/rateStar/rateStar.wxml
````
<view class="wrapper">
  <block wx:for="{{[1,2,3,4,5]}}" wx:for-item="item" wx:for-index="index" wx:key="index" >
    <image class="star-icon {{size}}" src="https://static.hudongmiao.com/joymewMp/img/unstar.png" data-rate="{{item}}" bindtap="setRate" wx:if="{{rate<item}}"></image>
    <image class="star-icon {{size}}" src="https://static.hudongmiao.com/joymewMp/img/star.png" data-rate="{{item}}" bindtap="setRate" wx:if="{{rate>=item}}"></image>
  </block>
</view>
````

## File: pages/estimateOld/components/mark/rateStar/rateStar.wxss
````
/* components/rateStar/rateStar.wxss */
.wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
}

.star-icon{
  width: 28rpx;
  height: 28rpx;
  margin-left: 12rpx;
}
.big{
  width: 42rpx;
  height: 42rpx;
  margin: 0 6rpx;
}
.bigger{
  width: 52rpx;
  height: 52rpx;
  margin: 0 20rpx;
}
````

## File: pages/estimateOld/components/mark/replyInput/replyInput.js
````javascript
// components/replyInput/replyInput.js
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    focus: {
      type: Boolean
    },
    initContent: {
      type: String,
    },
    username: {
      type: String,
    }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    InputBottom: 0,
    content: '',
  },
  lifetimes: {
    attached(){
      console.log('attach')
      console.log(this.data.initContent)
      this.setData({
        content: this.data.initContent
      })
    }
  },
  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    preventBubble(){

    },
    InputFocus(e) {
      this.setData({
        InputBottom: e.detail.height
      })
    },
    InputBlur(e) {
      this.setData({
        InputBottom: 0
      })
    },
    InputChange(e){
      const {value} = e.detail
      this.setData({
        content: value
      })
      this.triggerEvent('input', value)
    },
    sendReply(){
      this.triggerEvent('send', this.data.content)
    }
  }
})
````

## File: pages/estimateOld/components/mark/replyInput/replyInput.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/estimateOld/components/mark/replyInput/replyInput.wxml
````
<!--components/replyInput/replyInput.wxml-->
<view class="cu-bar foot input {{InputBottom!=0?'cur':''}}" style="bottom:{{InputBottom}}px" catchtap="preventBubble">
  <view class="toPerson">
  å›å¤  <view class="username">{{username}}</view>:
  </view>
  <input class="solid-bottom" bindfocus="InputFocus" bindblur="InputBlur" adjust-position="{{false}}" focus="{{focus}}" maxlength="300" cursor-spacing="10"
  bindinput="InputChange"
  bindconfirm="sendReply"
  value="{{content}}"
  ></input>
  <button class="cu-btn bg-green shadow" bindtap="sendReply">å‘é€</button>
</view>
````

## File: pages/estimateOld/components/mark/replyInput/replyInput.wxss
````
/* components/replyInput/replyInput.wxss */

.cu-bar.foot {
  --white: #fff;
  padding-right: 20rpx;
  background-color: var(--white);
  position: fixed;
  width: 100%;
  bottom: 0;
  z-index: 1024;
  box-shadow: 0 -1rpx 6rpx rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  min-height: 100rpx;
  justify-content: space-between;
}

.solid-bottom {
  position: relative;
  overflow: initial;
  line-height: 64rpx;
  height: 64rpx;
  min-height: 64rpx;
  flex: 1;
  font-size: 30rpx;
  margin: 0 20rpx;
  font-size: 24rpx;
}

.solid-bottom::after {
  content: " ";
  width: 200%;
  height: 200%;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: inherit;
  transform: scale(0.5);
  transform-origin: 0 0;
  pointer-events: none;
  box-sizing: border-box;
}

.cu-btn {
  --white: #ffffff;
  --green: #39b54a;
  --ShadowSize: 6rpx 6rpx 8rpx;
  --greenShadow: rgba(48, 156, 63, 0.2);
  box-shadow: var(--ShadowSize) var(--greenShadow);
  background-color: var(--green);
  color: var(--white);
  position: relative;
  border: 0rpx;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  padding: 0 30rpx;
  font-size: 28rpx;
  height: 64rpx;
  line-height: 1;
  text-align: center;
  text-decoration: none;
  overflow: visible;
  margin-left: initial;
  transform: translate(0rpx, 0rpx);
  margin-right: initial;
}
.cu-btn.button-hover {
  transform: translate(1rpx, 1rpx);
}
.toPerson {
  font-size: 24rpx;
  margin-left: 20rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.username {
  max-width: 130rpx;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
````

## File: pages/estimateOld/components/mark/star.wxs
````
function getStarName(starNum) {
  // æ»¡æ„åº¦åˆ—è¡¨
  var SATISFACTIONS = ['', 'éå¸¸å·®', 'å·®', 'ä¸€èˆ¬', 'æ»¡æ„', 'è¶…èµ'];
  return SATISFACTIONS[starNum];
}

module.exports = {
    getStarName: getStarName
}
````

## File: pages/estimateOld/estimate.js
````javascript
import { reqGetHostInfo } from "../../api/estimate";
import { reqRecordVisitCount } from '../../api/hostingStyle'

const app = getApp();

const DEFAULT_REVIEW_BG = 'https://ustatic.hudongmiao.com/joymew-mp/review/weddingBg.png';
const WEDDING_BG =
  "https://static.joymew.com/joymewScreen/img/background/weddingBg02.png";

const dateTransform = (timedata) => {
  const newDate = new Date(timedata);
  const Year = newDate.getFullYear();
  const Month = newDate.getMonth() + 1 < 10 ? `0${newDate.getMonth() + 1}` : newDate.getMonth() + 1;
  const d = newDate.getDate() < 10 ? `0${newDate.getDate()}` : newDate.getDate();
  const Hours = newDate.getHours() < 10 ? `0${newDate.getHours()}` : newDate.getHours();
  const Minutes = newDate.getMinutes() < 10 ? `0${newDate.getMinutes()}` : newDate.getMinutes();
  const Seconds = newDate.getSeconds() < 10 ? `0${newDate.getSeconds()}` : newDate.getSeconds();
  const overTime = `${Year}/${Month}/${d} ${Hours}:${Minutes}:${Seconds}`;
  return overTime;
}

Page({
  data: {
    // titleBarHeight: 0, // æ ‡é¢˜æ é«˜åº¦
    // statusBarHeight: 0, // çŠ¶æ€æ é«˜åº¦
    sceneType: "", // æ´»åŠ¨ç‰ˆæœ¬
    markData: { // è¯„åˆ†é¡µé¢æ•°æ®
      hostAvatar: "", // ä¸»æŒäººå¤´åƒ
      hostName: "", // ä¸»æŒäººæ˜µç§°
      hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
      hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
      starNum: 0, // æ‰“å‡ åˆ†?
      tags: [], // æ ‡ç­¾åˆ—è¡¨
      markContent: "", // è¯„åˆ†å†…å®¹
      commentInfo: {
        // è¯„è®ºç›¸å…³å†…å®¹
        my: {
          // æˆ‘çš„è¯„è®ºä¿¡æ¯
          id: "",
          avatar: "",
          nickname: "",
          content: "",
          time: "",
        },
        chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
      },
    },
    reviewData: { // ç°åœºå›é¡¾é¡µé¢æ•°æ®
      currentPage: 1, // å½“å‰é¡µæ•°
      showCount: 10, // æ¯é¡µæ˜¾ç¤ºæ•°é‡
      totalPage: 1, // æ€»é¡µæ•°
      bgImg: '', // èƒŒæ™¯
      rankInfo: { // ä¸ªäººé€ç¥ç¦æ’è¡Œä¿¡æ¯
        name: '',
        avatar: '',
        value: '',
        rank: '',
      },
      hostReview: { //ä¸»æŒäººå‘å¸ƒçš„ä¿¡æ¯
        name: "", // ä¸»æŒäººåç§°
        avatar: "", // ä¸»æŒäººå¤´åƒ
        count: 1, // å‘é€å›¾ç‰‡æ•°é‡æˆ–å¼¹å¹•æ•°é‡
        action: 1, // å‘é€çš„æ˜¯å›¾ç‰‡è¿˜æ˜¯å¼¹å¹• 1:å›¾ç‰‡ 2:å¼¹å¹•
        imgs: [], // å›¾ç‰‡åˆ—è¡¨
        datetime: "", // å‘é€æ—¶é—´
        userType: 0, // 0:ä¸»æŒäºº 1:å˜‰å®¾
      },
      recorderList: [], // ç°åœºå›é¡¾çš„ä¿¡æ¯åˆ—è¡¨
    }
  },
  onLoad(options) {
    const { splid } = options;
    app.splidInfo_setSplidInfo({ liveId: splid });
    this.initData();
    // ç»Ÿè®¡è®¿é—®æ¬¡æ•°
    reqRecordVisitCount(this.data.liveId);
  },
  onShow() {},
  onUnload() {},
  onHide() {},

  /**
   * åˆå§‹åŒ–æ•°æ®
   */
  async initData() {
    try {
      const hostInfo = await reqGetHostInfo({
        splid: app.globalData.splidInfo_liveId,
      });
      // console.log("å…¨å±€æ•°æ®");
      // console.log(app.globalData);
      console.log("hostInfo:", hostInfo);
      const { splidInfo, myCommentInfo, labelList } = hostInfo.data;
      // ç®—å‡ºè¯„åˆ†é¡µé¢æ•°æ®
      const markData = this.getMarkData(splidInfo, myCommentInfo, labelList);
      console.log("è¯„åˆ†é¡µé¢æ•°æ®ï¼š", markData);
      // æ•°æ®æ±‡æ€»
      this.setData({
        markData,
        sceneType: splidInfo.scenario,
      });
    } catch (err) {
      console.log(err);
      if (err === "401") {
        app.userInfo_authLogin(this.initData.bind(this));
      }
    }
  },
  /**
   * é¡µé¢åˆ‡æ¢
   */
  onChangePage(e) {
    const page = e.detail.page;
    if(page === 'review') {
      console.log('è·³è½¬ç°åœºå›é¡¾é¡µé¢');
    } else if(page === 'reserve') {
      console.log('è·³è½¬é¢„å®šé¡µé¢');
    }
  },
  /**
   * ç®—å‡ºè¯„åˆ†é¡µé¢æ•°æ®
   */
  getMarkData(splidInfo, myCommentInfo, labelList) {
    const { avator, emcee_name, comment_json } = splidInfo;
    const satisfaction = myCommentInfo?.satisfaction ?? 0;
    const markData = {
      // è¯„åˆ†é¡µé¢æ•°æ®
      hostAvatar: "", // ä¸»æŒäººå¤´åƒ
      hostName: "", // ä¸»æŒäººæ˜µç§°
      hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
      hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
      starNum: 0, // æ‰“å‡ åˆ†?
      tags: [], // æ ‡ç­¾åˆ—è¡¨
      markContent: "", // è¯„åˆ†å†…å®¹
      commentInfo: {
        // è¯„è®ºç›¸å…³å†…å®¹
        my: {
          // æˆ‘çš„è¯„è®ºä¿¡æ¯
          avatar: "",
          nickname: "",
          content: "",
          time: "",
        },
        chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
      },
    };

    markData.hostAvatar = avator;
    markData.hostName = emcee_name;
    markData.hostWechatQrcode = comment_json;
    markData.hasMarked = !!myCommentInfo;
    markData.starNum = satisfaction;
    markData.tags = labelList.map((item) => {
      let selected = false;
      if (myCommentInfo) {
        const choosedLabel = myCommentInfo.label.split(",");
        selected = choosedLabel.includes(item.id);
      }
      return {
        info: item.bg_name,
        id: item.id,
        selected,
      };
    });
    if (myCommentInfo) {
      markData.commentInfo.my.id = myCommentInfo.album_comment_id;
      markData.commentInfo.my.avatar = myCommentInfo.avatar;
      markData.commentInfo.my.nickname = myCommentInfo.nickname;
      markData.commentInfo.my.content = myCommentInfo.content;
      markData.commentInfo.my.time = myCommentInfo.comment_time;
      markData.commentInfo.chatList = myCommentInfo.chat_list ? myCommentInfo.chat_list.map((item) => ({
        ...item,
        nickname: item.type === "5" ? "æˆ‘" : item.nickname,
      })) : [];
    }

    return markData;
  },
  /**
   * ç®—å‡ºç°åœºå›é¡¾é¡µé¢æ•°æ®
   */
  getReviewData(messageMap, backInfo, user, loveVal, size) {
    const reviewData = {
      totalPage: 1,
      bgImg: '',
      rankInfo: null,
      hostReview: null,
      recorderList: null,
    };
    reviewData.totalPage = messageMap?.totalPages ? messageMap.totalPages : 1;
    reviewData.bgImg = backInfo?.phone_piclink
    ? backInfo.phone_piclink
    : DEFAULT_REVIEW_BG;
    reviewData.rankInfo = {
      name: user?.wx_name ?? '',
      avatar: user?.avator ?? '',
      value: loveVal ?? '',
      rank: size ?? '',
    };
    reviewData.hostReview = {
      name: backInfo?.siyi_info?.emcee_name
      ? backInfo.siyi_info.emcee_name
      : "",
      avatar: backInfo?.siyi_info?.avator
      ? backInfo.siyi_info.avator
      : "",
      count: backInfo?.list?.length > 0 ? backInfo.list.length : 1,
      action: 1,
      imgs:  backInfo?.list?.length > 0
      ? backInfo.list.map(
          (item) => `https://ustatic.hudongmiao.com/${item.piclink}`
        )
      : [WEDDING_BG],
      datetime:
      backInfo?.list?.length > 0
        ? dateTransform(backInfo.list[0].create_time)
        : "",
      userType: 0,
    };
    if(reviewData.bgImg) {
      reviewData.hostReview.imgs.push(reviewData.bgImg);
      reviewData.hostReview.count += 1;
    }
    reviewData.recorderList = messageMap.chat_list.map((item) => ({
      id: item.id,
      name: item.miaoName,
      avatar: item.miaoTxUrl,
      count: 1,
      action: item.miaoTpUrl ? 1 : 0,
      dm: item.miaoContent,
      imgs: [item.miaoTpUrl],
      datetime: dateTransform(item.sendTime),
      userType: item.miaoType
    }));

    return reviewData;
  },
  /**
   * è¯„åˆ†é¡µé¢æ•°æ®å‘ç”Ÿå˜åŒ–
   * @param {Object} changedData æ•°æ®æ ¼å¼åŒmarkData
   */
  onMarkDataChange(e) {
    this.setData({
      markData: e.detail,
    });
  },
});
````

## File: pages/estimateOld/estimate.json
````json
{
  "usingComponents": {
    "mark": "./components/mark/mark",
    "eFooter": "./components/eFooter/eFooter"
  },
  "navigationBarTitleText": "ä¸»æŒè¯„åˆ†"
}
````

## File: pages/estimateOld/estimate.wxml
````
<view class="estimate">
    <!-- è¯„åˆ†æ¨¡å— -->
    <mark markData="{{markData}}" sceneType="{{sceneType}}" bindrefreshData="initData" bindmarkdataChange="onMarkDataChange"/>
    <!-- åº•éƒ¨èœå• -->
    <eFooter activePage="mark" bindpageChange="onChangePage" />
</view>
````

## File: pages/estimateOld/estimate.wxss
````
.estimate {
  width: 100vw;
  min-height: 100vh;
  background-color: #edeeee;
  padding-top: 32rpx;
  padding-bottom: 140rpx;
}
````

## File: pages/index/index.js
````javascript
import { reqGetChatRecord, reqSendChatMessage } from "../../api/message";
import { getRandom, getCurrentDate } from "../../utils/index";

const WISH = [
  "åå¹´ä¿®å¾—åŒèˆ¹æ¸¡ï¼Œç™¾å¹´ä¿®å¾—å…±æ•çœ ï¼",
  "è¡·å¿ƒçš„ç¥ç¦ä½ ä»¬ï¼šç›¸äº’çæƒœï¼ŒåŒå¿ƒæ°¸ç»“ï¼",
  "ç¥ç¦ä½ ä»¬æ°¸è¿œäº’æ•¬äº’çˆ±ï¼Œç”œç¾å¹¸ç¦ï¼",
  "æ¯”ç¿¼é½é£ï¼Œäº‹ä¸šæ›´æ˜Œç››ï¼",
  "ç¾æ»¡è‰¯ç¼˜ï¼Œç™½é¦–æˆçº¦ï¼",
  "æ„¿ä½ ä»¬ç›¸äº²ç›¸çˆ±ï¼Œæ°¸ç»“åŒå¿ƒï¼",
  "å’Œå’Œç¾ç¾ï¼Œç™½å¤´å•è€ï¼",
  "æ­å–œä½ å¤§å©šè¾¾æˆï¼Œç¥ç¦ä½ ä»¬ç›Ÿç»“è‰¯ç¼˜ï¼",
  "æ„¿ä½ ä»¬ä¸€ç›´å¸¦ç€è¿™å–œæ‚¦å’Œå¹¸ç¦èµ°è¿›äººç”Ÿçš„æ–°ç¯‡ç« ï¼",
  "ç¥ä½ ä»¬å±±ç›Ÿæ°¸åœ¨ã€æµ·èª“é•¿å­˜ï¼",
  "ç¥å¤©å¤©æ©æ©çˆ±çˆ±ï¼æ–°å©šå¿«ä¹ï¼",
  "éœ²å‡ºå¹¸ç¦çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨ç¥ç¦ä¸­ã€‚",
  "ç¥ä½ ä»¬æ–°å©šå¿«ä¹ã€æ°¸è¿œå¹¸ç¦ï¼",
  "å©šå§»æ°¸ç¾æ»¡ï¼Œå¹¸ç¦åœ¨äººé—´ï¼æ­å–œæ­å–œï¼",
  "åŒå¿ƒç»“å·²æˆï¼Œæ„¿çˆ±æ°¸åŒè¡Œï¼",
  "ç¥ä½ ä»¬ç™¾å¹´æ©çˆ±ç»“è¿ç†ï¼Œä¸€ç”Ÿå¹¸ç¦æ°¸åŒå¿ƒï¼",
  "ç™¾å¹´å¥½åˆï¼æ–°å©šæ„‰å¿«ï¼Œç”œç”œèœœèœœï¼æ—©ç”Ÿè´µå­ï¼",
  "ç¥ä½ ä»¬ç›¸äº²ç›¸çˆ±ä¸€ç™¾å¹´ä¸åŠ¨æ‘‡ï¼",
  "æµ·æ¯çŸ³çƒ‚åŒå¿ƒæ°¸ç»“ï¼Œåœ°é˜”å¤©é«˜æ¯”ç¿¼é½é£ï¼",
  "ç è”å£åˆæ´æˆ¿æ˜¥æš–ï¼ŒèŠ±å¥½æœˆåœ†é±¼æ°´æƒ…æ·±ï¼",
  "æ–°å©šå¿«ä¹ï¼æˆ‘ä»¬ä¸€èµ·æ‘‡çº¢åŒ…ã€åšgameã€ä¸­å¤§å¥–ã€æ²¾å–œæ°”ï¼Œå—¨èµ·æ¥ï¼",
]; // æ‰€æœ‰é»˜è®¤ç¥ç¦è¯­åˆ—è¡¨
const QUICKWISH = [
  "æ­å–œæ‰¾åˆ°è‡ªå·±çš„é•¿å¾ä¼´ä¾£ã€‚",
  "ç»“å®Œå©šï¼Œç”Ÿå®Œå­©å­ï¼Œèµ¶ç´§å›æ¥å¼€é»‘ï¼",
  "è¯·å–è¶´æˆ‘",
  "æ¥äº†æ¥äº†ï¼Œå¹²é¥­äººï¼Œå¹²é…’äºº",
  "å¤§å®¶è¯´è¯´ï¼Œæ–°éƒæœ‰æˆ‘å¸…å—",
  "å“¥ä»¬,åŠ æ²¹,ä»¥åå·¥èµ„ä¸Šäº¤,å‡ºé—¨äº¤ä»£",
  "å…„å¼Ÿï¼Œæ—©ç”Ÿè´µå­ï¼Œç™¾å¹´å¥½åˆï¼Œæ—©ç”Ÿè´µå­",
  "è¦ç‹ ç‹ çš„å¹¸ç¦åˆ°ç™½å¤´^o^",
  "å¨¶è€å©†å’¯ï¼å¿ƒé‡Œç¾æ»‹æ»‹",
  "æˆ‘ç»™ä½ ä¿©å¹¸ç¦åŠ ç‚¹ç³–",
  "ä½ æˆ‘å…±å¯Œè´µï¼å¤šç”Ÿå­©å­å¤šç§æ ‘ï¼",
  "å“¦è€¶ï¼Œæˆ‘ä¸ç®¡æˆ‘æœ€å¸…ï¼",
  "æ–°å¨˜å¤ªç¾äº†",
  "æ–°å©šå¿«ä¹",
  "æ–°éƒä»Šå¤©æœ‰ç‚¹å¸…",
  "æ­å–œä½ æ‰¾åˆ°äº†ä»Šç”Ÿå”¯ä¸€çµé­‚ä¹‹ä¼´ä¾£ã€‚",
  "ä¸»æŒäººä»Šå¤©å¾ˆå¸…ï¼Œä½†æ˜¯å’Œæˆ‘å…„å¼Ÿæ–°éƒæ¯”ï¼Œè¿˜å·®ä¸€ç‚¹ç‚¹",
  "æ–°éƒä»Šå¤©å¤ªå¸…äº†ï¼Œå‘ä¸ªå¤§çº¢åŒ…å§",
  "å¤§å®¶åƒå¥½å–å¥½ç©å¥½ï¼Œå¾…ä¼šè¿˜æœ‰æŠ¢çº¢åŒ…",
  "å–å®Œå–œé…’ï¼Œæ™šä¸Šéº»å°†ä¸‰ç¼ºä¸€ï¼Œæ¥çš„æ‰£666",
  "çœ‹ä½ ä»¬å¤§å©šäº†ï¼Œæˆ‘ä¹Ÿæƒ³æ‰¾ä¸ªå¯¹è±¡",
  "æ˜å¹´è¿™æ—¶å€™æ˜¯ä¸æ˜¯è¯¥å–å­©å­çš„æ»¡æœˆé…’å•¦",
  "ä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å®‰æ’ï¼ç¥æ–°å©šå¿«ä¹ï¼Œä¸€ç”Ÿæ¬¢å–œï¼",
  "ä¸€ç”Ÿä¸€ä¸–ä¸¤æƒ…ç›¸æ‚¦ï¼Œä¸‰ä¸–å°˜ç¼˜å››ä¸–åŒå–œï¼Œäº”è°·ä¸°ç™»å…­å…­é¡º",
  "ä¸­å›½é¦–å¯Œç¥ä½ ä»¬å©šå¿«ä¹æ°¸ç»“åŒå¿ƒ",
  "å¤§å°å§ä¸€å®šè¦å¼€å¿ƒå¹¸ç¦å•Š æ¥è‡ªä½ æœ€ç‰¢é çš„ç²‰ä¸åæ´å›¢",
  "ç¥å„ä½åƒå¥½å–å¥½!",
  "å¤©ç”Ÿæ‰å­ä½³äººé…ï¼Œåªç¾¡é¸³é¸¯ä¸ç¾¡ä»™ã€‚",
  "å¥¥åˆ©ç»™ æˆ‘æœ€ç¾æˆ‘æœ€å¸… æˆ‘æ˜¯äººé—´å°å¯çˆ±",
  "ä»Šæ™šå¤§å¥–èŠ±è½è°å®¶ğŸŒ¸ ğŸŒ¸",
  "éƒæ‰å¥³è²Œï¼Œç“œç“å»¶ç»µ",
  "ä¸»æŒäººå¸…çš„æ»‘ä¸",
  "ç¾æ»¡è‰¯ç¼˜ï¼Œç™½é¦–æˆçº¦ï¼",
  "æ¯”ç¿¼é½é£ï¼Œäº‹ä¸šæ›´æ˜Œç››ï¼",
  "å’Œå’Œç¾ç¾ï¼Œç™½å¤´å•è€ï¼",
  "å—¨èµ·æ¥ï¼Œè‰¾ç‘å·´è’‚",
  "ç è¿å£åˆï¼Œå¤©ä½œä¹‹ç¾",
  "æ¬¢åº†æ­¤æ—¥ç»“ä½³å¶ï¼Œä¸”å–œä»Šæœåº†è‰¯ç¼˜",
  "éœ²å‡ºå¹¸ç¦çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨ç¥ç¦ä¸­ã€‚",
  "å¹¸ç¦ä¸€å¯¹ï¼Œå¹¸ç¦ä¸€ç”Ÿã€‚",
  "ãŠ—ï¸æ–°å©šå¿«ä¹ï¼Œç™¾å¹´å¥½åˆï¼Œæ—©ç”Ÿè´µå­",
  "æ—©ç”Ÿä¸‰èƒèƒ",
  "å¹¸ç¦æ°¸è¿œå“ˆ",
  "æ–°éƒä»Šå¤©ä¹Ÿå¤ªå¸…äº†ï¼Œæ–°å¨˜ä¹Ÿè¶…çº§æ¼‚äº®",
  "ç¥äºŒä½æ–°äººæ°¸ç»“åŒå¿ƒ",
  "ç«ç®­ğŸš€ ğŸš€ğŸš€ğŸš€ ,èµ°ä¸€ä¸ª",
  "ğŸ’—ğŸ’—ğŸ’—ï¼å¹¸ç¦å‘¦",
  "everybaby  high èµ·æ¥ï¼",
]; // æ‰€æœ‰å¿«æ·ç¥ç¦è¯­åˆ—è¡¨
Page({
  data: {
    sendDanmuVisible: false, // å‘å¼¹å¹•å¼¹çª—æ˜¾ç¤º/éšè—
    message: "", // å¼¹å¹•å†…å®¹
    quickWishes: [], // å¿«æ·ç¥ç¦è¯­åˆ—è¡¨
    defaultWishes: [], // å‘å¼¹å¹•å¼¹çª—ä¸­çš„é»˜è®¤ç¥ç¦è¯­åˆ—è¡¨
    chatList: [], // èŠå¤©è®°å½•
    scrollTop: 0, // èŠå¤©è®°å½•æ»šåŠ¨é«˜åº¦
  },
  onLoad() {
    // åˆå§‹åŒ–æ•°æ®
    this.initData();
  },
  /**
   * å‘é€è‡ªå®šä¹‰/é»˜è®¤ç¥ç¦è¯­
   */
  async sendDanmu() {
    if(!this.data.message) {
      wx.showToast({
        title: 'è¯·é€‰æ‹©é»˜è®¤ç¥ç¦è¯­',
        icon: 'none',
      });
      return;
    }
    await reqSendChatMessage(this.data.message);
    this.insertChatMsg(this.data.message);
    this.setData({
      message: "",
      sendDanmuVisible: false,
    });
  },
  /**
   * è¾“å…¥é»˜è®¤ç¥ç¦è¯­
   */
  handleInput(e) {
    console.log(e.detail.value);
    this.setData({
      message: e.detail.value,
    });
  },
  /**
   * é€‰æ‹©é»˜è®¤ç¥ç¦è¯­
   */
  chooseDefaultWish(e) {
    console.log(e.currentTarget.dataset.index);
    this.setData({
      message: this.data.defaultWishes[e.currentTarget.dataset.index],
    });
  },
  /**
   * æ˜¾ç¤ºå‘å¼¹å¹•å¼¹çª—
   */
  showSendDanmu() {
    this.setData({
      sendDanmuVisible: true,
    });
  },
  /**
   * å…³é—­å‘å¼¹å¹•å¼¹çª—
   */
  closeSendDanmu() {
    this.setData({
      sendDanmuVisible: false,
    });
  },
  /**
   * æ–°å¢èŠå¤©è®°å½•
   */
  insertChatMsg(msg) {
   const chatItem = {
    miaoContent: msg,
    sendTime: getCurrentDate(),
    miaoName: wx.getStorageSync("nickname"),
    miaoTxUrl: wx.getStorageSync("avatar"),
   };
   const chatList = this.data.chatList;
   chatList.push(chatItem);
   this.setData({
      chatList,
      scrollTop: chatList.length * 200,
   });
  },
  /** 
   * é€‰æ‹©å¹¶å‘é€å¿«æ·ç¥ç¦è¯­
   */
  async chooseQuickWish(e) {
    console.log(e.currentTarget.dataset.index);
    // 1ã€æš‚å­˜é€‰ä¸­çš„å¿«æ·ç¥ç¦è¯­
    const targetIndex = e.currentTarget.dataset.index;
    const targetMsg = this.data.quickWishes[targetIndex];
    // 2ã€å‘æ¶ˆæ¯
    await reqSendChatMessage(targetMsg);
    // 3ã€æ›´æ–°èŠå¤©è®°å½•
    this.insertChatMsg(targetMsg);
    // 4ã€åˆ é™¤å½“å‰å¿«æ·ç¥ç¦è¯­
    const tmpQuickWish = this.data.quickWishes;
    tmpQuickWish.splice(targetIndex, 1);
    this.setData({
      quickWishes: tmpQuickWish,
    });
  },
  /**
   * åˆå§‹åŒ–èŠå¤©è®°å½•
   */
  async initChatRecord() {
    try {
      const chatRes = await reqGetChatRecord(wx.getStorageSync("liveId"));
      const list = chatRes.data.chat_list
        .filter((item) => !item.miaoLiwuId)
        .map((item) => ({
          ...item,
          sendTime: item.sentTime,
        }));
      console.log("èŠå¤©è®°å½•:", list);
      this.setData({
        chatList: list,
        scrollTop: list.length * 200,
      });
    } catch (err) {
      console.log(err);
    }
  },
  /**
   * è®¾ç½®ç¥ç¦è¯­åˆ—è¡¨
   * é»˜è®¤ç¥ç¦è¯­å’Œå¿«æ·ç¥ç¦è¯­
   */
  setWishList() {
    const tmpWishLen = WISH.length;
    const tmpWish = [];
    for (let i = 0; i < 5; i += 1) {
      tmpWish.push(WISH[getRandom(0, tmpWishLen)]);
    }
    const tmpQuickWishLen = QUICKWISH.length;
    const tmpQuickWish = [];
    for (let i = 0; i < 3; i += 1) {
      tmpQuickWish.push(QUICKWISH[getRandom(0, tmpQuickWishLen)]);
    }
    this.setData({
      defaultWishes: tmpWish,
      quickWishes: tmpQuickWish,
    });
  },
  /**
   * åˆå§‹åŒ–æ•°æ®
   * èŠå¤©è®°å½•ã€é»˜è®¤ç¥ç¦è¯­åˆ—è¡¨ã€å¿«æ·ç¥ç¦è¯­åˆ—è¡¨
   */
  initData() {
    // è®¾ç½®ç¥ç¦è¯­åˆ—è¡¨ é»˜è®¤ç¥ç¦è¯­å’Œå¿«æ·ç¥ç¦è¯­
    this.setWishList();
    // åˆå§‹åŒ–èŠå¤©è®°å½•
    this.initChatRecord();
  },
});
````

## File: pages/joymewIndex/styles/bby.wxss
````
/* ç­¾åˆ°å®å®å®´æ ·å¼ */
.signWrap.bby .bg {
  background-color: #e4c4c4;
}
.signWrap.bby .bg::before {
  display: block;
  content: "";
  background-size: 100% 100%;
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/bbyDeco02.png");
  width: 100%;
  height: 340rpx;
  position: absolute;
  top: 0;
}

.signWrap.bby .bg::after {
  display: block;
  content: "";
  background-size: 100% 100%;
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/bbyDeco01.png");
  width: 100%;
  height: 941rpx;
  position: absolute;
  top: 29rpx;
}

.signWrap.bby .signForm {
  background-color: #f9eded;
}

.signWrap.bby .signForm .formItem {
  align-items: center;
}

.signWrap.bby .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.bby .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid rgba(51, 51, 51, 0.6);
}

.signWrap.bby .signForm .buttonWrap .signButton {
  background: #fab0ce;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/birth.wxss
````
/* ç­¾åˆ°ç”Ÿæ—¥(é€šç”¨ç‰ˆ)æ ·å¼ */
.signWrap.birth .bg {
    background-image: url("https://static.joymew.com/joymewMp/joymewIndex/birthBg3.png");
  }
  
  .signWrap.birth .signForm {
    background-color: #dbfafe;
  }

  .signWrap.birth .signForm .formItem {
      align-items: center;
  }
  
  .signWrap.birth .signForm .formItem .formItem-key {
    color: #333;
    width: 135rpx;
  }
  .signWrap.birth .signForm .formItem .formItem-value {
    color: #333;
    border-bottom: 1rpx solid rgba(51, 51, 51, 0.6);
  }
  
  .signWrap.birth .signForm .buttonWrap .signButton {
    background: #fab0ce;
    border-radius: 45rpx;
  }
````

## File: pages/joymewIndex/styles/bly.wxss
````
/* ç­¾åˆ°ç™¾éœ²å®´æ ·å¼ */
.signWrap.bly .bg {
  background-image: url("https://static.hudongmiao.com/joymewMp/bly/blyBg.png");
}

.signWrap.bly .signForm {
  background-color: #f9eded;
}

.signWrap.bly .signForm .formItem {
  align-items: center;
}

.signWrap.bly .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.bly .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid rgba(51, 51, 51, 0.6);
}

.signWrap.bly .signForm .buttonWrap .signButton {
  background: #fab0ce;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/enterprise.wxss
````
/* ç­¾åˆ°ä¼ä¸šç‰ˆæ ·å¼ */
.signWrap.enterprise .bg {
  background-image: url("https://static.hudongmiao.com/joymewMp/joymewIndex/bg-annualMeeting01.png");
  background-size: cover;
  background-position-y: -20rpx;
  background-repeat: no-repeat;
}

.signWrap.enterprise .signForm {
  background-image: url("https://static.hudongmiao.com/joymewMp/joymewIndex/boxQy01.png");
}
.signWrap.enterprise .signForm .title {
  position: absolute;
  color: transparent;
  background-image: linear-gradient(45deg, #e4af57, #fce688);
  font-size: 60rpx;
  padding: 0 20rpx;
  -webkit-background-clip: text;
  width: 100%;
  top: -200rpx;
  text-align: center;
}

.signWrap.enterprise .signForm .formItem {
    align-items: center;
}

.signWrap.enterprise .signForm .formItem .formItem-key {
  color: #facd7f;
  width: 135rpx;
}
.signWrap.enterprise .signForm .formItem .formItem-value {
  color: #fff;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.6);
}

.signWrap.enterprise .signForm .buttonWrap .signButton {
  background-image: url('https://static.hudongmiao.com/joymewMp/joymewIndex/signBtnQy01.png');
}

.signWrap.enterprise .signForm .buttonWrap .signButton::after {
    content: "";
    display: none;
    position: absolute;
  }
````

## File: pages/joymewIndex/styles/sy.wxss
````
/* ç­¾åˆ°å¯¿å®´æ ·å¼ */
.signWrap.sy .bg {
    background-image: url('https://static.joymew.com/joymewMp/joymewIndex/syMobileBg4.png');
    background-size: cover;
    background-position-y: -180rpx;
    background-repeat: no-repeat;
  }
  .signWrap.sy .bg::before {
    display: block;
    content: "";
    background-size: 100% 100%;
    background-image: url("https://static.joymew.com/joymewMp/joymewIndex/lantern.png");
    width: 100%;
    height: 278rpx;
    position: absolute;
    top: 0;
  }

  
  .signWrap.sy .signForm {
    background-color: #cf1820;
  }
  .signWrap.sy .signForm::before {
    display: block;
    content: "";
    background-size: cover;
    background-image: url('https://static.joymew.com/joymewMp/joymewIndex/syMobileBg4.png');
    width: 750rpx;
    height: 400rpx;
    position: absolute;
    left: -50rpx;
    bottom: -433rpx;
    background-position-y: -800rpx;
  }
  
  .signWrap.sy .signForm .formItem {
    align-items: center;
  }
  
  .signWrap.sy .signForm .formItem .formItem-key {
    color: #fff;
    width: 135rpx;
  }
  .signWrap.sy .signForm .formItem .formItem-value {
    color: #fff;
    border-bottom: 1rpx solid #cc8c8c;
  }
  
  .signWrap.sy .signForm .buttonWrap .signButton {
    background: #fddd97;
    border-radius: 45rpx;
  }
````

## File: pages/joymewIndex/styles/wl.wxss
````
/* ç­¾åˆ°æ–‡æ—…æ ·å¼ */
.signWrap.wl .bg {
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/joymewIndex/wlBg.png");
}

.signWrap.wl .signForm {
 background-image: url(https://static.joymew.com/joymewMp/joymewIndex/signBoxBgHX.png);
}

.signWrap.wl .signForm .formItem {
  align-items: center;
}

.signWrap.wl .signForm .formItem .formItem-key {
  color: #fff;
  width: 135rpx;
}
.signWrap.wl .signForm .formItem .formItem-value {
  color: #fff;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.6);
}

.signWrap.wl .signForm .buttonWrap .signButton {
  background: #b3e0ee;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/ysy.wxss
````
/* ç­¾åˆ°åœ†é”å®´æ ·å¼ */
.signWrap.ysy .bg {
    background-image: url("https://ustatic.hudongmiao.com/joymewScreen/background/yxy/ysx-mobile_bg.png");
}

.signWrap.ysy .signForm {
    background-color: #cf1820;
}

.signWrap.ysy .signForm::before {
    display: block;
    content: "";
    background-size: cover;
    background-image: url('https://static.joymew.com/joymewMp/joymewIndex/ysyMobileBg4.png');
    width: 750rpx;
    height: 400rpx;
    position: absolute;
    left: -50rpx;
    bottom: -433rpx;
    background-position-y: -800rpx;
}

.signWrap.ysy .signForm .formItem {
    align-items: center;
}

.signWrap.ysy .signForm .formItem .formItem-key {
    color: #fff;
    width: 135rpx;
}

.signWrap.ysy .signForm .formItem .formItem-value {
    color: #fff;
    border-bottom: 1rpx solid #cc8c8c;
}

.signWrap.ysy .signForm .buttonWrap .signButton {
    background: #fddd97;
    border-radius: 45rpx;
}
````



## File: pages/joymewIndex/styles/zshl.wxss
````
/* ä¸­å¼å©šç¤¼æ ·å¼ */
.signWrap.zshl .bg {
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/welcomeBg.png");
  background-size: cover;
}
.signWrap.zshl .signForm::before {
  position: absolute;
  width: 588rpx;
  height: 232rpx;
  top: -380rpx;
  content: "";
  display: block;
  background-size: 100% 100%;
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/weTitle.png");
}
.signWrap.zshl .signForm {
  background-image: url('https://ustatic.joymew.com/joymewScreen/zshl/mobile/hbBox.png');
  background-size: 100% 100%;
  width: 726prx;
  height: 760rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
}
.signWrap.zshl .signForm.noAvatar.noPhone::after {
  content: "ä¸€èµ·çœ‹ç¾ç…§ã€é€ç¥ç¦ã€ç©æ¸¸æˆå§ï½";
  display: block;
  font-size: 29rpx;
  font-weight: 500;
  color: #dc5f22;
  text-align: center;
  width: 100%;
  position: absolute;
  top: 312rpx;
}
.signWrap.zshl .signForm .formItem {
  align-items: center;
  width: 550rpx;
  margin-bottom: 20rpx;
}
.signWrap.zshl .signForm.noAvatar .formItem {
  flex-direction: column;
  align-items: flex-start;
}
.signWrap.zshl .signForm .formItem .formItem-key {
  color: #dc5f22;
  width: 135rpx;
}
.signWrap.zshl .signForm.noAvatar .formItem .formItem-key {
  margin-bottom: 20rpx;
}
.signWrap.zshl .signForm .formItem .formItem-value {
  color: #f32647;
  border-bottom: 1rpx solid #dc5f22;
}
.signWrap.zshl .signForm.noAvatar .formItem .formItem-value {
  width: 100%;
}
.signWrap.zshl .signForm .formItem .formItem-value.chooseGroup {
  justify-content: space-around;
  border-bottom: none;
}
.signWrap.zshl .signForm .formItem .formItem-value.chooseGroup .chooseItem {
  width: 122rpx;
  height: 55rpx;
  background: #eecc85;
  border-radius: 20rpx;
  font-size: 28rpx;
  font-weight: 400;
  text-align: center;
  line-height: 55rpx;
  color: #ec6f31;
}
.signWrap.zshl
  .signForm
  .formItem
  .formItem-value.chooseGroup
  .chooseItem.choosed {
  color: #ffffff;
  background: #bc7b40;
}
.signWrap.zshl .signForm .buttonWrap .signButton {
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/btnBg.png");
  border-radius: 45rpx;
  width: 248rpx;
  height: 109rpx;
  position: relative;
  margin-top: 40rpx;
}

.signWrap.zshl .signForm .buttonWrap .signButton::after {
  top: 29rpx;
}
````

## File: pages/live/live.js
````javascript
const app = getApp();

Page({
  data: {
    liveH5Path: '',
  },
  onLoad() {
    this.setData({
      liveH5Path: app.globalData.splidInfo_liveH5Path
    });
    console.log(this.data.liveH5Path);
  },
  onShow() {
    console.log('éœ€è¦åˆ·æ–°å˜›?');
    console.log(app.globalData.splidInfo_needH5Refresh);
    if (app.globalData.splidInfo_needH5Refresh) {
      this.refreshH5();
    }
  },
  onShareAppMessage() {
    return {
      title: app.globalData.splidInfo_title,
      path: `/pages/joymewIndex/joymewIndex?liveId=${app.globalData.splidInfo_liveId}`,
    };
  },
  /**
   * åˆ·æ–°H5
   */
  refreshH5() {
    app.splidInfo_setLiveH5Path();
    this.setData({
      liveH5Path: app.globalData.splidInfo_liveH5Path
    });
    app.splidInfo_setSplidInfo({
      needH5Refresh: false
    });
  }
});
````

## File: pages/reserve/hostingStyle/hostingStyle.json
````json
{
  "component": true,
  "usingComponents": {
    "QrCodePopup": "./QrCodePopup/QrCodePopup",
    "reserveButtonnAndPopup": "../reserveButtonAndPopup/reserveButtonAndPopup",
    "work-list": "./WorkList/WorkList",
    "hosting-style-schedule": "./HostingStyleSchedule/HostingStyleSchedule",
    "hosting-style-comment-list": "./HostingStyleCommentList/HostingStyleCommentList"
  }
}
````

## File: pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.js
````javascript
const STAR = 'https://ustatic.hudongmiao.com/%20miao/hostingStyle/star.svg';
const STAR_HALF = 'https://ustatic.hudongmiao.com/%20miao/hostingStyle/star-half.svg';
const STAR_GRAY = 'https://ustatic.hudongmiao.com/%20miao/hostingStyle/star-gray.svg';
const starType = {
  full: 'fill',
  half: 'half',
  empty: 'empty',
};

/** æ ¹æ®åˆ†æ•°è¿”å›æ˜Ÿæ˜Ÿåˆ—è¡¨ */
const getStarList = (sf_avg) => {
  const fullStarCount = Math.floor(Number(sf_avg));
  const halfStarCount = Number(sf_avg) % 1 >= 0.5 ? 1 : 0;
  const emptyStarCount = 5 - Math.ceil(Number(sf_avg));
  const starList = [
    ...Array.from({
      length: fullStarCount
    }, () => ({
      src: STAR,
      type: starType.full,
    })),
    ...Array.from({
      length: halfStarCount
    }, () => ({
      src: STAR_HALF,
      type: starType.half,
    })),
    ...Array.from({
      length: emptyStarCount
    }, () => ({
      src: STAR_GRAY,
      type: starType.empty,
    })),
  ];

  return starList;
};

Component({
  properties: {
    profile: {
      type: Object,
      value: {},
    },
    commentInfo: {
      type: Object,
      value: {},
    },
    commentList: {
      type: Array,
      value: [],
    },
    // isShowCommentBtn: {
    //   type: Boolean,
    //   value: false,
    // },
    // hasCommented: {
    //   type: Boolean,
    //   value: false,
    // },
  },
  data: {
    starList: [],
    commentListWithStarList: [],
  },
  observers: {
    commentInfo(newVal) {
      if(newVal) {
        this.setData({
          starList: getStarList(newVal.sf_avg)
        });
      }
    },
    commentList(newVal) {
      this.setData({
        commentListWithStarList: newVal.map((item) => ({
          ...item,
          starList: getStarList(item.satisfaction),
        }))
      });
    }
  },
  methods: {
    // onClickCommentBtn() {
    //   this.triggerEvent('onClickCommentBtn');
    // },
  },
});
````

## File: pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.json
````json
{
  "component": true,
  "usingComponents": {}
}
````

## File: pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.scss
````scss
.container {
  width: 100%;

  padding: 16px;

  .overview {
    box-sizing: border-box;
    width: 100%;

    background: linear-gradient(101deg, #ff457a, #ff759d 100%);
    border-radius: 8px;

    padding: 16px;
    display: grid;
    grid-template:
      'avatar name' 1fr
      'avatar score' 1fr
      / min-content 1fr;
    align-items: center;
    gap: 4px 12px;

    .avatar {
      grid-area: avatar;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid #fff;
    }

    .name {
      grid-area: name;
      font-size: 14px;
      color: #fff;
    }

    .score {
      grid-area: score;

      width: 100%;

      display: flex;

      &__text {
        font-size: 12px;
        color: #fff;
      }

      &__num {
        font-size: 12px;
        color: #ffdd7e;
      }

      &__stars {
        margin-left: 16px;
        display: flex;
        column-gap: 4px;

        &--item {
          width: 16px;
          height: 16px;
        }
      }

      &__people {
        margin-left: 16px;
        font-size: 12px;
        color: #fff;
      }
    }
  }

  .comment {
    width: 100%;

    padding: 16px;
    display: flex;
    flex-direction: column;
    row-gap: 20px;

    &__total {
      font-size: 14px;
    }

    &__list {
      row-gap: 16px;

      display: flex;
      flex-direction: column;

      .comment__item {
        width: 100%;

        display: grid;
        grid-template:
          'avatar name time' min-content
          'avatar . .' 2px
          'avatar score .' min-content
          '. . .' 12px
          '. content content' min-content
          '. . .' 12px
          '. label-list label-list' min-content
          / min-content 1fr max-content;
        column-gap: 8px;

        .avatar {
          grid-area: avatar;
          align-self: center;
          width: 32px;
          height: 32px;
          border-radius: 50%;
        }

        .name {
          grid-area: name;

          width: 100%;

          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;

          font-size: 14px;
          line-height: 20px;
          color: #333;
        }

        .time {
          grid-area: time;
          align-self: center;
          font-size: 10px;
          line-height: 14px;
          color: #999;
        }

        .score {
          grid-area: score;
          height: 14px;

          display: flex;
          align-items: center;
          column-gap: 8px;

          &__text {
            font-size: 12px;
            color: #333;
          }

          &__star-list {
            display: flex;
            column-gap: 4px;

            .star-list__item {
              width: 12px;
              height: 12px;
            }
          }
        }

        .content {
          grid-area: content;
          font-size: 14px;
          color: #333;
        }

        .label-list {
          grid-area: label-list;

          display: flex;
          flex-wrap: wrap;
          gap: 8px;

          &__item {
            height: 25px;
            background: rgba(255, 69, 122, 0.2);
            border: 1px solid #ff457a;
            border-radius: 14px;

            padding: 4px 12px;
            display: flex;
            justify-content: center;
            align-items: center;

            font-size: 12px;
            color: #ff457a;
          }
        }
      }
    }
  }

  .comment-btn {
    position: fixed;
    right: 10px;
    bottom: 50.1333vw;

    width: 48px;
    height: 48px;
    background: radial-gradient(#ffcd7a, #fea858);
    border-radius: 37px;
    box-shadow: 2px 2px 4px 0px rgba(255, 255, 255, 0.25) inset,
      -2px -4px 4px 0px rgba(255, 247, 219, 0.25) inset;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    row-gap: 3px;

    font-size: 8px;
    line-height: 8px;
    color: #fff;

    .icon {
      width: 19px;
      height: 21px;
    }

    &--disabled {
      bottom: 8.8vw;
      background: #c3c2c1;
    }
  }
}
````

## File: pages/reserve/hostingStyle/HostingStyleCommentList/HostingStyleCommentList.wxml
````
<view class="container">
  <div class="overview">
    <image
      class="avatar"
      src="{{ profile.user_headimg }}"
      mode="aspectFill"
    ></image>
    <text class="name">{{ profile.user_qm_name }}</text>
    <view class="score">
      <text class="score__text">è¯„åˆ†ï¼š</text>
      <text class="score__num">{{ commentInfo.sf_avg }}</text>
      <view class="score__stars">
        <image
          wx:for="{{ starList }}"
          wx:key="index"
          class="score__stars--item"
          src="{{ item.src }}"
        ></image>
      </view>
      <text class="score__people">å…±{{ commentInfo.commentCount }}äººç‚¹è¯„</text>
    </view>
  </div>
  <view class="comment">
    <view class="comment__total"
      >å…¨éƒ¨è¯„ä»·ï¼ˆ{{ commentInfo.commentCount }}ï¼‰</view
    >
    <view class="comment__list">
      <view
        class="comment__item"
        wx:for="{{ commentListWithStarList }}"
        wx:key="album_comment_id"
      >
        <image
          class="avatar"
          src="{{ item.avatar }}"
        ></image>
        <view class="name">{{ item.nickname }}</view>
        <text class="time">{{ item.comment_time }}</text>
        <view class="score">
          <text class="score__text">è¯„åˆ†</text>
          <view class="score__star-list">
            <image
              wx:for="{{ item.starList }}"
              wx:for-index="{{ starIndex }}"
              wx:for-item="star"
              wx:key="starIndex"
              class="star-list__item"
              src="{{ star.src }}"
              data-src="{{ star.src }}"
            ></image>
          </view>
        </view>
        <text class="content">{{ item.content }}</text>
        <view class="label-list">
          <view
            class="label-list__item"
            wx:for="{{ item.labelList }}"
            wx:for-item="label"
            wx:key="label"
          >
            {{ label }}
          </view>
        </view>
      </view>
    </view>
  </view>
  <!-- <view
    wx:if="{{ isShowCommentBtn && !hasCommented }}"
    class="comment-btn"
    bind:tap="onClickCommentBtn"
  >
    <image
      class="icon"
      src="https://ustatic.hudongmiao.com/%20miao/hostingStyle/pen-outline.svg"
    ></image>
    <text> ç«‹å³è¯„ä»· </text>
  </view>
  <view
    wx:if="{{ isShowCommentBtn && hasCommented }}"
    class="comment-btn comment-btn--disabled"
  >
    å·²è¯„ä»·
  </view> -->
</view>
````

## File: pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.js
````javascript
const TIME_INTERVAL = ['ä¸Šåˆ', 'ä¸‹åˆ', 'å…¨å¤©', 'åˆå®´', 'æ—©ä¸Š', 'æ™šå®´'];

Component({
  properties: {
    scheduleData: {
      type: Array,
      value: [],
    },
  },
  data: {
    // æ–‡å­—é¢œè‰²ä¸ºé»„è‰²çš„æ—¶é—´æ®µ
    yellowTimeInterval: TIME_INTERVAL.slice(0, 3),
  },
});
````

## File: pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.json
````json
{
  "component": true
}
````

## File: pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.scss
````scss
.container {
  width: 100%;
  background-color: #f8f8f8;

  padding: 16px 16px 100px;
  display: flex;
  flex-direction: column;
  row-gap: 24px;

  .year-schedule {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    &__year {
      font-size: 18px;
      color: #333;
    }
    .month-schedule {
      width: 100%;

      display: flex;
      column-gap: 23px;

      &__month {
        width: 44px;
        height: 44px;
        border: 0.5px solid #ff457a;
        border-radius: 50%;
        box-shadow: 0px 2px 4px 0px rgba(255, 153, 153, 0.25);

        display: flex;
        justify-content: center;
        align-items: center;

        font-size: 16px;
        color: #333;
      }

      .day-schedule {
        flex: 1;
        display: flex;
        flex-wrap: wrap;
        gap: 16px 12px;

        .schedule-item {
          width: 44px;
          height: 44px;
          border-radius: 50%;
          box-shadow: 0px 2px 4px 0px rgba(255, 153, 153, 0.25);

          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

          &__day {
            font-size: 12px;
            line-height: 12px;
            color: #333;
          }

          &__type {
            font-size: 10px;
            line-height: 10px;
            color: #438eff;

            &--yellow {
              color: #ffb443;
            }
          }
        }
      }
    }
  }
}
````

## File: pages/reserve/hostingStyle/HostingStyleSchedule/HostingStyleSchedule.wxml
````
<wxs
  module="wxsUtils"
  src="./utils.wxs"
></wxs>
<view class="container">
    <view
      wx:for="{{ scheduleData }}"
      wx:key="index"
      wx:for-item="scheduleDataPerYear"
      class="year-schedule"
    >
      <view class="year-schedule__year">{{ scheduleDataPerYear.year }}å¹´</view>
      <view
        wx:for="{{ scheduleDataPerYear.scheduleDataByMonth }}"
        wx:key="index"
        wx:for-item="scheduleDataPerMonth"
        class="month-schedule"
      >
        <view class="month-schedule__month"
          >{{ scheduleDataPerMonth.month }}æœˆ</view
        >
        <view class="day-schedule">
          <view
            class="schedule-item"
            wx:for="{{ scheduleDataPerMonth.scheduleList }}"
            wx:key="index"
            data-schedule_id="{{ item.schedule_id }}"
          >
            <text class="schedule-item__day">{{ item.day }}æ—¥</text>
            <!-- prettier-ignore -->
            <text
              class="schedule-item__type {{wxsUtils.includes(yellowTimeInterval, item.time_interval) ? 'schedule-item__type--yellow' : ''}}"
            >
              {{ item.time_interval }}
            </text>
          </view>
        </view>
      </view>
    </view>
</view>
````

## File: pages/reserve/hostingStyle/HostingStyleSchedule/utils.wxs
````
/** æ•°ç»„çš„includesæ–¹æ³•
 * @param {Array} array æ•°ç»„
 * @param {any} item è¦æŸ¥æ‰¾çš„å…ƒç´ 
 */
module.exports.includes = function (array, item) {
  for (var i = 0; i < array.length; i++) {
    if (array[i] === item) {
      return true;
    }
  }
  return false;
};
````

## File: pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.js
````javascript
Component({
  properties: {
    qrCodeUrl: {
      type: String,
      value: '',
    },
  },
  methods: {
    close() {
      this.triggerEvent('closeQrcode');
    },
  },
});
````

## File: pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.json
````json
{
  "component": true
}
````

## File: pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.scss
````scss
.qr-code-popup {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  row-gap: 16px;
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 9999;
  background-color: rgba(0,0,0,0.8);
  .qr-code-container {
    width: 240px;
    height: 290px;
    background: #ffffff;
    border-radius: 16px;

    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    row-gap: 16px;

    &__img {
      width: 200px;
      height: 200px;
    }

    &__text {
      font-size: 16px;
      color: #000000;
    }
  }

  .close-btn {
    width: 32px;
    height: 32px;
  }
}
````

## File: pages/reserve/hostingStyle/QrCodePopup/QrCodePopup.wxml
````
<view class="qr-code-popup">
    <view class="qr-code-container">
      <image
        show-menu-by-longpress="true"
        class="qr-code-container__img"
        src="{{ qrCodeUrl }}"
        mode="aspectFit"
      ></image>
      <view class="qr-code-container__tips">è¯·æ‰«ç æ·»åŠ ä¸»æŒäººå¥½å‹</view>
    </view>
    <image
      class="close-btn"
      src="https://ustatic.hudongmiao.com/%20miao/hostingStyle/close.svg"
      bind:tap="close"
    ></image>
  </view>
````

## File: pages/reserve/hostingStyle/workDetail/workDetail.js
````javascript
import {
  reqGetWorkDetail,
  reqLikeWork,
  reqRecordWorkClick,
} from '@/api/hostingStyle';
import hostingStyleStore from '@/pages/reserve/store/hostingStyle';
const getSafeArea = () => {
  const {
    safeArea,
    screenHeight,
    screenWidth
  } = wx.getSystemInfoSync();
  const {
    top,
    bottom,
    left,
    right,
    width,
    height
  } = safeArea;
  const style = `
  --safe-area-inset-top: ${top}px;
  --safe-area-inset-bottom: ${Math.max(screenHeight - bottom, 12)}px;
  --safe-area-inset-left: ${left}px;
  --safe-area-inset-right: ${screenWidth - right}px;
  --safe-area-inset-width: ${width}px;
  --safe-area-inset-height: ${height}px;
  `;
  return {
    style,
    top,
    bottom,
    left,
    right,
    width,
    height,
  };
};
const app = getApp();
Page({
  data: {
    workDetail: {},
    currentImgIndex: 0,
    safeArea: getSafeArea(),
    videoHeight: (getSafeArea().width * 9) / 16 + 'px',
    isPlayingVideo: false,
    isShowVideoControls: false,
    navBarHeight: app.globalData.systemInfo_titleBarHeight +
    app.globalData.systemInfo_statusBarHeight
  },
  onLoad(options) {
    this.checkAndGetWorkDetail(options);
    reqRecordWorkClick(Number(options.find_id));
  },
  onShareAppMessage() {
    const {
      workDetail
    } = this.data;
    return {
      title: workDetail.title,
      path: `/packageA/pages/workDetail/workDetail?find_id=${workDetail.find_id}`,
      imageUrl: workDetail.cover,
    };
  },
  async checkAndGetWorkDetail(options) {
    const {
      find_id
    } = options;
    if (!find_id) {
      wx.showToast({
        title: 'å‚æ•°é”™è¯¯',
        icon: 'error'
      });
      setTimeout(() => {
        wx.navigateBack();
      });
      return;
    }

    try {
      const res = await reqGetWorkDetail(find_id);
      if (res.code !== 200) {
        throw new Error(res.msg);
      }

      this.setData({
        workDetail: {
          ...res.data,
          real_read_size: res.data.real_read_size + 1,
          find_id: Number(find_id),
          parsedImageList: JSON.parse(res.data.imageList),
        },
      });
    } catch (e) {
      wx.showToast({
        title: e.message,
        icon: 'error'
      });
    }
  },
  onClickLeft() {
    const userId = this.data.workDetail.userId;
    wx.navigateBack({
      delta: 1,
      fail: () => {
        wx.navigateTo({
          url: '/packageA/pages/hostingStyle/hostingStyle?hostId=' + userId,
        });
      },
    });
  },
  onLoadedMetaData(e) {
    this.setData({
      videoHeight: Math.min(
        (e.detail.height / e.detail.width) * this.data.safeArea.width,
        this.data.safeArea.height * 0.7,
      ) + 'px',
    });
  },
  onClickVideoMask() {
    const videoCtx = wx.createVideoContext('video');
    videoCtx.play();
  },
  onPlayVideo() {
    this.setData({
      isPlayingVideo: true,
    });
  },
  onPauseVideo() {
    this.setData({
      isPlayingVideo: false,
    });
  },
  onClickFullScreen() {
    const videoCtx = wx.createVideoContext('video');
    videoCtx.requestFullScreen({});
  },
  onSwiperChange(e) {
    this.setData({
      currentImgIndex: e.detail.current,
    });
  },
  async onClickLike() {
    try {
      const {
        find_id,
        isLike
      } = this.data.workDetail;
      if (isLike) {
        throw new Error('å·²ç»ç‚¹è¿‡èµäº†');
      }
      const res = await reqLikeWork(find_id);
      console.log(res);
      if (res.code === 200) {
        hostingStyleStore.updateWorkLikeStatus(find_id);
        this.setData({
          'workDetail.isLike': true,
          'workDetail.likes': this.data.workDetail.likes + 1,
        });
        return;
      }

      throw new Error(res.msg);
    } catch (error) {
      wx.showToast({
        title: error.message,
        icon: 'none',
      });
    }
  },
});
````

## File: pages/reserve/hostingStyle/workDetail/workDetail.json
````json
{
  "navigationStyle": "custom"
}
````

## File: pages/reserve/hostingStyle/workDetail/workDetail.scss
````scss
page {
  .page {
    --nav-bar-background-color: #ffffff;
    --nav-bar-icon-color: #1a1a1a;
    --nav-bar-bottom-border-color: #ebedf0;

    --background-color: #ffffff;
    --text-color: #333333;
    --content-color: #666666;

    min-height: 100vh;

    display: flex;
    flex-direction: column;
    padding-bottom: 60px;
    background-color: var(--background-color);

    &--video {
      --nav-bar-background-color: #010101;
      --nav-bar-icon-color: #e6e6e6;
      --nav-bar-bottom-border-color: #010101;
      --background-color: #010101;
      --text-color: #ffffff;
      --content-color: #b3b3b3;
    }

    .nav-bar {
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      width: 100%;
      height: var(--nav-bar-height);
      display: flex;
      align-items: flex-end;
      padding-left: 25rpx;

      .back-button {
        .back-icon {
          width: 60rpx;
        }
      }

      .title {
        width: 100%;
        align-self: flex-end;
        display: grid;
        grid-template-columns: min-content 1fr;
        align-items: center;
        column-gap: 5px;
        padding-left: 30rpx;
        margin-bottom: 10rpx;
        &__avatar {
          box-sizing: border-box;
          width: 30px;
          height: 30px;
          border-radius: 50%;
          overflow: hidden;
        }

        &__name {
          width: 100%;

          text-align: start;

          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;

          font-size: 14px;
          color: var(--text-color);
        }
      }
    }

    .video-container {
      width: 100vw;
      min-height: 106.6667vw;

      padding: var(--nav-bar-height) 0 44px 0;
      position: relative;
      display: flex;
      align-items: center;

      margin-bottom: 30px;

      .video {
        width: 100%;
      }

      .mask {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);

        display: flex;
        align-items: center;
        justify-content: center;

        &--hidden {
          animation: mask-hidden 0.3s ease forwards;

          @keyframes mask-hidden {
            99% {
              top: 0;
              opacity: 0;
              transform: scale(10);
            }

            100% {
              top: -100vh;
              opacity: 0;
              transform: scale(1);
            }
          }
        }

        .play-btn {
          width: 40px;
          height: 40px;
        }
      }

      .tip {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);

        border: 1px solid rgba($color: #ffffff, $alpha: 0.2);
        border-radius: 17px;

        padding: 8px 12px;
        z-index: 10;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;

        .tip__icon {
          width: 14px;
          height: 14px;
        }

        .tip__text {
          margin-left: 4px;
          font-size: 10px;
        }
      }
    }

    .swiper-container {
      position: relative;

      .image-swiper {
        width: 100vw;
        height: calc(133.33vw + 44px);

        &__item {
          width: 100vw;
          height: 133.3333vw;
        }
      }

      .indicator {
        box-sizing: content-box;
        position: absolute;
        top: 20px;
        right: 12px;
        z-index: 10;

        height: 21px;
        background: rgba($color: #010101, $alpha: 0.8);
        border-radius: 33px;

        padding: 0 8px;
        display: flex;
        align-items: center;

        .indicator__text {
          font-size: 12px;
          line-height: 17px;
          color: #fff;
        }
      }
    }

    .title {
      align-self: center;
      width: calc(100vw - 32px);
      color: var(--text-color);
    }

    .content {
      margin-top: 8px;
      align-self: center;
      width: calc(100vw - 32px);
      color: var(--content-color);
    }

    .bottom-bar {
      width: 100vw;
      position: fixed;
      bottom: 0;
      z-index: 10;

      background-color: #fff;

      padding: 14px;
      padding-bottom: var(--safe-area-inset-bottom);
      display: grid;
      grid-template-columns: 1fr 65px 65px;
      align-items: center;
      column-gap: 13px;

      .item {
        display: flex;
        align-items: center;
        white-space: nowrap;

        position: relative;

        &__icon {
          width: 24px;
          height: 24px;
        }

        &__text {
          margin-left: 6px;
          font-size: 16px;
          line-height: 22px;
          color: #333;
        }

        &__btn {
          position: absolute;

          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          opacity: 0;
        }
      }
    }
  }
}
````

## File: pages/reserve/hostingStyle/workDetail/workDetail.wxml
````
<!--
  * @description: ã€Œä¸»æŒé£é‡‡/ä½œå“è¯¦æƒ…ã€é¡µé¢
  * @author: Ruan Jiazhen
  * @date: 2024-03-19 09:41:50
-->
<view class="page {{ workDetail.video ? 'page--video' : '' }}" style="{{ safeArea.style }}">
  <!-- <van-nav-bar
    right-text="æŒ‰é’®"
    left-arrow
    bind:click-left="onClickLeft"
    custom-class="nav-bar"
  >
    <view
      class="title"
      slot="title"
    >
      <image
        class="title__avatar"
        src="{{ workDetail.user_headimg }}"
      ></image>
      <view class="title__name">{{ workDetail.user_qm_name }}</view>
    </view>
  </van-nav-bar> -->
  <view class="nav-bar" style="--nav-bar-height: {{ navBarHeight }}px;">
    <view class="back-button" bindtap="onClickLeft">
      <image src="https://static.hudongmiao.com/%20miao/icon/backIcon.png" mode="widthFix" class="back-icon" wx:if="{{ workDetail.video }}"/>
      <image src="https://static.hudongmiao.com/%20miao/icon/backIconBlck.png" mode="widthFix" class="back-icon" wx:if="{{ !workDetail.video }}"/>
    </view>
    <view class="title">
      <image class="title__avatar" src="{{ workDetail.user_headimg }}"></image>
      <view class="title__name">{{ workDetail.user_qm_name }}</view>
    </view>
  </view>
  <view wx:if="{{ workDetail.video }}" style="--nav-bar-height: {{ navBarHeight }}px;" class="video-container">
    <video class="video" style="height: {{ videoHeight }};" id="video" src="{{ workDetail.video }}" custom-cache="{{ false }}" autoplay enable-play-gesture vslide-gesture enable-auto-rotation controls="{{ isPlayingVideo }}" show-center-play-btn="{{ false }}" show-fullscreen-btn="{{ false }}" bind:play="onPlayVideo" bind:pause="onPauseVideo" bind:loadedmetadata="onLoadedMetaData">
      <view hidden class="mask {{ isPlayingVideo ? 'mask--hidden' : '' }}" bind:tap="onClickVideoMask">
        <image class="play-btn" src="https://static.hudongmiao.com/%20miao/icon/triangle.svg"></image>
      </view>
    </video>
    <view class="tip" bind:tap="onClickFullScreen">
      <image class="tip__icon" src="https://static.hudongmiao.com/%20miao/icon/turn-phone.svg"></image>
      <text class="tip__text">å…¨å±æ’­æ”¾</text>
    </view>
  </view>
  <view class="swiper-container" wx:else>
    <swiper class="image-swiper" circular indicator-dots indicator-color="#CBCBCB" indicator-active-color="#010101" bind:change="onSwiperChange">
      <block wx:for="{{ workDetail.parsedImageList }}" wx:key="index">
        <swiper-item>
          <image class="image-swiper__item" src="{{ item }}" mode="aspectFit"></image>
        </swiper-item>
      </block>
    </swiper>
    <view class="indicator">
      <text class="indicator__text">{{ currentImgIndex + 1 }}/{{ workDetail.parsedImageList.length }}</text>
    </view>
  </view>
  <view class="title">{{ workDetail.title }}</view>
  <view class="content">{{ workDetail.content }}</view>
  <view class="bottom-bar">
    <view class="item item--read">
      <image class="item__icon" src="https://static.hudongmiao.com/%20miao/icon/eye-outline.svg"></image>
      <text class="item__text">{{ workDetail.real_read_size }}</text>
    </view>
    <view class="item" bind:tap="onClickLike">
      <!-- prettier-ignore -->
      <image class="item__icon" src="{{workDetail.isLike ? 'https://static.hudongmiao.com/%20miao/icon/like-solid.svg' : 'https://static.hudongmiao.com/%20miao/icon/like-outline.svg'}}"></image>
      <text class="item__text">{{ workDetail.likes }}</text>
    </view>
    <view class="item item--share">
      <image class="item__icon" src="https://static.hudongmiao.com/%20miao/icon/turning-arrow.svg"></image>
      <text class="item__text">åˆ†äº«</text>
      <button class="item__btn" open-type="share"></button>
    </view>
  </view>
</view>
````

## File: pages/reserve/hostingStyle/WorkList/WorkList.js
````javascript
// XXX æš‚æ—¶ä½¿ç”¨è¿™æ ·çš„å›ºå®šé«˜åº¦ä¼ªè£…æˆç€‘å¸ƒæµå¸ƒå±€ï¼Œåç»­å¦‚æœæœ‰éœ€æ±‚å†æƒ³åŠæ³•æ”¹
const WORK_ITEM_HEIGHT_LIST_1 = [
  170, 240, 300, 400, 250, 180, 260, 200, 280, 220,
];
const WORK_ITEM_HEIGHT_LIST_2 = [
  220, 280, 200, 260, 180, 250, 400, 300, 240, 170,
];
Component({
  properties: {
    workList: {
      type: Array,
      value: [],
    },
    avatar: {
      type: String,
      value: '',
    },
    name: {
      type: String,
      value: '',
    },
  },
  data: {

  },
  observers: {
    workList(newVal) {
      const newList = [
        newVal
        .filter((_, index) => index % 2 === 0)
        .map((item, index) => ({
          ...item,
          height: WORK_ITEM_HEIGHT_LIST_1[index % WORK_ITEM_HEIGHT_LIST_1.length],
        })),
        newVal
        .filter((_, index) => index % 2 === 1)
        .map((item, index) => ({
          ...item,
          height: WORK_ITEM_HEIGHT_LIST_2[index % WORK_ITEM_HEIGHT_LIST_2.length],
        })),
      ]
      this.setData({
        workListWithHeight: newList
      });
    }
  },
  methods: {
    async like(e) {
      const {
        find_id,
        isLike
      } = e.currentTarget.dataset;
      this.triggerEvent('onLike', {
        find_id,
        isLike
      });
    },
    onClickWorkItem(e) {
      const {
        find_id
      } = e.currentTarget.dataset;
      this.triggerEvent('onClickWorkItem', {
        find_id
      });
    },
  },
});
````

## File: pages/reserve/hostingStyle/WorkList/WorkList.json
````json
{
  "component": true
}
````

## File: pages/reserve/hostingStyle/WorkList/WorkList.scss
````scss
.tips {
  height: 100%;

  background-color: #f8f8f8;

  padding-top: 18.2vh;
  display: flex;
  flex-direction: column;
  align-items: center;

  &__text {
    display: flex;
    font-size: 14px;
    line-height: 14px;
    color: #959595;
    .upload-text {
      color: #ff457a;
      text-decoration: underline;
    }
  }
}
.work-list-container {
  padding: 10px 10px 100px 10px;
  display: grid;
  grid-template:
    'work-list-1 work-list-2' 1fr
    'no-more no-more' min-content
    / 1fr 1fr;
  gap: 8px;
  .work-list {
    &--1 {
      grid-area: work-list-1;
    }

    &--2 {
      grid-area: work-list-2;
    }

    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;

    .work-item {
      width: 100%;

      border-radius: 4px;
      overflow: hidden;
      background-color: #fff;

      display: grid;
      grid-template:
        'cover cover cover cover cover' 1fr
        '. . . . .' 8px
        '. title title title .' min-content
        '. . . . .' 2px
        '. avatar name like .' min-content
        / 8px min-content 1fr min-content 12px;

      &__cover {
        grid-area: cover;
        width: 100%;
        height: 100%;
      }

      &__title {
        grid-area: title;
        font-size: 14px;
        line-height: 14px;
      }

      &__avatar {
        grid-area: avatar;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        overflow: hidden;
      }

      &__name {
        grid-area: name;

        width: 100%;
        display: flex;
        align-items: center;

        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;

        font-size: 12px;
        line-height: 12px;
        color: #959595;
      }

      &__likes {
        grid-area: like;
        display: flex;
        align-items: center;
        column-gap: 2px;

        .likes__icon {
          width: 14px;
          height: 14px;
        }

        .likes__count {
          font-size: 12px;
          line-height: 12px;
          color: #666;
        }
      }
    }
  }

  .no-more {
    margin-top: 40px;
    grid-area: no-more;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 12px;
    line-height: 12px;
    color: #959595;
  }
}
````

## File: pages/reserve/hostingStyle/WorkList/WorkList.wxml
````
<view
  class="tips"
  wx:if="{{ workList.length === 0 }}"
>
  <!-- prettier-ignore -->
  <text class="tips__text">
    ä¸»æŒäººæš‚æœªä¸Šä¼ ä½œå“
  </text>
</view>
<view
  wx:else
  class="work-list-container"
>
  <view
    class="work-list work-list--{{ index + 1 }}"
    wx:for="{{ workListWithHeight }}"
    wx:for-item="subWorkList"
    wx:key="index"
  >
    <view
      wx:for="{{ subWorkList }}"
      wx:key="id"
      class="work-item"
      style="height: {{ item.height }}px;"
      bind:tap="onClickWorkItem"
      data-find_id="{{ item.find_id }}"
    >
      <image
        class="work-item__cover"
        src="{{ item.cover }}"
        mode="aspectFill"
      ></image>
      <view class="work-item__title">{{ item.title }}</view>
      <image
        class="work-item__avatar"
        src="{{ avatar }}"
      ></image>
      <view class="work-item__name">{{ name }}</view>
      <view
        class="work-item__likes"
        catch:tap="like"
        data-is-like="{{ item.isLike }}"
        data-find_id="{{ item.find_id }}"
      >
        <!-- prettier-ignore -->
        <image
          class="likes__icon"
          src="{{item.isLike? 'https://ustatic.hudongmiao.com/%20miao/hostingStyle/like-solid.svg': 'https://ustatic.hudongmiao.com/%20miao/hostingStyle/like-outline.svg'}}"
        ></image>
        <text class="likes__count">{{ item.likes }}</text>
      </view>
    </view>
  </view>
  <view class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
</view>
````

## File: pages/reserve/reserve.wxss
````
.container {
  width: 100vw;
  position: relative;
  background-color: #F9F7F7;
  padding-bottom: 200rpx;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.introKey {
  padding-top: 40rpx;
  font-size: 32rpx;
  font-weight: 400;
  color: #000000;
}

.introCt {
  width: 686rpx;
  height: 248rpx;
  background: #ffffff;
  border-radius: 16rpx;
  padding: 24rpx;
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
  line-height: 40rpx;
  margin-top: 32rpx;
}

.qrcode {
  width: 480rpx;
  height: 480rpx;
  margin-top: 96rpx;
}

.qrcodeUploadTip {
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
  margin-top: 48rpx;
}

.openServiceTip {
  font-size: 24rpx;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.40);
  margin-top: 98rpx;
}

.checkOpenCaseBtn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 640rpx;
  height: 96rpx;
  background: linear-gradient(279deg, #ffd175 0%, #ffe8b7);
  border-radius: 80rpx;
  font-size: 28rpx;
  font-weight: 500;
  color: #704c00;
  margin-top: 24rpx;
  animation: heartBeatWithNoTransform 1.6s linear infinite;
}

.addQrcodeTip {
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
  margin-top: 48rpx;
}

.noQrcodeTip {
  margin-top: 92rpx;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 20vh;
}

.noQrcodeTip .benifitTip {
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
}

.noQrcodeTip .methodTip {
  margin-top: 24rpx;
  font-size: 28rpx;
  font-weight: 400;
  color: #333333;
  width: 620rpx;
  line-height: 40rpx;
}

.noQrcodeTip .methodTip.center {
  text-align: center;
}
.noQrcodeTip .benifitTip.red {
  color: red;
}
.noQrcodeTip .methodTip.red {
  color: red;
}
````

## File: pages/reserve/workDetail/workDetail.js
````javascript
// pages/reserve/workDetail/workDetail.js
Page({

  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */
  onLoad(options) {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ
   */
  onReady() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º
   */
  onShow() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—
   */
  onHide() {

  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½
   */
  onUnload() {

  },

  /**
   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
   */
  onPullDownRefresh() {

  },

  /**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */
  onReachBottom() {

  },

  /**
   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
   */
  onShareAppMessage() {

  }
})
````

## File: pages/reserve/workDetail/workDetail.json
````json
{
  "usingComponents": {}
}
````

## File: pages/reserve/workDetail/workDetail.scss
````scss
/* pages/reserve/workDetail/workDetail.wxss */
````

## File: pages/reserve/workDetail/workDetail.wxml
````
<!--pages/reserve/workDetail/workDetail.wxml-->
<text>pages/reserve/workDetail/workDetail.wxml</text>
````

## File: pages/test/test.json
````json
{
  "usingComponents": {
  }
}
````

## File: pages/test/test.wxss
````
.audio-info {
  margin-top: 60rpx;
  text-align: center;
}
````

## File: api/estimate.js
````javascript
import { request } from '../utils/request';
import { reqWxPay } from './pay'

/**
 * è·å–æˆ‘çš„è¯„ä»· åŠä¸»æŒäººä¿¡æ¯
 */
export function reqGetHostInfo({ splid }) {
  return request('splidComment/getMyComment', 'POST', {
    splid,
  }, {
    needAppId: true,
    host: 'WWW'
  });
}

/**
 * è¿›è¡Œè¯„ä»·
 */
export function reqCommitComment({
  splid,
  content = '',
  label = '',
  satisfaction = '',
}) {
  return request('splidComment/saveUserComment', 'POST', {
    splid,
    content,
    type: '3',
    label,
    satisfaction,
  }, {
    host: 'WWW'
  });
}

/**
 * è·å–è¯„ä»·æ±‡æ€»ä¿¡æ¯
 */
export function reqGetHostCommentBase({ splid }) {
  return request('splidComment/getUserComment', 'POST', {
    splid,
  }, {
    host: 'WWW'
  });
}

/**
 * è·å–æ‰€æ¬²è¯„ä»·ç”¨æˆ·è¯„ä»·åˆ—è¡¨
 */
export function reqGetHostCommentList({ splid, currentPage, showCount }) {
  return request('splidComment/getCommentList', 'POST', {
    splid,
    type: '3', //åœºæ¬¡è¯„ä»·
    currentPage,
    showCount,
  }, {
    host: 'WWW'
  });
}

/**
 * æ‰“èµä¸»æŒ
 */
export async function reqReward({ splid, totalfee }) {
  const res =  await request('hmWxmoney/chongzhiReward', 'POST', {
    splid,
    totalfee,
  }, {
    needAppId: true
  });
  return reqWxPay(res);
}

/**
 * å›å¤
 */
export function reqReplyUser({ album_comment_id, content, splid }) {
  return request('splidComment/saveUserComment2', 'POST', {
    type: '5', // 4 å¸ä»ª   5 ç”¨æˆ·
    content,
    album_comment_id,
    splid,
  }, {
    host: 'WWW'
  });
}


/**
 * é¢„å®šä¸»æŒ
 * @param {Object} pObj
 * @param {String} pObj.splid
 * @param {String} pObj.date æ ¼å¼ä¸ºYYYY-MM-DD
 * @param {String} pObj.time_interval '1'ä¸ºåˆå®´ '2'ä¸ºæ™šå®´
 * @param {String} pObj.customer_name å§“å
 * @param {String} pObj.customer_phone è”ç³»ç”µè¯
 * @param {String} pObj.remark ç•™è¨€å¤‡æ³¨
 * @param {String} pObj.kind ä¿æŒä¸º'2'
 * @param {String} pObj.headimg
 */
export function reqReserveHost(pObj) {
  return request('schedule/save', 'POST', pObj, {
    host: 'WWW'
  });
}

/**
 * è·å–é¢„å®šä¿¡æ¯
 */
export function reqGetReserveInfo(splid) {
  return request('schedule/getUserSchedule', 'POST', {
    splid,
  }, {
    host: 'WWW'
  });
}

/**
 * ä¿å­˜è®¿é—®ä¿¡æ¯
 */
export function reqSaveVisitInfo({
  splid,
  album_comment_id,
  start_time,
  end_time,
  time_length,
}) {
  return request('splidComment/updateComment', 'POST', {
    splid,
    album_comment_id,
    start_time,
    end_time,
    time_length,
  }, {
    host: 'WWW'
  });
}
/**
 * è·å–ç°åœºå›é¡¾
 */
export function reqGetReview({
  splid,
  size,
  num,
}) {
  return request('subscribeController/getMyLoveInfo', 'POST', {
    splid,
    size: String(size),
    num: String(num),
    type:'1',
  });
}
````

## File: api/hostingStyle.js
````javascript
/**
 * ã€Œä¸»æŒé£é‡‡ã€æ¨¡å—ç›¸å…³æ¥å£
 * @author: Ruan Jiazhen
 * @date: 2024-03-08 10:32:10
 **/
import { reqGet, reqPost, request } from '@/utils/request';

/**
 * è·å–ä¸»æŒäººèµ„æ–™
 * @param {string} hostId ä¸»æŒäººID
 * @returns
 */
export const reqGetProfile = (hostId) => {
  return reqGet(
    'hostStyle/getInfo',
    { userId: hostId },
    { host: 'MP', cancelLoading: true },
  );
};

/**
 * è·å–ä½œå“åˆ—è¡¨
 * @param {number} page é¡µç 
 * @param {number} pageSize æ¯é¡µæ¡æ•°
 * @param {string} userId ä¸»æŒäººID
 */
export const reqGetWorkList = (page, pageSize, userId) => {
  return reqGet(
    'hostStyle/worksList',
    {
      currentPage: page,
      showCount: pageSize,
      userId,
    },
    { cancelLoading: true },
  );
};

/**
 * ç‚¹èµä½œå“
 * @param {number} find_id ä½œå“id
 */
export const reqLikeWork = (find_id) => {
  return reqPost(
    'hostStyle/likeWorks',
    { find_id },
    { cancelLoading: true, host: 'WWW' },
  );
};

/**
 * è·å–ä½œå“è¯¦æƒ…
 * @param {number} find_id ä½œå“id
 */
export const reqGetWorkDetail = (find_id) => {
  return reqGet('hostStyle/getWorksDetail', { find_id }, { host: 'WWW' });
};

/**
 * å¢åŠ ä½œå“ç‚¹å‡»é‡
 * @param {number} find_id ä½œå“id
 */
export const reqRecordWorkClick = (find_id) => {
  return reqPost(
    'hostStyle/recordWorksClickCount',
    { find_id },
    { host: 'WWW' },
  );
};

/**
 * è·å–æ¡£æœŸä¿¡æ¯
 * @param {string} userId ä¸»æŒäººid
 * @returns
 */
export const getScheduleInfo = (userId) => {
  return reqPost(
    'schedule/getScheduleInfo',
    { userId },
    { host: 'WWW', cancelLoading: true },
  );
};

/**
 * è®°å½•å’¨è¯¢æ•°ï¼Œå½“å‰ä¼šåœ¨æ¥å®¾ç‚¹å‡»ã€Œå¾®ä¿¡ã€ã€ã€Œç”µè¯ã€å’Œã€Œæˆ‘è¦é¢„å®šã€
 * @param {string} userId ä¸»æŒäººid
 */
export const reqRecordConsult = (userId) => {
  return reqPost(
    'hostStyle/recordConsult',
    { userId },
    { cancelLoading: true },
  );
};

/**
 * ç»Ÿè®¡ä¸»æŒé£é‡‡è®¿é—®æ¬¡æ•°
 */
export const reqRecordVisitCount = (splid) => {
  return request('hostStyle/addBrowses', 'GET', {
    splid,
  },{
    host: 'H5'
  })
}
````

## File: api/pay.js
````javascript
import { request } from "../utils/request";

/**
 * å¾®ä¿¡æ”¯ä»˜
 */
export function reqWxPay(param) {
  return new Promise((resolve, reject) => {
    wx.requestPayment({
      timeStamp: param.obj.timeStamp,
      nonceStr: param.obj.nonceStr,
      package: param.obj.package,
      signType: "MD5",
      paySign: param.obj.paySign,
      success: (res) => {
        console.log(res);
        resolve(res);
      },
      fail: (res) => {
        reject(res);
      },
    });
  });
}

/**
 * å–µé’»å……å€¼
 */
export async function reqDiamondRecharge({ total, userId, openId }) {
  const res = await request(
    "hmWxmoney/chongzhiMiao",
    "POST",
    {
      total,
      userId,
      openid: openId,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}

/**
 * é€ç¤¼ç‰©æ¸¸æˆæ”¯ä»˜å¹¶å‘é€
 * @param {String} content ç¤¼ç‰©æ–‡å­—å†…å®¹,å¦‚æœæ˜¯ç¤¼ç‰©ä¸å¸¦æ–‡å­—åˆ™ä¼ ç©ºå­—ç¬¦ä¸²
 */
export async function reqSendGiftGameRecharge({
  giftconst,
  openid,
  userId,
  content,
  splid,
}) {
  const res = await request(
    "hmWxmoney/sendWishPay",
    "POST",
    {
      giftconst,
      openid,
      userId,
      content,
      splid,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}

/**
 * å…¨å±ç‰¹æ•ˆæ”¯ä»˜å¹¶å‘é€
 * @param {String} content ç¤¼ç‰©æ–‡å­—å†…å®¹,å¦‚æœæ˜¯ç¤¼ç‰©ä¸å¸¦æ–‡å­—åˆ™ä¼ ç©ºå­—ç¬¦ä¸²
 */
export async function reqSendSuperDanmuRecharge({
  giftconst,
  openid,
  userId,
  content,
  splid,
}) {
  const res = await request(
    "hmWxmoney/sendSuperGift",
    "POST",
    {
      giftconst,
      openid,
      userId,
      content,
      splid,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}

/**
 * ç‚¹æ­Œæ”¯ä»˜å¹¶å‘é€
 */
export async function reqSendMusicGiftRecharge({
  giftconst,
  openid,
  userId,
  guanxi,
  splid,
}) {
  const res = await request(
    "hmWxmoney/sendMusicGift",
    "POST",
    {
      giftconst,
      openid,
      userId,
      guanxi,
      splid,
      wx_pay_kind: "music",
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}

/**
 * å……é’±å‘æ™®é€šç¤¼ç‰©
 * @description å‘ç¤¼ç‰©ã€éœ¸å±ã€ç…§ç‰‡ã€ç«ç®­å¼¹å¹•çš„é€šç”¨æ¥å£
 * @param {string} giftId
 * @param {string} openId
 * @param {string} userId
 * @param {string} giftText
 * @param {string} giftImage
 */
export async function reqRechargeAndSendGift({
  giftId,
  openId,
  userId,
  giftText,
  giftImage,
}) {
  const res = await request(
    "hmWxmoney/sendPuTongGift",
    "GET",
    {
      splid: wx.getStorageSync('liveId'),
      giftconst: giftId,
      openid: openId,
      userId,
      content: giftText,
      tpUrl: giftImage,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}

/**
 * å……é’±å‘å˜‰å¹´åç¤¼ç‰©
 * @param {string} giftId
 * @param {string} openId
 * @param {string} userId
 */
export async function reqRechargeAndSenCarnivalGift({
  giftId,
  openId,
  userId,
}) {
  const res = await request(
    "hmWxmoney/sendCarnivalGift",
    "POST",
    {
      splid: wx.getStorageSync('liveId'),
      giftconst: giftId,
      openid: openId,
      userId,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}


/**
 * åŠ åˆ†å®é“å…·æ”¯ä»˜
 */
export async function reqRechargeAndBuyAddScoreTool({
  giftId,
  openId,
  userId,
  wxPayKind,
}) {
  const res = await request(
    "hmWxmoney/addScoreTool",
    "POST",
    {
      splid: wx.getStorageSync('liveId'),
      giftconst: giftId,
      openid: openId,
      userId,
      wx_pay_kind: wxPayKind,
    },
    {
      needAppId: true,
    }
  );
  return reqWxPay(res);
}
````

## File: app.js
````javascript
import global_modules from "./appGlobalData/index.js";

App({
  onLaunch() {
    //æ£€æŸ¥å°ç¨‹åºæ›´æ–°
    this.checkSystemUpdate();
    // åˆå§‹åŒ–ç³»ç»Ÿç›¸å…³ä¿¡æ¯
    // this.initSystemInfo();
    // æ³¨å…¥å„æ¨¡å—çš„çŠ¶æ€ã€æ–¹æ³•åˆ°app.jsä¸­
    this.injectModuleData();
    // åˆå§‹åŒ–å°ç¨‹åºè´¦å·ä¿¡æ¯
    this.accountInfo_initData();
    // åˆå§‹åŒ–ç³»ç»Ÿä¿¡æ¯
    this.systemInfo_initData();
    // åŸ‹ç‚¹(å¼€å‘ç¯å¢ƒå…ˆæ³¨é‡Š)
    // tracker({token:"f279ac0ef5a67ae01b14a13d50e6db5b",behaviour:1,captureConsoleLog:true})
  },
  onHide: function () {},
  globalData: {},
  /**
   * å°†å„ä¸ªæ¨¡å—çš„çŠ¶æ€ã€æ–¹æ³•æ±‡æ€»åˆ°app.jsä¸­
   */
  injectModuleData() {
    for (let key in global_modules) {
      global_modules[key](this);
    }
  },
  /**
   * æ£€æŸ¥å°ç¨‹åºæ›´æ–°
   */
  checkSystemUpdate() {
    const updateManager = wx.getUpdateManager();
    updateManager.onUpdateReady(function () {
      wx.showModal({
        title: "æ›´æ–°æç¤º",
        content: "æ–°ç‰ˆæœ¬å·²ç»å‡†å¤‡å¥½ï¼Œæ˜¯å¦é‡å¯åº”ç”¨ï¼Ÿ",
        success: function (res) {
          if (res.confirm) {
            // æ–°çš„ç‰ˆæœ¬å·²ç»ä¸‹è½½å¥½ï¼Œè°ƒç”¨ applyUpdate åº”ç”¨æ–°ç‰ˆæœ¬å¹¶é‡å¯
            updateManager.applyUpdate();
          }
        },
      });
    });
    updateManager.onUpdateFailed(function () {
      // æ–°ç‰ˆæœ¬ä¸‹è½½å¤±è´¥
      wx.showToast({
        title: "æ–°ç‰ˆæœ¬ä¸‹è½½å¤±è´¥!",
        icon: "none",
      });
    });
  },
});
````

## File: packageA/pages/hbkdRecharge/hbkdRecharge.wxml
````
<view class="hbkdRechargeContainer {{modeName}}">
  <!-- çº¢åŒ…å£è¢‹ä½™é¢åŒºåŸŸ -->
  <view class="remainArea" wx:if="{{remainMoneyVisible}}">
    <view class="moneyInfo">
      <view class="moneyValue">
        {{remainMoney}}
        <text class="unit">å…ƒ</text>
      </view>
      <view class="moneyTip">å£è¢‹å†…é‡‘é¢å°†ç”¨äºçº¢åŒ…é›¨ç­‰å…¨åœºäº’åŠ¨</view>
    </view>
  </view>
  <!-- çº¢åŒ…å£è¢‹å……å€¼åŒºåŸŸ -->
  <view class="rechargeArea {{!remainMoneyVisible ? 'mTop' : ''}}">
    <view class="rechargeBox">
      <view class="rechargeItem" wx:for="{{hbkdRechargeList}}" wx:key="index" data-money="{{item.value}}" data-custom="{{item.value === 'custom'}}" bindtap="onChooseRecharge">
        <!-- å›ºå®šé€‰æ‹©æ¨¡å— -->
        <view class="staticMod" wx:if="{{item.value !== 'custom'}}" >
          <view class="value">
            {{item.value}}
            <text class="unit">å…ƒ</text>
          </view>
          <view class="name">{{item.name}}</view>
        </view>
        <!-- è‡ªå®šä¹‰é‡‘é¢æ¨¡å— -->
        <view class="customMod {{inputVisible ? 'inputMod' : ''}}" wx:else>
          <view class="customTxt1" wx:if="{{!inputVisible}}">{{item.name}}</view>
          <view class="customTxt2" wx:if="{{!inputVisible}}">è‡ªå®šä¹‰é‡‘é¢</view>
          <input type="number" maxlength="5" value="{{moneyInput}}" wx:if="{{inputVisible}}" focus="{{isFocus}}" bindinput="onInputMoney" bindblur="onBlurMoney"/>
          <text class="unit" wx:if="{{inputVisible}}">å…ƒ</text>
          <image src="https://ustatic.joymew.com/joymewScreen/zshl/mobile/crown.png" class="crown" wx:if="{{modeName === 'zshlMode'}}"/>
        </view>
      </view>
    </view>
  </view>
  <!-- å……å€¼æ’è¡Œæ¦œåŒºåŸŸ -->
  <view class="rankArea">
    <view class="agreement" bindtap="toAgreement">é˜…è¯»å¹¶åŒæ„ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
    <view class="countPrize">
      <view class="countValue">ç´¯è®¡{{prizeSize}}æ¬¡èµèµ</view>
    </view>
    <view class="rankBox" wx:if="{{!templateMode || modeName === 'zshlMode'}}">
      <view class="rankItem" wx:for="{{hbkdRankList}}" wx:key="index">
        <image src="https://static.hudongmiao.com/joymewMp/recharge/firstMedal.png" class="topThreeIcon" wx:if="{{index === 0}}" />
        <image src="https://static.hudongmiao.com/joymewMp/recharge/secondMedal.png" class="topThreeIcon" wx:if="{{index === 1}}" />
        <image src="https://static.hudongmiao.com/joymewMp/recharge/thirdMedal.png" class="topThreeIcon" wx:if="{{index === 2}}" />
        <view class="num" wx:if="{{index > 2}}">{{index + 1}}</view>
        <image src="{{item.avator}}" class="headImg"></image>
        <view class="name">{{item.wx_name}}</view>
        <view class="wish">ç´¯è®¡æ‰“èµ{{item.allGold}}å…ƒ</view>
      </view>
    </view>
    <view class="rankBox" wx:else>
      <view class="rankInner">
        <view class="rankItem" wx:for="{{hbkdRankList}}" wx:key="index">
          <image src="https://static.hudongmiao.com/joymewMp/rechargeNew/first.png" class="topThreeIcon" wx:if="{{index === 0}}" />
          <image src="https://static.hudongmiao.com/joymewMp/rechargeNew/second.png" class="topThreeIcon" wx:if="{{index === 1}}" />
          <image src="https://static.hudongmiao.com/joymewMp/rechargeNew/third.png" class="topThreeIcon" wx:if="{{index === 2}}" />
          <view class="num" wx:if="{{index > 2}}">{{index + 1}}</view>
          <image src="{{item.avator}}" class="headImg"></image>
          <view class="name">{{item.wx_name}}</view>
          <view class="wish">ç´¯è®¡æ‰“èµ{{item.allGold}}å…ƒ</view>
        </view>
      </view>
    </view>
  </view>
</view>
````

## File: packageA/pages/hbkdRecharge/styles/zshlMode.wxss
````
.hbkdRechargeContainer.zshlMode {
  background-color: #ffdeb5;
  background-image: url('https://ustatic.joymew.com/joymewScreen/zshl/mobile/hbkdBg.png');
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  padding-bottom: 40rpx;
}

/* çº¢åŒ…å£è¢‹ä½™é¢åŒºåŸŸ */
.hbkdRechargeContainer.zshlMode .remainArea {
  width: 100%;
  display: flex;
  justify-content: center;
  padding-top: 150rpx;
}

.hbkdRechargeContainer.zshlMode .remainArea .moneyInfo {
  width: 618rpx;
  height: 444rpx;
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/hbkz.png");
  background-size: 100% 100%;
  padding-top: 20rpx;
}

.hbkdRechargeContainer.zshlMode .remainArea .moneyInfo .moneyValue {
  color: #9e2a24;
  font-size: 96rpx;
  text-align: center;
}

.hbkdRechargeContainer.zshlMode .remainArea .moneyInfo .moneyValue .unit {
  color: #9e2a24;
  font-size: 32rpx;
}

.hbkdRechargeContainer.zshlMode .remainArea .moneyInfo .moneyTip {
  font-size: 24rpx;
  font-weight: 400;
  color: #ffffff;
  text-align: center;
  line-height: 75rpx;
}

/* çº¢åŒ…å£è¢‹å……å€¼åŒºåŸŸ */
.hbkdRechargeContainer.zshlMode .rechargeArea {
  display: flex;
  justify-content: center;
  margin-top: 35rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea.mTop {
  margin-top: 40rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea.remainHidden {
  margin-top: 100rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox {
  width: 712rpx;
  height: 690rpx;
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/remarea.png");
  background-size: 100% 100%;
  display: grid;
  grid-template-columns: repeat(3, 169rpx);
  grid-template-rows: repeat(3, 114rpx);
  justify-content: center;
  column-gap: 35rpx;
  row-gap: 40rpx;
  align-content: center;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem {
  width: 169rpx;
  height: 114rpx;
  border-radius: 24rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .staticMod {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .staticMod .value {
  font-size: 38rpx;
  font-weight: 700;
  color: #ffffff;
  white-space: nowrap;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .staticMod .value .unit {
  font-size: 38rpx;
  font-weight: 400;
  color: #ffffff;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .staticMod .name {
  font-size: 36rpx;
  font-weight: 600;
  color: #ffffff;
  margin-top: 15rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod .crown {
  width: 50rpx;
  height: 50rpx;
  position: absolute;
  right: -21rpx;
  top: -21rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod .customTxt1 {
  font-size: 32rpx;
  font-weight: 400;
  color: #ffffff;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod .customTxt2 {
  font-size: 18rpx;
  font-weight: 400;
  color: #fdffa7;
  margin-top: 10rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod input {
  width: 180rpx;
  height: 80rpx;
  color: #ffffff;
  font-size: 32rpx;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod .unit {
  font-size: 20rpx;
  font-weight: 400;
  color: #ffffff;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem .customMod.inputMod {
  flex-direction: unset;
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(1),
.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(7) {
  background: #d9d9d9 linear-gradient(224deg, #ffbf5f 0%, #fe5655 100%);
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(2),
.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(8) {
  background: #d9d9d9 linear-gradient(224deg, #64bfe7 0%, #3211fd 100%);
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(3),
.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(9) {
  background: #d9d9d9 linear-gradient(224deg, #feb7bb 0%, #fe154d 100%);
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(4) {
  background: #d9d9d9 linear-gradient(224deg, #9dbfff 0%, #d16efa 100%);
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(5) {
  background: #d9d9d9 linear-gradient(224deg, #fdcb89 0%, #fb966e 100%);
}

.hbkdRechargeContainer.zshlMode .rechargeArea .rechargeBox .rechargeItem:nth-child(6) {
  background: #d9d9d9 linear-gradient(224deg, #f3a6f4 0%, #9e11fd 100%);
}

/* å……å€¼æ’è¡Œæ¦œåŒºåŸŸ */
.hbkdRechargeContainer.zshlMode .rankArea {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 12rpx;
  position: relative;
}

.hbkdRechargeContainer.zshlMode .rankArea .agreement {
  font-size: 24rpx;
  font-weight: 400;
  color: #ffeb7f;
}

.hbkdRechargeContainer.zshlMode .rankArea .countPrize {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 80rpx;             
}

.hbkdRechargeContainer.zshlMode .rankArea .countPrize::before,
.hbkdRechargeContainer.zshlMode .rankArea .countPrize::after {
  content: "";
  display: block;
  width: 32rpx;
  height: 32rpx;
  background-size: 100% 100%;
}

.hbkdRechargeContainer.zshlMode .rankArea .countPrize::before {
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/loveIcon.png");
}

.hbkdRechargeContainer.zshlMode .rankArea .countPrize::after {
  background-image: url("https://ustatic.joymew.com/joymewScreen/zshl/mobile/loveIcon.png");
}

.hbkdRechargeContainer.zshlMode .rankArea .countPrize .countValue {
  font-size: 32rpx;
  font-weight: 500;
  color: #cd7034;
  text-shadow: 0px 8rpx 8rpx 0rpx rgba(250, 116, 45, 1);
  margin: 0 20rpx;
  font-weight: 500;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox {
  width: 745rpx;
  min-height: 1000rpx;
  margin: 0 auto;
  background-image: url('https://ustatic.joymew.com/joymewScreen/zshl/mobile/rankBg.png');
  background-size: 100% 100%;
  margin-top: 34rpx;
  padding: 97rpx 20rpx 0 20rpx;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem {
  display: flex;
  align-items: center;
  margin-bottom: 20rpx;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem .topThreeIcon {
  width: 46rpx;
  height: 64rpx;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem .num {
  width: 46rpx;
  font-size: 48rpx;
  font-weight: 500;
  color: #cd7034;
  text-align: center;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem .headImg {
  width: 70rpx;
  height: 70rpx;
  border-radius: 94rpx;
  margin-left: 28rpx;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem .name {
  font-size: 32rpx;
  font-weight: 400;
  color: #bc7b76;
  width: 280rpx;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-left: 18rpx;
}

.hbkdRechargeContainer.zshlMode .rankArea .rankBox  .rankItem .wish {
  font-size: 28rpx;
  font-weight: 400;
  color: #fb6c58;
  width: 210rpx;
  text-align: right;
  white-space: nowrap;
}

@media screen and (max-height: 550px) {
  .hbkdRechargeContainer.zshlMode .remainArea .moneyInfo {
    padding-top: 23rpx;
  }
}
````

## File: packageA/pages/wishRank/wishRank.js
````javascript
import {
  reqGetSignRankList
} from '../../../api/gift'

const app = getApp();

Page({
  data: {
    bottomLift: 0,
    signRankList: [],
    myUserId: '',
    myInfo: {
      indexStr: '',
      userId: '',
      avator: wx.getStorageSync('avatarUrl'),
      money: 0,
      position: '',
      positionName: '',
      wx_name: wx.getStorageSync('nickName'),
    }
  },
  onLoad(options) {
    const {
      userId,
    } = options;
    console.log(userId);
    this.setData({
      myUserId: userId,
      bottomLift: app.globalData.bottomLift,
    });
    this.initRankList();
  },
  initRankList() {
    const storageLiveId = wx.getStorageSync('liveId');
    wx.showLoading({
      title: 'åŠ è½½ä¸­...'
    });
    reqGetSignRankList(storageLiveId).then((res) => {
      console.log(res);
      wx.hideLoading();
      // äº²å‹å…³ç³»
      const RELATIVES = {
        1: 'çˆ¶æ¯',
        2: 'èˆ…èˆ…',
        3: 'å”å”',
        4: 'ä¼¯ä¼¯',
        5: 'é˜¿å§¨',
        6: 'å§å¦¹',
        7: 'å…„å¼Ÿ',
        8: 'æœ‹å‹',
        9: 'åŒå­¦',
        10: 'å¸ˆé•¿',
        11: 'åŒäº‹',
        12: 'è‡ªå®šä¹‰',
      };
      /**
       * æ ¹æ®ç±»å‹è¿”å›äº²å‹ 
       */
      const getRelativeTypeLabel = (type) => {
        try {
          if (type.includes('-')) {
            const tmpSubTypeInfos = type.split('-');
            const firstLevelType = tmpSubTypeInfos[0];
            const secondLevelType = tmpSubTypeInfos[1];
            const firstLevelTypeLabel = firstLevelType === '1' ? 'ç”·æ–¹' : 'å¥³æ–¹';
            let secondLevelTypeLabel;
            if (/^\d+$/.test(secondLevelType)) {
              secondLevelTypeLabel = RELATIVES[secondLevelType];
            } else {
              secondLevelTypeLabel = secondLevelType;
            }
            return `${firstLevelTypeLabel}${secondLevelTypeLabel}`;
          }
        } catch (err) {
          console.log(err);
        }
        if (type === '1') {
          return 'ç”·æ–¹äº²å‹';
        }
        if (type === '2') {
          return 'å¥³æ–¹äº²å‹';
        }
        return '';
      };
      const signRankList = res.data.list1.map((dataItem) => {
        return {
          ...dataItem,
          money: parseInt(dataItem.money, 10),
          positionName: getRelativeTypeLabel(dataItem.position),
        }
      });
      let tmpMyInfo = null;
      // è®¡ç®—æˆ‘çš„æ’å
      const tmpIndex = signRankList.findIndex((item) => item.userId === this.data.myUserId);
      const resultIndexStr = (tmpIndex > -1 && tmpIndex < 100) ? `${tmpIndex + 1}` : '99+';
      // è®¡ç®—æˆ‘çš„å…¶ä»–ä¿¡æ¯
      if (tmpIndex > -1) {
        tmpMyInfo = {
          indexStr: resultIndexStr,
          ...signRankList[tmpIndex],
        };
      } else {
        tmpMyInfo = {
          ...this.data.myInfo,
          indexStr: resultIndexStr,
        }
      }
      this.setData({
        signRankList,
        myInfo: tmpMyInfo,
      });
    }).catch((err) => {
      console.log(err);

      wx.hideLoading();
    });
  },
});
````

## File: packageC/pages/outerLink/outerLink.json
````json
{
  "disableScroll": true
}
````

## File: packageGame/pages/luckyWheel/luckyWheel.wxss
````
.luckyWheel-wrap {
  position: relative;
  width: 100vw;
  height: 100vh;
  background-image: url('https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/main-bg.png');
  background-size: cover;
  background-position: center;
}
````

## File: packageGame/pages/luckyWheel/luckyWheelMain/luckyWheelMain.js
````javascript
import {
  reqGetZyzInfo, // è·å–æ¸¸æˆä¿¡æ¯
  reqZyzRecharge, // å……å€¼è¯·æ±‚
  reqStartZyz, // å¼€å§‹æŠ½å¥–è¯·æ±‚
  reqSendBroadCast, // é€ç¤¼å¹¿æ’­è¯·æ±‚
  reqSendPrizeInfo, // å‘é€ä¸­å¥–å¹¿æ’­è¯·æ±‚
} from "../../../api/zyz";

const TWEEN = require("../../../utils/tween.js");
const app = getApp();

Component({
  properties: {
    poolMoney: {
      // å¥–æ± é‡‘é¢
      type: String,
      default: 0,
    },
    prizeItemList: {
      // å¥–å“åˆ—è¡¨
      type: Array,
      default: () => [],
    },
    countDown: {
      // å€’è®¡æ—¶
      type: Number,
      default: 0,
    },
    isEntry: {
      // å……å€¼å…¥å£æ˜¯å¦å¼€å¯
      type: Boolean,
      default: false,
    },
    // ç”¨æˆ·çš„å››é¡¹ä¿¡æ¯ï¼Œç”¨äºå‘ç¤¼ç‰©ç›¸å…³çš„è¯·æ±‚
    userId: {
      type: String,
      default: "",
    },
    openId: {
      type: String,
      default: "",
    },
    name: {
      type: String,
      default: "",
    },
    headImg: {
      type: String,
      default: "",
    },
    gameCode:  {
      type: String,
      default: ""
    }
  },

  data: {
    firstFivePrizeItems: [], // å‰äº”ä¸ªå¥–å“
    lastFivePrizeItems: [], // åäº”ä¸ªå¥–å“
    selectedGiftIndex: 0, // é€‰ä¸­çš„ç¤¼ç‰©ç´¢å¼•
    isClicked: false, // æ˜¯å¦ç‚¹å‡»äº†å¼€å§‹æŒ‰é’®
    isWin: false, // æ˜¯å¦ä¸­å¥–
    brightItemIndex: 10, // äº®èµ·çš„è½¬ç›˜é€‰é¡¹ç´¢å¼•
    // ç¤¼ç‰©åˆ—è¡¨
    giftItems: [{
        id: 1,
        gift: "rocket1",
        name: "ç«ç®­å°å·",
        imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket1.png",
        isChoosed: true,
      },
      {
        id: 2,
        gift: "rocket2",
        name: "ç«ç®­ä¸­å·",
        imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket2.png",
        isChoosed: false,
      },
      {
        id: 3,
        gift: "rocket3",
        name: "å¤§å·å¤§å·",
        imgUrl: "https://static.hudongmiao.com/joymewMp/zyz/rocket3.png",
        isChoosed: false,
      },
    ],
    isDrawing: false, // å½“å‰æ˜¯å¦æ­£åœ¨æŠ½å¥–
    drawAudio: null, // æŠ½å¥–éŸ³æ•ˆ
    winAudio: null, // ä¸­å¥–éŸ³æ•ˆ
    moneyAudio: null, // é‡‘é’±éŸ³æ•ˆ
    prizeMoney: "", // ä¸­å¥–é‡‘é¢
    balance: "", // ç”¨äºå‘é€ä¸­å¥–å¹¿æ’­
    opacity: 1,
    userAvatar: "", // ç”¨æˆ·å¤´åƒ
    userNickname: "", // ç”¨æˆ·æ˜µç§°
  },

  observers: {
    // ç›‘å¬countDownå˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°æ ¼å¼åŒ–åçš„å€’è®¡æ—¶
    'countDown': function(countDown) {
      this.setData({
        formattedCountDown: this.formatCountDown(countDown)
      });
    }
  },

  methods: {
    // readyæ—¶åˆå§‹åŒ–éŸ³é¢‘
    initAudio() {
      console.log('initAudio');
      this.data.drawAudio = wx.createInnerAudioContext();
      this.data.drawAudio.src = "https://ustatic.hudongmiao.com/joymewMp/luckyWheel/draw_audio.mp3";
      this.data.winAudio = wx.createInnerAudioContext();
      this.data.winAudio.src = "https://ustatic.hudongmiao.com/joymewMp/luckyWheel/win_audio.mp3";
      this.data.moneyAudio = wx.createInnerAudioContext();
      this.data.moneyAudio.src = "https://ustatic.hudongmiao.com/joymewMp/luckyWheel/money_audio.mp3";
      // å°†æ‰€æœ‰éŸ³é¢‘éŸ³é‡è®¾ç½®ä¸º0
      this.data.drawAudio.volume = 0;
      this.data.winAudio.volume = 0;
      this.data.moneyAudio.volume = 0;
      // å°†æ‰€æœ‰éŸ³é¢‘æ’­æ”¾ä¸€éï¼Œé˜²æ­¢ç¬¬ä¸€æ¬¡æ’­æ”¾æ—¶å‡ºç°å¡é¡¿
      this.data.drawAudio.play();
      this.data.winAudio.play();
      this.data.moneyAudio.play();
    },
    // é€‰æ‹©ç¤¼ç‰©
    chooseGift(e) {
      const choosedId = e.currentTarget.dataset.id;
      this.data.giftItems.forEach((item, index) => {
        if (item.id === choosedId) {
          item.isChoosed = true;
          this.setData({
            giftItems: this.data.giftItems,
          });
        } else {
          item.isChoosed = false;
          this.setData({
            giftItems: this.data.giftItems,
          });
        }
      });
    },
    // è·å–å½“å‰é€‰æ‹©çš„ç¤¼ç‰©çš„å¯¹è±¡
    getChoosedGift() {
      return this.data.giftItems.find((item) => {
        return item.isChoosed;
      });
    },
    // æ£€æŸ¥å½“å‰èƒ½å¦å‘é€ç¤¼ç‰©
    canSendGift() {
      // æ£€æŸ¥å……å€¼å…¥å£æ˜¯å¦å¼€å¯
      if (!this.data.isEntry) {
        wx.showToast({
          title: 'è´­ä¹°å…¥å£å…³é—­',
          icon: 'none'
        });
        return false;
      }
      // æ£€æŸ¥å½“å‰æ˜¯å¦æ­£åœ¨æŠ½å¥–
      if (this.data.isDrawing) {
        return false;
      }
      return true;
    },
    // ç‚¹å‡»å‘é€ç¤¼ç‰©
    sendGift({
      type
    }) {
      // å¦‚æœç‚¹å‡»çš„æ˜¯"å†ç©ä¸€æ¬¡"ï¼Œåˆ™ä¸æ’­æ”¾æŒ‰é’®åŠ¨ç”»
      if (type !== "playAgain") {
        this.sendGiftBtnAnimation();
      }

      // å…ˆæ£€æŸ¥å½“å‰èƒ½å¦å‘é€ç¤¼ç‰©
      if (!this.canSendGift()) {
        return;
      }
      // å‘å‡ºå……å€¼è¯·æ±‚
      reqZyzRecharge({
          userId: this.data.userId,
          openId: this.data.openId,
          dzp_kind: '2'
        })
        // ç¡®è®¤å……å€¼å®Œæˆåï¼Œè·å–æ¸¸æˆä¿¡æ¯
        .then(() => {
          wx.showToast({
            title: 'ç¤¼ç‰©å‘é€æˆåŠŸ!',
            icon: 'none'
          });
          // å‘é€é€ç¤¼å¹¿æ’­
          this.sendGiftBroadcast(this.getChoosedGift());
          return reqGetZyzInfo();
        })
        // è·å–åˆ°æ¸¸æˆä¿¡æ¯åï¼Œå‘é€å¼€å§‹æŠ½å¥–è¯·æ±‚
        .then((res) => {
          this.data.turnId = res.data.id;
          return reqStartZyz({
            turnId: this.data.turnId,
            dzp_kind: '2'
          });
        })
        // è·å–åˆ°æŠ½å¥–è¯·æ±‚ä¿¡æ¯åï¼Œå¼€å§‹æŠ½å¥–è½¬ç›˜åŠ¨ç”»
        .then((res) => {
          //å¥–æ± é‡‘é¢åˆ·æ–°
          if (res.data.totalMoney.remainCoin) {
            this.triggerEvent("changePoolMoney", {
              poolMoney: res.data.totalMoney.remainCoin,
            });
          }
          this.setData({
            prizeMoney: res.data.endMoney,
            balance: res.data.totalMoney.balance
          });
          // å¼€å§‹è½¬ç›˜åŠ¨ç”»
          const prizeItemIndex = this.getPrizeItemIndex(res.data.endMoney);
          this.wheelAnimation(prizeItemIndex);
        })
        .catch((err) => {
          wx.showToast({
            title: 'ç¤¼ç‰©å‘é€å¤±è´¥!',
            icon: 'none'
          });
          this.isDrawing = false;
        });
    },
    // æ ¹æ®å¥–é¡¹å†…å®¹è¿”å›ç´¢å¼•
    getPrizeItemIndex(prizeItem) {
      const prizeItemList = this.data.prizeItemList;
      for (let i = 0; i < prizeItemList.length; i += 1) {
        const item = prizeItemList[i].replace(/[\u4e00-\u9fa5]/g, "");
        if (item === prizeItem) {
          return i;
        }
      }
    },
    // è½¬ç›˜åŠ¨ç”»ï¼ŒtargetIndexï¼šä¸­å¥–é€‰é¡¹ç´¢å¼•
    wheelAnimation(targetIndex) {
      const {
        drawAudio,
        winAudio,
        moneyAudio
      } = this.data;
      // å°†éŸ³é¢‘æš‚åœï¼Œé˜²æ­¢ä¹‹å‰çš„éŸ³é¢‘è¿˜åœ¨æ’­æ”¾ï¼Œå¹¶ä¸”å°†éŸ³é‡è®¾ç½®ä¸º1
      drawAudio.stop();
      winAudio.stop();
      moneyAudio.stop();
      drawAudio.volume = 1;
      winAudio.volume = 1;
      moneyAudio.volume = 1;

      let brightItemIndexTemp = 0; // äº®èµ·æ–¹å—åœ¨é€†æ—¶é’ˆä¸­çš„ç´¢å¼•
      // è½¬ç›˜æ–¹å—DOMä¸æ˜¯é€†æ—¶é’ˆæ’åˆ—çš„ï¼Œè¿™é‡Œæ˜¯è½¬ç›˜æ–¹å—ï¼ˆé€†æ—¶é’ˆï¼‰å¯¹åº”çš„prizeItemçš„ç´¢å¼•ï¼Œå³0å·æ–¹å—ï¼ˆå·¦ä¸Šè§’ï¼‰å¯¹åº”çš„æ˜¯0å·prizeItemï¼Œ1å·æ–¹å—ï¼ˆä¸Šï¼‰å¯¹åº”çš„æ˜¯1å·prizeItemï¼Œä½†æ˜¯4å·æ–¹å—å¯¹åº”çš„æ˜¯5å·prizeItemï¼Œä»¥æ­¤ç±»æ¨
      const anticlockwiseIndex = [0, 1, 2, 3, 5, 9, 8, 7, 6, 4];
      const circleCount = 4; // è½¬çš„åœˆæ•°
      const duration = 5000; // åŠ¨ç”»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œç”±3366æ”¹ä¸º5000è®©è½¬ç›˜æ›´æ…¢
      // ä¸­å¥–é€‰é¡¹åœ¨é€†æ—¶é’ˆé¡ºåºä¸­çš„ç´¢å¼•
      const targetIndexInAnticlockwise = anticlockwiseIndex.findIndex((item) => {
        return item === targetIndex;
      });


      new TWEEN.Tween({
          count: 0
        })
        .to({
          count: 10 * circleCount + targetIndexInAnticlockwise
        }, duration)
        .easing(TWEEN.Easing.Exponential.Out)
        .onUpdate((object) => {
          brightItemIndexTemp = Math.floor(object.count % 10);
          // æ ¹æ®brightItemIndexTempçš„å€¼ï¼Œæ”¹å˜brightItemIndexçš„å€¼
          this.setData({
            brightItemIndex: anticlockwiseIndex[brightItemIndexTemp],
          });
        })
        // åŠ¨ç”»å¼€å§‹æ—¶
        .onStart(() => {
          this.data.isDrawing = true; // ä¿®æ”¹æŠ½å¥–çŠ¶æ€ä¸ºæ­£åœ¨æŠ½å¥–
          drawAudio.play(); // æ’­æ”¾æŠ½å¥–éŸ³æ•ˆ
        })
        // åŠ¨ç”»ç»“æŸå
        .onComplete(() => {
          drawAudio.stop(); // åœæ­¢æ’­æ”¾æŠ½å¥–éŸ³æ•ˆ
          winAudio.play(); // æ’­æ”¾ä¸­å¥–éŸ³æ•ˆ

          // å»¶è¿Ÿ1ç§’å
          setTimeout(() => {
            this.setData({
              isWin: true, // æ˜¾ç¤ºä¸­å¥–å¼¹çª—
              brightItemIndex: 10, // äº®èµ·æ–¹å—ç´¢å¼•é‡ç½®ä¸º10ï¼Œå³ä¸äº®
            });
            moneyAudio.play(); // æ’­æ”¾ä¸­å¥–åˆ°è´¦çš„é‡‘å¸éŸ³æ•ˆ
          }, 1000);
          TWEEN.removeAll(); // æ¸…é™¤æ‰€æœ‰TWEENåŠ¨ç”»
          clearInterval(animateInterval); // æ¸…é™¤åŠ¨ç”»å®šæ—¶å™¨
          this.data.isDrawing = false; // ä¿®æ”¹æŠ½å¥–çŠ¶æ€ä¸ºæœªæŠ½å¥–
          this.sendPrizeBroad(); // å‘é€ä¸­å¥–å¹¿æ’­
        })
        .start();

      // æ¯10æ¯«ç§’æ›´æ–°ä¸€æ¬¡TWEENåŠ¨ç”»
      const animateInterval = setInterval(() => {
        TWEEN.update();
      }, 10);
    },
    // å‘é€ç¤¼ç‰©æŒ‰é’®åŠ¨ç”»
    sendGiftBtnAnimation() {
      this.setData({
        isClicked: true,
      });
      setTimeout(() => {
        this.setData({
          isClicked: false,
        });
      }, 150);
    },
    // å‘é€ç¤¼ç‰©å¹¿æ’­
    sendGiftBroadcast(giftChoosed) {
      let tmpCode = "";
      if (giftChoosed.id == 1) {
        tmpCode = 5002;
      } else if (giftChoosed.id == 2) {
        tmpCode = 6002;
      } else if (giftChoosed.id == 3) {
        tmpCode = 7002;
      }

      const blessingList = [
        "ç¾é…’ä½³è‚´,ä¸ç”šè£å¹¸",
        "é†‰é…’é¥±å¾·ï¼Œä¸èƒœæ„Ÿæ¿€",
        "å°å°çº¢åŒ…,æ„Ÿè°¢æ‹›å¾…",
        "æ„Ÿè°¢æ‹›å¾…,ç¥æ„¿å®‰åº·",
      ];
      const blessing = blessingList[Math.floor(Math.random() * blessingList.length)];
      const params = JSON.stringify({
        code: tmpCode,
        param: {
          headImg: this.data.headImg,
          nickname: this.data.name,
          wish: blessing,
        },
      });
      reqSendBroadCast({
        c: params,
      });
    },
    // å‘é€ä¸­å¥–å¹¿æ’­
    sendPrizeBroad() {
      reqSendPrizeInfo({
          gold: this.data.prizeMoney,
          remainCoin: this.data.balance,
          turnId: this.data.turnId,
        })
        .catch((err) => {
          wx.showToast({
            title: 'ç½‘ç»œå¼‚å¸¸!',
            icon: 'none'
          });
        });
    },
    // è·³è½¬åˆ°ã€Šå……å€¼æœåŠ¡åè®®ã€‹ç•Œé¢
    toAgreement: function () {
      wx.navigateTo({
        url: "/packageC/pages/agreement/agreement",
      });
    },
    // å…³é—­ä¸­å¥–å¼¹çª—ï¼ˆç»™å­ç»„ä»¶ä½¿ç”¨ï¼‰
    closeWinDialog() {
      this.setData({
        isWin: false,
      });
    },
    // æ ¼å¼åŒ–å€’è®¡æ—¶ä¸º00:00æ ¼å¼
    formatCountDown(countDown) {
      const min = Math.floor(countDown / 60);
      const sec = countDown % 60;
      const minStr = min < 10 ? '0' + min : '' + min;
      const secStr = sec < 10 ? '0' + sec : '' + sec;
      return `${minStr}:${secStr}`;
    },
  },
  lifetimes: {
    // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦åœ¨readyé’©å­è€Œä¸æ˜¯attachedè¿›è¡Œæ•°æ®è®¾ç½®
    // å› ä¸ºattachedæ—¶ï¼Œçˆ¶ç»„ä»¶çš„onLoadè¿˜æ²¡æ‰§è¡Œï¼Œè¿˜æ²¡æœ‰æœ‰æ•ˆçš„å‚æ•°ä¼ å…¥
    ready: function () {
      this.setData({
        firstFivePrizeItems: this.data.prizeItemList.slice(0, 5),
        lastFivePrizeItems: this.data.prizeItemList.slice(5, 10),
        userAvatar: app.globalData.userInfo_avatar, // å…¨å±€å¤´åƒ
        userNickname: app.globalData.userInfo_nickname, // å…¨å±€æ˜µç§°
      });
      // ç»„ä»¶æŒ‚è½½åï¼Œè¿›è¡Œæ¸¸æˆçš„åˆå§‹åŒ–
      this.triggerEvent("requestGameInitInfo");

      // åˆå§‹åŒ–éŸ³é¢‘å¯¹è±¡
      this.initAudio();

    },
    detached: function () {
      // ç»„ä»¶é”€æ¯æ—¶ï¼Œé”€æ¯éŸ³é¢‘èµ„æº
      let {
        drawAudio,
        winAudio,
        moneyAudio
      } = this.data;
      drawAudio.destroy();
      drawAudio = null;
      winAudio.destroy();
      winAudio = null;
      moneyAudio.destroy();
      moneyAudio = null;
    },
  },
});
````

## File: packageGame/pages/luckyWheel/prizeSheet/prizeSheet.js
````javascript
import { reqGetZyzRank } from "../../../api/zyz";
import defaultContent from "@/assets/constant/default";
import { generateRandomId } from "../../../../utils/index";

Component({
  data: {
    resultListDisplay: [],
    otherPrizeList: [],
  },
  methods: {
    // è·å–æ’è¡Œæ¦œ
    generateRank() {
      reqGetZyzRank().then((res) => {
        const resultListDisplay = res.data.list.slice(0, 10);
        // å¦‚æœresultListDisplayçš„é•¿åº¦å°äº10ï¼Œå°±è¡¥å……ç©ºå¯¹è±¡;
        if (resultListDisplay.length < 10) {
          const winPerson = {
            USER_ID: generateRandomId(),
            avator: defaultContent.defaultJoymewAvatar,
            money: "0",
            wx_name: "Player",
          };
          for (let i = resultListDisplay.length; i < 10; i++) {
            resultListDisplay.push(winPerson);
          }
        }
        const otherPrizeList = resultListDisplay.slice(3);
        this.setData({
          resultListDisplay,
          otherPrizeList,
        });
      });
    },
  },
  lifetimes: {
    created() {
      this.generateRank();
    },
  },
});
````

## File: packageGame/pages/shoutHb/components/resPopup/index.js
````javascript
Component({
    properties: {
      money: {
        type: String,
        default: ''
      }
    },
    methods: {
       onClosePopup() {
          this.triggerEvent('popupClose')
       }
    }
})
````

## File: packageGame/pages/shoutHb/components/resPopup/index.wxml
````
<view class="resPopup">
    <view class="shade" bindtap="onClosePopup"></view>
    <view class="popup-box">
        <image class="congratu" src="https://ustatic.joymew.com/joymewScreen/img/shoutHb/congtText.png" />
        <image class="hb" src="https://ustatic.joymew.com/joymewScreen/img/shoutHb/hbIcon.png" />
        <view class="money">{{money}}</view>
        <view class="attend-btn" bindtap="onClosePopup"></view>
        <view class="close-icon" bindtap="onClosePopup"></view>
    </view>
</view>
````

## File: packageGame/pages/shoutHb/components/textBoard/index.js
````javascript
// import { timeoutTask } from "../../../../../utils/index";

// let timer = null;
Component({
  properties: {
    // wishList: {
    //   type: Array,
    //   value: [],
    // },
  },
  observers: {
    // wishList(newVal) {
    //   if (newVal.length > 0) {
    //     this.initWishListView(newVal);
    //   }
    // },
  },
  // lifetimes: {
  //   detached() {
  //       this.clearInterval();
  //   }
  // },
  data: {
    // wishList_view: [],
    // wishList_view_length: 0,
    // upDistance: 0,
    // upDuration: 0.3,
    // cItemHeight: 125,
    // activeIndex: 0,
  },
  methods: {
    // initWishListView(wishList) {
    //   // ä¿è¯åªèµ‹å€¼ä¸€æ¬¡
    //   if (this.data.wishList_view.length > 0) {
    //     return;
    //   }
    //   const wishList_view = wishList;
    //   // é…åˆå®ç°æ— é™æ»šåŠ¨æ•ˆæœ
    //   wishList_view.push(wishList[0]);
    //   this.setData({
    //     wishList_view,
    //     wishList_view_length: wishList_view.length,
    //   });
    // },
    // showNext() {
    //   const activeIndex = this.data.activeIndex + 1;
    //   this.setData({
    //     upDuration: 0.3,
    //     activeIndex,
    //   });
    //   this.updateUpDistance();
    //   if (activeIndex >= this.data.wishList_view_length - 1) {
    //     // æœ€åä¸€ä¸ªæ¸²æŸ“å®Œæˆåï¼Œè¿…é€Ÿåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªå®ç°æ— ç¼è½®æ’­
    //     timeoutTask(() => {
    //       this.setData({
    //         upDuration: 0,
    //       });
    //       timeoutTask(() => {
    //         this.setData({
    //           activeIndex: 0,
    //         });
    //         this.updateUpDistance();
    //       }, 100);
    //     }, 300);
    //   }
    // },
    // updateUpDistance() {
    //   const cItemHeight = this.data.cItemHeight;
    //   const upDistance = -this.data.activeIndex * cItemHeight;
    //   this.setData({
    //     upDistance,
    //   });
    // },
    // clearInterval() {
    //     clearInterval(timer);
    //     timer = null;
    // },
    // loopScroll(duration) {
    //     this.clearInterval();
    //     timer = setInterval(() => {
    //         this.showNext();
    //     }, duration * 1000);
    // }
  },
});
````

## File: pages/estimate/components/mark/markAfterQuery/mark.wxs
````
function getStartipThankString(starNum) {
    if (starNum < 3)
        return "æ„Ÿè°¢æ‚¨çš„è¯„ä»·ï¼"
    else
        return "æ­å–œï¼è¯„ä»·æˆåŠŸï¼"
}
function getStartipTipString(starNum) {
    if (starNum < 3)
        return "ä¸»æŒè€å¸ˆä¸‹æ¬¡ä¼šåšçš„æ›´å¥½";
    else
        return "æ„Ÿè°¢æ‚¨çš„é«˜åˆ†è¯„ä»·ï¼";
}
function getStarEmoUrl(starNum) {
    var staremoUrls = [
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig0.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig2.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig1.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig3.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig4.png',
        'https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremobig5.png',
    ];
    starNum = parseInt(starNum);
    return staremoUrls[starNum];
}

module.exports = {
    getStartipThankString: getStartipThankString,
    getStartipTipString: getStartipTipString,
    getStarEmoUrl: getStarEmoUrl,
}
````

## File: pages/estimate/components/mark/markAfterQuery/markAfterQuery.js
````javascript
import { reqReward } from "../../../../../api/estimate";

Component({
    properties: {
        /**
         * å¼¹çª—åç§°
         *  å–å€¼: askLeave(ç¦»å¼€æŒ½ç•™å¼¹çª—),askReward(å¼•å¯¼æ‰“èµå¼¹çª—),reward(æ‰“èµå¼¹çª—),startip(æ‰“æ˜Ÿå¼¹çª—)
         */
        popupName: {
            type: String,
            value: "",
        },
        sceneType: {
            type: String,
            value: "",
        },
        starNum: {
            type: Number,
            value: 5,
        }
    },

    data: {
        // å……å€¼åˆ—è¡¨
        charges: [
            {
                selected: false,
                price: 8.88,
            },
            {
                selected: false,
                price: 68.88,
            },
            {
                selected: false,
                price: 88.88,
            },
            {
                selected: false,
                price: null,
                cus: true,
            },
        ],
        cusfocus: false, // è‡ªå®šä¹‰æ‰“èµé‡‘é¢èšç„¦
        moneyInput: "", // è‡ªå®šä¹‰æ‰“èµé‡‘é¢
    },
    methods: {
        prevent(){
            console.log('é˜»æ­¢å†’æ³¡')
            return 
        },
        onStartipBlankTap(){
            this.triggerEvent("actionChange", "closePopup");
        },
        /**
         * å¤„ç†è¡Œä¸º
         * @param {String} actionName è¡Œä¸ºåç§°
         * å–å€¼: toAskLeave(æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—),toAskReward(æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—),toReward(æ‰“å¼€æ‰“èµå¼¹çª—),
         * closePopup(å…³é—­å¼¹çª—),reward(æ‰“èµ)
         */
        handleAction(e) {
            const actionName = e.currentTarget.dataset.actionname;
            // æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—
            if (actionName === "toStartip") {
                // this.triggerEvent("aiEvent");
                this.triggerEvent("actionChange", "closePopup");
            }
            else if (actionName === "toAskLeave") {
                this.triggerEvent("actionChange", "toAskLeave");
            } else if (actionName === "toAskReward") {
                // æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—
                this.triggerEvent("actionChange", "toAskReward");
            } else if (actionName === "toReward") {
                // æ‰“å¼€æ‰“èµå¼¹çª—
                this.triggerEvent("actionChange", "toReward");
            } else if (actionName === "closePopup") {
                // å…³é—­å¼¹çª—
                this.triggerEvent("actionChange", "closePopup");
            } else if (actionName === "reward") {
                // æ‰“èµ
                this.rewardHe();
            }
        },
        /**
         * æ‰“èµ
         */
        async rewardHe() {
            const rewardPrice = this.rewardValidate();
            if (!rewardPrice) {
                return;
            }
            console.log("æ‰“èµé‡‘é¢:", rewardPrice);
            try {
                // 1ã€æ‰“èµ
                await reqReward({
                    splid: wx.getStorageSync("liveId"),
                    totalfee: rewardPrice,
                });
                wx.showToast({
                    title: "æ‰“èµæˆåŠŸ!",
                    icon: "none",
                });
                // 2ã€å…³é—­æ‰“èµå¼¹çª—
                this.triggerEvent("actionChange", "closePopup");
                setTimeout(() => {
                    // 3ã€è·³è½¬æŠ½å¥–é¡µé¢
                    wx.navigateTo({
                        url: "/packageC/pages/draw/draw",
                    });
                }, 300);
            } catch (err) {
                console.log(err);
                wx.showToast({
                    title: "æ‰“èµå¤±è´¥!",
                    icon: "none",
                });
            }
        },
        /**
         * æ‰“èµå‰çš„éªŒè¯
         */
        rewardValidate() {
            const targetCharge = this.data.charges.find((item) => item.selected);
            if (!targetCharge) {
                wx.showToast({
                    title: "è¯·é€‰æ‹©æ‰“èµé‡‘é¢!",
                    icon: "none",
                });
                return false;
            }
            if (targetCharge.cus && !this.data.moneyInput) {
                wx.showToast({
                    title: "è¯·è¾“å…¥æ‰“èµé‡‘é¢!",
                    icon: "none",
                });
                return false;
            }
            const price = targetCharge.cus
                ? this.data.moneyInput
                : targetCharge.price;
            return price;
        },
        /**
         * é€‰æ‹©æ‰“èµé‡‘é¢
         */
        chooseCharge(e) {
            const choosedIndex = e.currentTarget.dataset.index;
            const charges = this.data.charges;
            charges.forEach((item, index) => {
                item.selected = index === choosedIndex;
            });
            this.setData({
                charges,
                cusfocus: !!charges[choosedIndex].cus,
            });
        },
        /**
         * è¾“å…¥æ‰“èµé‡‘é¢
         */
        handleMoneyInput(e) {
            let tmpMoneyStr = e.detail.value;
            let r = /^\+?[1-9][0-9]*$/; //æ­£æ•´æ•°
            let flag = r.test(tmpMoneyStr);
            let list = this.data.charges;
            if (flag || tmpMoneyStr === "0.01") {
                // åªèƒ½æ˜¯æ­£æ•´æ•°æˆ–è€…æ˜¯0.01
                this.setData({
                    moneyInput: tmpMoneyStr,
                });
            } else {
                this.setData({
                    moneyInput: "",
                });
            }
        },
        /**
         * è‡ªå®šä¹‰æ‰“èµé‡‘é¢å¤±ç„¦
         */
        handleMoneyBlur(e) {
            this.setData({
                cusfocus: false,
            });
        },
    },
});
````

## File: pages/estimate/components/mark/markAfterQuery/markAfterQuery.wxml
````
<wxs src="./mark.wxs" module="mark"></wxs>
<!-- æ‰“æ˜Ÿæç¤º-->
<view class="startip-wrap" wx:if="{{popupName === 'startip'}}" bindtap="onStartipBlankTap">
  <image class="startip-image2-modal" src="https://ustatic.hudongmiao.com/joymewMp/estimate-new/staremodecoration.png"></image>
  <image class="startip-image-modal" src="{{mark.getStarEmoUrl(starNum)}}"></image>
  <view class="startip-modal" catchtap="prevent">
    <view class="thanks" >{{mark.getStartipThankString(starNum)}}</view>
    <view class="tips">{{mark.getStartipTipString(starNum)}}</view>
    <view class="btn-group">
      <!-- <view class="btn-leave" data-actionName='toAskLeave' bindtap="handleAction">å–æ¶ˆ</view> -->
      <view class="btn-ok" data-actionName='toStartip' bindtap="handleAction">ç¡®å®š</view>
    </view>
  </view>
</view>
<!-- ç¦»å¼€æŒ½ç•™ -->
<view class="leave-wrap" wx:if="{{popupName === 'askLeave'}}">
  <view class="leave-modal" catchtap="prevent">
    <view class="emjoy"></view>
    <view class="leave">
      <view>å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦</view>
      <view>ç¡®è®¤è¦ç¦»å¼€å—ï¼Ÿ</view>
    </view>
    <view class="btn-group">
      <view class="btn-leave" bindtap="hideModal" data-actionName='closePopup' bindtap="handleAction">ç‹ å¿ƒç¦»å¼€</view>
      <view class="btn-encourage" data-actionName='toReward' bindtap="handleAction">ç»§ç»­é¼“åŠ±</view>
    </view>
  </view>
</view>
<!-- å¼•å¯¼æ‰“èµ -->
<view class="feedback-wrap" wx:if="{{popupName === 'askReward'}}" bindtap="onStartipBlankTap">
  <view class="feedback-modal" catchtap="prevent">
    <view class="thanks">æ„Ÿè°¢æ‚¨çš„è¯„ä»·ï¼</view>
    <view class="tips">è¯„ä»·å®Œæˆåè¿˜å¯å›é¡¾ç°åœºç¬é—´å“¦ï½</view>
    <view class="btn-group">
      <!-- <view class="btn-leave" data-actionName='toAskLeave' bindtap="handleAction">å–æ¶ˆ</view> -->
      <view class="btn-encourage" data-actionName='toReward' bindtap="handleAction">æ‰“èµ</view>
    </view>
  </view>
</view>
<!-- å©šç¤¼ç‰ˆæ‰“èµä¸»æŒäºº -->
<view class="pay-wrap" wx:if="{{popupName === 'reward' && sceneType === '0'}}" data-actionName='toAskLeave' bindtap="handleAction">
  <view class="pay-modal  {{sceneType == '0'?'spe':''}}" catchtap="prevent">
    <view class="end-poem">
      <view class="p1">å©šç¤¼å®Œç¾è½å¹•</view>
      <view class="p2">æˆ‘ä»¬å§‹ç»ˆç›¸ä¿¡ï¼Œå©šçº±æ˜¯å±äºæ¯ä¸€ä¸ªå¥³äººçš„ç«¥è¯</view>
      <view class="p3">
        èµ„æ·±ä¸»æŒäºº
        <view class="viewider"></view>
        å·²åœ¨å©šç¤¼ä¸€çº¿å¥‹æˆ˜2012å¤©
      </view>
    </view>
    <view class="charge-wrap">
      <block wx:for="{{charges}}" wx:for-item="item" wx:for-index="index" wx:key="index">
        <view wx:if="{{!item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="solid">æ‰“èµ</view>
          <view class="money" wx:if="{{!item.cus}}">
            <view class="unit">ï¿¥</view>
            {{item.price}}
          </view>
        </view>
        <view wx:if="{{item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="money cusmoney {{cusfocus?'focusmoney':''}}">
            <block wx:if="{{moneyInput&&!cusfocus}}">
              <view style="display:flex">
                <view class="unit">ï¿¥</view>
                {{moneyInput}}
              </view>
            </block>
            <block wx:if="{{!moneyInput&&!cusfocus}}">
              <view>åœŸè±ª</view>
              <view>è‡ªå®šä¹‰</view>
            </block>
            <block wx:if="{{cusfocus}}">
              <view class="unit">ï¿¥</view>
              <input class="cusprice" type="number" maxlength="4" value="{{moneyInput}}" bindinput="handleMoneyInput" bindblur="handleMoneyBlur" focus="{{cusfocus}}" />
            </block>
          </view>
        </view>
      </block>
    </view>
    <view class="director">å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦ï¼Œæ‰“èµé¼“åŠ±ä¸€ä¸‹å—ï¼Ÿ</view>
    <view class="charge-btn" data-actionName='reward' catchtap="handleAction">ç¡®è®¤æ‰“èµ</view>
  </view>
</view>
<!-- éå©šç¤¼ç‰ˆæ‰“èµä¸»æŒäºº -->
<view class="pay-wrap" wx:if="{{popupName === 'reward' && sceneType !== '0'}}" data-actionName='toAskLeave' bindtap="handleAction">
  <view class="pay-modal other " catchtap="prevent">
    <view class="end-poem">
      <view class="p1">æ´»åŠ¨å®Œç¾ç»“æŸ!</view>
    </view>
    <view class="charge-wrap">
      <block wx:for="{{charges}}" wx:for-item="item" wx:for-index="index" wx:key="index">
        <view wx:if="{{!item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="solid">æ‰“èµ</view>
          <view class="money" wx:if="{{!item.cus}}">
            <view class="unit">ï¿¥</view>
            {{item.price}}
          </view>
        </view>
        <view wx:if="{{item.cus}}" class="charge {{item.selected?'chargeSelected':''}}" catchtap="chooseCharge" data-index="{{index}}">
          <view class="money cusmoney {{cusfocus?'focusmoney':''}}">
            <block wx:if="{{moneyInput&&!cusfocus}}">
              <view style="display:flex">
                <view class="unit">ï¿¥</view>
                {{moneyInput}}
              </view>
            </block>
            <block wx:if="{{!moneyInput&&!cusfocus}}">
              <view>åœŸè±ª</view>
              <view>è‡ªå®šä¹‰</view>
            </block>
            <block wx:if="{{cusfocus}}">
              <view class="unit">ï¿¥</view>
              <input class="cusprice" type="number" maxlength="4" value="{{moneyInput}}" bindinput="handleMoneyInput" bindblur="handleMoneyBlur" focus="{{cusfocus}}" />
            </block>
          </view>
        </view>
      </block>
    </view>
    <view class="director">å¸ä»ªå°å“¥å“¥è¿™ä¹ˆè¾›è‹¦ï¼Œæ‰“èµé¼“åŠ±ä¸€ä¸‹å—ï¼Ÿ</view>
    <view class="charge-btn" data-actionName='reward' bindtap="handleAction">ç¡®è®¤æ‰“èµ</view>
  </view>
</view>
````

## File: pages/joymewIndex/styles/bydl.wxss
````
/* ç­¾åˆ°æ¯•ä¸šå…¸ç¤¼æ ·å¼ */
.signWrap.bydl .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/bydlBg.png");
}

.signWrap.bydl .bg::after {
  content: "";
  display: block;
  width: 100%;
  height: 253rpx;
  position: absolute;
  bottom: 0;
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/bydlDeco.png");
  background-size: 100% 100%;
}

.signWrap.bydl .signForm {
  background-color: #dbfafe;
}

.signWrap.bydl .signForm .formItem {
  align-items: center;
}

.signWrap.bydl .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.bydl .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid rgba(51, 51, 51, 0.6);
}

.signWrap.bydl .signForm .buttonWrap .signButton {
  background: #54d5e9;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/crl.wxss
````
/* ç­¾åˆ°æˆäººç¤¼æ ·å¼ */
.signWrap.crl .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/crlMobileBg2.png");
}

.signWrap.crl .signForm {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/signBoxCrl.png");
}

.signWrap.crl .signForm .formItem {
  align-items: center;
}

.signWrap.crl .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.crl .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid #54d5e9;
}

.signWrap.crl .signForm .buttonWrap .signButton {
  background: #54d5e9;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/dhy.wxss
````
/* ç­¾åˆ°è®¢å©šå®´æ ·å¼ */
.signWrap.dhy .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/dhyMobileBg.png");
}

.signWrap.dhy .signForm {
  background-image: url(https://static.joymew.com/joymewMp/joymewIndex/box-04.png);
}

.signWrap.dhy .signForm .formItem {
  align-items: center;
}

.signWrap.dhy .signForm .formItem .formItem-key {
  color: #ee8b6b;
  width: 135rpx;
}
.signWrap.dhy .signForm .formItem .formItem-value {
  color: #ee8b6b;
  border-bottom: 2rpx solid #e8757e;
}

.signWrap.dhy .signForm .buttonWrap .signButton {
  background: linear-gradient(180deg, #e87080 0%, #ee8b6b 100%);
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/hx.wxss
````
/* ç­¾åˆ°ä¼šé”€æ ·å¼ */
.signWrap.hx .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/hxBg.png");
}

.signWrap.hx .signForm {
  background-image: url(https://static.joymew.com/joymewMp/joymewIndex/signBoxBgHX.png);
}

.signWrap.hx .signForm .formItem {
  align-items: center;
}

.signWrap.hx .signForm .formItem .formItem-key {
  color: #fff;
  width: 135rpx;
}
.signWrap.hx .signForm .formItem .formItem-value {
  color: #fff;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.6);
}

.signWrap.hx .signForm .buttonWrap .signButton {
  background: #b3e0ee;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/jbtm.wxss
````
/* ç­¾åˆ°é‡‘æ¦œé¢˜åæ ·å¼ */
.signWrap.jbtm .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/jbtmBg.png");
  background-size: 126% 101%;
  background-position: -69rpx -50rpx;
}

.signWrap.jbtm .signForm {
  background-color: #ffffd8;
}

.signWrap.jbtm .signForm .formItem {
  align-items: center;
}

.signWrap.jbtm .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.jbtm .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid #e20013;
}

.signWrap.jbtm .signForm .buttonWrap .signButton {
  background: #e20013;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/myy.wxss
````
/* ç­¾åˆ°æ»¡æœˆå®´æ ·å¼ */
.signWrap.myy .bg {
  background-image: url("https://static.hudongmiao.com/joymewMp/myyBg.png");
}

.signWrap.myy .signForm {
    background-color: #f9eded;
}

.signWrap.myy .signForm .formItem {
  align-items: center;
}

.signWrap.myy .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.myy .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid rgba(51, 51, 51, 0.6);
}

.signWrap.myy .signForm .buttonWrap .signButton {
  background: #fab0ce;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/qqy.wxss
````
/* ç­¾åˆ°ä¹”è¿å®´æ ·å¼ */
.signWrap.qqy .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/qqyBg.png");
}

.signWrap.qqy .signForm {
  background-color: #ff9484;
}

.signWrap.qqy .signForm .formItem {
  align-items: center;
}

.signWrap.qqy .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.qqy .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.6);
}

.signWrap.qqy .signForm .buttonWrap .signButton {
  background: #ef2152;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/txh.wxss
````
/* ç­¾åˆ°åŒå­¦ä¼šæ ·å¼ */
.signWrap.txh .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/txhBg.png");
}

.signWrap.txh .signForm {
  background-color: #2c3032;
}

.signWrap.txh .signForm .formItem {
  align-items: center;
}

.signWrap.txh .signForm .formItem .formItem-key {
  color: #fff;
  width: 135rpx;
}
.signWrap.txh .signForm .formItem .formItem-value {
  color: #fff;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.6);
}

.signWrap.txh .signForm .buttonWrap .signButton {
  background: #beb161;
  border-radius: 45rpx;
}
````

## File: pages/joymewIndex/styles/xsy.wxss
````
/* ç­¾åˆ°è°¢å¸ˆå®´æ ·å¼ */
.signWrap.xsy .bg {
  background-image: url("https://static.joymew.com/joymewMp/joymewIndex/xsyBg.png");
  background-size: 112% 101%;
  background-position-x: -15rpx;
}

.signWrap.xsy .signForm {
  background-color: #fef188;
}

.signWrap.xsy .signForm .formItem {
  align-items: center;
}

.signWrap.xsy .signForm .formItem .formItem-key {
  color: #333;
  width: 135rpx;
}
.signWrap.xsy .signForm .formItem .formItem-value {
  color: #333;
  border-bottom: 1rpx solid #e20013;
}

.signWrap.xsy .signForm .buttonWrap .signButton {
  background: #e20013;
  border-radius: 45rpx;
}
````

## File: pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.wxml
````
<wxs src="./tool.wxs" module="tools" />
<view class="container">
    <!-- é¢„å®šæŒ‰é’® -->
    <slot wx:if="{{!reservePopupVisible}}"></slot>
    <!-- é¢„å®šå¼¹çª— -->
    <view class="reserve-box-wrap" wx:else catchtap="closePopup">
        <view class="reserve-box {{appearAni?'appear':''}}" catchtap="emptyHandle" style="padding-bottom:{{paddingBottom}}px">
            <view class="input-wrap">
                <view class="name-wrap">æ‚¨çš„å§“å:</view>
                <view class="content-wrap">
                    <input type="text" value="{{reserveForm.name}}" class="input" bindblur="nameBlur" data-prop="name" placeholder="è¯·è¾“å…¥å§“å" disabled="{{hasReserve}}" maxlength="20"/>
                </view>
            </view>
            <view class="input-wrap">
                <view class="name-wrap">è”ç³»æ–¹å¼:</view>
                <view class="content-wrap">
                    <!-- è¾“å…¥æ¡†è¾“å…¥æ‰‹æœºå· -->
                    <input class="input" maxlength="11" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" type="number" value="{{reserveForm.phone}}" bindblur="onPhoneBlur"/>
                </view>
            </view>
            <view class="input-wrap">
                <view class="name-wrap">é¢„å®šæ—¥æœŸ:</view>
                <view class="picker-wrap">
                    <picker mode="date" bindchange="bindDateChange" disabled="{{hasReserve}}"  start="{{datePickerStart}}" end="{{datePickerEnd}}">
                        <view class="picker-content">{{reserveForm.date?reserveForm.date:'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>
                    </picker>
                </view>
            </view>
            <view class="input-wrap">
                <view class="name-wrap">é¢„å®šæ—¶æ®µ:</view>
                <view class="picker-wrap">
                    <picker mode="selector" disabled="{{hasReserve}}" bindchange="bindTimeChange" value="{{timeIndexChoosed}}" range="{{timeList}}" range-key="name">
                        <view class="picker-content">
                            {{reserveForm.reserveTime === '' ? 'è¯·é€‰æ‹©æ—¶æ®µ' : tools.getReserveTimeName(reserveForm.reserveTime)}}
                        </view>
                    </picker>
                </view>
            </view>
            <view class="input-wrap text-area-wrap">
                <view class="name-wrap">ç•™è¨€å¤‡æ³¨:</view>
                <view class="content-wrap">
                    <textarea disabled="{{hasReserve}}" placeholder="è¯·è¾“å…¥å†…å®¹" class="input" value="{{reserveForm.remark}}" maxlength="140" placeholder-style="color:rgba(0, 0, 0, 0.25)" bindinput="inputRemark" data-prop="remark" />
                </view>
            </view>
            <view class="btn-group">
                <view class="cancel-btn" catchtap="cancel">å–æ¶ˆ</view>
                <view class="sure-btn {{hasReserve?'finash':''}}" catchtap="submit"></view>
            </view>
        </view>
    </view>
</view>
````

## File: pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.wxss
````
.reserve-box-wrap {
  position: fixed;
  width: 750rpx;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  bottom: 0rpx;
  left: 0;
  z-index: 9999;
}
.reserve-box-wrap .reserve-box {
  width: 750rpx;
  bottom: 0rpx;
  position: fixed;
  padding-top: 62rpx;
  padding: 62rpx 0 100rpx 0;
  background: #fff;
  box-shadow: 0rpx -4rpx 8rpx 0rpx rgba(0, 0, 0, 0.1);
  border-top-left-radius: 30rpx;
  border-top-right-radius: 30rpx;
  font-size: 32rpx;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  transform: scaleY(0);
  transform-origin: center bottom;
}
.reserve-box-wrap .reserve-box.appear {
  transform: scaleY(1);
  transition: transform 0.3s linear;
}
.reserve-box-wrap .reserve-box .input-wrap {
  width: 686rpx;
  height: 108rpx;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  border-bottom: 2rpx solid #f0f0f0;
}
.reserve-box-wrap .reserve-box .input-wrap.text-area-wrap {
  height: 208rpx;
  align-items: center;
}
.reserve-box-wrap .reserve-box .input-wrap.text-area-wrap .name-wrap {
  width: 180rpx;
  height: 108rpx;
  font-size: 32rpx;
  color: #333333;
}
.reserve-box-wrap .reserve-box .input-wrap .name-wrap {
  width: 180rpx;
  font-size: 32rpx;
  color: #333333;
}
.reserve-box-wrap .reserve-box .input-wrap .content-wrap {
  flex-grow: 1;
  box-sizing: border-box;
}
.reserve-box-wrap .reserve-box .input-wrap .content-wrap .input {
  color: rgba(0, 0, 0, 0.25);
  width: 100%;
  height: 108rpx;
  border: 0;
}
.reserve-box-wrap .reserve-box .input-wrap .picker-wrap {
  flex-grow: 1;
  height: 108rpx;
  box-sizing: border-box;
}
.reserve-box-wrap .reserve-box .input-wrap .picker-wrap .picker-content {
  color: rgba(0, 0, 0);
  display: flex;
  align-items: center;
  justify-content: flex-start;
  font-size: 28rpx;
  color: #333333;
  padding-left: 10rpx;
  height: 108rpx;
  flex-grow: 1;
}
.reserve-box-wrap .reserve-box .btn-group {
  width: 750rpx;
  height: 128rpx;
  background: #ffffff;
  display: flex;
  justify-content: space-around;
  align-items: center;
}
.reserve-box-wrap .reserve-box .btn-group .sure-btn,
.reserve-box-wrap .reserve-box .btn-group .cancel-btn {
  width: 330rpx;
  height: 76rpx;
  border-radius: 8rpx;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28rpx;
}
.reserve-box-wrap .reserve-box .btn-group .sure-btn {
  background: #ff457a;
  color: #fff;
}
.reserve-box-wrap .reserve-box .btn-group .sure-btn::after {
  content: "é¢„å®š";
  display: inline-block;
}
.reserve-box-wrap .reserve-box .btn-group .sure-btn.finash {
  background: #dcdcdc;
}
.reserve-box-wrap .reserve-box .btn-group .sure-btn.finash::after {
  content: "å·²é¢„å®š";
  display: inline-block;
}
.reserve-box-wrap .reserve-box .btn-group .cancel-btn {
  background: transparent;
  color: rgba(0, 0, 0, 0.4);
}
.hm-btn {
  background-color: transparent;
  border: none;
  margin: 0;
  padding: 0;
  color: rgba(0, 0, 0);
  display: flex;
  align-items: center;
  justify-content: flex-start;
  font-size: 28rpx;
  color: #333333;
  padding-left: 10rpx;
}
.hm-btn::after {
  border: none;
}
````

## File: pages/reserve/vip/vip.js
````javascript
Component({
  properties: {
    personalInfo: {
      type: Object,
      value: {
        photoList: [],
        realName: "",
        intro: "",
        tags: [],
        voice: "",
        workPlace: ["", "", ""],
        proficiency: -1,
      },
    },
    introList: {
      type: Array,
      value: [],
    },
    eFooterVisible: {
      type: Boolean,
      default: false
    },
    navBarHeight: {
      type: String,
      value: 0
    },
    hasScrollToNav: {
      type: Boolean,
      value: false
    },
    wechatQrcode: {
      type: String,
      value: ''
    },
    action: {
      type: String,
      value: ''
    }
  },

  data: {
    reservePopupVisible: false,
    qrcodeVisible: false,
  },
  lifetimes: {
    attached() {},
  },
  observers: {
    action(newVal) {
      if(newVal) {
        this.handleAction(newVal);
      }
    }
  },
  methods: {
    /**
     * è·³è½¬WeddingRiteå°ç¨‹åº
     */
    onPageTap() {
      wx.navigateToMiniProgram({
        appId: "wx6d95d8e3ffefac1d",
        path: `subpkg/wedding-link/my-preview-share?userId=${this.data.userId}`, // æ‰“å¼€çš„é¡µé¢è·¯å¾„
        extraData: {},
        envVersion: "release", // trial release
        success(res) {
          console.log(res);
        },
      });
    },
    /**
     * å…³é—­å¼¹çª—
     */
    toggleReservePopup() {
      this.setData({
        reservePopupVisible: !this.data.reservePopupVisible
      });
    },
    toggleQrcodeVisible() {
      this.setData({
        qrcodeVisible: !this.data.qrcodeVisible
      });
    },
    goBack() {
      wx.navigateBack({
        delta: 1
      });
    },
    handleAction(action) {
      console.log(action);
      if (action === 'addWechat') {
        this.toggleQrcodeVisible();
      } else if (action === 'hostReserve') {
        this.toggleReservePopup();
      }
    }
  },
});
````

## File: pages/reserve/vip/vip.json
````json
{
  "component": true,
  "usingComponents": {
    "reserveButtonnAndPopup": "../reserveButtonAndPopup/reserveButtonAndPopup",
    "QrCodePopup": "../hostingStyle/QrCodePopup/QrCodePopup"
  }
}
````

## File: pages/reserve/vip/vip.wxml
````
<view class="container">
  <view class="nav-bar {{hasScrollToNav ? 'pageScroll' : ''}}" style="--nav-bar-height: {{ navBarHeight }}px;">
    <view class="back-button" bindtap="goBack" wx:if="{{!eFooterVisible}}">
      <image src="https://static.hudongmiao.com/%20miao/icon/backIcon.png" mode="widthFix" class="back-icon"/>
    </view>
  </view>
  <swiper wx:if="{{ personalInfo.photoList.length > 0 }}" indicator-dots="{{true}}" class="swiper" bindtap="onPageTap">
    <swiper-item class="swiper-item" wx:for="{{  personalInfo.photoList }}" wx:for-item="img" wx:key="img">
      <image src="{{ img }}" alt="" srcset="" class="img" mode="aspectFill"></image>
    </swiper-item>
  </swiper>
  <view class="workBox" bindtap="onPageTap">
    <view class="title">ä¸»æŒäºº{{personalInfo.realName}}ä½œå“åˆé›†</view>
    <view class="inroItem" wx:for="{{introList}}" wx:key="index" wx:item="item">{{item}}</view>
  </view>
</view>

<!-- é¢„å®šæŒ‰é’®/å¼¹çª—ç»„ä»¶ -->
<reserveButtonnAndPopup reservePopupVisible="{{reservePopupVisible}}" bindclosePopup="toggleReservePopup">
    <view class="reserveBtnWrap {{eFooterVisible ? 'inTabBarMode' : ''}}" bindtap="toggleReservePopup">
        <view class="reserveBtn">ä¸»æŒé¢„å®š</view>
    </view>
</reserveButtonnAndPopup>

<!-- äºŒç»´ç  -->
<QrCodePopup qrCodeUrl="{{wechatQrcode}}" wx:if="{{qrcodeVisible}}" bind:closeQrcode="toggleQrcodeVisible" />
````

## File: pages/reserve/vip/vip.wxss
````
.container {
  width: 100vw;
  position: relative;
  background: #212125;
  padding-bottom: 200rpx;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.nav-bar {
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--nav-bar-height);
  display: flex;
  align-items: flex-end;
  padding-left: 25rpx;
}
.nav-bar .back-button .back-icon {
  width: 60rpx;
}
.nav-bar.pageScroll {
  background-color: #fff;
}
.reserveBtnWrap {
  width: 100%;
  display: flex;
  justify-content: center;
  position: fixed;
  height: 160rpx;
  bottom: 0;
  z-index: 9999;
}

.reserveBtnWrap.inTabBarMode {
  bottom: 138rpx;
}

.reserveBtn {
  width: 350rpx;
  height: 80rpx;
  background: #d9d9d9 linear-gradient(90deg, #fc4d88, #fa45fc 100%);
  border-radius: 119.23rpx;
  font-size: 34.62rpx;
  font-weight: 500;
  color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  animation: heartBeatWithNoTransform 1.6s linear infinite;
}


@keyframes heartBeatWithNoTransform {
  0% {
    transform: scale(0.8, 0.8);
  }

  50% {
    transform: scale(1, 1);
  }

  100% {
    transform: scale(0.8, 0.8);
  }
}

.swiper {
  width: 750rpx;
  height: 1303rpx;
}

.swiper .swiper-item {
  width: 100%;
  height: 100%;
}

.swiper .swiper-item .img {
  width: 100%;
  height: 100%;
}

.workBox {
  width: 750rpx;
  text-align: center;
  padding-top: 37rpx;
  padding-bottom: 40rpx;
}

.title {
  font-size: 48.08rpx;
  font-weight: 500;
  color: #ffffff;
  margin-bottom: 23rpx;
}

.inroItem {
  font-size: 26.92rpx;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.7);
  line-height: 40rpx;
}
````

## File: api/index.js
````javascript
import {
  request
} from "../utils/request";
import {
  filterObj
} from "../utils/index";

/**
 * è·å–æ´»åŠ¨ä¿¡æ¯
 */
export function reqGetLiveInfo(splid) {
  return request("wxScan/saiYaRen", "GET", {
    splid,
  });
}

/**
 * æˆæƒç™»å½•
 * @description è·å–token å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯
 */
export function reqAuthLogin(code) {
  return request(
    "wxScan/oauth_user7",
    "POST", {
      code,
    }, {
      needAppId: true,
    }
  );
}

/**
 * è·å–ç­¾åˆ°çŠ¶æ€
 */
export function reqGetSignStatus(splid) {
  return request(
    "hmScanReportController/getQianDaoInfo",
    "GET", {
      splid,
    }, {
      needAppId: true,
    }
  );
}

/**
 * ç­¾åˆ°
 * @params splid æ´»åŠ¨id
 * @params avator å¤´åƒ
 * @params wx_name æ˜µç§°
 * @params bless_str ç¥ç¦è¯­
 * @params type ç”·æ–¹äº²å‹/å¥³æ–¹äº²å‹
 * @params phonenumber æ‰‹æœºå·
 * @params birthDate ç”Ÿæ—¥
 * @params gender æ€§åˆ«
 */
export function reqSign({
  splid,
  avator,
  wx_name,
  bless_str,
  type,
  phonenumber,
  birthDate,
  gender,
}) {
  const tmpType = !type ? '3' : type;
  const paramObj = filterObj({
      splid,
      avator,
      wx_name,
      bless_str,
      type: tmpType,
      phonenumber,
      birthDate,
      gender,
    },
    (objItem) => !!objItem
  );
  return request("hmScanReportController/qianDao", "POST", paramObj);
}

/**
 * æš‚å­˜ç­¾åˆ°ä¿¡æ¯
 * @description å¦‚æœæ²¡æœ‰å¤´åƒã€æ˜µç§°åˆ™æš‚å­˜ç­¾åˆ°ä¿¡æ¯->æ‰§è¡Œh5æˆæƒç™»å½•è·å–å¤´åƒã€æ˜µç§°->æœåŠ¡ç«¯æ‹¿ç€å¤´åƒã€æ˜µç§°å’Œæš‚å­˜çš„ç­¾åˆ°ä¿¡æ¯è¿›è¡Œç­¾åˆ°
 * @params splid æ´»åŠ¨id
 * @params bless_str ç¥ç¦è¯­
 * @params type ç”·æ–¹äº²å‹/å¥³æ–¹äº²å‹
 * @params phonenumber æ‰‹æœºå·
 * @params birthDate ç”Ÿæ—¥
 * @params gender æ€§åˆ«
 * @params redirect_url æˆæƒç™»å½•æˆåŠŸåçš„é‡å®šå‘åœ°å€
 */
export function reqSaveSignInfo({
  splid,
  bless_str,
  phonenumber,
  type,
  birthDate,
  gender,
  redirect_url,
}) {
  const tmpType = !type ? '3' : type;
  return request("hmScanReportController/saveQianDaoParam", "POST", {
    splid,
    bless_str,
    phonenumber,
    type: tmpType,
    birthDate,
    gender,
    redirect_url,
  });
}

/**
 * è·å–ä¸ƒç‰›äº‘token
 */
export function reqGetQiniuToken() {
  return request(
    "host/getQnToken",
    "POST", {}, {
      needAppId: true,
      host: "WWW",
    }
  );
}

/**
 * è·å–æ‰‹æœºå·
 */
export function reqGetPhone({
  code,
  type
}) {
  return request("wxScan/getPhoneNumber", "POST", {
    code,
    type,
  });
}

/**
 * è®¢é˜…æ¨¡æ¿æ¶ˆæ¯
 * @param {Array} msgIds æ¨¡æ¿æ¶ˆæ¯idæ•°ç»„
 */
export function reqSubscribeMessage(msgIds) {
  return new Promise((resolve, reject) => {
    if (msgIds.length === 0) {
      resolve("æ²¡æœ‰æ¨¡æ¿æ¶ˆæ¯id");
      return;
    }
    wx.requestSubscribeMessage({
      tmplIds: msgIds,
      success: (result) => {
        resolve(result);
      },
      fail: (err) => {
        reject(err);
      },
    });
  });
}

/**
 * userIdæ¢å–liveId
 * @params {string} userId
 */
export function reqGetLiveIdByUserId(userId) {
  return request(
    "fixed/getQrcode",
    "POST", {
      userId,
    }, {
      host: "WWW",
    }
  );
}

/**
 * éªŒè¯å¤´åƒæ˜¯å¦è¿‡æœŸ
 */
export function reqCheckAvatarExpired(avatarUrl) {
  const checkList = ['X-Info', 'X-ErrNo', 'X-Errno'];
  return new Promise((resolve, reject) => {
    wx.request({
      url: avatarUrl,
      responseType: "arraybuffer",
      success: (res) => {
        console.log(res);
        const headers = res.header || {};
        const isExpired = checkList.some(
          key =>
            headers[key] && headers[key].includes && headers[key].includes('-6101')
        );
        if (isExpired) {
          console.log('å¤´åƒè¿‡æœŸå•¦!');
          resolve(undefined);
        } else {
          resolve(avatarUrl);
        }
      },
      fail: () => {
        reject(undefined);
      },
    });
  });
}
````

## File: packageA/pages/rechargeWedding/rechargeWedding.wxml
````
<view class="rechargeContainer">

  <image src="https://static.hudongmiao.com/joymewMp/img/recharge/topBg.png" class="topBg"></image>
  <view class="userInfo">
    <view class="headImgBox" bindtap="showEditPopup">
      <image src="{{formData.avator}}" class="headImg"></image>
      <image src="https://static.hudongmiao.com/joymewMp/img/recharge/pencil.png" class="pencilImg"></image>
    </view>
    <view class="accountInfo">
      <view class="top">
        <view class="nickname">{{formData.wx_name}}</view>
        <view class="level">
          <image src="https://static.hudongmiao.com/joymewMp/img/recharge/crown.png" class="crownImg"></image>
          <view class="levelVal">Lv{{vipLevel}}</view>
        </view>
      </view>
      <view class="bottom" wx:if="{{!isCloseCoin}}">
        ä½™é¢: {{remainMoney}}
        <image src="https://static.hudongmiao.com/joymewMp/img/diamond.png" class="diamondImg"></image>
      </view>
    </view>
    <view class="relativeType" bindtap="showEditPopup">
      <image src="https://static.hudongmiao.com/joymewMp/img/recharge/boyIcon.png" class="relativeIcon" wx:if="{{formData.type === '1'}}"></image>
      <image src="https://static.hudongmiao.com/joymewMp/img/recharge/girlIcon.png" class="relativeIcon" wx:if="{{formData.type === '2'}}"></image>
      {{typeLabel}}
    </view>
  </view>
  <!-- å›ºå®šå……å€¼é‡‘é¢åŒºåŸŸ -->
  <view class="limitRechargeArea" wx:if="{{!isCloseCoin}}">
    <view class="rechargeItem" wx:for="{{rechargeList}}" wx:key="index" data-desc="{{item}}" bindtap="handleRecharge">
      <image src="https://static.hudongmiao.com/joymewMp/img/diamond.png" class="diamondIcon"></image>
      <view class="num">{{item}}</view>
      <image src="https://static.hudongmiao.com/joymewMp/img/recharge/th.png" class="thIcon" wx:if="{{index === rechargeList.length - 1}}"></image>
    </view>
  </view>
  <view class="agreement" bindtap="toAgreement" wx:if="{{!isCloseCoin}}">
    é˜…è¯»å¹¶åŒæ„
    <view class="bond">ã€Šå……å€¼æœåŠ¡åè®®ã€‹</view>
  </view>
  <view class="wishSheetList">
    <image src="https://static.hudongmiao.com/joymewMp/img/recharge/bdTitle.png" class="bdTitle"></image>
    <view class="vsTitle">
      <view class="boy">
        <image src="https://static.hudongmiao.com/joymewMp/img/recharge/boy.png" class="sexIcon"></image>
        ç”·æ–¹äº²å‹
      </view>
      <image src="https://static.hudongmiao.com/joymewMp/img/recharge/vs.png" class="vsIcon"></image>
      <view class="girl">
        <image src="https://static.hudongmiao.com/joymewMp/img/recharge/girl.png" class="sexIcon"></image>
        å¥³æ–¹äº²å‹
      </view>
    </view>
    <view class="gapLine"></view>
    <view class="listWrap">
      <view class="sexList boy">
        <view class="item" wx:for="{{giftRankListBoy}}" wx:key="index">
          <view class="user">
            <view class="baseInfo">
              <image src="{{item.avator}}" class="headImg"></image>
              <view class="name">{{item.wx_name}}</view>
            </view>
            <view class="level">
              <image src="https://static.hudongmiao.com/joymewMp/img/recharge/crown.png" class="crownImg"></image>
              <view class="levelVal">Lv1</view>
            </view>
          </view>
          <view class="sendGiftNum">é€å‡º{{item.size}}ä¸ªç¥ç¦</view>
        </view>
      </view>
      <view class="sexList girl">
        <view class="item" wx:for="{{giftRankListGirl}}" wx:key="index">
          <view class="user">
            <view class="baseInfo">
              <image src="{{item.avator}}" class="headImg"></image>
              <view class="name">{{item.wx_name}}</view>
            </view>
            <view class="level">
              <image src="https://static.hudongmiao.com/joymewMp/img/recharge/crown.png" class="crownImg"></image>
              <view class="levelVal">Lv1</view>
            </view>
          </view>
          <view class="sendGiftNum">é€å‡º{{item.size}}ä¸ªç¥ç¦</view>
        </view>
      </view>
    </view>
  </view>
  <!-- å¼¹å‡ºåŒºåŸŸ -->
  <view class="popupArea" wx:if="{{editPopupVisible}}">
    <view class="shade" bindtap="hideEditPopup"></view>
    <view class="infoForm {{editPopupAni?'show':'hide'}}">
      <view class="formItem">
        <view class="key">å¤´åƒ</view>
        <view class="formCt">
          <image src="{{formData.avator}}" class="headImg" bindtap='upload'></image>
          <image src="https://static.hudongmiao.com/joymewMp/img/recharge/arrowRight.png" class="arrowRight"></image>
        </view>
      </view>
      <view class="formItem">
        <view class="key">è´µå®¾å§“å</view>
        <view class="formCt">
          <input bindblur="handleNameBlur" value="{{formData.wx_name}}" placeholder="è¯·è¾“å…¥è´µå®¾å§“å" placeholder-style="color:#5B5E63;font-size: 32rpx" class="nameIpt" maxlength="12" />
        </view>
      </view>
      <!-- äº²å‹å›¢è¯¦ç»†ç‰ˆ -->
      <view class="formItem" wx:if="{{relativeMode === 'detail'}}">
        <view class="key">äº²å‹å›¢</view>
        <input value="{{typeLabel}}" class="relativeInput" bind:blur="onRelativeBlur" maxlength="5" />
        <picker value="{{formData.type}}" range="{{typeDatas}}" bindchange="handleRelativesChange">
          <view class="deskNumPicker">
            <image src="https://static.hudongmiao.com/joymewMp/img/recharge/arrowRight.png" class="arrowRight"></image>
          </view>
        </picker>
        <!-- <view class="formCt">
                    <radio-group class="relativeGroup" bindchange="chooseRelatives">
                        <view class="radioItem">
                            <view class="radioLabel boy">
                                <image src="https://static.hudongmiao.com/joymewMp/img/recharge/boy.png" class="sexIcon boy"></image>
                                ç”·æ–¹äº²å‹
                            </view>
                            <radio value="1" checked="{{formData.type === '1'?true:false}}" class="relativesRadio"></radio>
                        </view>
                        <view class="radioItem">
                            <view class="radioLabel girl">
                                <image src="https://static.hudongmiao.com/joymewMp/img/recharge/girl.png" class="sexIcon girl"></image>
                                å¥³æ–¹äº²å‹
                            </view>
                            <radio value="2" class="relativesRadio" checked="{{formData.type === '2'?true:false}}"></radio>
                        </view>
                    </radio-group>
                </view> -->
      </view>
      <!-- äº²å‹å›¢ç®€å•ç‰ˆ -->
      <view class="formItem" wx:if="{{relativeMode === 'common'}}">
        <view class="key">äº²å‹å›¢</view>
        <view class="formCt">
          <radio-group class="relativeGroup" bindchange="chooseRelatives">
            <view class="radioItem">
              <view class="radioLabel boy">
                <image src="https://static.hudongmiao.com/joymewMp/img/recharge/boy.png" class="sexIcon boy"></image>
                ç”·æ–¹äº²å‹
              </view>
              <radio value="1" checked="{{formData.type === '1'?true:false}}" class="relativesRadio"></radio>
            </view>
            <view class="radioItem">
              <view class="radioLabel girl">
                <image src="https://static.hudongmiao.com/joymewMp/img/recharge/girl.png" class="sexIcon girl"></image>
                å¥³æ–¹äº²å‹
              </view>
              <radio value="2" class="relativesRadio" checked="{{formData.type === '2'?true:false}}"></radio>
            </view>
          </radio-group>
        </view>
      </view>
      <view class="formItem">
        <view class="key">æ¡Œå·</view>
        <picker value="{{formData.table_number}}" range="{{deskList}}" bindchange="handlePickerChange">
          <view class="deskNumPicker">
            {{formData.table_number}}æ¡Œ
            <image src="https://static.hudongmiao.com/joymewMp/img/recharge/arrowRight.png" class="arrowRight"></image>
          </view>
        </picker>
      </view>
      <view class="formItem">
        <view class="key">èº«ä»½</view>
        <!-- <view class="identyLabels">
                    <view class="label {{item === formData.position ? 'active': ''}}" wx:for="{{statusList}}" wx:key="index" data-status="{{item}}" bindtap="chooseStatus">
                        {{item}}
                    </view>
                </view> -->
        <picker value="{{formData.position}}" range="{{statusList}}" bindchange="handlePositionChange">
          <view class="deskNumPicker">
            {{formData.position}}
            <image src="https://static.hudongmiao.com/joymewMp/img/recharge/arrowRight.png" class="arrowRight"></image>
          </view>
        </picker>
      </view>
      <view class="formConfirmItem">
        <view class="confirmBtn" bindtap="confirmEdit">ç¡®è®¤ä¿®æ”¹</view>
        <view class="editTip">ç¡®è®¤ä¿®æ”¹éœ€è¦æ¶ˆè€—{{editUserInfoPrice}}ä¸ªå–µé’»</view>
      </view>
    </view>
  </view>
</view>
<!-- éšç§æˆæƒç»„ä»¶ -->
<privacyAuthorize />

<!-- å¤´åƒè£å‰ªç»„ä»¶ -->
<imageCropper avatarUncropped="{{avatarUncropped}}" bind:cancelEvent="onCancelCropper" bind:confirmEvent="onConfirmCropper" />
````

## File: packageB/pages/winningRecord/winningRecord.json
````json
{
  "navigationBarTitleText": "ä¸­å¥–è®°å½•",
  "disableScroll": true,
  "usingComponents": {
    "winner-list-popup": "./components/winnerListPopup/winnerListPopup",
    "congratulation-winning-popup": "./components/congratulationWinningPopup/congratulationWinningPopup",
    "not-won-yet-popup": "./components/notWonYetPopup/notWonYetPopup"
  },
  "enablePullDownRefresh": true
}
````

## File: packageC/pages/outerLink/outerLink.js
````javascript
Page({
  /**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */
  data: {
    link: ''
  },

  /**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   * optionså–å€¼
   * {appId:string,query:string}æˆ–
   * {link:string}
   * 
   */
  onLoad(options) {
    if (options.appId) {
      this.toMp(options);
    } else {
      this.toLink(options);
    }
  },
  toMp({appId,query}) {
    wx.showModal({
      title: 'æç¤º',
      content: 'è·³è½¬å¤–åœºæ¸¸æˆ?',
      success(res) {
        if(res.confirm) {
          wx.navigateToMiniProgram({
            appId: appId,
            path: decodeURIComponent(query),
            success(res) {
              console.log('è·³è½¬æˆåŠŸ', res);
              wx.navigateBack();
            },
            fail(err) {
              console.log('è·³è½¬å¤±è´¥', err);
              wx.navigateBack();
            }
          });
        } else {
          wx.navigateBack();
        }
      }
    })
  },
  toLink({link}) {
    this.setData({
      link: decodeURIComponent(link),
    });
  }
});
````

## File: packageGame/pages/luckyWheel/prizeSheet/prizeSheet.wxml
````
<view class="prize-sheet">
  <image class="first-prize-avator" src="{{resultListDisplay[0].avator}}"></image>
  <view class="first-prize-name">{{resultListDisplay[0].wx_name}}</view>
  <view class="first-prize-money">{{resultListDisplay[0].money}}å…ƒ</view>
  <image class="second-prize-avator" src="{{resultListDisplay[1].avator}}"></image>
  <view class="second-prize-name">{{resultListDisplay[1].wx_name}}</view>
  <view class="second-prize-money">{{resultListDisplay[1].money}}å…ƒ</view>
  <image class="third-prize-avator" src="{{resultListDisplay[2].avator}}"></image>
  <view class="third-prize-name">{{resultListDisplay[2].wx_name}}</view>
  <view class="third-prize-money">{{resultListDisplay[2].money}}å…ƒ</view>
  <view class="other-prize-list-container">
    <block wx:for="{{otherPrizeList}}" wx:for-item="item" wx:for-index="idx" wx:key="idx">
      <view class="other-prize-item">
        <view class="other-prize-index">{{idx + 4}}</view>
        <image class="other-prize-avator" src="{{item.avator}}" />
        <view class="other-prize-name">{{item.wx_name}}</view>
        <view class="other-prize-money">{{item.money}}å…ƒ</view>
      </view>
    </block>
  </view>
  <!-- è·å¥–åå•ä¸»ä½“éƒ¨åˆ†  deprecated-->
  <!-- <view class="prize-sheet-body-content">
    <view class="bg">
      <image class="bg-img" src="https://static.joymew.com/joymewMp/miniWheel/prize-sheet-board.png"></image>
    </view>
    <view class="row title">
      <view class="row-cell title-no">åæ¬¡</view>
      <view class="row-cell title-avatar">å¤´åƒ</view>
      <view class="row-cell title-name">æ˜µç§°</view>
      <view class="row-cell title-money">
        é‡‘é¢
        <text class="unit">ï¼ˆå…ƒï¼‰</text>
      </view>
    </view>
    <view class="row item" wx:for="{{resultListDisplay}}" wx:key="index">
      <view class="row-cell item-no">
        {{ index <= 2 ? '' : index + 1 }}
        <image class="item-no-img" wx:if="{{index === 0}}" src="https://static.joymew.com/joymewMp/miniWheel/no1.png"></image>
        <image class="item-no-img" wx:if="{{index === 1}}" src="https://static.joymew.com/joymewMp/miniWheel/no2.png"></image>
        <image class="item-no-img" wx:if="{{index === 2}}" src="https://static.joymew.com/joymewMp/miniWheel/no3.png"></image>
      </view>
      <view class="row-cell item-avatar">
        <image class="item-avatar-img" src="{{item.avatar}}" alt="avatar"></image>
      </view>
      <view class="row-cell item-name">{{ item.wx_name }}</view>
      <view class="row-cell item-money">{{ item.money }}</view>
    </view>
  </view> -->
</view>
````

## File: packageGame/pages/luckyWheel/prizeSheet/prizeSheet.wxss
````
.prize-sheet {
  position: relative;
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  background-image: url("https://ustatic.hudongmiao.com/joymewMp/luckyWheelNew/prize-bg.png");
  background-repeat: no-repeat;
  background-size: 750rpx 1500rpx;
}
.prize-sheet .first-prize-avator{
    position: absolute;
    width: 90rpx;
    height: 90rpx;
    top: 215rpx;
    left: 325rpx;
    border-radius: 50%;
}
.prize-sheet .first-prize-name{
    position: absolute;
    width: 100rpx;
    height: 40rpx;
    top: 365rpx;
    left: 319rpx;
    font-size: 20rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.prize-sheet .first-prize-money{
    position: absolute;
    width: 120rpx;
    height: 40rpx;
    top: 310rpx;
    left: 310rpx;
    font-size: 24rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
}

.prize-sheet .second-prize-avator{
    position: absolute;
    width: 70rpx;
    height: 70rpx;
    top: 265rpx;
    left: 120rpx;
    border-radius: 50%;
}

.prize-sheet .second-prize-name{
    position: absolute;
    width: 100rpx;
    height: 40rpx;
    top: 384rpx;
    left: 95rpx;
    font-size: 16rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.prize-sheet .second-prize-money{
    position: absolute;
    width: 120rpx;
    height: 40rpx;
    top: 338rpx;
    left: 95rpx;
    font-size: 24rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
}

.prize-sheet .third-prize-avator{
    position: absolute;
    width: 70rpx;
    height: 70rpx;
    top: 265rpx;
    left: 542rpx;
    border-radius: 50%;
}

.prize-sheet .third-prize-name{
    position: absolute;
    width: 100rpx;
    height: 40rpx;
    top: 384rpx;
    left: 535rpx;
    font-size: 16rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.prize-sheet .third-prize-money{
    position: absolute;
    width: 120rpx;
    height: 40rpx;
    top: 338rpx;
    left: 525rpx;
    font-size: 24rpx;
    color: #C35400;
    display: flex;
    align-items: center;
    justify-content: center;
}

.other-prize-list-container{
    margin-top: 560rpx;
    margin-bottom: 20rpx;
    width: 680rpx;
    min-height: 400rpx;
    max-height: 800rpx;
    background: #fff;
    border-radius: 20rpx;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    overflow-y: scroll;
    /* -webkit-overflow-scrolling: touch; */
    padding: 30rpx 0;
}

.other-prize-item {
  width: 90%;
  display: flex;
  align-items: center;
  padding: 20rpx 40rpx;
  box-sizing: border-box;
}

.other-prize-item:not(:last-child) {
  border-bottom: 2px solid #f5e2d2;
}

.other-prize-index {
  width: 40rpx;
  text-align: center;
  font-size: 32rpx;
  color: #e88a3c;
  font-weight: bold;
  margin-right: 20rpx;
}

.other-prize-avator {
  width: 60rpx;
  height: 60rpx;
  border-radius: 50%;
  margin-right: 20rpx;
}

.other-prize-name {
  flex: 1;
  font-size: 32rpx;
  color: #e88a3c;
  font-weight: bold;
}

.other-prize-money {
  font-size: 32rpx;
  color: #e88a3c;
  font-weight: bold;
  margin-left: 20rpx;
}

.prize-sheet .prize-sheet-body-content {
  position: absolute;
  top: 165.904rpx;
  left: 50%;
  transform: translateX(-50%);
  width: 732.692rpx;
  height: 1037.231rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.prize-sheet .prize-sheet-body-content .bg {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
}
.prize-sheet .prize-sheet-body-content .bg .bg-img {
  width: 100%;
  height: 100%;
}
.prize-sheet .prize-sheet-body-content .row {
  width: 700rpx;
  height: 7.42%;
  display: flex;
  align-items: center;
}
.prize-sheet .prize-sheet-body-content .row .row-cell {
  width: 25%;
  height: 100%;
  line-height: 100%;
  font-size: 30.769rpx;
  font-weight: 700;
  letter-spacing: 2px;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
.prize-sheet .prize-sheet-body-content .title {
  margin-top: 97.5rpx;
}
.prize-sheet .prize-sheet-body-content .title .title-money .unit {
  font-size: 23.077rpx;
}
.prize-sheet .prize-sheet-body-content .item .item-no {
  font-size: 38.462rpx;
}
.prize-sheet .prize-sheet-body-content .item .item-no .item-no-img {
  width: 63.461rpx;
  height: 63.461rpx;
}
.prize-sheet .prize-sheet-body-content .item .item-avator {
  display: flex;
  justify-content: center;
  align-items: center;
}
.prize-sheet .prize-sheet-body-content .item .item-avator .item-avator-img {
  width: 46.153rpx;
  height: 46.153rpx;
  border-radius: 50%;
}
.prize-sheet .prize-sheet-body-content .item .item-name {
  font-size: 26.923rpx;
  font-weight: normal;
}
.prize-sheet .prize-sheet-body-content .item .item-money {
  font-size: 38.462rpx;
  font-weight: 700;
  letter-spacing: 0;
}
````

## File: packageGame/pages/shoutHb/components/cd/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/components/microphone/index.wxss
````
.microphone-wrap {
  display: flex;
  justify-content: center;
}

.sound-wave {
  display: flex;
  align-items: center;
  column-gap: 20rpx;
}
.sound-wave .dot {
  width: 10rpx;
  background: #ffecaa;
  border-radius: 48rpx;
}
.microphone-round {
  width: 264rpx;
  height: 264rpx;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0 32rpx;
  background-size: 100% 100%;
  background-image: url("https://ustatic.joymew.com/joymewScreen/img/shoutHb/microphone-yellow.png");
}

.microphone-wrap.wait .sound-wave .dot {
  background: #fff;
  transition-property: height;
}
.microphone-wrap.wait .microphone-round {
  background-image: url("https://ustatic.joymew.com/joymewScreen/img/shoutHb/microphone-white.png");
}


.rippleAni {
  animation: ripple-animation 1s infinite cubic-bezier(0.165, 0.84, 0.44, 1);
}
@keyframes ripple-animation {
  0% {
    box-shadow: 0 0 0 0rpx rgba(255, 236, 170, 0.2);
  }
  100% {
    box-shadow: 0 0 0 40rpx rgba(255, 236, 170, 0.2);
  }
}
````

## File: packageGame/pages/shoutHb/components/ready/index.js
````javascript
import { timeoutTask } from "../../../../../utils/index";

Component({
  properties: {
    readyVisible: {
      type: Boolean,
      value: false,
    },
    readyText: {
      type: String,
      value: 'è¯·å‡†å¤‡'
    }
  },
  data: {
    textShow: false, // æ§åˆ¶æ–‡å­—å±•ç¤ºåŠ¨ç”»
    readyText: '',
    isFirst: true,
  },
  observers: {
    readyVisible(newVal) {
      // çˆ¶ç»„ä»¶è®¾ç½®readyVisible=trueæ¥æ§åˆ¶å‡†å¤‡æç¤ºçš„æ˜¾ç¤º
      if (newVal) {
        this.showText();
      }
    },
  },
  methods: {
    /**
     * å±•ç¤ºæ–‡å­—åŠ¨ç”»
     */
    showText() {
      return new Promise((resolve) => {
        // å…ˆé‡ç½®ä¸ºfalse
        this.setData({
          textShow: false,
        });
        // ç­‰æ¸²æŸ“å¥½åå†æ‰§è¡Œç¼©æ”¾å±•ç¤ºåŠ¨ç”»
        timeoutTask(() => {
          this.setData({
            textShow: true,
          });
          // ä»»åŠ¡å®Œæˆ
          resolve();
        }, 100);
      });
    },
  },
});
````

## File: packageGame/pages/shoutHb/components/ready/index.json
````json
{
    "component": true
}
````

## File: packageGame/pages/shoutHb/components/textBoard/index.wxml
````
<view class="text-board">
    <view class="title">æ¸¸æˆè§„åˆ™</view>
    <view class="para">1ã€æŒ‰ç…§æ‰‹æœºå±å¹•ä¸Šæ˜¾ç¤ºçš„æ–‡å­—å¤§å£°å–Šå‡ºæ¥;</view>
    <view class="para">2ã€å‚ä¸è€…å£°éŸ³åˆ†è´ç‡è¶Šé«˜ï¼Œè·å¾—çº¢åŒ…å¥–åŠ±çš„æ¦‚ç‡è¶Šé«˜ã€‚</view>
    <!-- <view class="content-area">
        <view class="c-list">æ¸¸æˆè§„åˆ™ï¼š1ã€æŒ‰ç…§æ‰‹æœºå±å¹•ä¸Šæ˜¾ç¤ºçš„æ–‡å­—å¤§å£°å–Šå‡ºæ¥;2ã€å‚ä¸è€…å£°éŸ³åˆ†è´ç‡è¶Šé«˜ï¼Œè·å¾—çº¢åŒ…å¥–åŠ±çš„æ¦‚ç‡è¶Šé«˜ã€‚</view>
    </view> -->
</view>
````

## File: packageGame/pages/shoutHb/components/textBoard/index.wxss
````
.text-board {
  /* width: 592rpx;
  height: 178rpx; */
  background-size: 100% 100%;
  background-image: url("https://ustatic.joymew.com/joymewScreen/img/text-board.png");
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 720rpx;
  height: 280rpx;
  font-size: 28rpx;
}
.title {
  width: 90%;
  font-size: 30rpx;
  font-weight: 600;
  margin-bottom: 20rpx;
  text-align: center;
}
.para {
  line-height: 40rpx;
  width: 70%;
}

/* .content-area {
  width: 520rpx;
  height: 125rpx;
  overflow: hidden;
  font-size: 42rpx;
  color: #000;
}

.c-list {
  white-space: nowrap;
  display: inline-block;
  line-height: 125rpx;
  animation: move 13s linear infinite;
  animation-delay: 3s;
}

@keyframes move {
  0% {
    transform: translateX(0rpx);
  }
  77% {
    transform: translateX(-1510rpx);
  }
  100% {
    transform: translateX(-1510rpx);
  }
} */

/* @media screen and (max-height: 510px) {
  .text-board {
    padding-top: 50rpx;
  }
} */
````

## File: packageGame/pages/shoutHb/modules/wait/index.json
````json
{
    "component": true,
    "usingComponents": {
        "microphone": "../../components/microphone/index",
        "textBoard": "../../components/textBoard/index"
    }
}
````

## File: pages/estimate/components/mark/mark.js
````javascript
import { reqCommitComment, reqReplyUser } from "../../../../api/estimate";
import { reqSecurityMsgCheck } from "../../../../api/message";
import { reqSubscribeMessage } from "../../../../api/index.js";
import { AI_HOST } from "../../../../assets/constant/host";
import {
  saveAiLiveReplyCount,
  getAiLiveReplyCount,
  MAX_COUNT,
} from "./aiLiveReplyStorage.js";

const app = getApp();
let aiLiveReplyCount = 0;
let tmpChunkStr = "";

Component({
  lifetimes: {},
  properties: {
    markData: {
      type: Object,
      value: {
        hostAvatar: "", // ä¸»æŒäººå¤´åƒ
        hostName: "", // ä¸»æŒäººæ˜µç§°
        hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
        hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
        starNum: 0, // æ‰“å‡ åˆ†?
        tags: [], // æ ‡ç­¾åˆ—è¡¨
        markContent: "", // è¯„åˆ†å†…å®¹
        commentInfo: {
          // è¯„è®ºç›¸å…³å†…å®¹
          my: {
            // æˆ‘çš„è¯„è®ºä¿¡æ¯
            id: "",
            avatar: "",
            nickname: "",
            content: "",
            time: "",
          },
          chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
        },
      },
    },
    sceneType: {
      type: String,
      value: "",
    },
  },
  attached() {
    aiLiveReplyCount = getAiLiveReplyCount();
  },

  data: {
    borderList: new Array(26), // åˆ†å‰²çº¿
    commentfocus: false, // è¯„ä»·è¾“å…¥æ¡†èšç„¦
    qrcodeVisible: false, // å¾®ä¿¡äºŒç»´ç å¼¹çª—å¯è§æ€§
    replyInputVisible: false, // å›å¤è¾“å…¥æ¡†å¯è§æ€§
    replyInputFocus: false, // å›å¤è¾“å…¥æ¡†èšç„¦
    replyContent: "", // å›å¤å†…å®¹
    popupName: "", // å¼¹çª—åç§°
    popupVisible: false, // å¼¹çª—æ˜¯å¦å¯è§
    aiText: "",
  },
  methods: {
    /**
     * æ‰“åˆ†
     */
    onStarChange(e) {
      if (this.data.markData.starNum > 0) {
        return;
      }
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        starNum: e.detail,
      });
      // this.onStarSubmit();
    },
    /**
     * æ‰“æ ‡ç­¾
     */
    selectTag(e) {
      let choosedIndex = e.currentTarget.dataset.index;
      const tags = this.data.markData.tags;
      tags[choosedIndex].selected = !tags[choosedIndex].selected;
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        tags,
      });
    },
    /**
     * è¾“å…¥è¯„ä»·å†…å®¹
     */
    inputMarkContent(e) {
      this.triggerEvent("markdataChange", {
        ...this.data.markData,
        markContent: e.detail.value,
      });
      // console.log("input",this.data.markData.markContent);
    },
    /**
     * è·³è½¬æŠ½å¥–é¡µé¢
     */
    toLottery() {
      if (!this.data.markData.hasMarked) {
        wx.showToast({
          title: "æäº¤è¯„ä»·åå¯ä»¥å‚ä¸æŠ½å¥–!",
          icon: "none",
        });
        return;
      }
      wx.navigateTo({
        url: "/packageC/pages/draw/draw",
      });
    },
    async onStarSubmit() {
      if (this.data.markData.starNum === 0) {
        wx.showToast({
          title: "è¯·ç‚¹å‡»æ˜Ÿæ˜Ÿè¯„ä»·",
          icon: "none",
          duration: 3000,
        });
        return;
      }
      const commentRes = await reqCommitComment({
        splid: wx.getStorageSync("liveId"),
        content: "",
        satisfaction: this.data.markData.starNum,
      });
      if (commentRes.code === 200) {
        // 2ã€é‡æ–°è·å–é¡µé¢åŸºæœ¬ä¿¡æ¯
        this.triggerEvent("refreshData");
        // 4ã€æ˜¾ç¤ºå¼•å¯¼æ‰“èµå¼¹çª—
        this.setData({
          popupName: "startip",
          popupVisible: true,
        });
        // wx.hideLoading();
        wx.showToast({
          title: "æ‚¨å·²è¯„ä»·å®Œæˆ~",
          icon: "none",
          duration: 1000,
        });
      }
    },
    /**
     * å¤„ç†æäº¤è¯„ä»·/æ‰“èµ
     */
    onMarkSubmit() {
      if (this.data.markData.hasMarked) {
        // æ‰“èµ
        this.showRewardPopup();
      } else {
        // æäº¤è¯„ä»·
        this.markHe();
      }
      // // this.markHe();
      // this.setData({
      //     popupName: "askReward",
      //     popupVisible: true,
      // });
    },
    /**
     * å±•ç¤ºæ‰“èµå¼¹çª—
     */
    showRewardPopup() {
      this.setData({
        popupName: "reward",
        popupVisible: true,
      });
    },
    /**
     * è¯„ä»·
     */
    async markHe() {
      if (!this.markInfoValidate()) {
        return;
      }
      const labelStr = this.data.markData.tags
        .filter((item) => item.selected)
        .map((item) => item.id)
        .join(",");
      try {
        const validateRes = await reqSecurityMsgCheck(
          this.data.markData.markContent
        );
        const tmpResult = JSON.parse(validateRes.data.msg_sec_check);
        if (tmpResult.result.suggest === "pass") {
          const commentRes = await reqCommitComment({
            splid: wx.getStorageSync("liveId"),
            content: this.data.markData.markContent,
            label: labelStr,
            satisfaction: this.data.markData.starNum,
          });
          if (commentRes.code === 200) {
            // 1ã€è®¢é˜…æ¶ˆæ¯
            const msgIds = [
              app.globalData.accountInfo_subscribeTpMsg.comment.reply,
            ];
            reqSubscribeMessage(msgIds);
            // 2ã€é‡æ–°è·å–é¡µé¢åŸºæœ¬ä¿¡æ¯
            this.triggerEvent("refreshData");
            // 3ã€æç¤ºæˆåŠŸ
            wx.showToast({
              title: "è¯„ä»·æˆåŠŸ",
              icon: "success",
            });
            // 4ã€æ˜¾ç¤ºå¼•å¯¼æ‰“èµå¼¹çª—
            this.setData({
              popupName: "askReward",
              popupVisible: true,
            });
          } else {
            throw "commentError";
          }
        } else {
          wx.showToast({
            title: "è¯„è®ºå†…å®¹éæ³•!",
            icon: "none",
            duration: 3000,
          });
        }
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "è¯„è®ºå¤±è´¥!",
          icon: "none",
        });
      }
    },
    /**
     * è¯„ä»·ä¿¡æ¯éªŒè¯
     */
    markInfoValidate() {
      const markContent = this.data.markData.markContent.trim();
      const starNum = this.data.markData.starNum;
      if (starNum === 0) {
        wx.showToast({
          title: "è¯„ä»·ä¸€ä¸‹å§!",
          icon: "none",
        });
        return false;
      }
      if (!markContent) {
        wx.showToast({
          title: "è¯„ä»·ä¸€ä¸‹å§!",
          icon: "none",
        });
        return false;
      }
      if (starNum <= 3 && markContent.length < 10) {
        wx.showToast({
          title: "æ‚¨çš„è¯„ä»·ä¸è¶³10ä¸ªå­—ï¼Œè¯¦ç»†çš„è¯´æ˜èƒ½å¸®åŠ©ä¸»æŒäººæ›´å¥½çš„ä¸ºæ‚¨æœåŠ¡!",
          icon: "none",
        });
        return false;
      }
      return true;
    },
    /**
     * äºŒç»´ç æ‰“å¼€/å…³é—­
     */
    toggleQrcode() {
      this.setData({
        qrcodeVisible: !this.data.qrcodeVisible,
      });
    },
    /**
     * æ˜¾ç¤ºå›å¤è¾“å…¥æ¡†
     */
    showReplyInput() {
      this.setData({
        replyInputVisible: true,
        replyInputFocus: true,
      });
    },
    /**
     * éšè—å›å¤è¾“å…¥æ¡†ã€æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹
     */
    hideReplyInput() {
      if (!this.data.replyInputVisible) {
        return;
      }
      this.setData({
        replyInputVisible: false,
        replyInputFocus: false,
        replyContent: "",
      });
    },
    /**
     * è¾“å…¥å›å¤å†…å®¹
     */
    inputReplyContent(e) {
      this.setData({
        replyContent: e.detail,
      });
    },
    /**
     * å‘é€å›å¤å†…å®¹
     */
    async sendReplyContent() {
      if (!this.data.replyContent) {
        wx.showToast({
          title: "è¯·è¾“å…¥å›å¤å†…å®¹!",
          icon: "none",
        });
        return;
      }
      console.log("å‘é€å›å¤å†…å®¹:", this.data.replyContent);
      try {
        const validateRes = await reqSecurityMsgCheck(this.data.replyContent);
        const tmpResult = JSON.parse(validateRes.data.msg_sec_check);
        if (tmpResult.result.suggest === "pass") {
          // 1ã€å›å¤
          await reqReplyUser({
            splid: wx.getStorageSync("liveId"),
            content: this.data.replyContent,
            album_comment_id: this.data.markData.commentInfo.my.id,
          });
          wx.showToast({
            title: "å›å¤æˆåŠŸï¼",
            icon: "none",
          });
          // 2ã€è®¢é˜…æ¶ˆæ¯
          const msgIds = [
            app.globalData.accountInfo_subscribeTpMsg.comment.reply,
          ];
          reqSubscribeMessage(msgIds);
          setTimeout(() => {
            // 3ã€å…³é—­å›å¤æ¡†ã€é‡æ–°è·å–é¡µé¢åŸºæœ¬ä¿¡æ¯
            this.hideReplyInput();
            this.triggerEvent("refreshData");
          }, 300);
        } else {
          wx.showToast({
            title: "è¯„è®ºå†…å®¹éæ³•!",
            icon: "none",
            duration: 3000,
          });
        }
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "è¯„è®ºå¤±è´¥!",
          icon: "none",
        });
      }
    },
    /**
     * å¤„ç†å¼¹çª—è¡Œä¸º
     */
    onPopupActionChange(e) {
      console.log(e.detail);
      if (e.detail === "closePopup") {
        // å…³é—­å¼¹çª—
        this.setData({
          popupName: "",
          popupVisible: false,
        });
      } else if (e.detail === "toAskLeave") {
        // æ‰“å¼€ç¦»å¼€æŒ½ç•™å¼¹çª—
        this.setData({
          popupName: "askLeave",
        });
      } else if (e.detail === "toAskReward") {
        // æ‰“å¼€å¼•å¯¼æ‰“èµå¼¹çª—
        this.setData({
          popupName: "askReward",
        });
      } else if (e.detail === "toReward") {
        // æ‰“å¼€æ‰“èµå¼¹çª—
        this.setData({
          popupName: "reward",
        });
      }
    },
    onAiEvent() {
      if (this.data.markData.starNum < 3) return;
      console.log("è§¦å‘aiäº‹ä»¶");
      wx.showLoading({
        title: "æ­£åœ¨æ€è€ƒ...",
        mask: true,
      });
      this.setData({
        aiText: "",
      });
      this.getAnswer();
    },
    onAIPressed() {
      if (aiLiveReplyCount >= MAX_COUNT) {
        wx.showToast({
          title: "AIå·²ç»è¢«ä½¿ç”¨è¿‡å¤šæ¬¡ï¼Œè¯·ç¨åå†è¯•",
          icon: "none",
        });
        return;
      }
      console.log("è§¦å‘aiäº‹ä»¶");
      wx.showLoading({
        title: "æ­£åœ¨æ€è€ƒ...",
        mask: true,
      });
      this.setData({
        aiText: "",
      });
      this.getAnswer();
    },
    async getAnswer() {
      const task = wx.request({
        url: `${AI_HOST}ai/sendWang?sceneType=${this.data.sceneType}`,
        header: {
          token: wx.getStorageSync("token"),
        },
        method: "GET",
        success: (res) => {
          console.log("æœ€ç»ˆç»“æœï¼š", res);
          wx.hideLoading();
          const answer = this.parseDataStr(res.data);
          console.log("answer", answer);
          this.setData({
            aiText: answer,
          });
          this.data.markData.markContent = this.data.aiText;
          saveAiLiveReplyCount(++aiLiveReplyCount);
        },
        fail: (err) => {
          console.log(err);
          wx.showToast({
            title: "AIå›ç­”å¤±è´¥",
            icon: "none",
          });
          wx.hideLoading();
        },
      });
      // task.onChunkReceived((e) => {
      //   const chunkStr = this.arraybufferToString(e.data);
      //   const chunkObj = this.chunkStrToObj(chunkStr);
      //   console.log("chunkObj", chunkObj);
      //   if (!chunkObj) {
      //     // è¿›å…¥æ­¤ifè¯´æ˜æ•°æ®ä¸å®Œæ•´ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æ‹¼æ¥
      //     return;
      //   }
      //   if (chunkObj.event === "message_end") {
      //     this.data.markData.markContent = this.data.aiText;
      //   } else {
      //     this.setData({
      //       aiText: this.data.aiText + chunkObj.answer,
      //     });
      //   }
      //   // console.log(e.data);
      // });
    },
    /**
     * @description è§£ædataStr
     */
    parseDataStr(dataStr) {
      return dataStr
        .split("data:")
        .filter((item) => item)
        .map((item) => JSON.parse(item))
        .reduce((prev, cur) => {
          return cur.answer ? prev + cur.answer : prev;
        }, "");
    },
    /**
     * @description äºŒè¿›åˆ¶è½¬å­—ç¬¦ä¸²
     */
    arraybufferToString(arrayBuffer) {
      const uint8Array = new Uint8Array(arrayBuffer);
      // const utf8Decoder = new TextDecoder("utf-8");
      // const result = utf8Decoder.decode(uint8Array);
      const result = String.fromCharCode(...uint8Array);
      return result;
    },
    /**
     * chunkStrè½¬chunkObj
     */
    chunkStrToObj(chunkStr) {
      try {
        // å¤„ç†str:å¦‚æœä»¥"data: "å¼€å¤´ï¼Œå»æ‰
        if (chunkStr.startsWith("data: ")) {
          chunkStr = chunkStr.replace("data: ", "");
        }
        // å°è¯•è§£æjsonï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¯´æ˜æ•°æ®ä¸å®Œæ•´ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æ‹¼æ¥
        let jsonObj = null;
        if (tmpChunkStr) {
          chunkStr = tmpChunkStr + chunkStr;
          jsonObj = JSON.parse(chunkStr);
        } else {
          jsonObj = JSON.parse(chunkStr);
        }
        // èµ°åˆ°è¿™é‡Œè¯´æ˜è§£ææˆåŠŸï¼Œæ¸…ç©ºtmpStr
        tmpChunkStr = "";
        return jsonObj;
      } catch (err) {
        console.log("å‡ºé”™å•¦ç­‰å¾…æ‹¼æ¥");
        tmpChunkStr += chunkStr;
        console.log(tmpChunkStr);
      }
    },
  },
});
````

## File: pages/estimate/components/mark/mark.wxml
````
<wxs src="./star.wxs" module="star"></wxs>
<view class="markWrap" bindtap="hideReplyInput">
  <view class="estimate-card">
    <!-- ä¸»æŒäººå¤´åƒã€æ˜µç§°ã€è¯„åˆ† -->
    <view class="card-host" >
      <view class="host-img" style="background-image: url({{markData.hostAvatar}})"></view>
        <view class="host-info">
            <view class="estimate-part1"><text class="estimate-text1">{{markData.hostName}}</text></view>
            <view class="estimate-part2">
              <text class="estimate-text2">{{'è¯„åˆ†ï¼š'}}</text>
              <text class="estimate-text3">{{star.getScore(markData.starNum)}}</text>
              <!-- <view class="contact-button" wx:if="{{markData.hostWechatQrcode}}">{{"è”ç³»TA"}}</view> -->
              <view class="qrcode" bindtap="toggleQrcode" wx:if="{{markData.hostWechatQrcode}}"></view>
              <!-- <view class="contact-button" >{{"è”ç³»TA"}}<image class="contact-icon" src="https://ustatic.hudongmiao.com/joymewMp/estimate-new/arrow.png"> </image></view>
              <view class="qrcode" bindtap="toggleQrcode"></view> -->
            </view>
        </view>
        <!-- <view class="more"></view> -->
    </view>
    <!-- æ‰“æ˜ŸåŒº -->
    <view class="card-star">
      <image class="star-image" src="{{star.getStarEmoUrl(markData.starNum)}}"></image>
      <view class="star-view">
        <view class="star-wrap">
            <rateStar rate="{{markData.starNum}}" bind:change="onStarChange" edit="{{!markData.hasMarked}}" size="{{'bigger'}}"></rateStar>
        </view>
        <view class="star-text-default" wx:if="{{!star.startextflag(markData.starNum)}}"><text>æœŸå¾…æ‚¨å¯¹ç°åœºä¸»æŒäººçš„è¯„ä»·å“¦ï½</text></view>
        <view class="star-text-success" wx:if="{{star.startextflag(markData.starNum)}}"><text>{{star.getStarName(markData.starNum)}}</text></view>
      </view>
    </view>
    <!-- æœªè¯„ä»·çŠ¶æ€çš„è¯„ä»·æ ‡ç­¾é€‰æ‹©ã€è¾“å…¥è¯„ä»·å†…å®¹ -->
    <!-- <view class="card-tags" wx:if="{{!markData.hasMarked}}">
      <view class="tags-title">â€”â€” è¯·é€‰æ‹©æ ‡ç­¾ â€”â€”</view>
      <view class="tags ">
        <view class="tag {{item.selected?'selected':''}}" wx:for="{{markData.tags}}" bindtap="selectTag" wx:key="index" data-index="{{index}}">
          {{item.info}}
        </view>
      </view>
      <textarea placeholder="å¸ä»ªå°å“¥é‚£ä¹ˆè¾›è‹¦ï¼Œé¼“åŠ±ä¸€ä¸‹å§ï¼Œç»™ä¸»æŒäººè¯„ä»·è¿˜å¯è·å¾—æŠ½å¥–æœºä¼šå“¦~" placeholder-class="textarea-p" class="textarea" value="{{markData.markContent}}" bindinput="inputMarkContent" focus="{{commentfocus}}" />
    </view> -->
    <!-- è¯„è®ºè¾“å…¥åŒº-->
    <view class="comment-area" wx:if="{{star.commentAreaFlag(markData.hasMarked,markData.starNum)}}">
    <view class="comment-area-wrap">
      <textarea  placeholder="è¯·è¾“å…¥ä¸»æŒè¯„ä»·ï¼" placeholder-class="textarea-p" class="textarea" value="{{aiText}}" bindinput="inputMarkContent" focus="{{commentfocus}}" maxlength="100"/>
    </view>
      <!-- <button class="ai-button" bindtap="onAIPressed">
        <view class="ai-button-image"></view><text class="ai-button-text">é‡æ–°ç”Ÿæˆ</text>
      </button> -->
    </view>
    <!-- å·²è¯„ä»·çŠ¶æ€çš„è¯„ä»·è¯„ä»·åˆ—è¡¨ã€å›å¤å†…å®¹ -->
    <scroll-view class="card-tags" wx:if="{{star.commentflag(markData.hasMarked,markData.starNum)}}">
      <view class="comment-item">
        <view class="my-c">
          <image src="{{markData.commentInfo.my.avatar}}" class="my-avator"></image>
          <view class="nameAnddate">
            <view class="comment-name">{{markData.commentInfo.my.nickname}}</view>
            <view class="star-comment-wrap">
              <rateStar rate="{{markData.starNum}}"  edit="{{false}}" ></rateStar>
              <view class="star-text2"><text>{{star.getStarName(markData.starNum)}}</text></view>
            </view>
            <!-- <view class="date">{{markData.commentInfo.my.comment_time}}</view> -->
          </view>
        </view>
        <view class="comment-content">{{markData.commentInfo.my.content}}</view>
        <view class="sub-comment" wx:if="{{markData.commentInfo.chatList.length>0}}">
          <view class="sub-item" wx:for="{{markData.commentInfo.chatList}}" wx:key="index">
            <text class="sub-name">{{item.nickname}}:</text>
            <text class="sub-content">{{item.content}}</text>
          </view>
        </view>
        <view class="reply-btn" catchtap="showReplyInput">å›å¤TA</view>
      </view>
    </scroll-view>
    <!-- æŒ‰é’® -->
    <view class="btn-wrap">
      <!-- <view class="submit {{markData.hasMarked?'': 'disabled'}}" bindtap="toLottery">æŠ½å¥–</view> -->
      <view class="submit" bindtap="onMarkSubmit" wx:if="{{star.submitflag(markData.starNum)}}">{{markData.hasMarked ? 'æ‰“èµ' : 'æäº¤'}}</view>
    </view>
  </view>
  <!-- äºŒç»´ç  -->
  <qrcode hostWechatQrcode="{{markData.hostWechatQrcode}}" bindtoggleQrcode="toggleQrcode" wx:if="{{qrcodeVisible}}" />
  <!-- å›å¤è¾“å…¥æ¡† -->
  <replyInput wx:if="{{replyInputVisible}}" focus="{{replyInputFocus}}" initContent="{{replyContent}}" bind:input="inputReplyContent" bind:send="sendReplyContent" username="{{markData.hostName}}" />
  <!-- è¯„ä»·åçš„è¯¢é—®å¼¹çª— -->
  <markAfterQuery sceneType="{{sceneType}}" starNum="{{star.parseNumber(markData.starNum)}}" popupName="{{popupName}}" bindactionChange="onPopupActionChange" bindaiEvent="onAiEvent" wx:if="{{popupVisible}}"/>
  <!-- å©šç¤¼ç‰ˆä¸“å±è™šæ‹Ÿå¼¹å¹• -->
  <!-- <danmu wx:if="{{sceneType === '0'}}" /> -->
</view>
````

## File: pages/joymewIndex/styles/wedding.wxss
````
/* ç­¾åˆ°å©šç¤¼ç‰ˆæ ·å¼ */
.signWrap.wedding .bg {
  background-image: url("https://static.hudongmiao.com/joymewMp/wedding/hunli-bg_purple.png");
}

.signWrap.wedding .signForm {
  background-image: url("https://static.hudongmiao.com/joymewMp/wedding/sign-bg.png");
}
.signWrap.wedding .signForm::after {
  content: "ä¸€èµ·çœ‹ç¾ç…§ã€é€ç¥ç¦ã€ç©æ¸¸æˆå§ï½";
  display: block;
  font-size: 29rpx;
  font-weight: 500;
  color: #ac063c;
  text-align: center;
  width: 100%;
  position: absolute;
  top: 40rpx;
}

.signWrap.wedding .signForm .formItem {
  flex-direction: column;
}

.signWrap.wedding .signForm .formItem:first-child {
  margin-top: 60rpx;
}

.signWrap.wedding .signForm .formItem .formItem-key {
  color: #ff797c;
  margin-bottom: 20rpx;
}

.signWrap.wedding .signForm .formItem .formItem-value {
  color: #008ebe;
  border-bottom: 1.92rpx solid #5ac2e5;
}

.signWrap.wedding .signForm .formItem .formItem-value.avatar .avatarButton {
  margin-left: auto;
}

.signWrap.wedding .signForm .formItem .formItem-value .inputWish {
  flex: 1;
}

.signWrap.wedding .signForm .formItem .formItem-value.chooseGroup {
  justify-content: space-around;
  border-bottom: none;
}

.signWrap.wedding .signForm .formItem .formItem-value.chooseGroup .chooseItem {
  width: 152rpx;
  height: 64rpx;
  background: rgba(90, 194, 229, 0.3);
  border-radius: 28rpx;
  font-size: 28rpx;
  font-weight: 400;
  text-align: center;
  line-height: 64rpx;
  color: #008ebe;
}

.signWrap.wedding .signForm .formItem .formItem-value.chooseGroup .chooseItem.choosed {
  color: #ffffff;
  background: #5ac2e5;
}

.signWrap.wedding .signForm .buttonWrap .signButton {
  background-image: url('https://static.hudongmiao.com/joymewMp/wedding/sign-btn-bg.png');
}
````

## File: pages/pay/pay.js
````javascript
import {
  reqDiamondRecharge,
  reqSendGiftGameRecharge,
  reqSendSuperDanmuRecharge,
  reqSendMusicGiftRecharge,
  reqRechargeAndSendGift,
  reqRechargeAndSenCarnivalGift,
  reqRechargeAndBuyAddScoreTool,
} from "../../api/pay";
import {
  reqSendGiftBroadCast,
  reqSendDiamondHb,
  reqEditUserInfo,
  reqBuyVipEnterEffect,
} from "../../api/gift";
import {
  timeoutTask
} from "../../utils/index";

const app = getApp();
const DELAYTASK_TIME = 300; // å»¶è¿Ÿä»»åŠ¡çš„æ—¶é—´
Page({
  data: {
    openId: '',
    userId: '',
    total: '', // å……å€¼é‡‘é¢
    origin: '', // åœºæ™¯
    giftId: '',
    giftText: '',
    giftImage: '',
    extraJsonStr: '', // é¢å¤–çš„å‚æ•° ç¼–è¾‘ä¸ªäººä¿¡æ¯ã€åŠ åˆ†å®ç”¨åˆ°
  },

  /**
   * @param {{openId:string,userId:string,total:string,origin:string,giftId:string,giftText:string,extraJsonStr:string}} options
   */
  onLoad(options) {
    // æ•°æ®åˆå§‹åŒ–
    this.initData(options);
    // å„ä¸ªåœºæ™¯ä¸‹çš„æ”¯ä»˜
    this.originPay();
  },
  /**
   * è¿”å›ä¸Šä¸€çº§
   */
  goBack() {
    timeoutTask(() => {
      wx.navigateBack();
    }, 500);
  },
  /**
   * è·å–ç…§ç‰‡ç¤¼ç‰©æ—¶é—´
   */
  getPhotoGiftTimes() {
    let targetTimes;
    try {
      const {
        times
      } = JSON.parse(this.data.extraJsonStr);
      targetTimes = times;
    } catch (err) {
      console.log(err);
      targetTimes = '';
    }
    return targetTimes;
  },
  /**
   * è·å–å–µé’»çº¢åŒ…çš„äººæ•°å’Œç±»å‹
   */
  getDiamondHbSizeAndType() {
    const targetObj = {
      size: '',
      type: ''
    };
    try {
      const {
        size,
        type
      } = JSON.parse(this.data.extraJsonStr);
      targetObj.size = size;
      targetObj.type = type;
    } catch (err) {
      console.log(err);
    }

    return targetObj;
  },
  /**
   * è·å–ç¼–è¾‘ä¸ªäººä¿¡æ¯è¡¨å•
   */
  getEditUserInfoForm() {
    const targetObj = {
      wx_name: '',
      avator: '',
      table_number: '',
      position: '',
      type: ''
    };
    try {
      const {
        wx_name,
        avator,
        table_number,
        position,
        type
      } = JSON.parse(this.data.extraJsonStr);
      targetObj.wx_name = wx_name;
      targetObj.avator = avator;
      targetObj.table_number = table_number;
      targetObj.position = position;
      targetObj.type = type;
    } catch (err) {
      console.log(err);
    }

    return targetObj;
  },
  /**
   * æ•°æ®åˆå§‹åŒ–
   */
  initData(options) {
    const {
      openId,
      userId,
      total,
      origin,
      giftId,
      giftText,
      giftImage,
      extraJsonStr,
    } = options;
    const tempObj = {
      openId,
      userId,
      total,
      origin,
      giftId,
      giftText,
      giftImage,
      extraJsonStr
    }
    const effectObj = {}
    // åˆ¤æ–­ä¸Šè¿°å˜é‡å€¼æœ‰æ•ˆçš„æƒ…å†µä¸‹æ‰ä½¿ç”¨
    for (let key in tempObj) {
      if (tempObj[key]) {
        effectObj[key] = tempObj[key]
      }
    }
    this.setData({
      ...effectObj
    });
  },
  /**
   * å„ä¸ªåœºæ™¯ä¸‹çš„æ”¯ä»˜
   */
  originPay() {
    switch (this.data.origin) {
      case 'rechargeMiaobi': // çº¯ç²¹çš„"å–µå¸å……å€¼"æ”¯ä»˜
        this.rechargeMiaobi();
        break;
      case 'sendGiftGame': // é€ç¥ç¦æ¸¸æˆæ”¯ä»˜
        this.rechargeSendGiftGame();
        break;
      case 'sendSuperDanmu': // å…¨å±ç‰¹æ•ˆæ”¯ä»˜
        this.rechargeSuperDanmu();
        break;
      case 'orderSong': // ç‚¹æ­Œæ”¯ä»˜
        this.rechargeOrderSong();
        break;
      case 'sendGiftCarnival': // å˜‰å¹´åç¤¼ç‰©æ”¯ä»˜
        this.rechargeGiftCarnival();
        break;
      case 'sendGift': // æ™®é€šç¤¼ç‰©æ”¯ä»˜
      case 'sendBapin':
      case 'sendPhoto':
      case 'sendDanmu':
        this.rechargeGift();
        break;
      case 'sendDiamondHb': // å–µé’»çº¢åŒ…æ”¯ä»˜
        this.rechargeDiamondHb();
        break;
      case 'editInfo': // ç¼–è¾‘ä¸ªäººä¿¡æ¯æ”¯ä»˜
        this.rechargeEditInfo();
        break;
      case 'purchaseEnterEffect': // è¿›åœºç‰¹æ•ˆè´­ä¹°æ”¯ä»˜
        this.rechargePurchaseEnterEffect();
        break;
      case 'addScoreTool': // åŠ åˆ†å®æ”¯ä»˜
        this.rechargeAddScoreTool();
        break;
      default:
        wx.showToast({
          title: 'åœºæ™¯é”™è¯¯!',
          icon: 'none'
        });
    }
  },
  /**
   * çº¯ç²¹çš„å–µå¸å……å€¼
   */
  async rechargeMiaobi() {
    try {
      await reqDiamondRecharge({
        total: this.data.total,
        userId: this.data.userId,
        openId: this.data.openId
      });
      wx.showToast({
        title: 'å……å€¼æˆåŠŸ!',
        icon: 'none'
      });
      // æ ‡è¯†äº’åŠ¨H5éœ€è¦åˆ·æ–°
      app.splidInfo_setSplidInfo({
        needH5Refresh: true
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: 'å……å€¼å¤±è´¥!',
        icon: 'none'
      });
    }
    // è¿”å›
    this.goBack();
  },
  /**
   * é€ç¥ç¦æ¸¸æˆæ”¯ä»˜
   */
  async rechargeSendGiftGame() {
    try {
      const liveId = wx.getStorageSync("liveId");
      await reqSendGiftGameRecharge({
        giftconst: this.data.giftId,
        openid: this.data.openId,
        userId: this.data.userId,
        content: this.data.giftText,
        splid: liveId,
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * å…¨å±ç‰¹æ•ˆæ”¯ä»˜
   */
  async rechargeSuperDanmu() {
    try {
      const liveId = wx.getStorageSync("liveId");
      await reqSendSuperDanmuRecharge({
        giftconst: this.data.giftId,
        openid: this.data.openId,
        userId: this.data.userId,
        content: this.data.giftText,
        splid: liveId,
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * ç‚¹æ­Œæ”¯ä»˜
   */
  async rechargeOrderSong() {
    try {
      const liveId = wx.getStorageSync("liveId");
      await reqSendMusicGiftRecharge({
        giftconst: this.data.giftId,
        openid: this.data.openId,
        userId: this.data.userId,
        guanxi: this.data.giftText,
        splid: liveId,
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * å˜‰å¹´åç¤¼ç‰©æ”¯ä»˜
   */
  async rechargeGiftCarnival() {
    try {
      await reqRechargeAndSenCarnivalGift({
        giftId: this.data.giftId,
        openId: this.data.openId,
        userId: this.data.userId
      });
      await reqSendGiftBroadCast({
        giftId: this.data.giftId,
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * æ™®é€šç¤¼ç‰©æ”¯ä»˜
   */
  async rechargeGift() {
    try {
      await reqRechargeAndSendGift({
        giftId: this.data.giftId,
        openId: this.data.openId,
        userId: this.data.userId,
        giftText: this.data.giftText,
        giftImage: this.data.giftImage
      });
      await reqSendGiftBroadCast({
        giftId: this.data.giftId,
        content: this.data.giftText,
        imgUrl: this.data.giftImage,
        times: this.getPhotoGiftTimes()
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * å–µé’»çº¢åŒ…æ”¯ä»˜
   */
  async rechargeDiamondHb() {
    try {
      // 1ã€åŠ å–µå¸
      await reqDiamondRecharge({
        total: this.data.total,
        userId: this.data.userId,
        openId: this.data.openId
      });
      // 2ã€å‘é€å–µé’»çº¢åŒ…
      const {
        size,
        type
      } = getDiamondHbSizeAndType();
      const tmpTotal = this.data.total;
      await this.delayTask(async () => {
        await reqSendDiamondHb({
          total: tmpTotal,
          size,
          type,
        });
      }, DELAYTASK_TIME);
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * ç¼–è¾‘ä¸ªäººä¿¡æ¯æ”¯ä»˜
   */
  async rechargeEditInfo() {
    try {
      // 1ã€åŠ å–µå¸
      await reqDiamondRecharge({
        total: this.data.total,
        userId: this.data.userId,
        openId: this.data.openId
      });
      // 2ã€ç¼–è¾‘ä¸ªäººä¿¡æ¯
      const {
        wx_name,
        avator,
        table_number,
        position,
        type
      } = getEditUserInfoForm();
      await this.delayTask(async () => {
        await reqEditUserInfo({
          wx_name,
          avator,
          table_number,
          position,
          type,
        });
      }, DELAYTASK_TIME);
      app.splidInfo_setSplidInfo({
        needH5Refresh: true
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * è´­ä¹°è¿›åœºç‰¹æ•ˆæ”¯ä»˜
   */
  async rechargePurchaseEnterEffect() {
    try {
      // 1ã€åŠ å–µå¸
      await reqDiamondRecharge({
        total: this.data.total,
        userId: this.data.userId,
        openId: this.data.openId
      });
      // 2ã€è´­ä¹°è¿›åœºç‰¹æ•ˆ
      const tmpGiftId = this.data.giftId;
      await this.delayTask(async () => {
        await reqBuyVipEnterEffect(tmpGiftId);
      }, DELAYTASK_TIME);
      app.splidInfo_setSplidInfo({
        needH5Refresh: true
      });
      wx.showToast({
        title: "å‘é€æˆåŠŸ",
        icon: "success",
      });
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å‘é€å¤±è´¥",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * åŠ åˆ†å®æ”¯ä»˜
   */
  async rechargeAddScoreTool() {
    // ä»extraJsonSträ¸­æå–å‡ºwxPayKind
    const getWxPayKindByExtraJsonStr = () => {
      const extraJsonStr = this.data.extraJsonStr;
      try {
        const extraJsonObj = JSON.parse(extraJsonStr);
        const wxPayKind = extraJsonObj.wxPayKind;
        return wxPayKind;
      }catch(err) {
        console.log(err);
        return null;
      }
    }
    try {
    const wxPayKind = getWxPayKindByExtraJsonStr();
    await reqRechargeAndBuyAddScoreTool({
      giftId: this.data.giftId,
      openId: this.data.openId,
      userId: this.data.userId,
      wxPayKind,
    });
    wx.showToast({
      title: "è´­ä¹°æˆåŠŸ!",
      icon: "success",
    });
    }catch(err) {
      console.log(err);
      wx.showToast({
        title: "è´­ä¹°å¤±è´¥!",
        icon: "none",
      });
    }
    this.goBack();
  },
  /**
   * å»¶è¿Ÿå‡ ç§’å†å»æ‰§è¡Œç›®æ ‡ä»»åŠ¡
   * @param {function} task å¼‚æ­¥ä»»åŠ¡
   * @param {time} å»¶è¿Ÿæ—¶é—´ å•ä½æ¯«ç§’
   */
  delayTask(task, time) {
    return new Promise((resolve, reject) => {
      wx.showLoading({
        title: 'è¯·æ±‚ä¸­...',
        mask: true
      });
      timeoutTask(async () => {
        try {
          const res = await task();
          wx.hideLoading();
          resolve(res);
        } catch (err) {
          console.log(err);
          wx.hideLoading();
          reject(err);
        }
      }, time);
    });
  }
});
````

## File: pages/reserve/hostingStyle/hostingStyle.scss
````scss
.container {
  display: grid;
  grid-template:
    'info'min-content 'bottom'1fr / 1fr;
  min-height: 100vh;

  .bg {
    position: absolute;
    width: 100vw;
    height: 100vw;

    z-index: -1;

    &::after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      content: '';
      background: linear-gradient(180deg, rgba(0, 0, 0, 0) 30%, #000000 100%);
    }
  }

  .nav-bar {
    position: fixed;
    z-index: 9999;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--nav-bar-height);
    display: flex;
    align-items: flex-end;
    padding-left: 25rpx;

    .back-button {
      .back-icon {
        width: 60rpx;
      }
    }

    &.pageScroll {
      background-color: #fff;
    }
  }

  .info {
    position: relative;
    margin-top: var(--nav-bar-height);
    grid-area: info;
    width: 100vw;
    padding: 34px 16px 16px 16px;
    display: grid;
    grid-template:
      'avatar name edit-profile'min-content 'avatar city .'min-content 'introduction introduction introduction'min-content 'tag-list tag-list tag-list'min-content 'extra-info extra-info book-btn'min-content / min-content 1fr min-content;
    grid-gap: 12px;

    .avatar {
      grid-area: avatar;
      width: 20.8vw;
      height: 20.8vw;

      border-radius: 50%;
      overflow: hidden;
      border: 2px solid #fff;
    }

    .name {
      grid-area: name;
      align-self: flex-end;
      font-size: 20px;
      color: #fff;
    }

    .city {
      grid-area: city;
      font-size: 12px;
      color: rgba($color: #fff, $alpha: 0.6);
      transform: translateY(-4px);
      display: flex;
      align-items: flex-end;
      .rank-tag {
        height: 42rpx;
        background: linear-gradient(90deg, #ffe870, #ffac2f 100%);
        border-radius: 38rpx;
        box-shadow: 0px 0px 8rpx 0px #fdffac inset;
        font-size: 24rpx;
        font-weight: 400;
        color: #ff457a;
        line-height: 42rpx;
        text-align: center;
        padding: 0 16rpx;
        margin-left: 16rpx;
      }
    }

    .edit-profile {
      grid-area: edit-profile;
      justify-self: end;
      align-self: flex-end;
      width: 79px;
      height: 25px;
      background: rgba(255, 248, 85, 0.2);
      border: 1px solid #fff855;
      border-radius: 12.5px 0 0 12.5px;

      display: flex;
      justify-content: center;
      align-items: center;

      column-gap: 4px;

      &__icon {
        width: 11px;
        height: 13px;
      }

      &__text {
        font-size: 12px;
        color: #fff855;
      }
    }

    .introduction {
      grid-area: introduction;
      font-size: 14px;
      color: #fff;

      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .tag-list {
      grid-area: tag-list;
      width: 100%;

      display: flex;
      flex-wrap: wrap;
      gap: 8px;

      .tag-list__item {
        padding: 0 11px;
        height: 18px;
        background: rgba($color: #fff, $alpha: 0.2);
        border-radius: 19px;

        display: flex;
        align-items: center;

        font-size: 10px;
        color: #fff;
      }
    }

    .extra-info {
      display: flex;
      align-items: center;
      grid-area: extra-info;
      column-gap: 20px;
      position: relative;

      &__item {
        height: 100%;

        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        font-size: 12px;
        color: #fff;

        row-gap: 2px;

        .extra-info__top--icon {
          width: 20px;
          height: 20px;
        }
      }
    }

    .book-btn {
      grid-area: book-btn;
      align-self: center;

      width: 88px;
      height: 28px;
      background: #ff457a;
      border-radius: 27px;

      display: flex;
      justify-content: center;
      align-items: center;

      font-size: 14px;
      line-height: 14px;
      color: #fff;
      position: absolute;
      bottom: 10rpx;
      right: 26rpx;
    }
  }

  .bottom {
    grid-area: bottom;
    width: 100vw;

    border-radius: 12.5px 12.5px 0 0;
    background-color: #fff;

    display: grid;
    grid-template-rows: min-content 1fr;

    .tab-list {
      height: 54px;
      background-color: #fff;
      border-radius: 12.5px 12.5px 0 0;

      position: sticky;
      top: calc(var(--nav-bar-height) - 5px);
      z-index: 100;

      display: flex;
      justify-content: space-between;
      align-items: center;

      &__item {
        flex: 1;

        display: flex;
        justify-content: center;
        align-items: center;

        font-size: 16px;
        color: #333;

        &--active {
          position: relative;

          &::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 50%;
            transform: translateX(-50%);

            width: 20px;
            height: 2px;
            background: #ff457a;
            border-radius: 7px;
          }
        }
      }
    }

    .content {
      width: 100vw;

      .work-list {
        height: 100%;
      }

      .schedule {
        width: 100%;
      }

      .comment {
        width: 100%;
      }
    }
  }
}
````

## File: pages/reserve/reserve.wxml
````
<!-- æ™®é€šçš„ä¸»æŒé¢„å®š(ä¸»æŒé£é‡‡) -->
<hostingStyle hostId="{{hostId}}" hasScrollToNav="{{hasScrollToNav}}" navBarHeight="{{navBarHeight}}" eFooterVisible="{{eFooterVisible}}" action="{{action}}" wx:if="{{hostId}}" id="hostingStyle"/>
<!-- å¼€é€šäº†weddingRiteçš„ä¸»æŒé¢„å®š -->
<!-- <reserveVip wx:if="{{isVip===true}}" personalInfo="{{personalInfo}}" introList="{{introList}}" eFooterVisible="{{eFooterVisible}}" action="{{action}}" navBarHeight="{{navBarHeight}}" hasScrollToNav="{{hasScrollToNav}}" wechatQrcode="{{wechatQrcode}}"/> -->
<!-- åº•éƒ¨èœå• -->
<eFooter activePage="reserve" wx:if="{{eFooterVisible}}" />
````

## File: pages/reserve/store/hostingStyle.js
````javascript
import {
  reqGetUserComments
} from '@/api/weddingMan';
import {
  getScheduleInfo,
  reqGetProfile,
  reqGetWorkList,
} from '@/api/hostingStyle';
import reserveStore from './reserve'

const handleRankData = (rank_city, rank_country, rank_province) => {
  let rankData = '';
  if (rank_city) {
    rankData = `æœ¬å¸‚æ’å:${rank_city}`;
  } else if (rank_country) {
    rankData = `å…¨å›½æ’å:${rank_country}`;
  } else if (rankInfo.key === 'province') {
    rankData = `æœ¬çœæ’å:${rank_province}`;
  }
  return rankData;
};
/**
 * çŠ¶æ€ç®¡ç†
 */
export default {
  currentInstance: null,
  state: {
    /** ä¸»æŒäººID */
    hostId: '',
    /** ä¸»æŒäººèµ„æ–™ */
    profile: {
      consult_num: 0,
      host_style_phone: '',
      host_style_sign: '',
      host_num: 0,
      user_province: '',
      user_city: '',
      user_desc: '',
      user_headimg: '',
      user_lbt: '',
      user_qm_name: '',
      user_sex: '',
      user_wx: '',
      wx_qr_code: '',
      tagList: [],
      backgroundUrl: '',
      isDefaultBg: false,
    },

    /** ä½œå“åˆ—è¡¨ */
    workList: [],

    /** è·å–ä½œå“åˆ—è¡¨åˆ†é¡µå‚æ•° */
    workListPagination: {
      page: 1,
      pageSize: 10,
      total: -1,
    },
    /** æ¡£æœŸæ•°æ® */
    scheduleData: [],

    /** è¯„è®ºæ€»ä½“ä¿¡æ¯ */
    commentInfo: {
      /** å¹³å‡åˆ† */
      sf_avg: '',
      commentCount: 0,
    },

    /** è¯„è®ºåˆ—è¡¨ */
    commentList: [],

    /** è¯„è®ºåˆ—è¡¨åˆ†é¡µå‚æ•° */
    commentListPagination: {
      page: 1,
      pageSize: 10,
      total: -1,
    },

    /** æ˜¯å¦å·²ç»è¯„è®ºè¿‡äº†å½“å‰æ´»åŠ¨ */
    hasCommented: false,
  },
  /**
   * åŒæ­¥æ•°æ®(store->å®ä¾‹)
   * @param {Page|Component} currentInstance 
   * @param {string[]} stateKeys éœ€è¦åŒæ­¥(store->å®ä¾‹)çš„çŠ¶æ€ ['liveId']
   */
  syncData(currentInstance, stateKeys) {
    this.currentInstance = currentInstance;
    const targetObj = {};
    stateKeys.forEach((key) => {
      if (this.state[key] !== undefined) {
        targetObj[key] = this.state[key];
      }
    })
    currentInstance.setData({
      ...targetObj
    });
  },
  async getProfile() {
    try {
      const res = await reqGetProfile(this.state.hostId);
      const [bgInfo] = JSON.parse(res.data.user_lbt);
      if (res?.code === 200) {
        this.state.profile = {
          ...this.state.profile,
          ...res.data,
          wx_qr_code: res.data.wx_qr_code || reserveStore.state.wechatQrcode,
          tagList: res.data.host_style_sign ?
            res.data.host_style_sign?.split(',') : [],
          backgroundUrl: bgInfo.mediaPath,
          isDefaultBg: bgInfo.isDefaultBg,
          rankText: handleRankData(res.data.rank_city,res.data.rank_country, res.data.rank_province)
        };
        // åŒæ­¥æ•°æ®
        if (this.currentInstance) {
          this.syncData(this.currentInstance, ['profile']);
        }
      }
    } catch (e) {
      wx.showToast({
        title: e.message,
        icon: 'none'
      });
    }
  },
  /** è·å–ä½œå“åˆ—è¡¨ */
  async getWorkList() {
    if (
      this.state.workListPagination.total !== -1 &&
      this.state.workList.length >= this.state.workListPagination.total
    ) {
      wx.showToast({
        title: 'æ²¡æœ‰æ›´å¤šäº†',
        icon: 'none'
      });
      return;
    }
    try {
      const res = await reqGetWorkList(
        this.state.workListPagination.page,
        this.state.workListPagination.pageSize,
        this.state.hostId,
      );
      if (res?.code === 200) {
        this.state.workList = this.state.workList.concat(
          res.data.list.map((item) => {
            return {
              ...item,
              cover: item?.cover ||
                JSON.parse(item.imageList)[0] ||
                item.video + '?vframe/jpg/offset/1',
              parsedImageList: JSON.parse(item.imageList),
            };
          }),
        );
        this.state.workListPagination.total = res.data.totalResult;
        this.state.workListPagination.page += 1;
        // åŒæ­¥æ•°æ®
        if (this.currentInstance) {
          this.syncData(this.currentInstance, ['workList', 'workListPagination']);
        }
      }
    } catch (e) {
      wx.showToast({
        title: e.message,
        icon: 'none'
      });
    }
  },
  /** é‡ç½®ä½œå“åˆ—è¡¨ */
  resetWorkList() {
    this.state.workList = [];
    this.state.workListPagination = {
      page: 1,
      pageSize: 10,
      total: -1,
    };
    // åŒæ­¥æ•°æ®
    if (this.currentInstance) {
      this.syncData(this.currentInstance, ['workList', 'workListPagination']);
    }
  },
  /** æ›´æ–°ä½œå“ç‚¹èµçŠ¶æ€ */
  updateWorkLikeStatus(workId, isLike = true) {
    this.state.workList = this.state.workList.map((item) => {
      if (item.find_id === workId) {
        item.isLike = isLike;
        item.likes += isLike ? 1 : -1;
      }
      return item;
    });
    // åŒæ­¥æ•°æ®
    if (this.currentInstance) {
      this.syncData(this.currentInstance, ['workList']);
    }
  },
  /** è·å–æ¯å¹´çš„æ¡£æœŸæ•°æ® */
  async getScheduleData() {
    const {
      data: {
        list
      },
    } = await getScheduleInfo(this.state.hostId);
    const resScheduleData = list.reverse();
    const yearSet = new Set(
      resScheduleData.filter((item) => item.date).map((item) => item.date.split('-')[0]),
    );
    const scheduleData = Array.from(yearSet).map((year) => ({
      year: Number(year),
      scheduleDataByMonth: resScheduleData
        .filter((item) => item.date && item.date.startsWith(year))
        .map((item) => ({
          month: Number(item.date.split('-')[1]),
          scheduleList: item.dataList.map((schedule) => ({
            ...schedule,
            day: Number(schedule.date.split('-')[2]),
          })),
        })),
    }));
    this.state.scheduleData = scheduleData;
    // åŒæ­¥æ•°æ®
    if (this.currentInstance) {
      this.syncData(this.currentInstance, ['scheduleData']);
    }
  },
  /** è·å–è¯„è®ºåˆ—è¡¨ */
  async getCommentList() {
    if (
      this.state.commentListPagination.total !== -1 &&
      this.state.commentList.length >= this.state.commentListPagination.total
    ) {
      wx.showToast({
        title: 'æ²¡æœ‰æ›´å¤šäº†',
        icon: 'none'
      });
      return;
    }
    try {
      const res = await reqGetUserComments({
        currentPage: this.state.commentListPagination.page,
        showCount: this.state.commentListPagination.pageSize,
        userId: this.state.hostId,
      });
      if (res.code !== 200) {
        throw new Error(res?.msg);
      }

      const labelList = res.data?.labelInfo?.labelList || [];
      const newCommentList = res.data.list.map((item) => ({
        ...item,
        labelList: item.label
          .split(',')
          .map(
            (labelId) =>
            (labelList.find((label) => label.id.toString() === labelId) || {})
            .bg_name || '',
          ),
      }));
      this.state.commentInfo = {
        sf_avg: res.data.comment_info?.sf_avg || '',
        commentCount: res.data.totalResult,
      };
      this.state.commentList = this.state.commentList.concat(newCommentList);
      this.state.commentListPagination.page += 1;
      this.state.commentListPagination.total = res.data.totalResult;
      // åŒæ­¥æ•°æ®
      if (this.currentInstance) {
        this.syncData(this.currentInstance, ['commentInfo', 'commentList', 'commentListPagination']);
      }
    } catch (e) {
      wx.showToast({
        title: e.message,
        icon: 'none'
      });
      console.error(e);
    }
  },
  /** é‡ç½®è¯„è®ºåˆ—è¡¨ */
  resetCommentList() {
    this.state.commentList = [];
    this.state.commentListPagination = {
      page: 1,
      pageSize: 10,
      total: -1,
    };
    // åŒæ­¥æ•°æ®
    if (this.currentInstance) {
      this.syncData(this.currentInstance, ['commentList', 'commentListPagination']);
    }
  },
  /** åˆå§‹åŒ–å¹¶è·å–æ•°æ® */
  initData() {
    this.state.hostId = reserveStore.state.hostId;
    // åŒæ­¥æ•°æ®
    if (this.currentInstance) {
      this.syncData(this.currentInstance, ['hostId']);
    }
    this.getProfile();
    this.resetWorkList();
    this.getWorkList();
    this.getScheduleData();
    this.resetCommentList();
    this.getCommentList();
  },
}
````

## File: pages/review/review.wxml
````
<view class="review">
  <view class="bg" style="background-image: url({{ bgImg }})"></view>
  <!-- è‡ªå®šä¹‰å†…å®¹åŠæ ·å¼çš„æ ‡é¢˜ -->
  <view class="title" style="height: {{ titleBarHeight }}px; padding-top:{{ statusBarHeight }}px">
    ç°åœºå›é¡¾
  </view>
  <!-- ä¸ªäººæ’åä¿¡æ¯ -->
  <rankInfo info="{{ rankInfo }}"></rankInfo>
  <!-- ä¸»æŒäººå‘è¡¨çš„å†…å®¹ -->
  <reviewItem key="user-0" recorder="{{ hostReview }}" bind:previewImage="previewImage" />
  <!-- å…¶ä»–äººå‘è¡¨çš„å†…å®¹ -->
  <reviewItem wx:for="{{ recorderList }}" wx:for-item="recorder" wx:key="id" recorder="{{ recorder }}" bind:previewImage="previewImage"></reviewItem>
  <!-- æŒ‰é’®èœå• -->
  <view class="action-op" style="transform: translateY(-{{ bottomLift }}px);" >
    <button class="op-btn share" open-type="share">
            åˆ†äº«å¥½å‹
        </button>
  </view>
  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safeArea" style="width: 740rpx; height: {{ bottomLift }}px;"></view>
</view>
<!-- å¤§å›¾é¢„è§ˆ -->
<imgPreview imgs="{{ activeImg }}" wx:if="{{ activeImg.length > 0 }}" pageIndex="{{ imgIndex }}" bind:update="previewImage" />
<!-- åº•éƒ¨èœå• -->
<eFooter activePage="review" wx:if="{{ eFooterVisible }}" />
````

## File: pages/test/test.wxml
````
<view class="test">
 <web-view src="{{h5Path}}" bindmessage="handleMessageFromH5"/>
</view>
````

## File: utils/index.js
````javascript
import defaultContent from "../assets/constant/default";


/**
 * å¾—åˆ°èŒƒå›´å†…çš„éšæœºæ•° [min,max)
 */
export const getRandom = (min, max) =>
  Math.floor(Math.random() * (max - min)) + min;

/**
 * ç”Ÿæˆéšæœºå¤´åƒå’Œæ˜µç§°
 * @returns {Object} { nickName, avatar }
 */
export const generateRandomAvatarAndNickname = () => {
  const AVATARS = defaultContent.defaultAvatars;
  const tmpLen = AVATARS.length;
  return {
    nickName: `å—¨å–µç”¨æˆ·${getRandom(0, 9999)}`,
    avatar: AVATARS[getRandom(0, tmpLen)],
  };
};

/**
 * ä»urlä¸­æå–å‚æ•°
 * @param {*} url å½¢å¦‚https://xxx.com?a=1&b=2
 * @returns {Object} å‚æ•°é”®å€¼å¯¹å½¢å¼ å½¢å¦‚{a:1,b:2} {}
 */
export function getParamsFromUrl(url) {
  const params = {};
  try {
    const query = url.split("?")[1];
    if (query) {
      const pairs = query.split("&");
      pairs.forEach((pair) => {
        const [key, value] = pair.split("=");
        params[key] = value;
      });
    }
  } catch (err) {
    console.log(err);
  }
  return params;
}

/**
 * å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œè¿‡æ»¤
 * @param  {Object} targetObj ç›®æ ‡å¯¹è±¡
 * @param {Function} filterFunc è¿‡æ»¤å‡½æ•°
 * @returns {Object} è¿‡æ»¤åçš„å¯¹è±¡
 */
export function filterObj(targetObj, filterFunc) {
  const tmpObj = {};
  Object.keys(targetObj).forEach((key) => {
    if (filterFunc(targetObj[key])) {
      tmpObj[key] = targetObj[key];
    }
  });
  return tmpObj;
}

/**
 * åˆ¤æ–­æ—¥æœŸæ˜¯å¦è¿‡æœŸ
 * @param {String} dateString å½¢å¦‚2024-02-29
 * @return {Boolean} æ˜¯å¦è¶…è¿‡å½“å‰æ—¥æœŸ
 */
export function isOverDate(dateString) {
  const dateArray = dateString.split("-");
  const dateTimeTarget = new Date(
    dateArray[0],
    dateArray[1] - 1,
    dateArray[2]
  ).getTime();
  const dateTimeCompared = new Date().getTime() - 24 * 60 * 60 * 1000;
  return dateTimeCompared > dateTimeTarget;
}

/**
 * ç”Ÿæˆä¸é‡å¤çš„id
 * @description éšæœºå­—æ¯åŠ å½“å‰æ—¶é—´æˆ³æ„æˆ
 * @param {*} pLen ç”Ÿæˆçš„idå­—æ¯éƒ¨åˆ†çš„é•¿åº¦ï¼Œé»˜è®¤é•¿åº¦ä¸º6
 * @returns
 */
export const generateRandomId = (pLen) => {
  let tmpId = "";
  const charStr = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz";
  const tmpLen1 = charStr.length;
  const tmplen2 = pLen || 6;
  for (let i = 0; i < tmplen2; i += 1) {
    tmpId += charStr.charAt(Math.floor(Math.random() * tmpLen1));
  }
  tmpId += new Date().getTime();
  return tmpId;
};

/**
 * è®¡æ—¶å™¨ä»»åŠ¡å°è£…
 * @param {Function} task è¦æ‰§è¡Œçš„ä»»åŠ¡
 * @param {Number} time æ¯«ç§’
 */
export function timeoutTask(task, time) {
  let tmpTimeout = setTimeout(() => {
    task();
    clearTimeout(tmpTimeout);
    tmpTimeout = null;
  }, time);
}

/**
 * è·å–å½“å‰ å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œå¦‚2024-03-20 11:03:00
 */
export const getCurrentDate = () => {
  let tmpResultDate;
  const date = new Date();
  const year = date.getFullYear();
  const tmpMonth = date.getMonth() + 1;
  const month = tmpMonth < 10 ? "0" + tmpMonth : tmpMonth;
  const day = date.getDate() < 10 ? "0" + date.getDate() : date.getDate();
  const hour = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
  const minute =
    date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
  const second =
    date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();
  tmpResultDate = `${year}-${month}-${day} ${hour}:${minute}:${second}`;
  return tmpResultDate;
};

/**
 * å°†ISO 0æ—¶åŒºæ—¶é—´è½¬æ¢ä¸ºåŒ—äº¬æ—¶åŒºçš„å¹´æœˆæ—¥æ—¶åˆ†ç§’
 * @param {String} isoTime ISOæ ‡å‡†çš„0æ—¶åŒºæ—¶é—´
 * @returns {String} åŒ—äº¬æ—¶é—´çš„å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œæ ¼å¼ä¸º YYYY-MM-DD HH:MM:SS
 */
export const convertISOToBeijingTime = (isoTime) => {
  try {
    // æ ¹æ®ISOæ—¶é—´å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªæ–°çš„Dateå¯¹è±¡
    const date = new Date(isoTime);

    // ç”±äºJavaScriptçš„Dateå¯¹è±¡æ˜¯æ ¹æ®æœ¬åœ°æ—¶åŒºå¤„ç†æ—¶é—´çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åŠ ä¸Šæ—¶åŒºå·®
    // åŒ—äº¬æ—¶é—´æ¯”UTCæ—¶é—´æ™š8å°æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡ŒåŠ ä¸Š8å°æ—¶çš„æ¯«ç§’æ•°
    const beijingTime = new Date(date.getTime() + date.getTimezoneOffset() * 60000 + 8 * 60 * 60 * 1000);

    // æ ¼å¼åŒ–æ—¶é—´ä¸º YYYY-MM-DD HH:MM:SS
    const year = beijingTime.getFullYear();
    const month = (beijingTime.getMonth() + 1).toString().padStart(2, '0');
    const day = beijingTime.getDate().toString().padStart(2, '0');
    const hours = beijingTime.getHours().toString().padStart(2, '0');
    const minutes = beijingTime.getMinutes().toString().padStart(2, '0');
    const seconds = beijingTime.getSeconds().toString().padStart(2, '0');

    // è¿”å›æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²
    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
  } catch (error) {
    // å¦‚æœè¾“å…¥çš„æ—¶é—´å­—ç¬¦ä¸²æ ¼å¼ä¸æ­£ç¡®æˆ–è€…æœ‰å…¶ä»–é”™è¯¯ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯
    console.error('è½¬æ¢æ—¶é—´å‡ºé”™:', error);
    return 'æ—¶é—´è½¬æ¢é”™è¯¯';
  }
};

/**
 * åˆ¤æ–­urlæ˜¯å¦ä¸ºåˆæ³•çš„httpèµ„æºåœ°å€
 * @param {String} url éœ€è¦éªŒè¯çš„URL
 * @return {Boolean} æ˜¯å¦ä¸ºåˆæ³•çš„HTTP URL
 */
export function isHttpUrl(url) {
  if (!url || typeof url !== 'string') return false;
  url = url.trim();
  // ç®€å•æ­£åˆ™åˆ¤æ–­ http/https å¼€å¤´
  return /^https?:\/\/[^\s]+$/i.test(url);
}

/**
 * è·å–nå¹´åçš„å¹´æœˆæ—¥ï¼Œå¦‚2024-04-12
 * @param {number} yearAfter å‡ å¹´å
 * @return {string} '2027-04-12'
 */
export const getCurrentYMD = (yearAfter = 0) => {
  const today = new Date();
  today.setFullYear(today.getFullYear() + yearAfter);
  const year = today.getFullYear();
  const month = (today.getMonth() + 1).toString().padStart(2, '0');
  const day = today.getDate().toString().padStart(2, '0');
  return `${year}-${month}-${day}`;
}
````

## File: assets/constant/sceneInfo.js
````javascript
const BIRTH_COMMON_WISHES = [
  "å¹´å¹´æœ‰ä»Šæ—¥ï¼Œå²å²æœ‰ä»Šæœï¼",
  "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼å¤©å¤©å¼€å¿ƒï¼Œèº«ä½“å¥åº·ï¼",
  "æ„¿å¿«ä¹ã€å¹¸ç¦æ°¸è¿œå›´ç»•åœ¨ä½ èº«è¾¹!ç”Ÿæ—¥å¿«ä¹!",
  "è¡·å¿ƒåœ°ç¥æ„¿ä½ ç”Ÿæ—¥å¿«ä¹!ä¸‡äº‹å¦‚æ„ï¼",
  "ç”Ÿæ—¥å¿«ä¹!ä½ å¿«ä¹æ‰€ä»¥æˆ‘å¿«ä¹ï¼",
  "å£°å£°çš„ç¥ç¦ï¼Œæ·±æ·±çš„æƒ…è°Šï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼",
  "ç¥ä½ ç™¾äº‹å¯ä¹ï¼Œä¸‡äº‹èŠ¬è¾¾ï¼Œå¤©å¤©å¨ƒå“ˆå“ˆï¼",
  "ç¥ä½ åœ¨æ–°çš„ä¸€å²é‡Œäº‹äº‹é¡ºåˆ©!ç”Ÿæ—¥å¿«ä¹!",
  "æ„¿å¥åº·å¿«ä¹ä¸ä½ æ—¥å¤œç›¸ä¼´ï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹!",
  "è®©æˆ‘ä¸ºä½ ç¥ç¦ï¼Œè®©æˆ‘ä¸ºä½ æ¬¢ç¬‘ï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼",
  "æ„¿ä½ å¤©å¤©å¿«ä¹ï¼Œå¹´å¹´å¥½è¿ï¼Œä¸€ç”Ÿå¹¸ç¦ï¼",
  "èº«ä½“å¥åº·ï¼Œå¿ƒæƒ³äº‹æˆï¼Œä¸‡äº‹å¦‚æ„ï¼",
  "å¿«äº‹é•¿ä¼´å‹ï¼Œä¹è¡”æœˆä¸‹æ¯ï¼",
  "å¿«æ„äººç”Ÿå‹¤ç™»æ”€ï¼Œä¹å¨±ç”Ÿæ—¥åº†åå¹´ï¼",
];

/**
 * å„ä¸ªæ´»åŠ¨ç‰ˆæœ¬çš„ä¿¡æ¯
 */

export default {
  0: {
    name: "å©šç¤¼ç‰ˆ",
    alias: "wedding",
    sceneType: "0",
    wishes: [
      "åå¹´ä¿®å¾—åŒèˆ¹æ¸¡ï¼Œç™¾å¹´ä¿®å¾—å…±æ•çœ ï¼",
      "è¡·å¿ƒçš„ç¥ç¦ä½ ä»¬ï¼šç›¸äº’çæƒœï¼ŒåŒå¿ƒæ°¸ç»“ï¼",
      "ç¥ç¦ä½ ä»¬æ°¸è¿œäº’æ•¬äº’çˆ±ï¼Œç”œç¾å¹¸ç¦ï¼",
      "æ¯”ç¿¼é½é£ï¼Œäº‹ä¸šæ›´æ˜Œç››ï¼",
      "ç¾æ»¡è‰¯ç¼˜ï¼Œç™½é¦–æˆçº¦ï¼",
      "æ„¿ä½ ä»¬ç›¸äº²ç›¸çˆ±ï¼Œæ°¸ç»“åŒå¿ƒï¼",
      "å’Œå’Œç¾ç¾ï¼Œç™½å¤´å•è€ï¼",
      "æ­å–œä½ å¤§å©šè¾¾æˆï¼Œç¥ç¦ä½ ä»¬ç›Ÿç»“è‰¯ç¼˜ï¼",
      "æ„¿ä½ ä»¬ä¸€ç›´å¸¦ç€è¿™å–œæ‚¦å’Œå¹¸ç¦èµ°è¿›äººç”Ÿçš„æ–°ç¯‡ç« ï¼",
      "ç¥ä½ ä»¬å±±ç›Ÿæ°¸åœ¨ã€æµ·èª“é•¿å­˜ï¼",
      "ç¥å¤©å¤©æ©æ©çˆ±çˆ±ï¼æ–°å©šå¿«ä¹ï¼",
      "éœ²å‡ºå¹¸ç¦çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨ç¥ç¦ä¸­ã€‚",
      "ç¥ä½ ä»¬æ–°å©šå¿«ä¹ã€æ°¸è¿œå¹¸ç¦ï¼",
      "å©šå§»æ°¸ç¾æ»¡ï¼Œå¹¸ç¦åœ¨äººé—´ï¼æ­å–œæ­å–œï¼",
      "åŒå¿ƒç»“å·²æˆï¼Œæ„¿çˆ±æ°¸åŒè¡Œï¼",
      "ç¥ä½ ä»¬ç™¾å¹´æ©çˆ±ç»“è¿ç†ï¼Œä¸€ç”Ÿå¹¸ç¦æ°¸åŒå¿ƒï¼",
      "ç™¾å¹´å¥½åˆï¼æ–°å©šæ„‰å¿«ï¼Œç”œç”œèœœèœœï¼æ—©ç”Ÿè´µå­ï¼",
      "ç¥ä½ ä»¬ç›¸äº²ç›¸çˆ±ä¸€ç™¾å¹´ä¸åŠ¨æ‘‡ï¼",
      "æµ·æ¯çŸ³çƒ‚åŒå¿ƒæ°¸ç»“ï¼Œåœ°é˜”å¤©é«˜æ¯”ç¿¼é½é£ï¼",
      "ç è”å£åˆæ´æˆ¿æ˜¥æš–ï¼ŒèŠ±å¥½æœˆåœ†é±¼æ°´æƒ…æ·±ï¼",
    ],
  },
  91: {
    name: "å©šç¤¼ç‰ˆ",
    alias: "zshl",
    sceneType: "91",
    wishes: [
      "åå¹´ä¿®å¾—åŒèˆ¹æ¸¡ï¼Œç™¾å¹´ä¿®å¾—å…±æ•çœ ï¼",
      "è¡·å¿ƒçš„ç¥ç¦ä½ ä»¬ï¼šç›¸äº’çæƒœï¼ŒåŒå¿ƒæ°¸ç»“ï¼",
      "ç¥ç¦ä½ ä»¬æ°¸è¿œäº’æ•¬äº’çˆ±ï¼Œç”œç¾å¹¸ç¦ï¼",
      "æ¯”ç¿¼é½é£ï¼Œäº‹ä¸šæ›´æ˜Œç››ï¼",
      "ç¾æ»¡è‰¯ç¼˜ï¼Œç™½é¦–æˆçº¦ï¼",
      "æ„¿ä½ ä»¬ç›¸äº²ç›¸çˆ±ï¼Œæ°¸ç»“åŒå¿ƒï¼",
      "å’Œå’Œç¾ç¾ï¼Œç™½å¤´å•è€ï¼",
      "æ­å–œä½ å¤§å©šè¾¾æˆï¼Œç¥ç¦ä½ ä»¬ç›Ÿç»“è‰¯ç¼˜ï¼",
      "æ„¿ä½ ä»¬ä¸€ç›´å¸¦ç€è¿™å–œæ‚¦å’Œå¹¸ç¦èµ°è¿›äººç”Ÿçš„æ–°ç¯‡ç« ï¼",
      "ç¥ä½ ä»¬å±±ç›Ÿæ°¸åœ¨ã€æµ·èª“é•¿å­˜ï¼",
      "ç¥å¤©å¤©æ©æ©çˆ±çˆ±ï¼æ–°å©šå¿«ä¹ï¼",
      "éœ²å‡ºå¹¸ç¦çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨ç¥ç¦ä¸­ã€‚",
      "ç¥ä½ ä»¬æ–°å©šå¿«ä¹ã€æ°¸è¿œå¹¸ç¦ï¼",
      "å©šå§»æ°¸ç¾æ»¡ï¼Œå¹¸ç¦åœ¨äººé—´ï¼æ­å–œæ­å–œï¼",
      "åŒå¿ƒç»“å·²æˆï¼Œæ„¿çˆ±æ°¸åŒè¡Œï¼",
      "ç¥ä½ ä»¬ç™¾å¹´æ©çˆ±ç»“è¿ç†ï¼Œä¸€ç”Ÿå¹¸ç¦æ°¸åŒå¿ƒï¼",
      "ç™¾å¹´å¥½åˆï¼æ–°å©šæ„‰å¿«ï¼Œç”œç”œèœœèœœï¼æ—©ç”Ÿè´µå­ï¼",
      "ç¥ä½ ä»¬ç›¸äº²ç›¸çˆ±ä¸€ç™¾å¹´ä¸åŠ¨æ‘‡ï¼",
      "æµ·æ¯çŸ³çƒ‚åŒå¿ƒæ°¸ç»“ï¼Œåœ°é˜”å¤©é«˜æ¯”ç¿¼é½é£ï¼",
      "ç è”å£åˆæ´æˆ¿æ˜¥æš–ï¼ŒèŠ±å¥½æœˆåœ†é±¼æ°´æƒ…æ·±ï¼",
    ],
  },
  1: {
    name: "ä¼ä¸šç‰ˆ",
    alias: "enterprise",
    wishes: [
      "ç¥å…¬å¸è“¬å‹ƒå‘å±•ï¼Œç”Ÿæ„å…´éš†ï¼Œè´¢æºå¹¿è¿›ï¼",
      "ç¥æˆ‘ä»¬ä¼ä¸šçš„æ˜å¤©æ›´åŠ è¾‰ç…Œï¼",
      "ç¥å…¬å¸åœ¨æœªæ¥çš„å‘å±•ä¸­å‰ç¥¥å¦‚æ„ï¼Œå¤§å±•å®å›¾ï¼",
      "ç¥æ„¿æˆ‘ä»¬å…¬å¸å†åˆ›è¾‰ç…Œï¼Œè¶Šæ¥è¶Šå¥½ï¼",
      "ç¥æ„¿å…¬å¸ç”Ÿæ„å…´éš†é€šå››æµ·ï¼Œè´¢æºèŒ‚ç››è¾¾ä¸‰æ±Ÿã€‚",
      "æˆ‘ä»¬ä¼šæ›´åŠ çš„åŠªåŠ›ï¼Œæ›´åŠ çš„å¥‹è¿›ï¼Œè¿æ¥æ–°çš„è¾‰ç…Œï¼",
      "ä¸€è·¯æœ‰ä½ ï¼Œå°½æ˜¾é›„é£ï¼Œæºæ‰‹å…±è¿›ï¼Œå†åˆ›å¤©åœ°è¾‰ç…Œï¼",
      "æ ¹æ·±å¶èŒ‚æ— ç–†ä¸šï¼Œæºè¿œæµé•¿æœ‰é“è´¢ï¼",
      "ä¸œé£åˆ©å¸‚æ˜¥æ¥æœ‰è±¡ï¼Œç”Ÿæ„å…´éš†æ—¥è¿›æ— ç–†ï¼",
      "ç¥æ„¿å…¬å¸æœªæ¥åˆ›æ–°ä¸æ­¢ã€æ‰¬å¸†èµ·èˆªï¼",
      "ä¸€ä»½è€•è€˜ï¼Œä¸€ä»½æ”¶è·ï¼Œé£é›¨åŒèˆŸï¼Œå…±åˆ›è¾‰ç…Œï¼",
      "å±•æœ›æœªæ¥ï¼Œæ»¡æ€€ä¿¡å¿ƒï¼ŒåŒå¿ƒååŠ›ï¼Œç§¯æè¿›å–ï¼",
      "æ™®å¤©åŒåº†è‰³é˜³å¤©ï¼Œéœ–éœ–ç”˜éœ²å…†ä¸°å¹´ï¼",
      "åŒ…æ‰“å¤©ä¸‹é¸¿å›¾å±•ï¼Œè£…æ½¢åä¸½ä¼Ÿä¸šåšï¼",
      "äº”åè€•è€˜ç£¨ä¸€å‰‘ï¼Œå‘¨å…¨æœåŠ¡æš–äººé—´ï¼",
      "å¹´å¹´å¥½è¿è´¢æºå¹¿ï¼Œåº†è¯­æ¬¢æ­Œè°±æ–°ç¯‡ï¼",
      "å¹´å¹´è‹¥å¾—é½å¿ƒå¤„ï¼Œåº†åŠŸè°ˆç¬‘æ–©è†æ£˜ï¼",
      "ç¦ç¦„åŒæ”¶ä¸šå…´æ—ºï¼Œç‘æ°”ä¸œæ¥é¸¿è¿é•¿ï¼",
      "åšå¤§ç²¾æ·±ç§‘æŠ€å¼ºï¼Œå¾·åšè½½ç‰©ç¾åæ‰¬ï¼",
      "åå…¨åç¾å³¥åµ˜æ¦œï¼Œå‘¨å¤©æ—¥æœˆé½å…‰èŠ’ï¼",
    ],
  },
  2: {
    name: "ç”Ÿæ—¥ç‰ˆ(é€šç”¨)",
    alias: "birth",
    wishes: BIRTH_COMMON_WISHES,
  },
  21: {
    name: "å®å®å®´",
    alias: "bby",
    wishes: [
      "å¸Œæœ›ä½ èº«ä½“å¼ºå£®ï¼Œå¿«å¿«é•¿å¤§ï¼Œè¶Šé•¿è¶Šå¯çˆ±å“¦ï¼",
      "å®å®ï¼Œä½ çš„åˆ°æ¥ç‚¹äº®äº†æˆ‘ä»¬çš„ç”Ÿå‘½ï¼Œä¸ºæˆ‘ä»¬çš„ç”Ÿæ´»èµ‹äºˆäº†å…¨æ–°çš„æ„ä¹‰ï¼Œç”Ÿæ—¥å¿«ä¹ï¼",
      "å€¼å¾—è®°å¿µçš„æ—¥å­ï¼Œå®è´ï¼Œä¸–ç•Œå› ä¸ºæœ‰äº†ä½ è€Œæ›´åŠ ç¾å¥½ï¼Œç”Ÿæ—¥å¿«ä¹!",
      "å®è´ï¼Œç”Ÿæ—¥å¿«ä¹ã€‚è®°ä½ï¼Œä½ ç”Ÿå‘½çš„æ¯ä¸€æ¬¡æ‰¬å¸†å‡ºæµ·ã€‚æˆ‘çš„ç¥ç¦éƒ½ä¼šä¼´ä½ åŒè¡Œ!",
      "ç¥ç¦å®å®å¥åº·æˆé•¿ï¼Œå‰é€”æ— é‡ï¼Œæœ‰ä¸€ä¸ªç¾å¥½çš„æœªæ¥ï¼Œå¿«ä¹ã€æˆå°±ã€åŠŸåã€è´¢å¯Œåº”æœ‰å°½æœ‰ï¼ã€‚",
      "æ„¿ä½ åƒé¢—ç§å­ï¼Œå‹‡æ•¢åœ°å†²ç ´æ³¥æ²™ï¼Œå°†å«©ç»¿çš„å¹¼èŠ½ä¼¸å‡ºåœ°é¢ï¼ŒæŒ‡å‘å¤©ç©ºã€‚",
      "é’æ˜¥ã€é˜³å…‰ã€æ¬¢ç¬‘ï¼Œä¸ºè¿™å±äºä½ çš„æ—¥å­ï¼Œèˆå‡ºæ¬¢ä¹çš„èŠ‚æ‹ã€‚ç¥å®è´ç”Ÿæ—¥å¿«ä¹!",
      "ç¥ä½ åœ¨æ¯ä¸ªæˆé•¿çš„æ—¥å­é‡Œéƒ½å¼€å¼€å¿ƒå¿ƒ!ç”Ÿæ—¥å¿«ä¹!",
      "å®è´ï¼Œä½ çš„ç”Ÿæ—¥å°±åœ¨ä»Šå¤©ï¼Œç¥ä½ å¯çˆ±ä¾æ—§ï¼Œå¿«ä¹å¤šå¤š!",
      "ä»¥åè¦å¬å¦ˆå¦ˆçš„è¯ï¼Œåšä¸ªä¹–å®å®å“¦!",
      "ç¥ç¦å®å®èªæ˜ä¼¶ä¿ã€å¬è¯ä¹–å·§ã€‚",
      "é€å®å®ä¸€ä»½æ¸©é¦¨ï¼Œä¸¤ä»½é—®å€™ï¼Œä¸‰ä»½ç¾å¥½ï¼Œå››ä»½æ‡µæ‡‚ï¼Œäº”ä»½é«˜è´µï¼Œå…­ä»½å‰ç¨‹ï¼Œä¸ƒä»½å…¸é›…ï¼Œå…«ä»½æŸ”æƒ…ï¼Œä¹ä»½è´¢è¿ï¼Œåä»½çœŸè¯šã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œå¹¸ç¦å®‰åº·ã€‚",
      "å¸Œæœ›æœªæ¥çš„æ—¥å­ï¼Œä½ éƒ½èƒ½å¿«ä¹çš„æˆé•¿ï¼Œæœ‰ä¸ªå¿«ä¹ç¾å¥½çš„ç«¥å¹´!",
      "å®å®ç”Ÿæ—¥å¿«ä¹ï¼ŒåŸæ‰€æœ‰çš„å¿«ä¹ï¼Œæ‰€æœ‰çš„å¹¸ç¦ï¼Œæ‰€æœ‰çš„æ¸©é¦¨ï¼Œæ‰€æœ‰çš„å¥½è¿æ°¸è¿œå›´ç»•åœ¨ä½ èº«è¾¹!ç”Ÿæ—¥å¿«ä¹!",
      "ç¥ç¦è¿™ä¸ªå¯çˆ±çš„å­©å­ï¼Œæˆ‘ç¥ç¦ä»–å¥åº·æˆé•¿ï¼Œå¿«ä¹å¹¸ç¦ï¼Œå°†æ¥ä¸€å®šäº‹ä¸šæœ‰æˆã€‚",
      "æ„¿æ‰€æœ‰çš„å¹¸ç¦ï¼Œæ‰€æœ‰çš„å¿«ä¹ï¼Œæ‰€æœ‰çš„æ¸©é¦¨ï¼Œæ‰€æœ‰çš„å¥½è¿ï¼Œæ°¸è¿œå›´ç»•åœ¨å®å®èº«è¾¹ã€‚",
    ],
  },
  22: {
    name: "å¯¿å®´",
    alias: "sy",
    wishes: [
      "ç¦å¦‚ä¸œæµ·å¯¿æ¯”å—å±±;æ—¥æœˆæ˜Œæ˜æ¾é¹¤é•¿æ˜¥;ç¬‘å£å¸¸å¼€å¤©ä¼¦æ°¸äº«ã€‚",
      "å˜‰å®¾æ—¨é…’ï¼Œç¬‘æŒ‡é’å±±æ¥çŒ®å¯¿ã€‚æ„¿ç™¾å²å¹³å®‰ï¼Œäººå…±æ¢…èŠ±è€å²å¯’ã€‚",
      "ä»Šå¤©æ˜¯ä¸ªå–œåº†çš„æ—¥å­ï¼Œåœ¨æ‚¨è¾›åŠ³äº†å‡ åå¹´çš„ä»Šå¤©ï¼Œå­å­™æ¬¢èšä¸€å ‚ï¼ŒåŒäº«å¤©ä¼¦ä¹‹ä¹ï¼Œç¥æ‚¨å¯¿ä¸å¤©é½",
      "å²æœˆé£é€ï¼Œé’æ˜¥ä¸è€ï¼Œ æ„¿å¿«ä¹ä¸æ‚¨æ°¸éš",
      "åƒé‡Œé€èŸ æ¡ƒï¼Œç¦å¤šå¯¿å¤šï¼Œç¥æ‚¨è€ç¦å¦‚ä¸œæµ·",
      "éº»å§‘çŒ®å¯¿ï¼Œæ¾é¹¤åŒå¯¿ï¼Œç¥æ‚¨å¯¿æ¯”å—å±±ä¸è€æ¾",
      "å­å­™ç»•è†ç¦æ°”å¤šï¼Œæ—¥æœˆå¢è¾‰å¹´å¯¿é•¿",
      "å¦‚æœˆä¹‹æ’ï¼Œå¦‚æ—¥ä¹‹å‡ï¼Œå¦‚å—å±±ä¹‹å¯¿ï¼Œä¸éªä¸å´©ã€‚å¦‚æ¾æŸä¹‹èŒ‚ï¼Œæ— ä¸å°”æˆ–æ‰¿",
      "æ­ç¥è€å¯¿æ˜Ÿï¼Œç¦å¦‚ä¸œæµ·ï¼Œæ—¥æœˆæ˜Œæ˜ã€‚",
      "æ¾é¹¤é•¿æ˜¥ï¼Œæ˜¥ç§‹ä¸è€ï¼Œå¤ç¨€é‡æ–°ï¼Œæ¬¢ä¹è¿œé•¿ã€‚",
      "æ­ç¥è€äººå¢å¯Œå¢å¯¿å¢å¯Œè´µï¼Œæ·»å…‰æ·»å½©æ·»å‰ç¥¥ï¼Œç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ï¼",
      "ç¥ç¦è€äººç”Ÿæ´»ä¹‹æ ‘å¸¸ç»¿ï¼Œç”Ÿå‘½ä¹‹æ°´é•¿æµï¼Œå¯¿è¯å¿«ä¹ï¼Œæ˜¥è¾‰æ°¸ç»½ï¼",
      "ç¦å¯¿å®‰åº·ï¼Œä¸‡å¯¿æ— ç–†ï¼Œå¥åº·å¦‚æ„ï¼Œç¦ä¹ç»µç»µï¼Œç¬‘å£å¸¸å¼€ï¼Œç›Šå¯¿å»¶å¹´ï¼",
      "åé¾„è€åŸé’æ˜¥é©»ï¼Œé³å‡¤é¾Ÿé¾™å¯¿ï¼ŒæœŸé¢å¤©èµï¼Œé£è§ç•…é¥®ï¼Œç¥è™¾åƒç§‹ã€‚",
      "ç«‹è¨€ç«‹å¾·ï¼Œèƒ¸è—ä¸˜å£‘ï¼Œæ³Šæµªç« ä¼˜ï¼Œè½®ç¿»ä¸–çºªï¼Œå¤•é˜³åç¾ï¼Œæ¯”èƒœç‹ä¾¯ã€‚",
      "è®©æˆ‘ä»¬ä¸€èµ·æ­ç¥å¯¿æ˜Ÿï¼Œç¦å¦‚ä¸œæµ·ï¼Œæ—¥æœˆæ˜Œæ˜ï¼›æ˜¥ç§‹ä¸è€ï¼Œæ¾é¹¤é•¿é’ï¼›æ¬¢ä¹è¿œé•¿ï¼Œå¤ç¨€é‡æ–°ã€‚",
      "æ»¡è„¸çš±çº¹ï¼ŒåŒæ‰‹ç²—èŒ§ï¼Œå²æœˆè®°è½½ç€æ‚¨çš„è¾›åŠ³ï¼Œäººä»¬æƒ³å¿µç€æ‚¨çš„å–„è‰¯ï¼›åœ¨è¿™ä¸ªç‰¹æ®Šçš„æ—¥å­é‡Œï¼Œç¥æ‚¨ç¦åŒæµ·é˜”ã€å¯¿æ¯”å—å±±ï¼Œæ„¿å¥åº·ä¸å¿«ä¹æ°¸è¿œä¼´éšç€æ‚¨ï¼",
      "æ­ç¥è€å¯¿æ˜Ÿï¼Œç¦å¦‚ä¸œæµ·ï¼Œæ—¥æœˆæ˜Œæ˜ã€‚æ¾é¹¤é•¿æ˜¥ï¼Œæ˜¥ç§‹ä¸è€ï¼Œå¤ç¨€é‡æ–°ï¼Œæ¬¢ä¹è¿œé•¿ã€‚åŒæ—¶ä¹Ÿç¥æ„¿åœ¨åçš„çš„å„ä½éƒ½å¹¸ç¦å®‰åº·!",
      "å®‰é€¸é™è°§çš„æ™šå¹´ï¼Œä¸€ç§ä¼‘æ¯ï¼Œä¸€ç§æ„‰æ‚¦ï¼Œä¸€ç§è‡³é«˜çš„äº«å—!ç¥æ‚¨ç¦å¦‚ä¸œæµ·é•¿æµæ°´å¯¿æ¯”å—å±±ä¸è€æ¾!",
    ],
  },
  23: {
    name: "æˆäººç¤¼",
    alias: "crl",
    wishes: [
      "æ„¿æ­¤å»å‰ç¨‹ä¼¼é”¦ å†ç›¸é€¢ä¾æ—§å°‘å¹´",
      "æ„¿ä½ èµ°åˆ°å“ªé‡Œéƒ½ä¸ç¼ºé‡å¤´å†æ¥çš„å‹‡æ°”",
      "æ„¿ä½ çš„æœªæ¥ï¼Œè¦å’©æœ‰å’©ï¼Œå‰ç¨‹ä¼¼é”¦ï¼Œè¸®åˆ°é£èµ·",
      "æ„¿ä½ å‡ºèµ°åŠç”Ÿ å½’æ¥ä»æ˜¯å°‘å¹´",
      "æ„¿ä½ æˆä¸ºè‡ªå·±çš„å¤ªé˜³ ä¸å¿…å‡­å€Ÿè°çš„å…‰",
      "æ„¿ä½  æœ‰è‰¯å–„ã€æœ‰å‹‡æ°”ã€æœ‰æ¢¦æƒ³ã€æœ‰æ‹…å½“ã€æœ‰æ»¡æ»¡çš„çˆ±ã€‚",
      "æ„¿ä½ å¼€å¯ä¸€æ®µæ–°çš„ç¾ä¸½äººç”Ÿ!æ„¿ä½ çœŸè¯šã€ç¾ä¸½ã€å–„è‰¯",
      "æˆäººå‘Šåˆ«å¹¼ç¨šèµ°å‘æˆç†Ÿ,å…‹æœä¾èµ–,èµ°å‘ç‹¬ç«‹ï¼Œæ„¿ä½ ä»Šåçš„æ¯ä¸€å¤©ä¸‡äº‹é¡ºæ„ï¼Œä¸æƒ§é£é›¨ï¼Œå‹‡å¾€ç›´å‰",
      "æˆå¹´äº†å¯ä»¥æ”¾å¿ƒå¤§èƒ†è°ˆæ‹çˆ±äº†",
    ],
  },
  24: {
    name: "ç™¾éœ²å®´",
    alias: "bly",
    wishes: [
      "ç¥å­©å­åƒæ—é—´çš„ä»™å­ä¸€æ ·å¿«ä¹å¹¸ç¦ï¼Œæ­Œå£°ç›¸ä¼´ï¼Œç¾æ»¡ä¸€ç”Ÿ!",
      "ç™¾æ—¥å®å®ç™¾å²åº·ï¼Œå²å²å²å¹³å®‰ï¼Œç¥æ‚¨å®å®å¹³å®‰åˆå¥åº·!",
      "æ„Ÿè°¢ä½ ï¼Œå®è´ã€‚å› ä¸ºä½ ï¼ŒèŠ±æœµå¼€æ”¾ï¼Œéšä½ è€Œæ¥çš„æ»¡å¤©å¸Œæœ›!",
      "å®è´ã€‚ä½ ç”Ÿå‘½çš„æ¯ä¸€æ¬¡æ‰¬å¸†å‡ºæµ·ã€‚æˆ‘çš„ç¥ç¦éƒ½ä¼šä¼´ä½ åŒè¡Œ!",
      "ç™¾å¹´ç™¾æœˆç™¾å¤©ï¼Œé•¿ä¹…é•¿é¡ºé•¿å®‰",
      "é’æ˜¥ã€é˜³å…‰ã€æ¬¢ç¬‘ï¼Œä¸ºè¿™å±äºä½ çš„æ—¥å­ï¼Œèˆå‡ºæ¬¢ä¹çš„èŠ‚æ‹ã€‚",
    ],
  },
  25: {
    name: "æ»¡æœˆå®´",
    alias: "myy",
    wishes: [
      "ä¸€æœˆå·²æ»¡ï¼Œå¥åº·å¿«ä¹ï¼Œå¹³å®‰æˆé•¿ï¼Œæ›´åŠ æ¬£å–œï¼Œä¸¾æ¯åŒåº†ã€‚",
      "æ»¡æœˆå®´ï¼Œç¥ç¦æ»¡æ»¡ï¼Œå¥åº·æ»¡æ»¡ï¼Œå¹¸ç¦æ»¡æ»¡ï¼Œå¿«ä¹æ»¡æ»¡ã€‚",
      "ç¾å¥½åˆ°ï¼Œå¾—å°å®ã€‚å‘½è¿å¥½ï¼Œæ‰æƒ…é«˜ã€‚åˆå®¶æ¬¢ï¼Œçˆ¶æ¯ç¬‘ã€‚",
      "å®å®é™ä¸´ï¼Œå…¨å®¶æ¬¢ç¬‘ï¼Œå†æ— çƒ¦ç»•ï¼›å®å®ä¸€ç¬‘ï¼Œä¸‡äº‹å˜å¥½ã€‚",
      "ç¥æ„¿å®å®ï¼Œæ»¡æœˆå¿«ä¹ï¼Œå¥åº·å›´ç»•ï¼Œä¹å¾—é€é¥ï¼",
      "å®å®æ»¡æœˆåˆ°ï¼Œå¹¸ç¦å¹å“é›†ç»“å·ï¼Œå–œé¹Šé¸¿é›ä¼ å–œæŠ¥ï¼Œè¿œäº²è¿‘é‚»éƒ½è¯·åˆ°ï¼",
      "å–œæ°”ä¼´ç»•ï¼›æ­å–œå–œå¾—å®å®ï¼Œå¼€å¿ƒå¸¸ç»•",
      "å®å®æ»¡æœˆï¼Œé€å»æ»¡æ»¡çš„ç¥æ„¿ï¼šæ„¿å·¥èµ„æ¶¨æ»¡ï¼Œå¹¿å¼€è´¢æºï¼Œå¤šèµšå®å®çš„å¥¶ç²‰é’±ï¼",
    ],
  },
  26: {
    name: "åœ†é”å®´",
    alias: "ysy",
    wishes: BIRTH_COMMON_WISHES,
  },
  41: {
    name: "æ¯•ä¸šå…¸ç¤¼",
    alias: "bydl",
    wishes: [
      "æˆ‘ä¸æƒ³è¯´å†è§,æ›´ä¸æƒ³è¯´ä¸è§ï¼Œæˆ‘åªæƒ³è¯´æ‚¨ä¸è¦å¿˜äº†æœ‹å‹ã€‚",
      "æ¯•ä¸šäº†æˆ‘ä»¬ä¸è¦å“­å¥½ä¸å¥½ã€‚",
      "æ¯•ä¸šäº†ï¼Œæˆ‘æ€•è¿å·å·çœ‹ä½ çš„æœºä¼šéƒ½æ²¡æœ‰äº†ã€‚",
      "æˆ‘ä¸æ€•æ¯•ä¸šï¼Œæˆ‘æ€•æ¯•ä¸šåçš„ç¦»åˆ«ã€‚",
      "æ¯•ä¸šäº†ï¼Œæ›¾ç»é‚£äº›ä¸åœ¨æ„çš„äººå’Œäº‹ï¼Œç°åœ¨æƒ³æ¥å¤šä¹ˆçè´µã€‚",
      "æ ¡æœå¾ˆä¸‘ä½†æ˜¯æˆ‘æƒ³é™ªä½ å¤šç©¿å‡ å¹´ã€‚",
      "ä¸‹ä¸€ä¸ªå¤å¤©ï¼Œæ•™å®¤é‡Œåˆåæ»¡äº†äººï¼Œå¯æƒœä¸å†æ˜¯æˆ‘ä»¬ã€‚",
      "æˆ‘ä¸å–œæ¬¢æ¯•ä¸šï¼Œå³ä½¿æ¯•ä¸šæ²¡æœ‰ä½œä¸šã€‚",
      "æ¯æ ¡å°±æ˜¯é‚£ä¸ªä½ ä¸€å¤©éª‚å®ƒå…«éï¼Œå´ä¸è®¸åˆ«äººéª‚çš„åœ°æ–¹ã€‚",
      "åŒæ¡Œè‡³ä¸Šï¼Œè¿™ä¸ªå¤å¤©ï¼Œæˆ‘ä»¬ä¸æ¯•ä¸šã€‚",
      "å¥½å¥½çæƒœç©¿æ ¡æœçš„æ—¥å­å§ï¼Œå› ä¸ºä¸€è„±å°±æ˜¯ä¸€è¾ˆå­ã€‚",
      "ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œæ˜å¤©æ²¡æœ‰è¯¾ï¼Œä»¥åéƒ½æ²¡æœ‰è¯¾äº†ã€‚",
      "æˆ‘ä»¬å’Œå­¦æ ¡å†è§ï¼Œå´ä¸è·Ÿé’æ˜¥é“åˆ«ã€‚",
      "è¯·å†è°±ä¸€æ”¯é’æ˜¥æ›²ï¼Œä¼´éšä½ æˆ‘åœ¨æ˜å¤©çš„å¾é€”ä¸­ç»§ç»­å¥‹è¿›!",
      "ä¸è¯´éš¾è¿‡ï¼Œä¸è¯´å†è§ï¼Œæˆ‘ä»¬åä¼šæœ‰æœŸã€‚",
      "çœŸæ­£çš„æ¯•ä¸šä¸æ˜¯ç¦»å¼€é‚£æ‰€å­¦æ ¡ï¼Œè€Œæ˜¯é‚£ç¾¤äººæ•£äº†ã€‚",
      "è®©ç”Ÿå‘½çš„ä¹¦é¡µï¼Œæ°¸è¿œè®°ä½ç‚¹ç‡ƒè¿‡å¿ƒçµçš„æ¸©æš–é˜³å…‰ã€‚",
      "æ¯•ä¸šå­£ã€‚å‹æƒ…ä¸æ¯•ä¸šï¼Œé’æ˜¥ä¸æ¯•ä¸šã€‚",
      "æˆ‘ä»¬éƒ½æ˜¯å†å¿«æ¯•ä¸šçš„æ—¶å€™æ‰çˆ±ä¸Šå­¦æ ¡çš„ã€‚",
      "è°æŠŠå…‰é˜´å‰ªæˆäº†çƒŸèŠ±ï¼Œä¸€ç¬é—´ï¼Œçœ‹å°½ç¹åã€‚",
      "ç¦»å¼€çš„ä¸æ˜¯å­¦æ ¡ï¼Œè€Œæ˜¯æ•™å®¤é‡Œçš„é‚£å¸®é€—æ¯”ã€‚",
      "å†é‡è§æˆ–è®¸æˆ‘ä»¬éƒ½ä¸è®°å¾—æ›¾ç»çš„å¹´å°‘è½»ç‹‚ã€‚",
      "æ—¶å…‰ä¸è€ï¼Œæˆ‘ä»¬ä¸æ•£ã€‚",
      "æœ‰ä¸€ç§ç¾å¥½å«åšé’æ˜¥ï¼Œæœ‰ä¸€ç§ç¦»åˆ«å«åšæ¯•ä¸šã€‚",
      "æœ€åˆé‡è§ç¾äº†è„¸ï¼Œå¦‚ä»Šç¦»åˆ«å´çº¢äº†çœ¼ã€‚",
      "å‡ è½½é’æ˜¥ï¼Œå‡ è½½æƒ…è°Šï¼ŒåŒå­¦å°‘å¹´æ€»ç›¸å¿†ã€‚",
      "æ¯•ä¸šäº†ï¼Œç»“æŸäº†ï¼å¯æ˜¯åˆ°åº•æ˜¯ç»“æŸï¼Œè¿˜æ˜¯å¦ä¸€ä¸ªæ–°çš„å¼€å§‹ï¼Ÿ",
      "æ¯•ä¸šï¼Œæˆ‘è¯´æ˜¯ç»“æŸï¼Œä½ å´è¯´æ˜¯æˆç†Ÿã€‚",
      "æˆ‘ä»¬ä¸€èµ·å¥‹æ–—çš„æ—¥å­ï¼Œä¸€èµ·è·‘è¿‡çš„æ—¥å­æ˜¯æœ€å€¼å¾—æ€€å¿µçš„ã€‚",
      "æ¯•ä¸šäº†ï¼Œå¿ƒä¸­æœ‰å¤ªå¤šå¤ªå¤šçš„ä¸èˆï¼",
      "æ¯•ä¸šäº†ï¼Œæ‡‚å¾—ä»€ä¹ˆæ˜¯å‹è°Šï¼Œæ‡‚å¾—äº†ä»€ä¹ˆæ˜¯å¸ˆç”Ÿæƒ…ã€‚",
    ],
  },
  42: {
    name: "è°¢å¸ˆå®´",
    alias: "xsy",
    wishes: [
      "è¿™äººç”Ÿçš„æ—…é€”ä¸Šï¼Œæ„Ÿè°¢æœ‰æ‚¨çš„æ•™è¯²ã€‚æ˜¯æ‚¨ç»™äº†æˆ‘æ— å°½çš„ä¿¡å¿ƒå’Œå‹‡æ°”ï¼Œä¸ºæˆ‘ç‚¹ç‡ƒäº†å¸Œæœ›ä¹‹ç¯ï¼Œè®©æˆ‘é¨æ¸¸åœ¨çŸ¥è¯†çš„æµ·æ´‹ã€‚è°¢è°¢æ‚¨ï¼Œäº²çˆ±çš„è€å¸ˆï¼",
      "é¸¦åå“ºï¼Œç¾Šè·ªä¹³ã€‚å­¦å­æ°¸è®°æ•™å¸ˆæ©ã€‚é’å±±ç»•ç»¿æ°´ï¼Œè€å¸ˆæ©æƒ…é•¿åˆé•¿ã€‚è·¯è¾¹èŠ±ï¼Œé›ªä¸­è‰ï¼Œæ²¡æœ‰æ©å¸ˆéƒ½ä¼šå€’å±±å†é«˜ï¼Œæ°´å†æ·±ï¼Œæ²¡æœ‰è€å¸ˆæ©æƒ…çœŸï¼",
      "ç”·è€å¸ˆï¼Œèµ›é›„ç‹®ï¼›å¥³è€å¸ˆï¼Œèµ›è¥¿æ–½ã€‚æ•™æˆ‘ä»¬æ±‚çœŸåŠ¡å®ï¼Œå®äº‹æ±‚æ˜¯ï¼ç¥è€å¸ˆä»¬æ—¶æ—¶å¼€å¿ƒï¼Œäº‹äº‹é¡ºå¿ƒï¼Œä¸–ä¸–ä»£ä»£å—äººçˆ±æˆ´å°Šæ•¬ï¼",
      "èœ—å±…ä¸‰å°ºå¤©åœ°ï¼Œæ•™é­æŒ‡æ‰¬æ–‡å­—ï¼Œç²‰å°˜æŒ¥æ´’çŸ¥è¯†ï¼Œè‚²å‡ºæ»¡å¤©æ¡ƒæã€‚ç¬‘å®¹å †ç§¯ï¼Œæ˜¯æ‚¨è¾›åŠ³åçš„æ¬£å–œï¼Œå¼€å¿ƒä¾æ—§ï¼Œæ˜¯ç¥æ‚¨å¹¸ç¦æ— æ¯”ï¼Œç¥è€å¸ˆä¸‡äº‹å¦‚æ„ã€‚",
      "æ‚¨å·¥ä½œåœ¨ä»Šæœï¼Œå´å»ºè®¾ç€ç¥–å›½çš„æ˜å¤©ï¼›æ‚¨æ•™å­¦åœ¨è¯¾å ‚ï¼Œæˆå°±å´åœ¨ç¥–å›½çš„å››é¢å…«æ–¹",
      "ä¸è®¡è¾›å‹¤ä¸€ç šå¯’ï¼Œæ¡ƒç†Ÿæµä¸¹ï¼Œæç†Ÿææ®‹ã€‚ç§èŠ±å®¹æ˜“æ ‘äººéš¾ï¼Œå¹½è°·é£é¦™ä¸ä¸€èˆ¬è¯—æ»¡äººé—´ï¼Œç”»æ»¡äººé—´ã€‚è‹±æ‰æµæµç¬‘å¼€é¢œã€‚",
      "æ©å¸ˆæ èµ·å¿ƒä¸­è´£ï¼Œä¼ é“æˆä¸šå‘äººé—´ï¼›ä¸è®¡è¾›å‹¤æ’­å¸Œæœ›ï¼Œæµ‡çŒæœªæ¥è‚²æ–°è‹—ï¼›ä¸¤è¢–æ¸…é£ä»»åŠ³æ€¨ï¼Œæ¡ƒææ»¡å›­ç¬‘å¼€é¢œã€‚æ•™å¸ˆèŠ‚æ¥ä¸´ï¼Œåœ¨æ­¤é“ä¸€å£°ï¼Œè€å¸ˆï¼Œæ‚¨è¾›è‹¦äº†ï¼Œæ„¿æ‚¨å¹¸ç¦å®‰åº·ï¼Œå¿«ä¹ä¸€ç”Ÿï¼",
      "åœ¨æ‚¨å…³æ€€çš„ç›®å…‰ä¹‹ä¸‹ï¼Œç»™äºˆäº†æˆ‘æ— å°½çš„ä¿¡å¿ƒå’Œå‹‡æ°”ï¼æ‚¨æ˜¯æˆ‘æ°¸è¿œçš„è€å¸ˆï¼è¡·å¿ƒç¥æ‚¨å¥åº·å¹¸ç¦ï¼åœ¨æ•™å¸ˆèŠ‚åˆ°æ¥ä¹‹é™…ï¼Œç¥æˆ‘äº²çˆ±çš„è€å¸ˆï¼Œèº«ä½“å¥åº·ï¼æ°¸è¿œå¿«ä¹ï¼",
      "ç°åœ¨ï¼Œä¸€åˆ‡éƒ½è¿‡å»äº†ï¼Œå¯å®ƒå˜æˆä¸ºäº²åˆ‡çš„å›å¿†äº†ï¼Œæˆ‘æ€€å¿µç€æ‚¨å¸¦æˆ‘ä»¬èµ°è¿‡çš„åˆ†åˆ†ç§’ç§’ï¼è€å¸ˆï¼Œç¥ç¦æ‚¨ï¼šæ¡ƒææ»¡å¤©ä¸‹ï¼Œæ˜¥æ™–éå››æ–¹ï¼",
      "åœ¨æˆ‘ä»¬ä»å¹¼ç¨šèµ°å‘æˆç†Ÿï¼Œä»æ„šæ˜§èµ°å‘æ–‡æ˜çš„è·¯ä¸Šï¼Œæ‚¨ç”¨ç”Ÿå‘½çš„.ç«ç‚¬ï¼Œä¸ºæˆ‘ä»¬å¼€é“ã€‚",
      "å¯¹äºæ‚¨æ•™è¯²çš„è‹¦å¿ƒï¼Œæˆ‘æ— æ¯”æ„Ÿæ¿€ï¼Œå¹¶å°†é“­è®°äºå¿ƒï¼",
      "è€å¸ˆï¼Œç¦»åˆ«è™½ç„¶ä¹…é•¿ï¼Œè€Œæ‚¨é‚£å½¢è±¡ä»¿ä½›æ˜¯ä¸€ä¸ªç¿çƒ‚å‘äº®çš„å…‰ç‚¹ï¼Œä¸€ç›´åœ¨æˆ‘çš„å¿ƒä¸­é—ªçƒã€‚",
      "ä¸€ä¸ªä¸ªæ—¥å­å‡èµ·åˆé™è½ï¼Œä¸€å±Šå±Šå­¦ç”Ÿèµ°æ¥åˆèµ°è¿‡ï¼Œä¸å˜çš„æ˜¯æ‚¨æ·±æ²‰çš„çˆ±å’Œç¿çƒ‚çš„ç¬‘å®¹ã€‚ç¥ç¦æ‚¨äº²çˆ±çš„è€å¸ˆã€‚",
      "ç‡ƒçƒ§è‡ªå·±ï¼Œç…§äº®å­¦ç”Ÿï¼›äººæ°‘æ•™å¸ˆï¼Œæ•™ä¹¦è‚²äººã€‚æ˜¥é£åŒ–é›¨ï¼Œå¡‘é€ çµé­‚ï¼›èŒå£®æˆé•¿ï¼Œéš¾å¿˜å¸ˆæ©ï¼",
      "ä½ æœ‰çˆ¶äº²ä¸¥å‰çš„ä¸€é¢ï¼Œæœ‰æ¯äº²æ…ˆç¥¥çš„ä¸€é¢ï¼Œæœ‰æœ‹å‹çŸ¥å¿ƒçš„ä¸€é¢ï¼Œæ„Ÿè°¢æ‚¨çš„æŒ‡å¼•ï¼Œæ„Ÿè°¢æ‚¨çš„æ•™è¯²ï¼Œæ„Ÿè°¢æ‚¨çš„å…³å¿ƒã€‚",
      "æ‚¨çš„å²—ä½æ°¸ä¸è°ƒæ¢ï¼Œæ‚¨çš„è¶³è¿¹å´éå¸ƒå››æ–¹ï¼›æ‚¨çš„ä¸¤é¬“ä¼šæœ‰ä¸€å¤©æ–‘ç™½ï¼Œæ‚¨çš„é’æ˜¥å´ç™¾å¹´ä¸è¡°ã€‚",
      "æœ‰äº†ä½ ï¼Œæˆ‘çš„ä¸€ç”Ÿæ‰ç²¾å½©ï¼ï¼è°¢è°¢ä½ ï¼æˆ‘çš„è€å¸ˆï¼",
      "æ•™å¸ˆæ˜¯ç«ç§ï¼Œç‚¹ç‡ƒäº†å­¦ç”Ÿçš„å¿ƒçµä¹‹ç«ï¼›æ•™å¸ˆæ˜¯çŸ³çº§ï¼Œæ‰¿å—ç€å­¦ç”Ÿä¸€æ­¥æ­¥è¸å®åœ°å‘ä¸Šæ”€ç™»ã€‚",
      "çœŸç©ºã€åšå®šã€è°¦é€Šã€æœ´ç´ â€•â€•è¿™æ˜¯æ‚¨æ•™ç»™æˆ‘å”±çš„æ­Œï¼Œè¿™æ˜¯æ‚¨æŒ‡å¼•æˆ‘èµ°çš„äººç”Ÿä¹‹è·¯ã€‚",
      "è€å¸ˆï¼Œæ‚¨æ˜¯æˆ‘å¿ƒä¸­æœ€é‡é‡çº§çš„äººç‰©ï¼Œæ‚¨çš„æ•™å¯¼æˆ‘è®°å¿ƒä¸Šï¼Œæ‚¨çš„æ•™è‚²æˆ‘è®°å¿ƒé—´ï¼Œæ‚¨çš„æ•™è¯²æˆ‘è®°å¿ƒé‡Œ",
      "å¸ˆæ©å¸¸å¸¸åŸºäºæ— å£°çš„å…³æ€€ï¼Œå¾€å¾€è€äººå¯»å‘³ï¼›ä½†åªæœ‰æ„Ÿï¼Œæ‰èƒ½æ‡‚å¾—å®ƒçš„çè´µã€‚",
      "äº²æƒ…è¡€æµ“äºæ°´ï¼›å‹æƒ…å½¼æ­¤å®‰æ…°ï¼›çˆ±æƒ…ç›¸ä¾ç›¸åï¼›å¸ˆç”Ÿæƒ…å¦‚åŒäº²æœ‹ï¼Œå…³çˆ±æ•™è¯²ï¼›æ„¿æ‚¨ç”Ÿæ´»ç¾æ»¡ï¼Œèº«ä½“åº·æ³°ï¼",
      "è€å¸ˆæ‚¨å¥½ï¼æ˜¯æ‚¨çš„å¿ƒè¡€æ’’éäº†å¹¿å¤§è˜è˜å­¦å­ï¼Œæ‚¨çš„è¾›åŠ³åŸ¹å…»äº†æ–°ä¸€ä»£å¤©ä¹‹éª„å­ï¼Œç¥æ‚¨èº«ä½“å¥åº·ã€‚",
      "è€å¸ˆï¼Œæ„Ÿè°¢æ‚¨ç”¨è‡ªå·±çš„ç”Ÿå‘½ä¹‹å…‰ï¼Œç…§äº®äº†æˆ‘äººç”Ÿçš„æ—…é€”ã€‚",
      "ä¸‰åå²è€Œç«‹ï¼ŒæŠ¥çˆ¶æ¯å«è¾›èŒ¹è‹¦å…»è‚²ä¹‹æ©ï¼›äºŒåå¹´æˆæ‰ï¼Œæ„Ÿè€å¸ˆè¾›å‹¤è€å¿ƒæ•™å¯¼ä¹‹å¾·ã€‚",
    ],
  },
  43: {
    name: "é‡‘æ¦œé¢˜å",
    alias: "jbtm",
    wishes: [
      "è€ƒåœºå‡¯æ—‹å¿ƒæ¬¢å–œï¼Œæ·æŠ¥ä¼ æ¥ç™»é‡‘æ¦œã€‚çˆ¶æ¯ä¸€å¬å¿ƒè½å®šï¼Œç¬‘å®¹æ»¡é¢æŠ¥è®¯å¿™ã€‚æ–Ÿé…Œå…´è¶£å’Œçˆ±å¥½ï¼Œå¡«æŠ¥å¿—æ„¿æœ‰ä¸»å¼ ã€‚ç¥ä½ å¿ƒæƒ³äº‹æˆäººæ¬¢ç¬‘ï¼Œå­¦åºœæ·±é€ åˆ›è¾‰ç…Œ!",
      "æ»¡æ± è·èŠ±é€æ¸…é¦™ï¼Œå–œè®¯ä¼ æ¥å¿ƒè¡æ¼¾ã€‚å¿§æ„çƒ¦æ¼ä¸€æ‰«å…‰ï¼Œç¬‘å®¹æ»¡é¢æ­Œå£°æ‰¬ã€‚é‡‘æ¦œé¢˜åæ„¿å¾—å¿ï¼Œå†å…¥å­¦åºœçŸ¥è¯†é•¿ã€‚ç¥ä½ å­¦æˆå½’æ¥æˆæ ‹æ¢ï¼Œä¸ºå›½è´¡çŒ®åšæ¦œæ ·ï¼",
      "æå¤´å–œé¹Šå–³å–³å«ï¼Œé‡‘æ¦œé¢˜åå–œè®¯åˆ°ã€‚äº²æœ‹å¥½å‹æ¥ç¥è´ºï¼Œçˆ¶æ¯å¼€å¿ƒè„¸å«ç¬‘ã€‚é²¤é±¼ä»Šæ—¥é¾™é—¨è·³ï¼Œè¿›å…¥å­¦åºœå†æ·±é€ ã€‚ä»–æ—¥ä¸€å±•å‡Œäº‘å¿—ï¼Œäº‹ä¸šæˆåŠŸæˆè‹±è±ªã€‚æ„¿ä½ å‰ç¨‹å¤šç¾å¥½ï¼Œå®ç°æ¢¦æƒ³æ­¥æ­¥é«˜ï¼",
      "èŠ¬èŠ³æ»¡å›­èŠ±æä¿ï¼Œæ·æŠ¥ä¼ æ¥å¿ƒæ¬¢ç¬‘ã€‚å¦‚é£ä¼¼é›¨æ¸…å‡‰åˆ°ï¼Œåˆå®¶å¼€æ€€ä¹æ·˜é™¶ã€‚è®¾å®´ä¸¾æ¯åŒåº†è´ºï¼Œç¬‘è¯­ç›ˆç›ˆå…±æ¬¢ä¹ã€‚å¿—å‘é«˜è¿œå…¥å­¦åºœï¼Œå¤§æ­¥è¿ˆå‘æˆåŠŸè·¯ã€‚æ„¿ä½ å‰é€”æ— é™å…‰æ˜ã€‚",
      "å¤šå¹´çš„å¯’çª—è‹¦è¯»ï¼Œç»ˆäºèµ¢å¾—äº†è¿™ä¸€æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ï¼ŒçœŸå¿ƒåœ°ç¥è´ºä½ ï¼Œé‡‘æ¦œé¢˜åï¼",
      "åŠŸå¤«ä¸è´Ÿè‹¦å¿ƒäººï¼Œç¥è´ºä½ ï¼Œç»ˆäºæˆåŠŸäº†ï¼",
      "åå¹´å¯’çª—è‹¦ç§ç§ï¼Œåªä¸ºä¸€æœåŒ–ä½œé¾™ï¼Œä»Šæ—¥å¾—é‚å‡Œäº‘å¿—ï¼Œé’äº‘è·¯ä¸Šä¹éœ„å†²ï¼ŒçŸ¥ä½ é«˜è€ƒå¾—æˆåŠŸï¼Œè¯šå¿ƒç¥ç¦åœ¨å¿ƒä¸­ï¼Œæ„¿ä½ çš„äººç”Ÿä¸€è·¯é¡ºé£ã€‚",
      "æ°´æ»´çŸ³ç©¿ä¸šç²¾ä¸èˆï¼Œæµ·é˜”å¤©é«˜å­¦è´µæœ‰æ’ã€‚ç¥ï¼Œé‡‘æ¦œé¢˜åï¼",
      "å¹¸ç¦çš„æ¶ˆæ¯åœ¨é‡‘è‰²çš„å­£èŠ‚ä¼ å‡ºï¼Œè¯šå¿ƒçš„ç¥ç¦ç”±ç¿çƒ‚çš„ç¬‘è„¸é“å‡ºï¼",
      "åº¦è¿‡é»‘è‰²ä¸ƒæœˆï¼Œç»è¿‡è“è‰²å…«æœˆï¼Œè¿æ¥äº†é‡‘è‰²ä¹æœˆï¼Œä¸€ä¸ªå±äºè˜è˜å­¦å­çš„å¹¸è¿ä¹‹æœˆï¼Œç¥ä½ å­¦ä¹ æ›´ä¸Šä¸€å±‚æ¥¼ï¼",
      "è™½æ²¡æ‚¬æ¢åˆºè‚¡é‚£ä¹ˆæ‚²å£®ï¼Œä¹Ÿæ²¡å‡¿å£å–å…‰é‚£ä¹ˆåˆ»è‹¦ï¼Œä½†æ›¾æŒ‘ç¯å¤œè¯»ï¼Œé¢˜æµ·å¥‹æ–—ã€‚å¦‚ä»Šé‡‘æ¦œé¢˜åï¼Œç»ˆå¯æ–½æ‰ï¼ŒæŠ¥æ•ˆç¥–å›½ï¼Œæ­å–œ!",
      "åå¹´æ‰¬å¸†å¾æˆ˜åœºï¼Œä»Šæœå§“åé¢˜é‡‘æ¦œã€‚äº²å‹ç›¸é—»çœ‹æ·æŠ¥ï¼Œåˆå®¶é›€è·ƒæ¬¢å£°ç¬‘ã€‚æ–‡å­—ç»½é¦™é†‰å¿ƒæˆ¿ï¼Œä¼´éšå®¶äººè¯æ¢¦æƒ³ã€‚é±¼è·ƒé¾™é—¨å…¥åæ ¡ï¼Œå¿…å°†æˆæ‰å¿—å‘é«˜ã€‚æ„¿ä½ æ˜å¤©æ›´ç¿çƒ‚ã€‚",
      "è¾›è‹¦çš„ä»˜å‡ºï¼Œç»ˆç»“å‡ºäº†ç¡•æœï¼›æ±—æ°´çš„çŒæº‰ï¼Œæ‰“å¼€äº†å–œæ‚¦çš„å¤§é—¨ã€‚å³å°†è¿ˆå…¥å¤§å­¦ä¹‹é—¨ï¼Œäººç”Ÿä¹‹è·¯åˆå¼€å¯ã€‚æ„¿ä½ æ”¶æ‹¾å¥½å¿ƒæƒ…ï¼Œè¿ˆå¼€æ„‰å¿«çš„è„šæ­¥ï¼Œè®©å¤§å­¦ç”Ÿæ´»ä¸°å¯Œå¤šå½©ã€‚æœ‹å‹ï¼Œç¥ä½ å¦‚æ„!",
      "å¯’çª—åè½½ï¼Œé£é›¨åƒç™¾;ä¹¦å±±è¡Œéï¼Œèˆªéå­¦æµ·;åƒç£¨ç™¾ç‚¼ï¼Œåšå¤§èƒ¸æ€€;æ°´æ´—æµªæ·˜ï¼Œé¢˜ååº”è¯¥ã€‚ç¥è´ºä½ é‡‘æ¦œé¢˜åï¼Œå¿ƒæƒ³äº‹æˆ!",
      "åæ•°å¯’çª—å—å°½ç´¯ï¼Œä¸æƒœé’æ˜¥ä¼´ä¹¦éšï¼Œç¿¼ç¾½æ¸ä¸°å±•é£é‡‡ï¼Œé‡‘æ¦œé¢˜åå”¯æˆ‘æœ€!ç¬‘çœ‹æˆè´¥æ·¡æµ®åï¼ŒæŒ¥æ´’é’æ˜¥æŠ•ç¤¾ä¼š!æ„¿ä½ æ¿€æƒ…æ°¸ä¸é€€ï¼Œå‘ç€ç†æƒ³å‹‡æ•¢è¿½!",
      "æ˜¨å¤œå–œé¹Šæå¤´å«ï¼Œå‡ºé—¨å¿…å®šè¡Œå¤§è¿ã€‚å¯’çª—è‹¦è¯»åäºŒè½½ï¼Œé‡‘æ¦œé¢˜åçœ‹ä»Šæœã€‚åƒå†›ä¸‡é©¬é½å†²é”‹ï¼Œæ—©æŠŠèƒœç®—æ¡æ‰‹ä¸­ã€‚é…¸ç”œè‹¦è¾£éƒ½å°éï¼Œè†æ£˜è¸ç ´æ˜¯å¦é€”ã€‚",
      "æœ‰å¿—ä¸æ€•å¹´çºªå°ï¼Œè‹±é›„ä¸æƒ§å‡ºèº«ä½ã€‚æ¿€æƒ…ç‚¹ç‡ƒç«–é›„å¿ƒï¼Œé’æ˜¥ä½œä¼´é€æ¢¦å¿™ã€‚äººç”Ÿè°·åº•ä¸Šå¡è·¯ï¼Œé«˜å³°æ›´æœ›é«˜å¤„è¡Œã€‚è¸éé’å±±äººä¸è€ï¼Œä¸€äº‹èƒ½ç‹‚ä¾¿å°‘å¹´ã€‚",
      "å¦‚æœè¯´é¼“åŠ±æ˜¯ä¸€æœµäº‘ï¼Œæˆ‘ä¼šè®©ä½ çš„å­¦ä¸šè·¯ä¸Šå½©äº‘æ»¡å¤©;å¦‚æœè¯´ç¥ç¦æ˜¯ä¸€ç‰‡é›ªï¼Œæˆ‘ä¼šè®©ä½ å­¦ä¸šè·¯ä¸­ç‘é›ªçº·é£;åœ¨äº‘å„¿å‡ç»“æˆé›ªçš„æ°”å€™ï¼Œä½ å·²ç»æ˜¯å¿ƒä»ªå·²ä¹…é‚£ä¸ªå­¦åºœçš„å­¦ç”Ÿã€‚",
      "å®å‰‘é”‹è‡ªç£¨ç ºå‡ºï¼Œæ¢…èŠ±é¦™è‡ªè‹¦å¯’æ¥ã€‚",
      "æœä¸ºç”°èˆéƒï¼Œæš®ç™»å¤©å­å ‚ã€‚å°†ç›¸æœ¬æ— ç§ï¼Œç”·å„¿å½“è‡ªå¼º",
      "å°‘å¹´è‡ªæœ‰é’äº‘å¿—ï¼Œå½“è®¸å¤©ä¸‹ç¬¬ä¸€æµã€‚",
      "å¤§å­¦ï¼Œä¸æ˜¯ä½ å •è½çš„å¼€å§‹ï¼Œè€Œæ˜¯ä½ æ¢¦æƒ³çš„ä¸€ä¸ªæ–°èµ·ç‚¹ï¼æ‹¼æå§ï¼Œå¥‹æ–—å§ï¼Œè®©ä½ çš„å¤§å­¦æ—¶å…‰åœ¨ä½ çš„äººç”Ÿçš„ç¯‡ç« é‡Œï¼Œå……å®çš„ï¼Œæ— æ‚”çš„æ·Œè¿‡ï¼",
      "æ˜¥å¤©ä½ æ’’ä¸‹äº†æ±—æ°´ï¼Œç”¨ä¸€ç‰‡ç¢§ç»¿æ¥æ¢å–é‡‘ç§‹çš„é»„é‡‘æ»¡åœ°ï¼Œæ”¶è·çš„æ˜¯æˆåŠŸçš„å–œæ‚¦ï¼Œè¿ˆå…¥äººç”Ÿå¦ä¸€é˜¶æ®µï¼Œä½ çš„ç”Ÿå‘½ä¼šæ›´åŠ ç²¾å½©ã€‚æ­å–œé«˜è€ƒæˆåŠŸï¼",
      "å£®å¿—å‡Œäº‘ï¼Œå¤§é¹å±•ç¿…æ—¥",
    ],
  },
  51: {
    name: "åŒå­¦ä¼š",
    alias: "txh",
    wishes: [
      "äººç”Ÿçš„å¹¸ç¦ä¸æ˜¯èµ°å¹³å¦çš„è·¯ï¼Œè€Œæ˜¯åœ¨åå·çš„è·¯ä¸Šæœ‰ä½æ‚£éš¾ä¸å…±çš„æœ‹å‹;çš„å¿«ä¹ä¸æ˜¯æ²¡æœ‰çœ¼æ³ªçš„ç”Ÿæ´»ï¼Œè€Œæ˜¯æœ‰ä½ä¸ºä½ æ“¦çœ¼æ³ªçš„çŸ¥å·±ã€‚æˆ‘äº²çˆ±çš„æœ‹å‹ï¼Œæ„¿æ‚¨æ‹¥æœ‰å¹¸ç¦å’Œå¿«ä¹!",
      "æ•¬çˆ±çš„è€å¸ˆï¼Œä½œä¸ºä½ ä»¬çš„å­¦ç”Ÿï¼Œå¾—åˆ°ä½ ä»¬çš„è°†è°†æ•™è¯²ï¼Œç»ˆç”Ÿå—ç›Šï¼Œæˆ‘ä»¬æ„Ÿåˆ°æ— æ¯”çš„éª„å‚²!",
      "äº²çˆ±çš„åŒå­¦ï¼Œä½œä¸ºå­¦å­åŒçª—å…±è¯»ï¼Œç•™å­˜çœŸæŒšæ— ç§çš„å‹æƒ…ï¼Œæˆ‘ä»¬å€æ„Ÿçæƒœ!",
      "ä¸è®ºæ˜¯èº«å±…é«˜ä½ï¼Œè¿˜æ˜¯ä¸€ä»‹å¸ƒè¡£;ä¸è®ºæ˜¯å¯Œç”²ä¸€æ–¹ï¼Œè¿˜æ˜¯æ¸…è´«å¦‚æ°´ï¼Œä½†æ˜¯ï¼Œå¸ˆç”Ÿæƒ…æ°¸åœ¨ï¼ŒåŒå­¦è°Šæ°¸å­˜!",
      "äººå’Œäººç›¸é‡ï¼Œé çš„æ˜¯ä¸€ç‚¹ç¼˜åˆ†ï¼Œäººå’Œäººç›¸å¤„ï¼Œé çš„æ˜¯ä¸€ä»½è¯šæ„ï¼Œäººå’Œäººç›¸çˆ±ï¼Œé çš„æ˜¯ä¸€é¢—çœŸå¿ƒï¼Œæ­£å› ä¸ºäººä¸–é—´æ¯æ®µç¼˜ä»½éƒ½æ¥ä¹‹ä¸æ˜“ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬æ°¸è¿œæ˜¯çš„æœ‹å‹!",
      "æ™šä¸Šç¬‘ç¬‘ç¡ä¸ªç¾æ»¡è§‰ï¼Œæ—©æ™¨ç¬‘ç¬‘å…¨å¤©ç”Ÿæ´»æœ‰æƒ…è°ƒï¼Œå·¥ä½œä¹‹ä½™ç¬‘ç¬‘æ»¡å ‚æ¬¢å–œåˆçƒ­é—¹ï¼Œçƒ¦æ¼ä¹‹æ—¶ç¬‘ç¬‘ä¸€åˆ‡å¿§æ„å…¨æŠ›æ‰ï¼Œæ”¶åˆ°çŸ­ä¿¡ç¬‘ç¬‘æ„Ÿå—ç”Ÿæ´»çœŸç¾å¦™ã€‚",
      "ä½ çš„ç¾ä¸½é›…çº¯æ˜¯å­å¼¹ï¼Œä¼šæ·±æ·±åœ°å‡»ä¸­æˆ‘çš„å¿ƒï¼Œè®©ä½ çš„æƒ…è¯å’ŒåŠ¨äººåœ¨æˆ‘å¿ƒä¸­ä¸€ç”Ÿç¾ä¸½ï¼Œä¸€æ¡çŸ­ä¿¡å´è•´å«ç€æˆ‘åƒåƒä¸‡ä¸‡ä¸ªå¿ƒæ„¿ï¼Œç¥ä½ å¤©å¤©å¿«ä¹é«˜å…´ã€‚",
      "æˆ‘é€ä½ ä¸€é¢—å¿˜å¿§è‰ï¼Œå†ä¸ºä½ é€®åªå¹¸ç¦é¸Ÿï¼Œå½“å¹¸ç¦é¸Ÿå«ç€å¿˜å¿§è‰åƒä½ é£æ¥æ—¶ï¼Œè¯·æŠŠä½ çš„å¿ƒæ•´ç†å¥½ï¼Œé‚£æ˜¯æˆ‘å¯¹ä½ çš„ç¥ç¦ï¼Œåªå¸Œæœ›ä½ èƒ½å¿«ä¹åˆ°è€å¹¸ç¦åˆ°è€!",
      "é€‰å¯¹ä¸€ä¸ªç¯å¢ƒå¯ä»¥å¿«ä¹ä¸€ç”Ÿ!é€‰å¯¹ä¸€ä¸ªä¼´ä¾£å¯ä»¥å¹¸ç¦ä¸€ç”Ÿ!é€‰å¯¹ä¸€ä¸ªæœ‹å‹å¯ä»¥æ™ºæ…§ä¸€ç”Ÿ!é€‰å¯¹ä¸€ä»½äº‹ä¸šå¯ä»¥æˆå°±ä¸€ç”Ÿ!æ‚¨æ˜¯æˆ‘ä¸€ç”Ÿæœ€ç¾ä¸½çš„ç›¸é‡!",
      "æˆ‘ä¸çŸ¥é“æµæ˜Ÿèƒ½é£å¤šä¹…ï¼Œå€¼ä¸å€¼å¾—è¿½æ±‚;æˆ‘ä¸çŸ¥é“æ¨±èŠ±èƒ½å¼€å¤šä¹…ï¼Œå€¼ä¸å€¼å¾—ç­‰å€™;ä½†æˆ‘çŸ¥é“ä½ æˆ‘çš„å‹è°Šï¼Œèƒ½åƒæ¨±èŠ±èˆ¬ç¾ä¸½ï¼Œåƒæ’æ˜Ÿèˆ¬æ°¸æ’ï¼Œå€¼å¾—æˆ‘ç”¨ä¸€ç”Ÿå»ä¿ç•™ã€‚",
      "ç»™å›å¿†æ°¸ä¸è¤ªå»çš„è‰²å½©ï¼Œç»™æ€å¿µè‡ªç”±é£ç¿”çš„ç¿…è†€ï¼Œç»™å¹¸ç¦æ°¸æ’ä¸æœ½çš„ç”Ÿå‘½ï¼Œç»™ç”Ÿæ´»è½»æ¾ç¿çƒ‚çš„ç¬‘è„¸ï¼Œç»™æœ‹å‹è¯šæŒšç¾å¥½çš„å‹è°Šï¼Œç»™ä½ å½“ç„¶æ˜¯ä¸€ç”Ÿä¸€ä¸–çš„ç¥ç¦!",
      "ç´§åœ°æ¡ä¸€æ¡æ‰‹ã€‚æ‰‹æœ‰æ„ï¼Œæ‰‹æœ‰æƒ…ï¼ŒæŒå¿ƒä¸­åƒè¨€ä¸‡è¯­ï¼Œä¹Ÿæœ‰æˆ‘éš¾è¨€çš„ç§˜å¯†ã€‚",
      "å¿§ä»–äººä¹‹å¿§ï¼Œä¹ä»–äººä¹‹ä¹ï¼Œä½ é‚£å–„è‰¯çƒ­è¯šæ— ç§çš„å“æ€§ï¼Œæ°¸è¿œé“­åˆ»åœ¨æˆ‘å¿ƒæ€€ã€‚",
      "ä½ çæƒœä»Šå¤©ï¼Œåˆä»¥ç™¾å€çš„çƒ­æƒ…å»æ‹¥æŠ±æ˜å¤©ï¼Œé‚£æœªï¼Œæœªæ¥å°±ä¸€å®šå±äºä½ !",
      "æˆ‘ä»¬è¿™ä¸€ä»£ï¼Œæ˜¯è·¨ä¸–çºªçš„é’å¹´ã€‚å†å²ä¸å…è®¸æˆ‘ä»¬æ„§å¯¹å¤äººä¸åä»£ã€‚æ„¿æˆ‘ä»¬ä»¥å“è¶Šçš„æ™ºæ…§åšå¼ºçš„æ„å¿—å¤§æ— ç•çš„ç²¾ç¥ï¼Œä¸æ–­å¼€æ‹“ï¼Œä¸æ–­å¥‹è¿›!",
      "é«˜å°šçš„ç†æƒ³æ˜¯äººç”Ÿçš„æŒ‡è·¯æ˜ç¯ã€‚æœ‰äº†å®ƒï¼Œç”Ÿæ´»å°±æœ‰äº†æ–¹å‘;æœ‰äº†å®ƒï¼Œå†…å¿ƒå°±æ„Ÿåˆ°å……å®ã€‚è¿ˆå¼€åšå®šçš„æ­¥ä¼ï¼Œèµ°å‘æ—¢å®šçš„ç›®æ ‡å§!",
      "ä¸è®ºä»äº‹å“ªç§èŒä¸šï¼Œè¦èµ°å‘æˆåŠŸï¼Œé¦–å…ˆåº”å¯¹èŒä¸šæ„Ÿå…´è¶£ã€‚",
      "å½“æˆ‘èµ°è¿›ä½ ï¼Œæœ¬æƒ³è·å¾—ä¸€æ»´æ°´ï¼Œä½ å´ç»™äº†æˆ‘æ•´ä¸ªæµ·æ´‹;æœ¬æƒ³é‡‡æ‘˜ä¸€ç‰‡æ ‘å¶ï¼Œä½ å´ç»™äº†æˆ‘æ•´ä¸ªæ£®æ—;æœ¬æƒ³è·å¾—ä¸€ç¼•æ˜¥é£ï¼Œä½ å´ç»™äº†æˆ‘æ•´æ•´ä¸€ä¸ªæ˜¥å¤©ã€‚",
      "éš¾å¿˜ä»Šå®µï¼Œä»Šå®µæˆ‘ä»¬æ¬¢å£°ç¬‘è¯­æ­Œèˆé£æ‰¬",
      "è¯·å†è°±ä¸€æ”¯é’æ˜¥æ›²ï¼Œä¼´éšä½ æˆ‘åœ¨æ˜å¤©çš„å¾é€”ä¸­ç»§ç»­å¥‹è¿›!",
      "æˆ‘ä»¬æ›¾æ˜¯å¹¶è‚©çš„ä¸¤æ£µå°æ ‘ï¼Œæˆ‘ä»¬æ›¾æ˜¯äºŒé‡å”±çš„ä¸¤ä¸ªå£°éƒ¨ï¼Œæˆ‘ä»¬æ›¾æ˜¯å¼ è¯¾æ¡Œä¸Šçš„å­¦å‹ã€‚å½“æˆ‘ä»¬æŒ¥æ‰‹å‘Šåˆ«çš„æ—¶å€™ï¼Œè¯·æ¥å—æˆ‘æ·±æƒ…çš„ç¥ç¦ã€‚",
      "å²æœˆçš„è½¦è½®å³å°†é©¶å‡ºé’æ˜¥çš„æ ¡å›­ï¼Œç”šè‡³æ¥ä¸åŠå»æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬å°±è¦èµ°å‘ç”Ÿæ´»çš„å‰æ–¹ã€‚è¿™æ ·åŒ†åŒ†ï¼Œè¯´äº›ä»€ä¹ˆ?â€•â€•è®©æˆ‘ä»¬çš„å¿ƒé—´åŠ å›ºç«¥å¹´æ—¶æ¶è®¾èµ·æ¥çš„æ¡¥æ¢ã€‚",
      "æˆ‘ä»¬ç›¸é€¢åœ¨é™Œç”Ÿæ—¶ï¼Œæˆ‘ä»¬åˆ†æ‰‹åœ¨ç†Ÿæ‚‰åã€‚æ˜å¤©ï¼Œæˆ‘ä»¬è¦åˆ°ç”Ÿæ´»çš„æ˜Ÿå›¾ä¸Šæ‰¾å¯»è‡ªå·±çš„æ–°ä½ç½®ï¼Œè®©æˆ‘ä»¬ç”¨è‡ªå·±é—ªçƒçš„æ˜Ÿå…‰ç›¸äº’é—®è®¯è¡¨æƒ…è¾¾æ„ã€‚",
      "å¤§åœ°ä¸Šæœ‰äº”è‰²åœŸï¼Œæµ·æ»©è¾¹æœ‰äº”å½©è´ï¼Œä¹ç« é‡Œæœ‰äº”çº¿è°±ï¼Œäººç”Ÿä¸­æœ‰äº”å½©è·¯ã€‚",
      "ä»Šæ—¥åŒçª—åˆ†æ‰‹ï¼Œè¯´ä¸€å£°ï¼šçé‡!æ˜æœæ ¡å‹ç›¸é€¢ï¼Œè´ºä¸€å¥ï¼šæˆåŠŸ!",
      "ç›¸èšçš„æ—¶å…‰è™½ç„¶çŸ­æš‚ï¼ŒåŒå­¦æƒ…è°Šå°†è¿œæ’­å››æ–¹",
      "ä¸€ä¸çœŸæƒ…èƒœè¿‡åƒä¸¤é»„é‡‘ï¼Œä¸€ä¸æ¸©æš–èƒ½æŠµä¸‡é‡Œå¯’éœœï¼Œä¸€å£°é—®å€™é€æ¥æ¸©é¦¨ç”œèœœï¼Œä¸€æ¡çŸ­ä¿¡æå»æˆ‘ä¸‡èˆ¬å¿ƒæ„ï¼Œå¿™ç¢Œçš„æ—¥å­å¥½å¥½ç…§é¡¾è‡ªå·±ã€‚",
      "ä¸€ä»½çœŸè¯šçš„æ„ŸåŠ¨ä»¤æˆ‘ä»¬å¸¸å­˜å¿ƒé—´ï¼Œä¸€ä»½è¯šæŒšçš„ç¥ç¦å°†é™ªä¼´æˆ‘ä»¬ç›´åˆ°æ°¸è¿œï¼Œä¸ºäº†å¿ƒä¸­è¿™ä»½æ„Ÿæƒ…ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»½å¼€ç¬‘é¢œã€‚",
      "ç¾é…’ä¼ é€’ç€æˆ‘ä»¬æ·±æ·±çš„ç¥ç¦ï¼Œå‹æƒ…è®©æˆ‘ä»¬çš„å¿ƒå½¼æ­¤ç›¸è¿ï¼Œä¸ºäº†è¿™ä»½çœŸæŒšçš„æƒ…æ„Ÿï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ¨æ¯æ¢ç›ã€‚",
      "å…³äºç›¸é‡æœ‰ä¸€ç§è§£é‡Šå«ç¼˜åˆ†ï¼Œå…³äºç”Ÿå‘½æœ‰ä¸€ç§ä¿¡å¿µå«åšè½®å›ï¼Œè€Œå¯¹äºæˆ‘æœ‰ä¸€ç§æƒ…æ„Ÿå«åšæ€å¿µï¼Œå¦‚æœçœŸæœ‰è½®å›ï¼Œæˆ‘å¸Œæœ›æ¯ä¸€æ¬¡ç”Ÿå‘½ä¸­æœ‰ä½ è¿™ä¸ªæ°¸è¿œä¸å˜çš„æœ‹å‹!",
      "çºµç„¶å²æœˆæµé€ï¼Œç©ºé—´åˆ†éš”äº†æˆ‘ä»¬ï¼Œæ—¶é—´å†²æ•£äº†ä½ æˆ‘ï¼Œä½†å…³æ€€ç¥ç¦ä¹‹å¿ƒå´é•¿ä¼´å·¦å³ã€‚",
      "æ­¥å…¥å¤§å­¦è¿æ¥ä¸€ç‰‡æ–°çš„å¤©åœ°ï¼Œä¸ºäº†ç†æƒ³ä¸ºäº†å°†æ¥å»æ‹¼æå»åŠªåŠ›;æµ·é˜”å‡­é±¼è·ƒï¼Œå¤©é«˜ä»»é¸Ÿé£!ç¥ç¦å¤§ä¸€æ–°ç”Ÿå¤§å±•å®å›¾ï¼Œæ·æŠ¥è¿è¿!",
      "å‹æƒ…çš„å»¶ç»­æ¥è‡ªå¿ƒçµï¼Œä¸è®ºè”ç³»æœ‰å¤šå°‘ï¼Œåªè¦å†…å¿ƒç•™æœ‰å½¼æ­¤çš„ä¸€ç‰‡å¤©ç©ºï¼Œé‚£ä¹ˆå¶å°”ä¸€å£°é—®ä¾¯å°±ä¼šå¸¦æ¥ä¼šå¿ƒçš„ä¸€ç¬‘ã€‚",
      "é€ä¸Šä¸€ä»½æ¸©é¦¨çš„ç‰µæŒ‚ï¼Œèµ äºˆä¸€è…”ç«çƒ­çš„æ‹æƒ…ã€‚",
      "ç—›è‹¦æ˜¯åˆ«äººçš„ï¼Œå¿«ä¹æ‰æ˜¯è‡ªå·±çš„;éº»çƒ¦å°†æ˜¯æš‚æ—¶çš„ï¼Œæœ‹å‹æ€»æ˜¯æ°¸æ’çš„;çˆ±æƒ…æ˜¯ç”¨å¿ƒç»è¥çš„ï¼Œä¸–ç•Œä¸Šæ²¡æœ‰ä»€ä¹ˆå¤§ä¸äº†çš„;ç¥ä»Šå¤©ï¼Œå“ˆå“ˆ!",
      "ç›¸çŸ¥æ˜¯å¤©æ„ï¼Œç›¸è¯†æ˜¯äººæ„ï¼Œç›¸åŠ ä¾¿æ˜¯å‹è°Šï¼Œæœ‰æƒ…ä¾¿æœ‰æ„ï¼Œæˆ‘ä»¬èƒ½èšåœ¨ä¸€èµ·ï¼Œå› ä¸ºå¿ƒæœ‰çµçŠ€ã€‚",
      "å¿ƒä¼¼ä¹ä¸å¾—ä¼‘æ¯ï¼Œæ€»æ˜¯ä¸åœåœ°æƒ³ä½ ï¼Œå“ªæ€•æ˜¯å¤œæ·±äººé™ï¼Œä½†æ„¿æ˜Ÿæ˜Ÿèƒ½é€å»æˆ‘çš„ä¸‡åƒç¥ç¦ã€‚",
      "æ˜Ÿå…‰ä¾æ—§ç¿çƒ‚ï¼Œæ¿€æƒ…ä»ç„¶ç‡ƒçƒ§ã€‚å› ä¸ºæœ‰æ¢¦æƒ³ï¼Œæ‰€ä»¥æˆ‘å­˜åœ¨ã€‚ä½ åœ¨ä½ çš„é¢†åŸŸé‡Œä¸æƒœé’æ˜¥ï¼Œæˆ‘åœ¨æˆ‘çš„é“è·¯ä¸Šä¸çŸ¥ç–²å€¦ã€‚",
      "å¤œè‰²èŒ«èŒ«ç…§å››å‘¨ï¼Œå¤©è¾¹æ–°æœˆå¦‚é’©ã€‚å¾€äº‹æå¦‚æ¢¦ï¼Œæ¢¦å¢ƒä½•å¤„æ±‚ã€‚äººéš”åƒé‡Œï¼Œè·¯æ‚ æ‚ ï¼Œè¯·æ˜æœˆï¼Œä»£é—®å€™ã€‚",
      "ä¸€ä¸çœŸæƒ…èƒœè¿‡åƒä¸¤é»„é‡‘ï¼Œä¸€ä¸æ¸©æš–èƒ½æŠµä¸‡é‡Œå¯’éœœï¼Œä¸€å£°é—®å€™é€æ¥æ¸©é¦¨ç”œèœœï¼Œä¸€æ¡çŸ­ä¿¡æå»æˆ‘ä¸‡èˆ¬å¿ƒæ„ï¼Œå¿™ç¢Œçš„æ—¥å­å¥½å¥½ç…§é¡¾è‡ªå·±ã€‚",
      "åˆé‡ä½ çš„å¿ƒæƒ…æ˜¯æ¸©é¦¨çš„ï¼Œå’Œä½ äº¤å‹çš„æ—¶å€™æ˜¯çœŸå¿ƒçš„ï¼Œä¸ä½ åœ¨ä¸€èµ·çš„æ—¶å€™æ˜¯å¼€å¿ƒçš„ï¼Œè®¤è¯†ä½ è¿™ä¸ªæœ‹å‹æ˜¯æ— æ€¨æ— æ‚”çš„ã€‚",
      "æ˜¥é£å¾—æ„é©¬è¹„ç–¾ã€‚æ–°å¹´ä¼Šå§‹ï¼Œæ„¿ä½ ä¹˜ç€å’Œç…¦çš„æ˜¥é£ï¼Œæœç€ç¿çƒ‚çš„å‰æ™¯ï¼Œé©¬ä¸åœè¹„ï¼Œå¥”è…¾æ·è¿›!",
      "å½“ä½ æˆåŠŸæ—¶ï¼Œå–·åšå¦‚æ­Œ;å½“ä½ å¤±è´¥æ—¶ï¼Œæ­Œå¦‚å–·åšã€‚",
      "å½“ä½ æ—©ä¸Šå¼€æœºæ—¶ï¼Œèƒ½è§åˆ°æˆ‘å¯¹ä½ çš„ç¥ç¦ï¼Œä¸€æœµå¿ƒä¸­çš„ç«ç‘°ï¼Œä¸ºä½ å¸¦æ¥ä¸€å¤©çš„å¥½è¿ã€‚",
      "å¯¹ä½ çš„æ€å¿µåƒè¢…è¢…çš„è½»çƒŸä¸ç»å¦‚ç¼•ï¼Œå¯¹ä½ çš„ç¥ç¦ä¼¼æ½ºæ½ºçš„å°æºªä¼´éšä¸€ç”Ÿä¸€ä¸–ã€‚",
      "æ–¹å¯¸é—´ï¼Œå†æ•°ä¸–ä¸Šæ¡‘ç”°æ²§æµ·;æ—¶ç©ºé‡Œï¼Œç»†é—®äººé—´æš‘å¾€å¯’æ¥;æ˜¯æœ‹å‹ï¼Œæ˜Ÿç§»æ–—è½¬æƒ…ä¸æ”¹;æ˜¯çŸ¥éŸ³ï¼Œå¤©æ¶¯æµ·è§’è®°å¿ƒæ€€ã€‚",
      "é£å¹èµ°äº†ç¥ç¦çš„å¿ƒçµ®ï¼Œé›¨æ¨¡ç…³äº†æœŸç›¼çš„è§†çº¿ï¼Œæˆ‘æ‰ç´§äº†æ€å¿µçš„æƒ…ç»“ï¼Œç›¸ä¿¡æ€»æœ‰ä¸€å¤©æˆ‘ä»¬ä¼šå†åº¦é‡é€¢!",
      "ä¸ç®¡å·¥ä½œæœ‰å¤šä¹ˆçš„ç¹å¿™ï¼Œåªè¦è®°å¾—æˆ‘æ—¶åˆ»éƒ½åœ¨è¿œæ–¹å…³æœ›ä½ ç¥ç¦ä½ å°±å¥½ã€‚",
      "æŠŠç”Ÿæ´»é…¿æˆé…’æµ†ï¼Œç”¨å¿«ä¹ä½œç“¶ï¼Œç”¨å¾®ç¬‘å‘½åï¼Œç”¨å’Œè°æ„å›¾ï¼Œç”¨èˆ’ç•…ç€è‰²ï¼Œè˜è¯·çœ‹çŸ­ä¿¡çš„ä½ ï¼Œåšæ°¸è¿œçš„å“é…’å¸ˆã€‚",
      "ä½ å¥½ï¼Œæˆ‘çš„æœ‹å‹ï¼Œä½ ä¸€å®šè¿˜åœ¨å¿™å§ï¼Œæ³¨æ„ä¿é‡èº«ä½“ï¼Œä½ çš„å¥½æœ‹å‹!",
    ],
  },
  52: {
    name: "ä¹”è¿å®´",
    alias: "qqy",
    wishes: [
      "ç¬‘è¯­å£°å£°ï¼Œå…±åº†ä¹”è¿å–œï¼",
      "ä»é‡Œèºè¿å´‡å››ç¾ï¼Œæ–°å±…ç‡•å–œåº†ä¸‰æ˜¥ï¼",
      "ä¹”å®…å–œï¼Œå¤©åœ°äººå…±å–œï¼",
      "ä¹”è¿ä¹‹å–œç¥ç¦ä½ ï¼ŒçœŸè¯šç¥ç¦åšè´ºç¤¼ï¼",
      "è‰¯è¾°å‰æ—¥ï¼Œä»æ­¤é‡‘é“¶è´¢å®æ»šè¿›é—¨ï¼",
      "ä¹”è¿å¤§å–œæ‹æ‹æ‰‹ï¼Œç¥ç¦é€åˆ°å–å–œé…’ï¼",
      "é­ç‚®å•ªå•ªå•ªï¼Œé”£é¼“é“›é“›é“›ï¼Œæ–°å¤©æ–°åœ°æ–°ç¦ç»•ï¼Œæ–°å®…æ–°é™¢æ–°è´¢ç½©ï¼",
      "ä¹”æ–°è¿ï¼Œå¥½è¿åˆ°ï¼Œå…¥é‡‘çªï¼Œç¦æ˜Ÿç…§ï¼",
    ],
  },
  53: {
    name: "ä¼šé”€",
    alias: "hx",
    wishes: [
      "ç¥æ„¿è´µå…¬å¸è“¬å‹ƒå‘å±•ï¼Œæ—¥èƒœä¸€æ—¥!æ˜å¤©å±•ä¼šåœ†æ»¡æˆåŠŸ!",
      "æœºé‡è•´å«ç²¾å½©ï¼Œå‘å±•å……æ»¡ä¿¡å¿ƒï¼Œå·è§’å‚¬äººå¥‹è¿›ã€‚",
      "æƒ¨æ·¡ç»è¥å†åƒè¾›ï¼Œä¸€ä¸¾æˆåå¤©ä¸‹é—»ï¼Œè™å•¸é¾™åŸå±•å®å›¾ï¼Œç›˜é©¬å¼¯å¼“åˆ›æ–°åŠŸ!",
      "å›¢ç»“ï¼Œæ˜¯ä¸€ä¸ªé‡è¦çš„ç²¾ç¥ï¼Œä¸€ä¸ªäººè¦æƒ³æˆåŠŸï¼Œè¦æœ‰èƒ½å¤ŸåŒåˆ«äººåˆä½œçš„ç²¾ç¥ï¼",
      "äº‹ä¸šæ˜¯è¿ç»“æˆ‘ä»¬çš„çº½å¸¦ï¼Œæ„¿æˆ‘ä»¬çš„äº‹ä¸šæ—ºå‘è¾¾ï¼Œå‹è°Šä¹‹èŠ±ä¹Ÿéšä¹‹ç››å¼€ï¼",
      "ç¥ä½ ä¸€æ°”å‘µæˆé©¬åˆ°æˆåŠŸï¼Œä¸€å¸†é£é¡ºäº‹ä¸šæœ‰æˆï¼Œä¸€é¸£æƒŠäººå¤§å±•å®å›¾ï¼Œä¸€å¹´åˆ°å¤´å’Œå’Œç¾ç¾å¿«å¿«ä¹ä¹",
      "æˆå°±æ˜¯è¾‰ç…Œçš„ï¼Œä¸šç»©æ˜¯çªå‡ºçš„ï¼Œç›®æ ‡æ˜¯è¶…è¿‡çš„ï¼Œå¿ƒæƒ…æ˜¯å¼€å¿ƒçš„ï¼Œæ„¿æ¥å¤§å®¶å†æ¥å†å‰ï¼Œå†åˆ›è¾‰ç…Œï¼Œèº«ä½“å¥åº·ï¼Œä¸‡äº‹å¦‚æ„ã€‚",
    ],
  },
  54: {
    name: "è®¢å©šå®´",
    alias: "dhy",
    wishes: [
      "åå¹´ä¿®å¾—åŒèˆ¹æ¸¡ï¼Œç™¾å¹´ä¿®å¾—å…±æ•çœ ï¼",
      "è¡·å¿ƒçš„ç¥ç¦ä½ ä»¬ï¼šç›¸äº’çæƒœï¼ŒåŒå¿ƒæ°¸ç»“ï¼",
      "ç¥ç¦ä½ ä»¬æ°¸è¿œäº’æ•¬äº’çˆ±ï¼Œç”œç¾å¹¸ç¦ï¼",
      "æ¯”ç¿¼é½é£ï¼Œç”Ÿæ´»æ›´å¹¸ç¦ï¼",
      "ç¾æ»¡è‰¯ç¼˜ï¼Œç™½é¦–æˆçº¦ï¼",
      "æ„¿ä½ ä»¬ç›¸äº²ç›¸çˆ±ï¼Œæ°¸ç»“åŒå¿ƒï¼",
      "å’Œå’Œç¾ç¾ï¼Œç™½å¤´å•è€ï¼",
      "æ­å–œä½ ä»¬è®¢å©šè¾¾æˆï¼Œç¥ç¦ä½ ä»¬ç›Ÿç»“è‰¯ç¼˜ï¼",
      "æ„¿ä½ ä»¬ä¸€ç›´å¸¦ç€è¿™å–œæ‚¦å’Œå¹¸ç¦èµ°è¿›äººç”Ÿçš„æ–°ç¯‡ç« ï¼",
      "ç¥ä½ ä»¬å±±ç›Ÿæ°¸åœ¨ã€æµ·èª“é•¿å­˜ï¼",
      "ç¥å¤©å¤©æ©æ©çˆ±çˆ±ï¼å¹¸ç¦å¿«ä¹ï¼",
      "éœ²å‡ºå¹¸ç¦çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨ç¥ç¦ä¸­ã€‚",
      "ç¥ä½ ä»¬æ°¸è¿œå¿«ä¹ã€æ°¸è¿œå¹¸ç¦ï¼",
      "äººç”Ÿæ°¸ç¾æ»¡ï¼Œå¹¸ç¦åœ¨äººé—´ï¼æ­å–œæ­å–œï¼",
      "åŒå¿ƒç»“å·²æˆï¼Œæ„¿çˆ±æ°¸åŒè¡Œï¼",
      "ç¥ä½ ä»¬ç™¾å¹´æ©çˆ±ç»“è¿ç†ï¼Œä¸€ç”Ÿå¹¸ç¦æ°¸åŒå¿ƒï¼",
      "ç”œç”œèœœèœœï¼Œæ°¸ç»“åŒå¿ƒï¼Œå¹¸ç¦ç™¾å¹´ï¼",
      "ç¥ä½ ä»¬ç›¸äº²ç›¸çˆ±ä¸€ç™¾å¹´ä¸åŠ¨æ‘‡ï¼",
      "æµ·æ¯çŸ³çƒ‚åŒå¿ƒæ°¸ç»“ï¼Œåœ°é˜”å¤©é«˜æ¯”ç¿¼é½é£ï¼",
      "æ­å–œæ­å–œï¼æˆ‘ä»¬ä¸€èµ·æ‘‡çº¢åŒ…ã€åšgameã€ä¸­å¤§å¥–ã€æ²¾å–œæ°”ï¼Œå—¨èµ·æ¥ï¼",
    ],
  },
  55: {
    name: "æ–‡æ—…ç‰ˆ",
    alias: "wl",
    wishes: [
      "ä»Šå¤©æ¥è§åˆ°å¤§å®¶ï¼ŒçœŸå¼€å¿ƒ",
      "æ°›å›´å¤ªæ£’å•¦ï¼Œè¶…èˆ’æœ",
      "æ„¿å’±ä»¬ä»Šå¤©éƒ½æœ‰å¥½æ”¶è·",
      "ç»ˆäºæ¥å•¦ï¼Œæ»¡æ˜¯æœŸå¾…",
      "å’Œå¤§å®¶ä¸€èµ·ï¼Œæ„Ÿè§‰è¶…æ£’",
      "ç›¼ä»Šå¤©æ¯ä¸€åˆ»éƒ½é¡ºæ„",
      "ç²¾å½©æ—¶åˆ»ï¼Œæ»¡å¿ƒæœŸå¾…",
      "ç¥å¤§å®¶ä»Šå¤©éƒ½å°½å…´å‘€",
      "è¿™å„¿çš„æ„Ÿè§‰ï¼Œå¤ªå¯¹å‘³äº†",
      "å¸Œæœ›ä»Šå¤©æ»¡æ˜¯å°ç¾å¥½",
      "ä¹˜å…´è€Œæ¥ï¼Œå…´å°½è€Œè¿”",
      "ç¾å¥½æ—¶å…‰ä¸è¯¸å›å…±äº«",
      "æ„Ÿè°¢ä¸»åŠæ–¹çš„å„é¡¹å®‰æ’",
      "ç²¾å½©ä¸æ­¢ä¸€ç‚¹ç‚¹",
      "ç¥å’±ä»¬éƒ½æœ‰éš¾å¿˜æ—¶åˆ»",
      "å°±ä¸¤ä¸ªå­—ï¼šå¼€å¿ƒ",
      "å’Œæœ‹å‹ä¸€èµ·æ¥çš„ï¼ŒçœŸå¥½",
      "èƒ½å‚ä¸è¿›æ¥ï¼ŒçœŸæ¬¢å–œ",
      "æ„¿ä»Šå¤©æ¯ä¸ªäººéƒ½èˆ’å¿ƒ",
      "ä¸€èµ·åº¦è¿‡è¿™æ®µå¥½æ—¶å…‰",
    ],
  },
};
````

## File: packageB/pages/winningRecord/winningRecord.wxml
````
<view class="container">
  <image
    src="https://static.joymew.com/joymewMp/winningRecord/bg.jpg"
    class="bg"
  />
  <view
    class="header"
  >
    <view
      class="header-item {{ activeIndex === 0 ? 'active' : '' }}"
      data-index="0"
      bind:tap="clickTab"
    >
      æˆ‘çš„å¥–å“
    </view>
    <view
      class="header-item {{ activeIndex === 1 ? 'active' : '' }}"
      data-index="1"
      bind:tap="clickTab"
    >
      ä¸­å¥–åå•
    </view>
  </view>
  <view
    wx:if="{{ activeIndex === 0 }}"
    class="my-prize {{ myPrizeList.length <= 0 ? 'empty' : '' }}"
  >
    <image
      wx:if="{{ myPrizeList.length <= 0 }}"
      src="https://static.joymew.com/joymewMp/winningRecord/empty-box.svg"
      class="empty-img"
      mode="aspectFit"
    />
    <view
      wx:for="{{ myPrizeList }}"
      wx:key="id"
      class="item"
    >
      <view class="img-area">
        <image
          src="{{ item.img }}"
          mode="aspectFit"
        />
      </view>
      <view class="award">å¥–é¡¹ï¼š{{ item.award }}</view>
      <view
        wx:if="{{ item.name }}"
        class="name"
      >
        å¥–å“åç§°ï¼š{{ item.name }}
      </view>
      <view class="confirm-btn {{item.hexiao ? 'confirmed' : ''}}" wx:if="{{item.hexiaoId}}" bindtap="confirmGetPrize" data-hexiaoid="{{item.hexiaoId}}" data-hexiao="{{item.hexiao}}">
      {{item.hexiao ? 'å·²é¢†å¥–' : 'å¾…é¢†å¥–'}}
      </view>
    </view>
  </view>
  <view
    wx:if="{{ activeIndex === 1 }}"
    class="winning-record"
  >
    <image
      wx:if="{{ recordList.length <= 0 }}"
      src="https://static.joymew.com/joymewMp/winningRecord/empty-box.png"
      class="empty-img"
      mode="aspectFit"
    />
    <view
      wx:for="{{ recordList }}"
      wx:key="id"
      class="item"
    >
      <image
        src="{{ item.img }}"
        class="img-area"
        mode="aspectFit"
      />
      <view class="award-and-name">
        {{ item.award }}{{ item.name ? 'ï¼š' : '' }}{{ item.name }}
      </view>
      <view
        class="not-lottery"
        wx:if="{{ item.winnerList.length <= 0 }}"
      >
        æŠ½å¥–å°šæœªå¼€å§‹
      </view>
      <view class="winner-list">
        <view
          class="winner {{ 'winner-' + winnerIndex }}"
          wx:for="{{ 4 }}"
          wx:for-item="winnerIndex"
          wx:key="winnerIndex"
        >
          <image
            wx:if="{{ item.winnerList[winnerIndex].avatar }}"
            src="{{ item.winnerList[winnerIndex].avatar }}"
            class="avatar"
            mode="aspectFill"
          />
          <view
            wx:if="{{ item.winnerList[winnerIndex].nickname }}"
            class="nickname"
            >{{ item.winnerList[winnerIndex].nickname }}</view
          >
        </view>
      </view>
      <view
        wx:if="{{ item.winnerList.length > 4 }}"
        class="check-more"
        data-winner-list="{{ item.winnerList }}"
        data-award="{{ item.award }}"
        bind:tap="showWinnerListPopup"
      >
        <image
          class="icon"
          src="https://static.hudongmiao.com/joymewMp/img/recharge/arrow-down.svg"
          mode="aspectFit"
        ></image>
        <view class="text">æŸ¥çœ‹æ›´å¤š</view>
      </view>
    </view>
  </view>
  <!-- <view class="ad-container">
    <ad
      unit-id="{{ adUnitId }}"
      ad-type="video"
    >
    </ad>
  </view> -->
  <winner-list-popup
    id="winnerListPopup"
    award="{{ winnerListPopupAward }}"
    winner-list="{{ winnerListPopupWinnerList }}"
  />
  <congratulation-winning-popup
    id="congratulationWinningPopup"
    award="{{ congratulationWinningPopupInfo.award }}"
    name="{{ congratulationWinningPopupInfo.name }}"
    img="{{ congratulationWinningPopupInfo.img }}"
  />
  <not-won-yet-popup id="notWonYetPopup" />
</view>
````

## File: packageGame/pages/shoutHb/components/cd/index.scss
````scss
.cd-container {
  position: fixed;
  z-index: 9999;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0,0,0,0.6);
}
.cd-num {
  font-size: 510rpx;
  font-weight: 400;
  color: #fcff67;
  text-shadow: 4rpx 8rpx 0px 0px #ff325b;
  transform: scale(0);
}
.cd-num.show {
  transform: scale(1);
  transition: all 0.3s ease-in-out;
}
````

## File: packageGame/pages/shoutHb/components/danmu/index.scss
````scss
.danmu {
  margin-top: 180rpx;
  position: relative;
  height: 360rpx;
  .barrage {
    font-weight: bold;
    letter-spacing: 6rpx;
    height: 80rpx;
    position: absolute;
    color: #fcff67;
    padding: 8rpx 40rpx;
    white-space: nowrap;
    background-color: rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50rpx;
    box-sizing: border-box;
    font-size: 34rpx;
    transform: translateX(-80%);
    display: none;
    animation: name duration timing-function delay iteration-count direction fill-mode;
    @keyframes barrage-move {
      0% {
        transform: translateX(-80%);
        left: 0;
      }
      100% {
        transform: translateX(-20%);
        left: 100%;
      }
    }
  }
}
````

## File: packageGame/pages/shoutHb/components/danmu/index.wxml
````
<view class="danmu">
  <view class="barrage" wx:for="{{barrageListUI}}" wx:for-item="item" wx:for-index="index" wx:key="index" style="{{item.style}}">{{item.content}}</view>
</view>
````

## File: packageGame/pages/shoutHb/components/microphone/index.wxml
````
<view class="microphone-wrap {{gameStatus}}">
  <view class="sound-wave">
    <view class="dot" wx:for="{{leftDots}}" wx:key="index" style="height: {{item}}rpx;transition-duration: {{dotsAniDuration}}s;"></view>
  </view>
  <view class="microphone-round {{isRippleAni ? 'rippleAni' : ''}}" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd"></view>
  <view class="sound-wave">
    <view class="dot" wx:for="{{rightDots}}" wx:key="index" style="height: {{item}}rpx;transition-duration: {{dotsAniDuration}}s;"></view>
  </view>
</view>
````

## File: packageGame/pages/shoutHb/components/ready/index.wxml
````
<view class="ready-container" wx:if="{{readyVisible}}">
    <view class="ready-text {{textShow?'show':''}} {{isFirst?'first':''}}">{{readyText}}</view>
</view>
````

## File: packageGame/pages/shoutHb/index.json
````json
{
  "navigationBarTitleText": "å–Šçº¢åŒ…",
  "usingComponents": {
    "wait": "./modules/wait/index",
    "game": "./modules/game/index",
    "rank": "./modules/rank/index",
    "danmu": "./components/danmu/index",
    "microphone": "./components/microphone/index",
    "textBoard": "./components/textBoard/index"
  }
}
````

## File: packageGame/pages/shoutHb/modules/rank/index.scss
````scss
.rank {
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.3);
  padding: 224rpx 18rpx 113rpx 18rpx;

  .rank-content {
    height: 100%;
    background-image: url(https://ustatic.joymew.com/joymewScreen/img/shoutHb/bottom-board.png);
    background-size: 100% 100%;
    position: relative;
    padding-top: 104rpx;
    display: flex;
    flex-direction: column;

    .rc-top {
      width: 608rpx;
      height: 160rpx;
      position: absolute;
      background-image: url(https://ustatic.joymew.com/joymewScreen/img/shoutHb/rank-tit.png);
      background-size: 100% 100%;
      top: -120rpx;
      left: 50%;
      transform: translateX(-50%);
    }

    .rc-t-winner {
      position: relative;
      flex-shrink: 0;
      display: flex;
      height: 240rpx;
      padding: 0 40rpx;

      .rc-tw-item {
        /* background-color: blue; */
        flex-basis: 33.33%;
        flex-shrink: 0;
        width: 0;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;

        .rc-tw-i-info {
          position: relative;
          width: 130rpx;
          height: 130rpx;
          background-size: 100% 100%;
          border-radius: 50%;

          .rc-tw-ii-image {
            width: 212rpx;
            height: 212rpx;
            position: absolute;
            top: -58rpx;
            left: -26rpx;
            filter: drop-shadow(0 4px 2px rgba(0, 0, 0, 0.4));
          }

          .rc-tw-ii-name {
            left: 50%;
            transform: translateX(-50%);
            position: absolute;
            bottom: -20rpx;
            height: 42rpx;
            width: calc(100% + 40rpx);
            background: linear-gradient(90deg, #ffc58e, #ff596f 100%);
            color: white;
            padding: 5rpx 16rpx;
            border-radius: 20rpx;
            text-overflow: ellipsis;
            overflow: hidden;
            font-size: 25rpx;
            white-space: nowrap;
            text-align: center;
          }
        }

        .fenbei {
          font-size: 20rpx;
          font-weight: 700;
          display: flex;
          align-items: center;
          margin-top: 30rpx;
          color: #2C81FF;
          .db {
            width: 18rpx;
            height: 18rpx;
            margin-right: 5rpx;
          }
        }
        .rc-tw-i-a {
          flex: 1 1 0;
          width: 0;
          display: flex;
          align-items: center;

          .rc-tw-ia-name {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0 20rpx;
          }
        }

        .rc-tw-i-money {
          width: 0;
          flex: 0 0 190rpx;
          color: #ff3e55;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 40rpx;
          font-weight: bold;
        }

        &:nth-child(1) {
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          top: -40rpx;
          width: fit-content;
        }

        &:nth-child(3) {
          margin-left: auto;
        }

        & > image {
          height: 212rpx;
          width: 212rpx;

          &:nth-child(2) {
            height: 122rpx;
            width: 122rpx;
            border-radius: 50%;
            position: absolute;
            left: 28rpx;
            top: 60rpx;
          }
        }
      }
    }

    .rc-t-list {
      flex-grow: 1;
      margin-top: 20rpx;
      height: 0;
      overflow: scroll;
      padding: 0 45rpx;

      .rc-tl-item {
        background: none !important;
        display: flex;
        margin: 20rpx 0;

        .rc-tl-i-info {
          flex: 0 0 100rpx;
          display: flex;
          align-items: center;

          .rc-tl-ii-view {
            width: 100rpx;
            height: 100rpx;
            background-color: #ff7989;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;

            .rc-tl-ii-v-avatar {
              width: 90rpx;
              height: 90rpx;
              border-radius: 50%;
            }

            .rc-tl-ii-v-content {
              height: 40rpx;
              width: 40rpx;
              background-color: #ffec86;
              position: absolute;
              bottom: -10rpx;
              left: 50%;
              transform: translateX(-50%);
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              overflow: hidden;
              padding: 2px;

              .rc-tl-ii-vc-number {
                background: linear-gradient(180deg, #ff9191, #ff4242 100%);
                color: white;
                width: 100%;
                text-align: center;
                border-radius: 50%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 22rpx;
              }
            }
          }
        }

        .rc-tl-i-a {
          flex: 1 1 0;
          width: 0;
          display: flex;
          align-items: center;

          .rc-tl-ia-name {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0 20rpx;
          }
        }

        .rc-tl-i-money {
          width: 0;
          flex: 0 0 190rpx;
          color: #ff3e55;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 40rpx;
          font-weight: bold;
        }
      }

      & > view {
        height: 130rpx;
      }
    }
  }
}
````

## File: pages/joymewIndex/joymewIndex.wxml
````
<view class="joymewIndex">
  <view class="signWrap {{sceneAlias}} {{customSignBg ? 'customSignBg' : ''}}">
    <!-- èƒŒæ™¯ -->
    <view class="bg">
      <image src="{{customSignBg}}" class="customBg" mode="aspectFill" wx:if="{{customSignBg}}"></image>
    </view>
    <!-- è¡¨å• -->
    <form class="signForm {{!customAvatarNickname ? 'noAvatar' : ''}} {{!isForcePhone ? 'noPhone' : ''}}">
      <view class="title" wx:if="{{sceneAlias === 'enterprise'}}">{{title}}</view>
      <view class="formItem" wx:if="{{customAvatarNickname}}">
        <view class="formItem-key">å¤´åƒ:</view>
        <view class="formItem-value avatar">
          <button class="avatarButton" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <image class="avatar" src="{{signForm.avator}}"></image>
          </button>
        </view>
      </view>
      <view class="formItem" wx:if="{{customAvatarNickname}}">
        <view class="formItem-key">æ˜µç§°:</view>
        <view class="formItem-value">
          <input class="inputNickName" maxlength="12" placeholder="è¯·è¾“å…¥æ˜µç§°" value="{{signForm.wx_name}}" bindblur="onNickNameBlur" />
        </view>
      </view>
      <view class="formItem">
        <view class="formItem-key">ç¥ç¦è¯­:</view>
        <view class="formItem-value">
          <input class="inputWish" maxlength="20" placeholder="è¯·è¾“å…¥ç¥ç¦è¯­" value="{{signForm.bless_str}}" disabled="{{isForbidCustomWish}}" bindblur="onBlessBlur" />
          <text class="iconfont icon-shuaxin" bindtap="onChangeBless"></text>
        </view>
      </view>
      <view class="formItem" wx:if="{{sceneAlias === 'zshl' || sceneAlias === 'wedding' && !identitySwitch}}">
        <view class="formItem-key">äº²å‹å›¢:</view>
        <view class="formItem-value chooseGroup">
          <view class="chooseItem {{signForm.type === item.type ? 'choosed' : ''}}" data-type="{{item.type}}" bindtap="onChooseType" wx:for="{{types}}" wx:key="type">
            {{item.label}}
          </view>
        </view>
      </view>
      <view class="formItem" wx:if="{{isForcePhone}}">
        <view class="formItem-key">æ‰‹æœºå·:</view>
        <view class="formItem-value">
          <!-- å¾®ä¿¡æŒ‰é’®ç»„ä»¶è·å–æ‰‹æœºå· -->
          <view class="wechatGetPhone" wx:if="{{isOpenWxPhone}}">
            <text class="{{signForm.phonenumber ? 'hasPhone' : ''}}">
              {{signForm.phonenumber ? signForm.phonenumber : 'è·å–æ‰‹æœºå·'}}
            </text>
            <button open-type="getPhoneNumber" class="getPhoneBtn" bindgetphonenumber="onWxButtonGetPhone" wx:if="{{!signForm.phonenumber}}"></button>
          </view>
          <!-- è¾“å…¥æ¡†è¾“å…¥æ‰‹æœºå· -->
          <input class="inputPhone" maxlength="11" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" type="number" value="{{signForm.phonenumber}}" bindblur="onPhoneBlur" wx:else focus="{{phoneInputFocus}}" />
          <text class="iconfont icon-shouji"></text>
        </view>
      </view>
      <view class="buttonWrap">
        <view class="signButton" bindtap="onSign"></view>
      </view>
    </form>
  </view>
</view>
<!-- éšç§æˆæƒç»„ä»¶ -->
<privacyAuthorize />
<!-- å¤´åƒè£å‰ªç»„ä»¶ -->
<imageCropper avatarUncropped="{{avatarUncropped}}" bind:cancelEvent="onCancelCropper" bind:confirmEvent="onConfirmCropper" />
````

## File: pages/reserve/hostingStyle/hostingStyle.js
````javascript
import hostingStyleStore from '../store/hostingStyle'

import {
  reqLikeWork,
  reqRecordConsult
} from '@/api/hostingStyle';

const app = getApp();
const tabList = ['ä½œå“', 'æ¡£æœŸ', 'è¯„ä»·'];

Component({
  properties: {
    hostId: {
      type: String,
      value: ''
    },
    hasScrollToNav: {
      type: Boolean,
      value: false
    },
    eFooterVisible: {
      type: Boolean,
      value: false
    },
    navBarHeight: {
      type: String,
      value: 0
    },
    action: {
      type: String,
      value: ''
    }
  },
  observers: {
    action(newVal) {
      if(newVal) {
        this.handleAction(newVal);
      }
    }
  },
  data: {
    navBarStyle: '--nav-bar-background-color: #fff0;--nav-bar-icon-color: rgba(255, 255, 255, 0.9);--nav-bar-title-text-color: #0000;',
    tabList,
    activeTab: tabList[0],
    qrcodeVisible: false,
    reservePopupVisible: false,
    bottomLift: app.globalData.systemInfo_bottomLift + 49
  },
  lifetimes: {
    attached() {
      // storeä¸­çš„æ•°æ®åŒæ­¥è¿‡æ¥
      hostingStyleStore.syncData(this, ['profile', 'workList', 'sheduleData', 'commentInfo', 'commentList']);
      hostingStyleStore.initData();
      console.log('ä¸»æŒé£é‡‡ç•Œé¢æ•°æ®:', this.data);
    }
  },
  methods: {
    onClickWechat() {
      reqRecordConsult(this.data.hostId);
      if (!this.data.profile.wx_qr_code) {
        wx.showToast({
          title: 'ä¸»æŒäººæš‚æœªè®¾ç½®å¾®ä¿¡äºŒç»´ç ',
          icon: 'none'
        });
        return;
      }
      this.toggleQrcodeVisible();
    },
    onClickPhone() {
      reqRecordConsult(this.data.hostId);
      if (!this.data.profile.host_style_phone) {
        wx.showToast({
          title: 'ä¸»æŒäººæš‚æœªè®¾ç½®æ‰‹æœºå·',
          icon: 'none'
        });
      }
      wx.makePhoneCall({
        phoneNumber: this.data.profile.host_style_phone,
      });
    },
    toggleQrcodeVisible() {
      this.setData({
        qrcodeVisible: !this.data.qrcodeVisible
      });
    },
    toggleReservePopup() {
      this.setData({
        reservePopupVisible: !this.data.reservePopupVisible
      });
    },
    onClickTab(event) {
      const {
        tab
      } = event.currentTarget.dataset;
      this.setData({
        activeTab: tab,
      });
    },
    onClickWorkItem(e) {
      const {
        find_id
      } = e.detail;
      console.log('è·³è½¬ä½œå“è¯¦æƒ…ï¼š', find_id);
      wx.navigateTo({
        url: `/pages/reserve/hostingStyle/workDetail/workDetail?find_id=${find_id}`,
      });
    },
    async onLike(e) {
      const {
        find_id,
        isLike
      } = e.detail;
      try {
        if (isLike) {
          throw new Error('å·²ç»ç‚¹è¿‡èµäº†');
        }

        const res = await reqLikeWork(find_id);
        if (res.code !== 200) {
          throw new Error(res.msg);
        }

        hostingStyleStore.updateWorkLikeStatus(e.detail.find_id, true);
      } catch (error) {
        wx.showToast({
          title: error.message,
          icon: 'none',
        });
      }
    },
    goBack() {
      wx.navigateBack({
        delta: 1
      });
    },
    handleAction(action) {
      console.log(action);
      if (action === 'addWechat') {
        this.toggleQrcodeVisible();
      } else if (action === 'hostReserve') {
        this.toggleReservePopup();
      }
    },
    getActiveTab() {
      return this.data.activeTab;
    }
  }
})
````

## File: pages/reserve/hostingStyle/hostingStyle.wxml
````
<view class="container">
  <image class="bg" src="{{ profile.backgroundUrl }}" mode="aspectFill" />
  <view class="nav-bar {{hasScrollToNav ? 'pageScroll' : ''}}" style="--nav-bar-height: {{ navBarHeight }}px;">
    <view class="back-button" bindtap="goBack" wx:if="{{!eFooterVisible}}">
      <image src="https://static.hudongmiao.com/%20miao/icon/backIcon.png" mode="widthFix" class="back-icon"/>
    </view>
  </view>
  <view class="info" style="--nav-bar-height: {{ navBarHeight }}px;">
    <image class="avatar" src="{{ profile.user_headimg }}" mode="aspectFill"></image>
    <text class="name">{{ profile.user_qm_name }}</text>
    <view class="city">
    åŸå¸‚ï¼š{{ profile.user_province }} {{ profile.user_city }}
    <view class="rank-tag">{{profile.rankText}}</view>
    </view>
    <text class="introduction">{{ profile.user_desc }}</text>
    <ul class="tag-list">
      <li class="tag-list__item" wx:for="{{ profile.tagList }}" wx:key="item">
        {{ item }}
      </li>
    </ul>
    <view class="extra-info">
      <view class="extra-info__item" bind:tap="onClickWechat">
        <image class="extra-info__top--icon" src="https://ustatic.hudongmiao.com/%20miao/hostingStyle/wechat-solid.svg"></image>
        <text class="extra-info__bottom">å¾®ä¿¡</text>
      </view>
      <view class="extra-info__item" bind:tap="onClickPhone">
        <image class="extra-info__top--icon" src="https://ustatic.hudongmiao.com/%20miao/hostingStyle/phone-solid.svg"></image>
        <text class="extra-info__bottom">ç”µè¯</text>
      </view>
      <view class="extra-info__item">
        <text class="extra-info__top">{{ profile.consult_num }}</text>
        <text class="extra-info__bottom">å’¨è¯¢é‡</text>
      </view>
      <view class="extra-info__item">
        <text class="extra-info__top">{{ profile.likes_num }}</text>
        <text class="extra-info__bottom">ç‚¹èµæ•°</text>
      </view>
    </view>
    <!-- é¢„å®šæŒ‰é’®/å¼¹çª—ç»„ä»¶ -->
    <reserveButtonnAndPopup reservePopupVisible="{{reservePopupVisible}}" bindclosePopup="toggleReservePopup">
      <button class="book-btn" bindtap="toggleReservePopup">
        æˆ‘è¦é¢„å®š
      </button>
    </reserveButtonnAndPopup>
  </view>
  <view class="bottom" style="--nav-bar-height: {{ navBarHeight }}px;">
    <view class="tab-list">
      <view wx:for="{{ tabList }}" wx:key="item" class="tab-list__item {{ activeTab === item ? 'tab-list__item--active' : ''}}" bind:tap="onClickTab" data-tab="{{ item }}">
        {{ item
      }}{{ item === 'è¯„ä»·' ? 'ï¼ˆ' + commentInfo.commentCount + 'ï¼‰' : '' }}
      </view>
    </view>
    <view class="content" style="padding-bottom: {{eFooterVisible ? bottomLift:0}}px;">
      <view class="work-list" hidden="{{ activeTab !== 'ä½œå“' }}">
        <work-list workList="{{ workList }}" avatar="{{ profile.user_headimg }}" name="{{ profile.user_qm_name }}" bind:onClickWorkItem="onClickWorkItem" bind:onLike="onLike" />
      </view>
      <view class="schedule" hidden="{{ activeTab !== 'æ¡£æœŸ' }}">
        <hosting-style-schedule scheduleData="{{ scheduleData }}" />
      </view>
      <view class="comment" hidden="{{ activeTab !== 'è¯„ä»·' }}">
        <hosting-style-comment-list commentInfo="{{ commentInfo }}" profile="{{ profile }}" commentList="{{ commentList }}" />
      </view>
    </view>
  </view>
</view>
<!-- äºŒç»´ç  -->
<QrCodePopup qrCodeUrl="{{profile.wx_qr_code}}" wx:if="{{qrcodeVisible}}" bind:closeQrcode="toggleQrcodeVisible" />
````

## File: pages/reserve/reserve.json
````json
{
  "navigationBarTitleText": "ä¸»æŒé¢„å®š",
  "usingComponents": {
    "hostingStyle": "./hostingStyle/hostingStyle",
    "eFooter": "../estimate/components/eFooter/eFooter"
  },
  "navigationStyle": "custom"
}
````

## File: pages/reserve/reserveButtonAndPopup/reserveButtonAndPopup.js
````javascript
import {
  getCurrentYMD
} from '../../../utils/index'
import {
  reqGetReserveInfo,
  reqReserveHost
} from "../../../api/estimate";

// é¢„å®šè¡¨å•æ•°æ®æ˜¯å¦åˆå§‹åŒ–è¿‡
let hasReserveDataInit = false;

const getSafeArea = () => {
  const {
    safeArea,
    screenHeight,
  } = wx.getSystemInfoSync();
  const {
    bottom,
  } = safeArea;
 return Math.max(screenHeight - bottom, 12);
};
getSafeArea();
Component({
  properties: {
    reservePopupVisible: {
      type: Boolean,
      value: false,
    },
  },
  observers: {
    reservePopupVisible(newVal) {
      if (newVal) {
        wx.nextTick(() => {
          this.setData({
            appearAni: true,
          });
        });
        this.initTimeIndexChoosed();
        if (!hasReserveDataInit) {
          this.initReserveData();
        }
      } else {
        this.setData({
          appearAni: false,
        });
      }
    },
  },
  data: {
    appearAni: false,
    timeList: [{
        id: "1",
        name: "åˆå®´",
      },
      {
        id: "2",
        name: "æ™šå®´",
      },
    ],
    timeIndexChoosed: 0,
    datePickerStart: getCurrentYMD(),
    datePickerEnd: getCurrentYMD(3),
    // è¡¨å•æ•°æ®
    reserveForm: {
      name: "",
      phone: "",
      date: "",
      reserveTime: "",
      remark: "",
    },
    hasReserve: false,
    paddingBottom: getSafeArea() + 49,
  },
  lifetimes: {
    attached() {},
    detached() {
      hasReserveDataInit = false;
    }
  },
  methods: {
    /**
     * åˆå§‹åŒ–é¢„å®šè¡¨å•ç›¸å…³æ•°æ®
     */
    async initReserveData() {
      if (this.data.hasReserve) {
        return;
      }
      try {
        const res = await reqGetReserveInfo(wx.getStorageSync("liveId"));
        const hasReserve = res.data.size !== 0;
        const reserveForm = {
          name: wx.getStorageSync("nickname") || "",
          phone: wx.getStorageSync("phone") || "",
          date: "",
          reserveTime: "",
          remark: "",
        };
        if (hasReserve) {
          const {
            customer_name,
            customer_phone,
            date,
            time_interval,
            remark
          } =
          res.data.list[0];
          reserveForm.name = customer_name;
          reserveForm.phone = customer_phone;
          reserveForm.date = date;
          reserveForm.reserveTime = time_interval;
          reserveForm.remark = remark;
        }
        this.setData({
          hasReserve,
          reserveForm,
        });
        console.log("é¢„å®šè¡¨å•æ•°æ®:", this.data.reserveForm);
        // æ ‡è®°ä¸ºå·²ç»åˆå§‹åŒ–äº†
        hasReserveDataInit = true;
      } catch (err) {
        console.log(err);
      }
    },
    closePopup() {
      this.triggerEvent("closePopup");
    },
    /**
     * ç©ºå¤„ç†å‡½æ•°é˜»æ­¢äº‹ä»¶å†’æ³¡
     */
    emptyHandle() {},
    /**
     * åˆå§‹åŒ–æ—¶é—´æ®µé€‰ä¸­
     */
    initTimeIndexChoosed() {
      if (this.data.reserveForm.reserveTime) {
        const targetIndex = this.data.timeList.findIndex(
          (item) => item.id === this.data.reserveForm.reserveTime
        );
        this.setData({
          timeIndexChoosed: targetIndex,
        });
      }
    },
    /**
     * åç§°å¤±ç„¦
     */
    nameBlur(e) {
      const name = e.detail.value.trim();
      this.setData({
        reserveForm: {
          ...this.data.reserveForm,
          name,
        }
      });
    },
    onPhoneBlur(e) {
      const phone = e.detail.value.trim();
      this.setData({
        reserveForm: {
          ...this.data.reserveForm,
          phone,
        },
      })
    },
    bindDateChange(e) {
      this.setData({
        reserveForm: {
          ...this.data.reserveForm,
          date: e.detail.value,
        },
      })
    },
    bindTimeChange(e) {
      const reserveTime = this.data.timeList[e.detail.value].id;
      this.setData({
        timeIndexChoosed: e.detail.value,
        reserveForm: {
          ...this.data.reserveForm,
          reserveTime,
        },
      });
    },
    inputRemark(e) {
      const remark = e.detail.value.trim();
      this.setData({
        reserveForm: {
          ...this.data.reserveForm,
          remark,
        },
      })
    },
    cancel() {
      // 1ã€æ¢å¤åŸå§‹æ•°æ®
      this.initReserveData();
      // 2ã€å…³é—­å¼¹çª—
      this.closePopup();
    },
    /**
     * è¡¨å•éªŒè¯
     */
    validateReserveForm() {
      const {
        name,
        phone,
        date,
        reserveTime,
        remark
      } = this.data.reserveForm;
      if (!name) {
        wx.showToast({
          title: "è¯·è¾“å…¥æ‚¨çš„å§“å",
          icon: "none",
        });
        return false;
      }
      if (!phone) {
        wx.showToast({
          title: "è¯·é€‰æ‹©æ‚¨çš„è”ç³»æ–¹å¼",
          icon: "none",
        });
        return false;
      }
      if (phone.length !== 11) {
        wx.showToast({
          title: "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",
          icon: "none",
        });
        return false;
      }
      if (!date) {
        wx.showToast({
          title: "è¯·é€‰æ‹©é¢„å®šæ—¥æœŸ",
          icon: "none",
        });
        return false;
      }
      if (!reserveTime) {
        wx.showToast({
          title: "è¯·é€‰æ‹©é¢„å®šæ—¶æ®µ",
          icon: "none",
        });
        return false;
      }
      if (!remark) {
        wx.showToast({
          title: "è¯·è¾“å…¥å¤‡æ³¨",
          icon: "none",
        });
        return false;
      }
      return true;
    },
    async submit(e) {
      if (this.data.hasReserve) {
        wx.showToast({
          title: "å·²ç»é¢„å®šè¿‡äº†!",
          icon: "none",
        });
        return;
      }
      if (!this.validateReserveForm()) {
        console.log('éªŒè¯ä¸é€šè¿‡ï¼');
        return;
      }
      const { date,reserveTime,name,phone,remark } = this.data.reserveForm;
      try {
        await reqReserveHost({
          splid: wx.getStorageSync("liveId"),
          date,
          time_interval: reserveTime,
          customer_name: name,
          customer_phone: phone,
          remark,
          kind: "2",
          headimg: wx.getStorageSync("avatar") || "",
        });
        this.setData({
          hasReserve: true,
        });
        wx.showToast({
          title: "é¢„å®šæˆåŠŸ",
          icon: "none",
        });
      } catch (err) {
        console.log(err);
      }
    },
  },
});
````

## File: pages/review/review.js
````javascript
import {
  reqGetReview
} from "../../api/estimate";
import {
  timeoutTask
} from '../../utils/index';
const app = getApp();

const DEFAULT_REVIEW_BG =
  "https://ustatic.hudongmiao.com/joymew-mp/review/weddingBg.png";
const WEDDING_BG =
  "https://static.joymew.com/joymewScreen/img/background/weddingBg02.png";

const dateTransform = (timedata) => {
  const newDate = new Date(timedata);
  const Year = newDate.getFullYear();
  const Month = newDate.getMonth() + 1 < 10 ? `0${newDate.getMonth() + 1}` : newDate.getMonth() + 1;
  const d = newDate.getDate() < 10 ? `0${newDate.getDate()}` : newDate.getDate();
  const Hours = newDate.getHours() < 10 ? `0${newDate.getHours()}` : newDate.getHours();
  const Minutes = newDate.getMinutes() < 10 ? `0${newDate.getMinutes()}` : newDate.getMinutes();
  const Seconds = newDate.getSeconds() < 10 ? `0${newDate.getSeconds()}` : newDate.getSeconds();
  const overTime = `${Year}/${Month}/${d} ${Hours}:${Minutes}:${Seconds}`;
  return overTime;
};

let interstitialAd = null;
Page({
  data: {
    bottomLift: 0, // èœå•åº•éƒ¨å®‰å…¨è·ç¦»
    titleBarHeight: 0, // æ ‡é¢˜æ é«˜åº¦
    statusBarHeight: 0, // çŠ¶æ€æ é«˜åº¦
    currentPage: 1, // å½“å‰é¡µæ•°
    showCount: 10, // æ¯é¡µæ˜¾ç¤ºæ•°é‡
    activeImg: [], // å½“å‰é¢„è§ˆçš„å›¾ç‰‡
    imgIndex: 0, // å½“å‰é¢„è§ˆçš„å›¾ç‰‡ç´¢å¼•
    //---------ä¸‹é¢æ˜¯ä»æœåŠ¡ç«¯è·å–çš„ç°åœºå›é¡¾æ•°æ®----------
    totalPage: 1, // æ€»é¡µæ•°
    bgImg: "", // èƒŒæ™¯
    rankInfo: {
      // ä¸ªäººé€ç¥ç¦æ’è¡Œä¿¡æ¯
      name: "",
      avatar: "",
      value: "",
      rank: "",
    },
    hostReview: {
      //ä¸»æŒäººå‘å¸ƒçš„ä¿¡æ¯
      name: "", // ä¸»æŒäººåç§°
      avatar: "", // ä¸»æŒäººå¤´åƒ
      count: 1, // å‘é€å›¾ç‰‡æ•°é‡æˆ–å¼¹å¹•æ•°é‡
      action: 1, // å‘é€çš„æ˜¯å›¾ç‰‡è¿˜æ˜¯å¼¹å¹• 1:å›¾ç‰‡ 2:å¼¹å¹•
      imgs: [], // å›¾ç‰‡åˆ—è¡¨
      datetime: "", // å‘é€æ—¶é—´
      userType: 0, // 0:ä¸»æŒäºº 1:å˜‰å®¾
    },
    recorderList: [], // ç°åœºå›é¡¾çš„ä¿¡æ¯åˆ—è¡¨
    eFooterVisible: false, // æ˜¯å¦æ˜¾ç¤ºåº•éƒ¨èœå• è¯„ä»·åœºæ™¯ä¸‹æ˜¾ç¤º
  },
  onLoad(options) {
    const {
      splid
    } = options;
    app.splidInfo_setSplidInfo({
      liveId: splid
    });
    this.initData();
    if (options.inTabbarMode) {
      this.setData({
        eFooterVisible: true,
      });
    }
    this.conditionPlayInsertScreenAd();
  },
  /**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */
  onReachBottom() {
    this.loadMoreReview();
  },
  /**
   * åˆå§‹åŒ–æ•°æ®
   */
  async initData() {
    const {
      currentPage,
      showCount
    } = this.data;
    const reviewRes = await reqGetReview({
      splid: wx.getStorageSync("liveId"),
      size: showCount,
      num: currentPage,
    });
    const {
      backInfo,
      size,
      loveVal,
      messageMap,
      user
    } = reviewRes.data;
    const reviewData = this.getReviewData(
      backInfo,
      size,
      loveVal,
      messageMap,
      user
    );
    // æ•°æ®æ±‡æ€»
    this.setData({
      ...reviewData,
      bottomLift: app.globalData.systemInfo_bottomLift,
      titleBarHeight: app.globalData.systemInfo_titleBarHeight,
      statusBarHeight: app.globalData.systemInfo_statusBarHeight,
    });
  },
  /**
   * è®¡ç®—å‡ºç°åœºå›é¡¾æ•°æ®
   */
  getReviewData(backInfo, size, loveVal, messageMap, user) {
    const reviewData = {
      totalPage: 1,
      bgImg: "",
      rankInfo: null,
      hostReview: null,
      recorderList: null,
    };
    reviewData.totalPage = messageMap?.totalPages ? messageMap.totalPages : 1;
    reviewData.bgImg = backInfo?.phone_piclink ?
      backInfo.phone_piclink :
      DEFAULT_REVIEW_BG;
    reviewData.rankInfo = {
      name: user?.wx_name ?? "",
      avatar: user?.avator ?? "",
      value: loveVal ?? "",
      rank: size ?? "",
    };
    reviewData.hostReview = {
      name: backInfo?.siyi_info?.emcee_name ?
        backInfo.siyi_info.emcee_name : "",
      avatar: backInfo?.siyi_info?.avator ? backInfo.siyi_info.avator : "",
      count: backInfo?.list?.length > 0 ? backInfo.list.length : 1,
      action: 1,
      imgs: backInfo?.list?.length > 0 ?
        backInfo.list.map(
          (item) => `https://ustatic.hudongmiao.com/${item.piclink}`
        ) : [WEDDING_BG],
      datetime: backInfo?.list?.length > 0 ?
        dateTransform(backInfo.list[0].create_time) : "",
      userType: 0,
    };
    if (reviewData.bgImg) {
      reviewData.hostReview.imgs.push(reviewData.bgImg);
      reviewData.hostReview.count += 1;
    }
    reviewData.recorderList = messageMap.chat_list.map((item) => ({
      id: item.id,
      name: item.miaoName,
      avatar: item.miaoTxUrl,
      count: 1,
      action: item.miaoTpUrl ? 1 : 0,
      dm: item.miaoContent,
      imgs: [item.miaoTpUrl],
      datetime: dateTransform(item.sendTime),
      userType: item.miaoType,
    })).concat(this.data.recorderList ?? []);
    return reviewData;
  },
  /**
   * åŠ è½½æ›´å¤šç°åœºå›é¡¾æ•°æ®
   */
  async loadMoreReview() {
    const {
      currentPage,
      totalPage
    } = this.data;
    console.log(currentPage, totalPage);
    if (Number(currentPage) < Number(totalPage)) {
      this.setData({
        currentPage: Number(currentPage) + 1,
      });
      this.initData();
    } else {
      wx.showToast({
        title: "æ²¡æœ‰æ›´å¤šæ•°æ®äº†!",
        icon: "none",
      });
    }
  },
  /**
   * æ“ä½œé¢„è§ˆå›¾ç‰‡(å¼€å¯é¢„è§ˆã€å…³é—­é¢„è§ˆã€åˆ‡æ¢é¢„è§ˆå›¾ç‰‡)
   */
  previewImage(e) {
    this.setData({
      ...e.detail,
    });
  },
  /**
   * åˆ¤æ–­æœ‰æ²¡æœ‰æ’­æ”¾è¿‡æ’å±å¹¿å‘Šï¼Œæ²¡æœ‰çš„è¯å°±æ’­æ”¾
   */
  conditionPlayInsertScreenAd() {
    if (!interstitialAd) {
      this.loadInsertScreenAdThenPlayIt();
    }
  },
  /**
   * åŠ è½½æ’å±å¹¿å‘Šå¹¶æ’­æ”¾
   */
  loadInsertScreenAdThenPlayIt() {
    if (wx.createInterstitialAd) {
      interstitialAd = wx.createInterstitialAd({
        adUnitId: app.globalData.accountInfo_ad.insertScreen
      })
      interstitialAd.onLoad(() => {
        console.log('æ’å±å¹¿å‘ŠåŠ è½½å®Œæ¯•');
        if (interstitialAd) {
          console.log('å¼€å§‹æ’­æ”¾æ’å±å¹¿å‘Š');
          interstitialAd.show().catch((err) => {
            console.error('æ’å±å¹¿å‘Šæ˜¾ç¤ºå¤±è´¥', err)
          });
        }
      })
      interstitialAd.onError((err) => {
        console.error('æ’å±å¹¿å‘ŠåŠ è½½å¤±è´¥', err)
      })
      interstitialAd.onClose(() => {})
    }
  },
});
````

## File: pages/review/review.json
````json
{
  "usingComponents": {
    "rankInfo": "./rankInfo/rankInfo",
    "reviewItem": "./reviewItem/reviewItem",
    "imgPreview": "./imgPreview/imgPreview",
    "eFooter": "../estimate/components/eFooter/eFooter"
  },
  "navigationStyle": "custom"
}
````

## File: pages/test/test.js
````javascript
Page({
  data: {
    h5Path: 'http://dev.joymew.com:1024/?liveId=41ccc335694b4d9197b0c37b08f05c3b&token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHQiOjE3NTQwMjQxMTU2ODgsInVpZCI6IjgwNjY5M2FjMGE3MDQwMTNiNDQ0ZjU3Y2U2Nzc2YTE1IiwiaWF0IjoxNzUzNjczNjU3ODMyfQ.4ZLLx0xe-GvxBkrJE_fSbfYfN1Sc4G8rLNmq0uXePOs&time=1753673694982&mpType=haimiao#/test'
  },
  onLoad(options) {
    
  },
  handleMessageFromH5(e) {
    console.log(e)
  }
});
````

## File: packageA/pages/hbkdRecharge/hbkdRecharge.js
````javascript
import {
  reqGetHbkdRankList,
  reqRechargeHbkd
} from "../../api/hbkdRecharge";
import {
  reqSendGiftBroadCast
} from "../../../api/gift";
import {
  timeoutTask
} from "../../../utils/index";

const app = getApp();

// const MODENAMES = ['templateMode', 'commonMode', 'zshlMode'];
Page({
  data: {
    templateMode: false, // æ˜¯æ¨¡æ¿æ¨¡å¼å—?
    modeName: '', // æ¨¡å¼åç§° å–å€¼ templateModeã€commonModeã€zshlMode
    inputVisible: false, // æ˜¾ç¤ºè¾“å…¥æ¡†å—?
    isFocus: false, // è¾“å…¥æ¡†æ˜¯å¦èšç„¦?
    remainMoneyVisible: true, // æ˜¾ç¤ºå‰©ä½™é‡‘é¢å—?
    remainMoney: 0, // å‰©ä½™é‡‘é¢
    /**
     * çº¢åŒ…å£è¢‹å……å€¼åˆ—è¡¨
     * [{
     *   value, å–å€¼ä¸ºâ€œæ•°å­—å­—ç¬¦ä¸²â€æˆ–è€…custom
     *   name, å–å€¼ä¸ºå­—ç¬¦ä¸²
     * }]
     */
    hbkdRechargeList: [],
    prizeSize: 0, // èµèµæ¬¡æ•°
    hbkdRankList: [], // çº¢åŒ…å£è¢‹å……å€¼æ’è¡Œæ¦œ
    openId: "", // ç”¨æˆ·openId
    userId: "", // ç”¨æˆ·userId
  },
  onLoad(options) {
    this.initData(options);
  },
  async initData({
    hbkdRechargeListNewStr,
    hbkdRemainVisible,
    openId,
    userId,
    templateMode,
  }) {
    let tmpHbkdRechargeList = [];
    let tmpHbkdRankList = [];
    let tmpRemainMoney = 0;
    let tmpTemplateMode = false;
    try {
      // æ¨¡æ¿æ¨¡å¼åˆ¤æ–­
      tmpTemplateMode = templateMode === 'true';
       // æ ¼å¼åŒ–å……å€¼åˆ—è¡¨
      tmpHbkdRechargeList = tmpTemplateMode ? JSON.parse(hbkdRechargeListNewStr) : this.getFormatRechargeList(hbkdRechargeListNewStr);
       // è·å–æ’è¡Œæ¦œå’Œä½™é¢
      const listRes = await reqGetHbkdRankList(wx.getStorageSync("liveId"));
      tmpHbkdRankList = listRes.data.list;
      tmpRemainMoney = listRes.data.money;
    } catch (err) {
      console.log(err);
      tmpHbkdRechargeList = [];
      tmpHbkdRankList = [];
      tmpRemainMoney = 0;
    }

    this.setData({
      hbkdRechargeList: tmpHbkdRechargeList,
      remainMoneyVisible: hbkdRemainVisible === "true",
      openId,
      userId,
      remainMoney: tmpRemainMoney,
      hbkdRankList: tmpHbkdRankList,
      prizeSize: tmpHbkdRankList.length,
      templateMode: tmpTemplateMode,
      modeName: this.getModeName(tmpTemplateMode),
    });
  },
  /**
   * æ ¼å¼åŒ–å……å€¼åˆ—è¡¨
   * @param {string} rechargeListStr ä¾‹å¦‚ï¼š'8888,1888,999,2888,888,1688,588,5888'
   * @returns {name:'åœŸå£•éšæ„',value: 'custom'}[]
   */
  getFormatRechargeList(rechargeListStr) {
    const targetRechargeList = rechargeListStr.split(',').map((item) => ({
      name: '',
      value: item
    }));
    targetRechargeList.splice(5, 0, {
      name: 'åœŸå£•éšæ„',
      value: 'custom'
    });
    return targetRechargeList;
  },
  /**
   * è·³è½¬å……å€¼æœåŠ¡åè®®
   */
  toAgreement() {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
  /**
   * é€‰æ‹©é‡‘é¢å……å€¼
   */
  onChooseRecharge(e) {
    if (this.data.inputVisible) {
      return;
    }
    // è‡ªå®šä¹‰é‡‘é¢
    if (e.currentTarget.dataset.custom) {
      this.openMoneyInputMode();
    } else {
      // å›ºå®šé‡‘é¢
      const money = e.currentTarget.dataset.money;
      this.rechargeMoney(money);
    }
  },
  /**
   * æ ¹æ®é‡‘é¢å”¤èµ·æ”¯ä»˜
   */
  async rechargeMoney(money) {
    const splid = wx.getStorageSync("liveId");
    try {
      wx.showLoading({
        title: 'è¯·æ±‚ä¸­...',
        mask: true
      });
      // 1ã€å……å€¼
      await reqRechargeHbkd({
        total: money,
        splid,
        userId: this.data.userId,
        openId: this.data.openId,
      });
      wx.hideLoading();
      // 2ã€æ‰‹åŠ¨åŠ ä¸Šä½™é¢
      this.addRemainMoney(money);
      // 3ã€å‘é€çº¢åŒ…å£è¢‹ç¤¼ç‰©å¹¿æ’­
      reqSendGiftBroadCast({
        giftId: "hbkd",
        content: money,
      });
      // 4ã€è¿”å›ä¸Šä¸€é¡µ
      this.goBack();
      // 5ã€å…³é—­æ‰‹åŠ¨è¾“å…¥é‡‘é¢æ¨¡å¼
      if (this.data.inputVisible) {
        this.closeMoneyInputMode();
      }
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "error",
      });
      wx.hideLoading();
    }
  },
  /**
   * æ‰‹åŠ¨åŠ ä¸Šä½™é¢
   */
  addRemainMoney(money) {
    const tmpVal = Number(this.data.remainMoney) + Number(money);
    this.setData({
      remainMoney: tmpVal.toFixed(2),
    });
  },
  /**
   * è¿”å›ä¸Šä¸€é¡µ
   */
  goBack() {
    timeoutTask(() => {
      wx.navigateBack();
    }, 500);
  },
  /**
   * æ‰‹åŠ¨è¾“å…¥é‡‘é¢
   */
  onInputMoney(e) {
    this.setData({
      moneyInput: e.detail.value,
    });
  },
  /**
   * éªŒè¯è¾“å…¥çš„é‡‘é¢
   */
  validateMoneyInput() {
    if (!this.data.moneyInput) {
      wx.showToast({
        title: "è¯·è¾“å…¥æˆ–è€…é€‰æ‹©å……å€¼é‡‘é¢!",
        icon: "none",
      });
      this.closeMoneyInputMode();
      return false;
    }
    if (this.data.moneyInput === "0") {
      wx.showToast({
        title: "å……å€¼é‡‘é¢ä¸èƒ½ä¸º0!",
        icon: "none",
      });
      this.closeMoneyInputMode();
      return false;
    }
    if (!/^\d+(\.\d{1,2})?$/.test(this.data.moneyInput)) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ­£ç¡®çš„é‡‘é¢!",
        icon: "none",
      });
      this.closeMoneyInputMode();
      return false;
    }
    return true;
  },
  /**
   * è¾“å…¥æ¡†å¤±ç„¦å®Œæˆæ”¯ä»˜
   */
  onBlurMoney() {
    if (!this.validateMoneyInput()) {
      return;
    }
    this.rechargeMoney(this.data.moneyInput);
  },
  /**
   * å¼€å¯æ‰‹åŠ¨è¾“å…¥é‡‘é¢æ¨¡å¼
   */
  openMoneyInputMode() {
    this.setData({
      inputVisible: true,
      isFocus: true,
    });
  },
  /**
   * å…³é—­æ‰‹åŠ¨è¾“å…¥é‡‘é¢æ¨¡å¼
   */
  closeMoneyInputMode() {
    timeoutTask(() => {
      this.setData({
        inputVisible: false,
        isFocus: false,
        moneyInput: "",
      });
    }, 300);
  },
  /**
   * è®¡ç®—å‡ºmodeName
   * @param {boolean} templateMode æ˜¯å¦æ˜¯æ¨¡æ¿æ¨¡å¼
   */
  getModeName(templateMode) {
    if (app.globalData.splidInfo_sceneType === '91') {
      return 'zshlMode'
    }
    return templateMode ? 'templateMode' : 'commonMode';
  }
});
````

## File: packageA/pages/recharge/recharge.js
````javascript
import {
  reqGetGiftRankList,
  reqDiamondRecharge,
  reqEditUserInfo,
  reqGetUserInfo,
} from "../../api/recharge";
import { timeoutTask } from "../../../utils/index";
import { reqSecurityMsgCheck } from "../../../api/message";
import qiniuUploader from "../../../utils/qiniu/index";

const app = getApp();

const couponUrl = [
  "https://static.hudongmiao.com/joymewMp/recharge/coupon.png",
  "https://static.hudongmiao.com/joymewMp/recharge/coupon2.png",
];
Page({
  data: {
    userId: "",
    openId: "",
    moneyInput: "", // è¾“å…¥çš„é‡‘é¢
    money: 0, // å¾…å……å€¼å–µå¸
    remainMoney: 0, // å‰©ä½™å–µå¸
    rechargeList: [], // å……å€¼åˆ—è¡¨
    activeDesc: "0", // æ§åˆ¶å……å€¼é¡¹çš„æ ·å¼
    couponUrl: "",
    activeCouponUrl: "",
    giftRankList: [], // é€ç¥ç¦æ’è¡Œæ¦œ
    editPopupVisible: false, // ç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
    editPopupAni: false,
    editUserInfoPrice: "0", // ç¼–è¾‘ä¸ªäººä¿¡æ¯çš„ä»·æ ¼
    formData: {
      // ä¸ªäººä¿¡æ¯
      avator: "",
      wx_name: "",
    },
    isCloseCoin: false, // å…³é—­å–µå¸ç›¸å…³å†…å®¹ é»˜è®¤å¼€å¯
    avatarUncropped: "", // å¤´åƒè£å‰ª
  },
  onLoad(options) {
    console.log("options:", options);
    this.initData(options);
  },
  /**
   * é€‰æ‹©é‡‘é¢
   */
  chooseMoney(e) {
    // å–æ¶ˆmoneyè¾“å…¥åŒºåŸŸçš„è¾“å…¥é‡‘é¢å¹¶è®¾ç½®è¾“å…¥çš„moneyå€¼
    this.setData({
      moneyInput: "",
      money: e.currentTarget.dataset.desc,
      activeDesc: e.currentTarget.dataset.desc,
    });
  },
  /**
   * è¾“å…¥é‡‘é¢
   */
  handleMoneyInput(e) {
    this.setData({
      moneyInput: e.detail.value,
      money: e.detail.value,
      activeDesc: "0",
    });
  },
  /**
   * é‡‘é¢åˆæ³•å˜›?
   */
  validateMoney(money) {
    if (!money) {
      wx.showToast({
        title: "è¯·è¾“å…¥æˆ–è€…é€‰æ‹©å……å€¼é‡‘é¢!",
        icon: "none",
      });
      return false;
    }
    let r = /^\d+(\.\d{1,2})?$/;
    let flag = r.test(money);
    if (!flag) {
      wx.showToast({
        title: "è¯·è¾“å…¥æ­£ç¡®çš„é‡‘é¢!",
        icon: "none",
      });
      return false;
    }
    return true;
  },
  /**
   * å……å€¼å–µå¸
   */
  async handleRecharge() {
    if (!this.validateMoney(this.data.money)) {
      return;
    }
    console.log("å……å€¼é‡‘é¢", this.data.money);
    try {
      wx.showLoading({
        title: "è¯·æ±‚ä¸­...",
        mask: true,
      });
      await reqDiamondRecharge({
        total: this.data.money,
        userId: this.data.userId,
        openId: this.data.openId,
      });
      wx.hideLoading();
      // å‰ç«¯å¤„ç†ç”¨æˆ·ä½™é¢å¢åŠ 
      this.addRemainMoney(this.data.money);
      wx.showToast({
        title: "å……å€¼æˆåŠŸ!",
        icon: "none",
      });
      this.goBack();
    } catch (err) {
      console.log(err);
      wx.hideLoading();
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "error",
      });
    }
  },
  /**
   * æ‰‹åŠ¨åŠ ä¸Šä½™é¢
   */
  addRemainMoney(money) {
    const tmpVal = Number(this.data.remainMoney) + Number(money);
    this.setData({
      remainMoney: tmpVal.toFixed(2),
    });
  },
  /**
   * è¿”å›ä¸Šä¸€é¡µ
   */
  goBack() {
    timeoutTask(() => {
      wx.navigateBack();
    }, 500);
  },
  /**
   * åˆå§‹åŒ–é¡µé¢æ•°æ®
   */
  initData(options) {
    const initDataFromUrl = (pData) => {
      this.setData(pData);
    };
    const initDataFromUserInfoReq = async () => {
      try {
        const userRes = await reqGetUserInfo();
        console.log("useRes:", userRes);
        this.setData({
          remainMoney: userRes.data.money.balance,
          "formData.wx_name": userRes.data.wx_name,
          "formData.avator": userRes.data.avator,
        });
        // æš‚å­˜å¤´åƒã€æ˜µç§°
        this.currentAvator = userRes.data.avator;
        this.currentName = userRes.data.wx_name;
      } catch (err) {
        console.log(err);
      }
    };
    const initDataFromRankReq = async () => {
      try {
        const liveId = wx.getStorageSync("liveId");
        const res = await reqGetGiftRankList(liveId);
        const tmpList = res.data.list.map((item, index) => ({
          ...item,
          num: String(index + 1).padStart(2, "0"),
          wx_name:
            item.wx_name.length <= 6
              ? item.wx_name
              : item.wx_name.substr(0, 6) + "...",
        }));
        this.setData({
          giftRankList: tmpList,
        });
      } catch (err) {
        console.log(err);
      }
    };
    // æ¥è‡ªurlçš„æ•°æ®åˆå§‹åŒ–
    initDataFromUrl({
      userId: options.userId,
      openId: options.openId,
      rechargeList: options.rechargeListStr.split(","),
      couponUrl: couponUrl[0],
      activeCouponUrl: couponUrl[1],
      editUserInfoPrice: options.editUserInfoPrice,
    });
    // æ¥è‡ªç”¨æˆ·ä¿¡æ¯æ¥å£çš„æ•°æ®åˆå§‹åŒ–
    initDataFromUserInfoReq();
    // æ¥è‡ªæ’è¡Œæ¦œæ¥å£çš„æ•°æ®åˆå§‹åŒ–
    initDataFromRankReq();
  },
  /**
   * è·³è½¬éšç§åè®®é¡µé¢
   */
  toAgreement() {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
  /**
   * å…³é—­ç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
   */
  hideEditPopup() {
    this.setData({
      editPopupAni: false,
    });
    timeoutTask(() => {
      this.setData({
        editPopupVisible: false,
      });
    }, 300);
  },
  /**
   * æ˜¾ç¤ºç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
   */
  showEditPopup() {
    this.setData({
      editPopupVisible: true,
    });
    timeoutTask(() => {
      this.setData({
        editPopupAni: true,
      });
    }, 100);
  },
  /**
   * ä¸Šä¼ å¤´åƒ
   */
  async upload() {
    const res = await wx.chooseMedia({
      count: 1,
      mediaType: ["image"],
    });
    console.log(res.tempFiles[0].tempFilePath);
    // å”¤èµ·å›¾ç‰‡è£å‰ª
    this.setData({
      avatarUncropped: res.tempFiles[0].tempFilePath,
    });
    if (!this.hasQiniuInit) {
      this.hasQiniuInit = true;
      qiniuUploader.init();
    }
  },
  /**
   * åå­—è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹
   */
  handleNameBlur(e) {
    console.log(e.detail.value);
    this.setData({
      "formData.wx_name": e.detail.value,
    });
  },
  /**
   * å……å€¼åé‡æ–°ç¼–è¾‘
   */
  async rechargeThenEdit(editCb) {
    try {
      wx.showLoading({
        title: "è¯·æ±‚ä¸­...",
        mask: true,
      });
      await reqDiamondRecharge({
        total: this.data.editUserInfoPrice,
        userId: this.data.userId,
        openId: this.data.openId,
      });
      wx.hideLoading();
      // å‰ç«¯å¤„ç†ç”¨æˆ·ä½™é¢å¢åŠ 
      this.addRemainMoney(this.data.editUserInfoPrice);
      // ç»§ç»­å®Œæˆä¸ªäººä¿¡æ¯ç¼–è¾‘
      editCb();
    } catch (err) {
      console.log(err);
      wx.hideLoading();
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "error",
      });
    }
  },
  /**
   * æäº¤ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„è¡¨å•
   */
  async confirmEdit() {
    console.log(this.data.formData);
    // å–µå¸å¤Ÿå—?
    // if (!this.canEditUserInfo()) {
    //   wx.showToast({
    //     title: "å–µå¸ä¸è¶³!",
    //     icon: "none",
    //   });
    //   timeoutTask(() => {
    //     // å……å€¼åé‡æ–°ç¼–è¾‘
    //     this.rechargeThenEdit(this.confirmEdit.bind(this));
    //   }, 300);
    //   return;
    // }
    // æ˜µç§°ä¸èƒ½ä¸ºç©º
    if (!this.data.formData.wx_name) {
      wx.showToast({
        title: "æ˜µç§°ä¸èƒ½ä¸ºç©º!",
        icon: "none",
      });
      return;
    }
    // æ£€æŸ¥æ•æ„Ÿè¯
    const msgCheckRes = await reqSecurityMsgCheck(this.data.formData.wx_name);
    try {
      const tmpResult = JSON.parse(msgCheckRes.data.msg_sec_check);
      if (tmpResult.result.suggest !== "pass") {
        wx.showToast({
          title: "å†…å®¹éæ³•!",
          icon: "none",
        });
        return;
      }
    } catch (err) {
      console.log(err);
    }
    // ä¸Šä¼ å›¾ç‰‡
    if (this.needUpload(this.data.formData.avator)) {
      const uploadRes = await qiniuUploader.upload(this.data.formData.avator);
      this.setData({
        "formData.avator": uploadRes.fileURL,
      });
    }
    // ä¿®æ”¹ä¿¡æ¯
    const res = await reqEditUserInfo({
      ...this.data.formData,
      splid: wx.getStorageSync("liveId"),
    });
    if (res.data.code === "200") {
      wx.showToast({
        title: "ä¿®æ”¹æˆåŠŸ!",
        icon: "none",
      });
      // å‡æ‰ä½™é¢
      this.subtractRemainAfterEditUserInfo();
      // æ ‡è¯†äº’åŠ¨H5éœ€è¦åˆ·æ–°
      app.splidInfo_setSplidInfo({
        needH5Refresh: true,
      });
      // æ›´æ–°ç¼“å­˜ä¸­çš„å¤´åƒã€æ˜µç§°
      app.userInfo_setuserInfo({
        avatar: this.data.formData.avator,
        nickname: this.data.formData.wx_name,
      });
    } else if (res.data.code === "100") {
      wx.showToast({
        title: "å–µå¸ä¸è¶³!",
        icon: "none",
      });
      timeoutTask(() => {
        // å……å€¼åé‡æ–°ç¼–è¾‘
        this.rechargeThenEdit(this.confirmEdit.bind(this));
      }, 300);
    } else {
      wx.showToast({
        title: res.data.msg,
        icon: "none",
      });
      // å¤´åƒã€æ˜µç§°å›æ»š
      this.setData({
        "formData.avator": this.currentAvator,
        "formData.wx_name": this.currentName,
      });
    }
    this.hideEditPopup();
  },
  /**
   * åˆ¤å®šæ˜¯å¦éœ€è¦ä¸Šä¼ å›¾ç‰‡
   */
  needUpload(filePath) {
    return filePath.indexOf("tmp") > -1;
  },
  /**
   * ä¿®æ”¹å®Œä¸ªäººä¿¡æ¯åæ‰‹åŠ¨å‡å»ä½™é¢
   */
  subtractRemainAfterEditUserInfo() {
    const remainMoneyNumber = Number(this.data.remainMoney);
    const editUserInfoPriceNumber = Number(this.data.editUserInfoPrice);
    if (editUserInfoPriceNumber > remainMoneyNumber) {
      return;
    }
    const tmpVal = remainMoneyNumber - editUserInfoPriceNumber;
    this.setData({
      remainMoney: tmpVal.toFixed(2),
    });
  },
  /**
   * å–µå¸å¤Ÿç”¨æ¥ç¼–è¾‘ä¸ªäººä¿¡æ¯å—
   */
  canEditUserInfo() {
    return Number(this.data.remainMoney) >= Number(this.data.editUserInfoPrice);
  },
  /**
   * å…³é—­å¤´åƒè£å‰ª
   */
  onCancelCropper() {
    this.setData({
      avatarUncropped: "",
    });
  },
  /**
   * ç¡®è®¤å¤´åƒè£å‰ª
   */
  onConfirmCropper(e) {
    console.log(e);
    this.setData({
      "formData.avator": e.detail,
      avatarUncropped: "",
    });
  },
});
````

## File: packageB/pages/winningRecord/winningRecord.js
````javascript
import { reqGetWinningRecord, reqConfirmPrize } from '../../api/winningRecord';

const app = getApp();

Page({
  data: {
    activeIndex: 0,
    getWinnerRecordInterval: null,
    myPrizeList: [],
    recordList: [],
    winnerListPopupAward: '',
    winnerListPopupWinnerList: [],
    congratulationWinningPopupInfo: {
      award: '',
      name: '',
      img: '',
    },
    adUnitId: app.globalData.accountInfo_ad.video,
  },
  onLoad(options) {
    if (options.liveId) {
      wx.setStorageSync('liveId', options.liveId);
    }
    this.getWinnerRecord(true);
    this.startGetWinnerRecordInterval();
  },
  onUnload() {
    this.stopGetWinnerRecordInterval();
  },
  onPullDownRefresh() {
    this.getWinnerRecord();
    setTimeout(() => {
      wx.stopPullDownRefresh();
    }, 500);
  },
  clickTab(e) {
    this.setData({
      activeIndex: Number(e.currentTarget.dataset.index),
    });
  },
  getWinnerNum(winner) {
    return Math.min(winner.length, 4);
  },
  showWinnerListPopup(e) {
    const { award, winnerList } = e.currentTarget.dataset;
    this.setData({
      winnerListPopupAward: award,
      winnerListPopupWinnerList: winnerList,
    });
    this.selectComponent('#winnerListPopup').show();
  },
  async getWinnerRecord(isFirstLoad = false) {
    const splid = wx.getStorageSync('liveId');
    const res = await reqGetWinningRecord(splid);
    const myPrizeList = res.data.myWinningRecordList.map((item, index) => ({
      id: item?.id.toString() || index.toString(),
      img: item.piclink || '',
      award: item.awardname || '',
      name: item.prize_name || '',
      hexiaoId: item.hexiaoId || '',
      hexiao: item.hexiao === '1'
    }));
    const isShowCongratulationWinningPopup =
      this.checkAndShowCongratulationWinningPopup(myPrizeList);

    const isListLottery = res.data.isListLottery;
    if (isFirstLoad || isShowCongratulationWinningPopup) {
      wx.setStorageSync('newestLotteryId', res.data.newestLotteryId);
    }

    if (!isShowCongratulationWinningPopup && !isFirstLoad && !isListLottery) {
      this.checkAndShowNotWonPopup(res.data.newestLotteryId);
    }

    const recordList = res.data.winningRecordList.map((item) => ({
      id: item.cusaward_id.toString(),
      img: item.piclink || '',
      award: item.awardname || '',
      name: item.prize_name || '',
      winnerList: (item.winnerList || []).map((winner) => ({
        id: winner?.id,
        avatar: winner?.avator || '',
        nickname: winner?.wx_name || '',
      })),
    }));

    this.setData({
      myPrizeList,
      recordList,
    });
  },
  startGetWinnerRecordInterval() {
    this.getWinnerRecordInterval = setInterval(() => {
      this.getWinnerRecord();
    }, 5000);
  },
  stopGetWinnerRecordInterval() {
    clearInterval(this.getWinnerRecordInterval);
  },
  checkAndShowCongratulationWinningPopup(newMyPrizeList) {
    if (newMyPrizeList.length === 0) {
      wx.setStorageSync('newPrizeId', '');
      return false;
    }

    const newPrize = newMyPrizeList.find(
      (item) => !this.data.myPrizeList.some((prize) => prize.id === item.id),
    );

    if (!newPrize) return false;

    const localNewPrizeId = wx.getStorageSync('newPrizeId');
    if (localNewPrizeId && newPrize?.id === localNewPrizeId) return false;

    wx.setStorageSync('newPrizeId', newPrize.id);
    this.setData({
      congratulationWinningPopupInfo: {
        award: newPrize.award,
        name: newPrize.name,
        img: newPrize.img,
      },
    });
    this.selectComponent('#congratulationWinningPopup').show();

    return true;
  },
  checkAndShowNotWonPopup(newestLotteryId) {
    if (!newestLotteryId) return false;

    const localLotteryId = wx.getStorageSync('newestLotteryId');
    if (localLotteryId && newestLotteryId === localLotteryId) return false;

    wx.setStorageSync('newestLotteryId', newestLotteryId);
    this.selectComponent('#notWonYetPopup').show();
  },
  clickAdBtn() {
    wx.openEmbeddedMiniProgram({
      appId: 'wxece3a9a4c82f58c9',
      path: 'commercialize/pages/taoke-guide/index?scene=a90220ea475c4aada324ee25b2e60aca',
    });
  },
  /**
   * ç¡®è®¤é¢†å–å¥–å“
   */
  confirmGetPrize(e) {
    if(e.currentTarget.dataset.hexiao) {
      wx.showToast({
        title: 'å·²ç»é¢†è¿‡å¥–å•¦!',
        icon: 'none'
      })
      return;
    }
    if(!e.currentTarget.dataset.hexiaoid) {
      wx.showToast({
        title: 'å‚æ•°å¼‚å¸¸!',
        icon: 'none'
      });
      return;
    }
     wx.showModal({
       title: 'æç¤º',
       content: 'æ˜¯å¦ç¡®è®¤é¢†å¥–?',
       complete: (res) => {
         if (res.confirm) {
          reqConfirmPrize(e.currentTarget.dataset.hexiaoid).then((res) => {
            console.log(res);
            this.getWinnerRecord();
            wx.showToast({
              title: 'ç¡®è®¤æˆåŠŸ!',
            });
          }).catch((err) => {
            console.log(err);
            wx.showToast({
              title: 'ç¡®å®å¤±è´¥!',
              icon: 'error'
            });
          });
         }
       }
     })
  },
});
````

## File: packageGame/api/shoutHb.js
````javascript
import { request } from "../../utils/request";
import { MP_HOST } from '../../assets/constant/host';

const GAME_CODE = 'hmPlay31'

/**
 * è·å–æ¸¸æˆçŠ¶æ€
 */
export const reqGameStatus = (userId,cancelLoading = false) => {
  return request("play/baiyan6", "GET", {
    splid: wx.getStorageSync("liveId"),
    userId,
  },{
    cancelLoading,
  });
};

/**
 * è·å–hbId
 * è¯´æ˜ï¼šæ¸¸æˆçŠ¶æ€å˜ä¸ºgameçš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨æ­¤æ¥å£è·å–hbIdï¼Œå¼¹å¹•
 */
export const reqGetHbId = () => {
  return request("allHby/initAllHby", "GET", {
    splid: wx.getStorageSync("liveId"),
  });
};

/**
 * è·å–hbId
 * è¯´æ˜ï¼šæ¸¸æˆçŠ¶æ€å˜ä¸ºgameçš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨æ­¤æ¥å£è·å–hbIdï¼Œå¼¹å¹•
 */
export const reqGetHbIdNew = (userId) => {
  return request("play/initHby7", "GET", {
    spoId: wx.getStorageSync("liveId"),
    userId,
    playInfo: GAME_CODE
  });
};



/**
 * ä¸Šä¼ å½•éŸ³å¾—åˆ°size
 * @param {File} voice å½•éŸ³æ–‡ä»¶
 * @param {String} key å½“å‰è¦å–Šçš„æ–‡æœ¬
 */
export const reqUploadVoice = (voice,key) => {
  return new Promise((resolve, reject) => {
    wx.uploadFile({
      url: `${MP_HOST}allHby/getAudioSize`,
      filePath: voice,
      name: "multipartFile",
      header: {
        token: wx.getStorageSync("token"),
      },
      formData: {
        splid: wx.getStorageSync("liveId"),
        key,
      },
      success(res) {
        const resBody = JSON.parse(res.data);
        resolve(resBody.data);
      },
      fail(err) {
        reject(err);
      },
    });
  });
};

/**
 * æäº¤size
 */
export const reqSubmitSize = ({ hbId, size,fenbei }) => {
  return request("allHby/robAllHby", "GET", {
    splid: wx.getStorageSync("liveId"),
    size,
    hbId,
    fenbei,
  });
};

/**
 * æŠ¢çº¢åŒ…
 */
export const reqRobHb = ({userId,totalSort,currentSort,hbId,fenbei}) => {
  return request("play/robHanHongBao", "POST", {
    splid: wx.getStorageSync("liveId"),
    hbId,
    fenbei,
    userId,
    total_sort: totalSort,
    current_sort: currentSort,
    playInfo: GAME_CODE
  });
}



/**
 * æ’è¡Œæ¦œ
 */
export const reqRankList = (userId) => {
  return request("play/redBaoRank6", "GET", {
    splid: wx.getStorageSync("liveId"),
    userId,
    isShowFenBei: '1'
  });
};
````

## File: packageGame/pages/shoutHb/components/cd/index.js
````javascript
import { timeoutTask } from "../../../../../utils/index";

const CD_START = 3;
let timer = null;
Component({
  properties: {
    cdVisible: {
      type: Boolean,
      value: false,
    },
  },
  data: {
    count: CD_START,
    countShow: false, // æ§åˆ¶æ•°å­—æ˜¾ç¤ºç¼©æ”¾åŠ¨ç”»
  },
  observers: {
    cdVisible(newVal) {
      // çˆ¶ç»„ä»¶è®¾ç½®cdVisible=trueæ¥æ§åˆ¶å€’è®¡æ—¶å¼€å§‹
      if (newVal) {
        this.startCd();
      }
    },
  },
  methods: {
    startCd() {
      if (timer) {
        return;
      }
      this.showCount(CD_START);
      timer = setInterval(() => {
        let count = this.data.count;
        count--;
        if (count === 0) {
          // countä¸º0ç»“æŸå€’è®¡æ—¶
          clearInterval(timer);
          timer = null;
          // é€šçŸ¥çˆ¶ç»„ä»¶å€’è®¡æ—¶ç»“æŸ
          // çˆ¶ç»„ä»¶ä¼šé‡ç½®cdVsibileä¸ºfalse
          this.triggerEvent("cdEnd");
        } else {
          // countä¸ä¸º0å°±æ¸²æŸ“å‡ºæ¥
          this.showCount(count);
        }
      }, 1000);
    },
    /**
     * æ•°å­—å±•ç¤ºmainæ–¹æ³•
     */
    showCount(count) {
      // ç¼©æ”¾å±•ç¤º
      this.scaleCount();
      this.setData({
        count,
      });
    },
    /**
     * æ•°å­—ç¼©æ”¾å±•ç¤º
     */
    scaleCount() {
      return new Promise((resolve) => {
        // å…ˆé‡ç½®ä¸ºfalse
        this.setData({
          countShow: false,
        });
        // ç­‰æ¸²æŸ“å¥½åå†æ‰§è¡Œç¼©æ”¾å±•ç¤ºåŠ¨ç”»
        timeoutTask(() => {
          this.setData({
            countShow: true,
          });
          // ä»»åŠ¡å®Œæˆ
          resolve();
        }, 100);
      });
    },
  },
});
````

## File: packageGame/pages/shoutHb/components/cd/index.wxml
````
<view class="cd-container" wx:if="{{cdVisible}}">
    <viw class="cd-num {{countShow ? 'show':''}}">{{count}}</viw>
</view>
````

## File: packageGame/pages/shoutHb/components/microphone/index.js
````javascript
import { timeoutTask } from '../../../../../utils/index'

const DOTS = [25, 32, 38, 45, 52];
let aniTimer = null;
const recorderManager = wx.getRecorderManager();

Component({
  properties: {
    gameStatus: {
      type: String,
      value: "wait", // å–å€¼ 'wait' | 'game'
    },
  },
  observers: {},
  data: {
    leftDots: [32, 25, 45, 38, 52],
    rightDots: [52, 38, 45, 25, 32],
    dotsAniDuration: 0.3,
    isRippleAni: false,
  },
  lifetimes: {
    attached() {
      recorderManager.onStart(() => {
        console.log("recorder start>>>");
      });
      recorderManager.onStop((res) => {
        console.log("recorder stop>>>");
        this.onRecordFinish(res);
      });
    },
  },
  methods: {
    /**
     * æŒ‰ä¸‹
     */
    onTouchStart() {
      if (this.data.gameStatus === "wait") {
        return;
      }
      // éœ‡åŠ¨
      this.startVibrate();
      this.startAni();
      recorderManager.start({
        duration: 10000,
        sampleRate: 16000,
        numberOfChannels: 1,
        format: "mp3",
      });
    },
    /**
     * æŠ¬èµ·
     */
    onTouchEnd() {
      if (this.data.gameStatus === "wait") {
        return;
      }
      this.stopAni();
      recorderManager.stop();
    },
    /**
     * åŠ¨ç”»æ’­æ”¾æ€»æ–¹æ³•
     */
    startAni() {
      // éŸ³æ³¢åŠ¨ç”»æ’­æ”¾
      this.startWaveAni();
      // å…‰åœˆåŠ¨ç”»æ’­æ”¾
      this.setData({
        isRippleAni: true,
      });
    },
    /**
     * åŠ¨ç”»åœæ­¢æ€»æ–¹æ³•
     */
    stopAni() {
      // éŸ³æ³¢åŠ¨ç”»åœæ­¢
      this.clearAniInterval();
      // å…‰åœˆåŠ¨ç”»åœæ­¢
      this.setData({
        isRippleAni: false,
      });
    },
    /**
     * éŸ³æ³¢åŠ¨ç”»
     */
    startWaveAni() {
      this.clearAniInterval();
      aniTimer = setInterval(() => {
        const newDotsLeft = DOTS.sort(() => Math.random() - 0.5);
        const newDotsRight = DOTS.sort(() => Math.random() - 0.5);
        this.setData({
          leftDots: newDotsLeft,
          rightDots: newDotsRight,
        });
      }, this.data.dotsAniDuration * 1000);
    },
    /**
     * æ¸…é™¤åŠ¨ç”»è®¡æ—¶å™¨
     */
    clearAniInterval() {
      clearInterval(aniTimer);
      aniTimer = null;
    },
    /**
     * å½•éŸ³å®Œæˆçš„å›è°ƒ
     */
    onRecordFinish(res) {
      const { tempFilePath, duration } = res;
      // å½•éŸ³æ—¶é—´è¿‡çŸ­
      if (duration <= 500) {
        wx.showToast({
          title: "å½•éŸ³æ—¶é—´è¿‡çŸ­",
          icon: "error",
        });
        return;
      }
      // å½•éŸ³è¶…æ—¶å¤„ç†
      if (aniTimer) {
        this.stopAni();
      }
      this.triggerEvent("recordFinish", tempFilePath);
    },
    /**
     * å¼€å§‹éœ‡åŠ¨
     */
    startVibrate() {
      wx.vibrateShort({
        type: 'light',
        fail: (err)  => {
          console.log('çŸ­éœ‡åŠ¨å¤±è´¥>>>', err);
          // é™çº§å¤„ç†ï¼šçŸ­éœ‡åŠ¨ä¸ç”Ÿæ•ˆåˆ™ä½¿ç”¨é•¿éœ‡åŠ¨
          timeoutTask(() => {
            wx.vibrateLong();
          }, 100);
        }
      })
    }
  },
});
````

## File: packageGame/pages/shoutHb/index.wxss
````
.shouthb-container {
  width: 100vw;
  height: 100vh;
  background-size: 100% 100%;
  background-image: url('https://ustatic.joymew.com/joymewScreen/img/shoutHb/bg.png');
  position: absolute;
  top: 0;
  left: 0;
}
````

## File: packageGame/pages/shoutHb/modules/game/index.scss
````scss
.game {
  .microPhoneComp {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .current-money {
    width: 592rpx;
    height: 190rpx;
    background-image: url(https://static.hudongmiao.com/joymewH5/img/hby/ribbon.png);
    background-size: 100% 100%;
    font-size: 34rpx;
    font-weight: bold;
    color: #fffffb;
    text-align: center;
    line-height: 150rpx;
    white-space: nowrap;
    position: absolute;
    top: 40rpx;
    left: 79rpx;
  }

  .tip {
    font-size: 40rpx;
    font-weight: 500;
    color: #ffffff;
    position: absolute;
    bottom: 200rpx;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
  }
}
````

## File: pages/joymewIndex/joymewIndex.wxss
````
@import "./styles/wedding.wxss";
@import "./styles/enterprise.wxss";
@import "./styles/birth.wxss";
@import "./styles/bby.wxss";
@import "./styles/sy.wxss";
@import "./styles/crl.wxss";
@import "./styles/myy.wxss";
@import "./styles/bly.wxss";
@import "./styles/ysy.wxss";
@import "./styles/bydl.wxss";
@import "./styles/xsy.wxss";
@import "./styles/jbtm.wxss";
@import "./styles/txh.wxss";
@import "./styles/qqy.wxss";
@import "./styles/hx.wxss";
@import "./styles/dhy.wxss";
@import "./styles/zshl.wxss";
@import "./styles/wl.wxss";

/* ç­¾åˆ°å…¬å…±æ ·å¼ */
.joymewIndex {
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden;
}

.signWrap {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.signWrap .bg {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  background-size: 100% 100%;
}

.signWrap .bg .customBg {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.signWrap .signForm {
  position: absolute;
  width: 650rpx;
  padding: 40rpx 0;
  background-size: 100% 100%;
  bottom: 100rpx;
}

.signWrap .signForm .formItem {
  padding: 0 40rpx;
  display: flex;
  font-size: 32rpx;
  font-weight: 400;
  margin-bottom: 40rpx;
}

.signWrap .signForm .formItem .formItem-value {
  display: flex;
  align-items: center;
  position: relative;
  flex: 1;
  justify-content: space-between;
}
.signWrap .signForm .formItem .formItem-value.avatar {
  border-bottom: none;
}
.signWrap .signForm .formItem .formItem-value .avatarButton {
  width: 100rpx;
  height: 100rpx;
  padding-left: 0;
  padding-right: 0;
  margin-left: unset;
}

.signWrap .signForm .formItem .formItem-value .avatarButton .avatar {
  width: 100%;
  height: 100%;
}

.signWrap .signForm .formItem .formItem-value .inputNickName {
  padding-right: 60rpx;
}

.signWrap .signForm .formItem .formItem-value .icon-shuaxin {
  font-weight: 600;
  width: 60rpx;
  display: block;
  text-align: right;
}

.signWrap .signForm .formItem .formItem-value .wechatGetPhone {
  position: relative;
  width: 100%;
}

.signWrap .signForm .formItem .formItem-value .wechatGetPhone text {
  position: absolute;
  display: block;
  height: 55rpx;
  line-height: 0.6;
}
.signWrap .signForm .formItem .formItem-value .wechatGetPhone text.hasPhone {
  position: static;
}

.signWrap .signForm .formItem .formItem-value .wechatGetPhone .getPhoneBtn {
  opacity: 0;
  height: 55rpx;
  width: 100%;
}

.signWrap .signForm .formItem .formItem-value .icon-shouji {
  font-weight: 600;
  font-size: 42rpx;
  width: 60rpx;
  display: block;
  text-align: right;
  position: absolute;
  right: 0;
}

.signWrap .signForm .formItem .formItem-value .inputPhone {
  padding-right: 60rpx;
}

.signWrap .signForm .buttonWrap {
  display: flex;
  justify-content: center;
}

.signWrap .signForm .buttonWrap .signButton {
  background-size: 100% 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 380rpx;
  height: 85rpx;
  color: #ffffff;
}

.signWrap .signForm .buttonWrap .signButton::after {
  content: "ç‚¹å‡»è¿›å…¥";
  display: block;
  position: absolute;
}
````

## File: pages/reserve/reserve.js
````javascript
import reserveStore from './store/reserve'
import hostingStyleStore from './store/hostingStyle'
import { reqRecordVisitCount } from '../../api/hostingStyle'

const app = getApp();
let hostingStyleDom = null;

Page({
  data: {
    liveId: '',
    eFooterVisible: false,
    action: '',
    hasScrollToNav: false,
    navBarHeight: app.globalData.systemInfo_titleBarHeight +
      app.globalData.systemInfo_statusBarHeight
  },
  /**
   *
   * @param {Object} options
   * optionså½¢å¦‚ï¼š{
   *   liveId åˆ†äº«çš„æƒ…å†µä¸‹ä¼šå¸¦æœ‰liveId
   *   inTabbarMode è¯„ä»·å…¥å£è¿›å…¥çš„æƒ…å†µ(ä½œä¸ºtabBaré¡µé¢)
   *   action ä¸»æŒå¡ç‰‡ç‚¹å‡»è¿›å…¥çš„æƒ…å†µ å–å€¼ï¼šaddWechatã€hostReserve
   * }
   *
   */
  onLoad(options) {
    // storeä¸­çš„æ•°æ®åŒæ­¥è¿‡æ¥
    // reserveStore.syncData(this, ['personalInfo', 'introList', 'isVip', 'wechatQrcode']);
    reserveStore.syncData(this, ['wechatQrcode', 'hostId']);

    const storageLiveId = wx.getStorageSync('liveId');
    this.setData({
      liveId: options.liveId || storageLiveId,
      eFooterVisible: !!(options.inTabbarMode),
      action: options.action || ''
    });
    console.log(this.data.action);
    // liveIdåŒæ­¥åˆ°ç¼“å­˜
    if (!storageLiveId && options.liveId) {
      wx.setStorageSync('liveId', options.liveId)
    }
    reserveStore.initData();
    // ç»Ÿè®¡è®¿é—®æ¬¡æ•°
    reqRecordVisitCount(this.data.liveId);
  },
  onPageScroll(e) {
    if (e.scrollTop >= this.data.navBarHeight + 120) {
      this.setData({
        hasScrollToNav: true
      })
    } else {
      this.setData({
        hasScrollToNav: false
      })
    }
  },
  onReachBottom() {
    if (!hostingStyleDom) {
      hostingStyleDom = this.selectComponent('#hostingStyle');
    }
    const activeTab = hostingStyleDom.getActiveTab();
    console.log(activeTab);
    if(activeTab === 'ä½œå“') {
      hostingStyleStore.getWorkList();
    } else if(activeTab === 'è¯„ä»·') {
      hostingStyleStore.getCommentList();
    }
  }
});
````

## File: pages/reserve/store/reserve.js
````javascript
import {
  reqGetHostInfo
} from '@/api/estimate';
import {
  reqGetUserInfo
} from "@/api/weddingMan";

const splitStrByLineBreak = (str) => str ? str.split("\n") : '';

/**
 * é¢„å®šæ¨¡å—çš„çŠ¶æ€ç®¡ç†
 */
export default {
  currentInstance: null,
  state: {
    hostId: '',
    wechatQrcode: '',
    // æ‹¥æœ‰vipé¢„å®šæƒé™çš„ä¸»æŒäººä¿¡æ¯
    personalInfo: {
      photoList: [],
      realName: "",
      intro: "",
      tags: [],
      voice: "",
      workPlace: ["", "", ""],
      proficiency: -1,
    },
    // ä¸»æŒäººä½œå“åˆé›†
    introList: [],
    // æ˜¯å¦å¼€é€šäº†vip
    isVip: undefined,
  },
  /**
   * åŒæ­¥æ•°æ®(store->å®ä¾‹)
   * @param {Page|Component} currentInstance 
   * @param {string[]} stateKeys éœ€è¦åŒæ­¥(store->å®ä¾‹)çš„çŠ¶æ€ ['liveId']
   */
  syncData(currentInstance, stateKeys) {
    this.currentInstance = currentInstance;
    const targetObj = {};
    stateKeys.forEach((key) => {
      if (this.state[key] !== undefined) {
        targetObj[key] = this.state[key];
      }
    })
    currentInstance.setData({
      ...targetObj
    });
  },
  async initData() {
    // è·å–ä¸»æŒäººä¿¡æ¯
    const hostRes = await reqGetHostInfo({
      splid: wx.getStorageSync("liveId"),
    });
    console.log("ä¸»æŒäººä¿¡æ¯:", hostRes);
    this.state.hostId = hostRes.data.splidInfo.userId;
    this.state.wechatQrcode = hostRes.data.splidInfo.comment_json;
    // è·å–vipä¸»æŒäººä¿¡æ¯
    // const hlrRes = await reqGetUserInfo(this.state.hostId, 1);
    // console.log("å©šç¤¼äººä¿¡æ¯:", hlrRes);
    // if (hlrRes.data.personalInfo) {
    //   const tmpPersonInfoStr = hlrRes.data.personalInfo;
    //   const tmpPsersonInfoObj = JSON.parse(tmpPersonInfoStr);
    //   this.state.personalInfo = tmpPsersonInfoObj;
    //   console.log(tmpPsersonInfoObj);
    //   this.state.introList = splitStrByLineBreak(tmpPsersonInfoObj.intro);
    //   this.state.isVip = true;
    // } else {
    //   this.state.isVip = false;
    // }
    // åŒæ­¥æ•°æ®
    if(this.currentInstance) {
      this.syncData(this.currentInstance, ['hostId', 'wechatQrcode']);
    }
  },
}
````

## File: packageA/pages/rechargeWedding/rechargeWedding.js
````javascript
import {
  reqGetRoleGiftRankList,
  reqDiamondRecharge,
  reqEditUserInfo,
  reqGetUserInfo,
} from "../../api/recharge";

import {
  timeoutTask
} from "../../../utils/index";
import {
  reqSecurityMsgCheck
} from "../../../api/message";
import qiniuUploader from "../../../utils/qiniu/index";

const TYPEMAP = [
  '1-1',
  '1-2',
  '1-3',
  '1-4',
  '1-5',
  '1-6',
  '1-7',
  '1-8',
  '1-9',
  '1-10',
  '1-11',
  '2-1',
  '2-2',
  '2-3',
  '2-4',
  '2-5',
  '2-6',
  '2-7',
  '2-8',
  '2-9',
  '2-10',
  '2-11',
];
// äº²å‹å…³ç³»
const RELATIVES = {
  1: 'çˆ¶æ¯',
  2: 'èˆ…èˆ…',
  3: 'å”å”',
  4: 'ä¼¯ä¼¯',
  5: 'é˜¿å§¨',
  6: 'å§å¦¹',
  7: 'å…„å¼Ÿ',
  8: 'æœ‹å‹',
  9: 'åŒå­¦',
  10: 'å¸ˆé•¿',
  11: 'åŒäº‹',
  12: 'è‡ªå®šä¹‰',
};

const RELATIVEREG = /^ç”·æ–¹.+|^å¥³æ–¹.+/;
/**
 * æ ¹æ®ç±»å‹è¿”å›äº²å‹ 
 */
const getRelativeTypeLabel = (type) => {
  if (type.includes('-')) {
    const tmpSubTypeInfos = type.split('-');
    const firstLevelType = tmpSubTypeInfos[0];
    const secondLevelType = tmpSubTypeInfos[1];
    const firstLevelTypeLabel = firstLevelType === '1' ? 'ç”·æ–¹' : 'å¥³æ–¹';
    let secondLevelTypeLabel;
    if (/^\d+$/.test(secondLevelType)) {
      secondLevelTypeLabel = RELATIVES[secondLevelType];
    } else {
      secondLevelTypeLabel = secondLevelType;
    }
    return `${firstLevelTypeLabel}${secondLevelTypeLabel}`;
  }
  if (type === '1') {
    return 'ç”·æ–¹äº²å‹';
  }
  if (type === '2') {
    return 'å¥³æ–¹äº²å‹';
  }
  return '';
};
const app = getApp();

Page({
  data: {
    userId: "",
    openId: "",
    money: 0, // å¾…å……å€¼å–µå¸
    remainMoney: 0, // å‰©ä½™å–µå¸
    rechargeList: [], // å……å€¼åˆ—è¡¨
    giftRankListBoy: [], // ç”·æ–¹é€ç¤¼ç‰©æ’è¡Œæ¦œ
    giftRankListGirl: [], // å¥³æ–¹é€ç¤¼ç‰©æ’è¡Œæ¦œ
    deskList: [], // æ¡Œå·åˆ—è¡¨
    editPopupVisible: false, // ç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
    editPopupAni: false,
    vipLevel: "", // vipç­‰çº§
    editUserInfoPrice: "0", // ç¼–è¾‘ä¸ªäººä¿¡æ¯çš„ä»·æ ¼
    statusList: ["ä¼´éƒ", "ä¼´å¨˜", "å•èº«è´µæ—", "é«˜å¯Œå¸…", "ç™½å¯Œç¾", "é’»çŸ³ç‹è€äº”"], // èº«ä»½åˆ—è¡¨
    formData: {
      // ä¸ªäººä¿¡æ¯
      avator: "",
      wx_name: "",
      type: "", // äº²å‹å›¢
      table_number: "", // æ¡Œå·
      position: "", // èº«ä»½
    },
    typeLabel: "",
    typeDatas: [
      "ç”·æ–¹çˆ¶æ¯",
      "ç”·æ–¹èˆ…èˆ…",
      "ç”·æ–¹å”å”",
      "ç”·æ–¹ä¼¯ä¼¯",
      "ç”·æ–¹é˜¿å§¨",
      "ç”·æ–¹å§å¦¹",
      "ç”·æ–¹å…„å¼Ÿ",
      "ç”·æ–¹æœ‹å‹",
      "ç”·æ–¹åŒå­¦",
      "ç”·æ–¹å¸ˆé•¿",
      "ç”·æ–¹åŒäº‹",
      "å¥³æ–¹çˆ¶æ¯",
      "å¥³æ–¹èˆ…èˆ…",
      "å¥³æ–¹å”å”",
      "å¥³æ–¹ä¼¯ä¼¯",
      "å¥³æ–¹é˜¿å§¨",
      "å¥³æ–¹å§å¦¹",
      "å¥³æ–¹å…„å¼Ÿ",
      "å¥³æ–¹æœ‹å‹",
      "å¥³æ–¹åŒå­¦",
      "å¥³æ–¹å¸ˆé•¿",
      "å¥³æ–¹åŒäº‹",
    ],
    isCloseCoin: false, // å…³é—­å–µå¸ç›¸å…³å†…å®¹
    avatarUncropped: "", // å¤´åƒè£å‰ª
    // å–å€¼ 'detail' | 'common' è¯¥å€¼ç”±åˆå§‹åŒ–çš„formData.typeæ¥å†³å®š
    relativeMode: 'common',
  },
  onLoad(options) {
    console.log(options);
    this.initData(options);
  },
  onShow: function () {},
  onUnload: function () {},
  /**
   * åˆå§‹åŒ–æ•°æ®
   */
  async initData({
    userId,
    openId,
    rechargeListStr,
    vipLevel,
    relativeType,
    currentStatus,
    deskNum,
    editUserInfoPrice,
  }) {
    const initDataFromUrl = (pData) => {
      this.setData(pData);
    }
    const initDataFromUserInfoReq = async () => {
      try {
        const userRes = await reqGetUserInfo();
        console.log('useRes:', userRes);
        this.setData({
          remainMoney: userRes.data.money.balance,
          "formData.wx_name": userRes.data.wx_name,
          "formData.avator": userRes.data.avator
        });
        // æš‚å­˜å¤´åƒã€æ˜µç§°
        this.currentAvator = userRes.data.avator;
        this.currentName = userRes.data.wx_name;
      } catch (err) {
        console.log(err);
      }
    }
    const initDataFromRankReq = async () => {
      try {
        const liveId = wx.getStorageSync("liveId");
        const res = await reqGetRoleGiftRankList(liveId);
        this.setData({
          giftRankListBoy: this.formatRankList(res.data.list1),
          giftRankListGirl: this.formatRankList(res.data.list2),
        });
      } catch (err) {
        console.log(err);
      }
    }
    const setRelativeMode = (relativeType) => {
      if (relativeType.includes('-')) {
        this.setData({
          relativeMode: 'detail'
        });
      } else {
        this.setData({
          relativeMode: 'common'
        });
      }
    }
    // æ¥è‡ªurlçš„æ•°æ®åˆå§‹åŒ–
    const deskList = this.getDeskList();
    initDataFromUrl({
      deskList,
      userId,
      openId,
      rechargeList: rechargeListStr.split(","),
      "formData.position": currentStatus,
      "formData.table_number": deskNum,
      vipLevel,
      editUserInfoPrice,
    });
    setRelativeMode(relativeType);
    this.setRelative(relativeType);
    // æ¥è‡ªç”¨æˆ·ä¿¡æ¯æ¥å£çš„æ•°æ®åˆå§‹åŒ–
    initDataFromUserInfoReq();
    // æ¥è‡ªæ’è¡Œæ¦œæ¥å£çš„æ•°æ®åˆå§‹åŒ–
    initDataFromRankReq();
  },
  /**
   * æ ¼å¼åŒ–æ’è¡Œæ¦œåˆ—è¡¨
   */
  formatRankList(list) {
    return list.map((item) => ({
      ...item,
      wx_name: item.wx_name.length > 4 ?
        `${item.wx_name.slice(0, 4)}...` : item.wx_name,
    }));
  },
  /**
   * ç®—å‡ºæ¡Œå·åˆ—è¡¨
   */
  getDeskList() {
    const tmpDeskList = [];
    let count = 0; // æ¸¸æ ‡
    let start = 0; // å¼€å§‹ä½ç½®
    let end = 2; // ç»“æŸä½ç½®
    let offset = 1; // ç”¨äºè®¡ç®—åç§»é‡
    do {
      if (count >= start && count <= end) {
        tmpDeskList.push(count + offset);
      } else {
        start = end + 1;
        end = start + 8;
        offset++;
        tmpDeskList.push(count + offset);
      }
      count++;
    } while (count < 90);

    return tmpDeskList;
  },
  /**
   * æ‰‹åŠ¨åŠ ä¸Šä½™é¢
   */
  addRemainMoney(money) {
    const tmpVal = Number(this.data.remainMoney) + Number(money);
    this.setData({
      remainMoney: tmpVal.toFixed(2),
    });
  },
  /**
   * ä¿®æ”¹å®Œä¸ªäººä¿¡æ¯åæ‰‹åŠ¨å‡å»ä½™é¢ 
   */
  subtractRemainAfterEditUserInfo() {
    const remainMoneyNumber = Number(this.data.remainMoney);
    const editUserInfoPriceNumber = Number(this.data.editUserInfoPrice);
    if (editUserInfoPriceNumber > remainMoneyNumber) {
      return;
    }
    const tmpVal = remainMoneyNumber - editUserInfoPriceNumber;
    this.setData({
      remainMoney: tmpVal.toFixed(2),
    });
  },
  /**
   * é€‰æ‹©é‡‘é¢å……å€¼
   */
  async handleRecharge(e) {
    this.setData({
      money: e.currentTarget.dataset.desc,
    });
    try {
      wx.showLoading({
        title: "è¯·æ±‚ä¸­...",
        mask: true,
      });
      await reqDiamondRecharge({
        total: this.data.money,
        userId: this.data.userId,
        openId: this.data.openId,
      });
      wx.hideLoading();
      // å‰ç«¯å¤„ç†ç”¨æˆ·ä½™é¢å¢åŠ 
      this.addRemainMoney(this.data.money);
      wx.showToast({
        title: "å……å€¼æˆåŠŸ!",
        icon: "none",
      });
      this.goBack();
    } catch (err) {
      console.log(err);
      wx.hideLoading();
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "error",
      });
    }
  },
  /**
   * è¿”å›ä¸Šä¸€é¡µ
   */
  goBack() {
    timeoutTask(() => {
      wx.navigateBack();
    }, 500);
  },
  /**
   * è·³è½¬éšç§åè®®é¡µé¢
   */
  toAgreement() {
    wx.navigateTo({
      url: "/packageC/pages/agreement/agreement",
    });
  },
  /**
   * å…³é—­ç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
   */
  hideEditPopup() {
    this.setData({
      editPopupAni: false,
    });
    timeoutTask(() => {
      this.setData({
        editPopupVisible: false,
      });
    }, 300);
  },
  /**
   * æ˜¾ç¤ºç¼–è¾‘ä¸ªäººä¿¡æ¯å¼¹çª—
   */
  showEditPopup() {
    this.setData({
      editPopupVisible: true,
    });
    timeoutTask(() => {
      this.setData({
        editPopupAni: true,
      });
    }, 100);
  },
  /**
   * ä¸Šä¼ å¤´åƒ
   */
  async upload() {
    try {
      const res = await wx.chooseMedia({
        count: 1,
        mediaType: ["image"],
      });
      console.log(res.tempFiles[0].tempFilePath);
      // å”¤èµ·å›¾ç‰‡è£å‰ª
      this.setData({
        avatarUncropped: res.tempFiles[0].tempFilePath,
      });
      if (!this.hasQiniuInit) {
        this.hasQiniuInit = true;
        qiniuUploader.init();
      }
    } catch (err) {
      console.log(err);
    }
  },
  /**
   * é€‰æ‹©äº²å‹
   */
  chooseRelatives(e) {
    this.setData({
      "formData.type": e.detail.value,
    });
  },
  /**
   * è¾“å…¥äº²å‹
   */
  onRelativeBlur(e) {
    const relativeText = e.detail.value;
    // ç”·æ–¹æˆ–å¥³æ–¹å¼€å¤´çš„å­—ç¬¦ä¸²
    if (RELATIVEREG.test(relativeText)) {
      const frontType = relativeText.includes('ç”·æ–¹') ? '1' : '2';
      const endType = relativeText.replace(/ç”·æ–¹|å¥³æ–¹/, '');
      const targetRelative = `${frontType}-${endType}`;
      this.setRelative(targetRelative);
    } else {
      // æ²¡æœ‰ç”·æ–¹å¥³æ–¹å¼€å¤´ å­—ç¬¦ä¸²å‰é¢è¡¥ä¸Šç”·æ–¹
      const targetRelative = `1-${relativeText}`;
      this.setRelative(targetRelative);
    }
  },
  /**
   * é€‰æ‹©æ¡Œå·
   */
  handlePickerChange(e) {
    this.setData({
      "formData.table_number": this.data.deskList[e.detail.value],
    });
  },
  /**
   * é€‰æ‹©èº«ä»½
   */
  handlePositionChange(e) {
    this.setData({
      "formData.position": this.data.statusList[e.detail.value],
    });
  },
  /**
   * é€‰æ‹©äº²å‹ 
   */
  handleRelativesChange(e) {
    this.setRelative(e.detail.value);
  },
  /**
   * æ ¹æ®ç´¢å¼•æˆ–typeè®¾ç½®äº²å‹
   */
  setRelative(index) {
    if (this.data.relativeMode === 'common' || index.includes('-')) {
      this.setData({
        'formData.type': index,
        typeLabel: getRelativeTypeLabel(index),
      });
    } else if(!index.includes('-')) {
      // ä¸‹æ‹‰é€‰æ‹©äº²å‹çš„æƒ…å†µ
      this.setData({
        'formData.type': TYPEMAP[index],
        typeLabel: this.data.typeDatas[index],
      });
    }
  },
  /**
   * é€‰æ‹©èº«ä»½
   */
  // chooseStatus(e) {
  //   this.setData({
  //     "formData.position": e.currentTarget.dataset.status,
  //   });
  // },
  /**
   * åå­—è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹
   */
  handleNameBlur(e) {
    this.setData({
      "formData.wx_name": e.detail.value,
    });
  },
  /**
   * å……å€¼åé‡æ–°ç¼–è¾‘
   */
  async rechargeThenEdit(editCb) {
    try {
      wx.showLoading({
        title: "è¯·æ±‚ä¸­...",
        mask: true,
      });
      await reqDiamondRecharge({
        total: this.data.editUserInfoPrice,
        userId: this.data.userId,
        openId: this.data.openId,
      });
      wx.hideLoading();
      // å‰ç«¯å¤„ç†ç”¨æˆ·ä½™é¢å¢åŠ 
      this.addRemainMoney(this.data.editUserInfoPrice);
      // ç»§ç»­å®Œæˆä¸ªäººä¿¡æ¯ç¼–è¾‘
      editCb();
    } catch (err) {
      console.log(err);
      wx.hideLoading();
      wx.showToast({
        title: "å……å€¼å¤±è´¥!",
        icon: "error",
      });
    }
  },
  /**
   * æäº¤ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„è¡¨å•
   */
  async confirmEdit() {
    // æ˜µç§°ä¸èƒ½ä¸ºç©º
    if (!this.data.formData.wx_name) {
      wx.showToast({
        title: "æ˜µç§°ä¸èƒ½ä¸ºç©º!",
        icon: "none",
      });
      return;
    }
    // æ£€æŸ¥æ•æ„Ÿè¯
    const msgCheckRes = await reqSecurityMsgCheck(this.data.formData.wx_name);
    try {
      const tmpResult = JSON.parse(msgCheckRes.data.msg_sec_check);
      if (tmpResult.result.suggest !== "pass") {
        wx.showToast({
          title: "å†…å®¹éæ³•!",
          icon: "none",
        });
        return;
      }
    } catch (err) {
      console.log(err);
    }
    // ä¸Šä¼ å›¾ç‰‡
    if (this.needUpload(this.data.formData.avator)) {
      const uploadRes = await qiniuUploader.upload(this.data.formData.avator);
      console.log('ä¸Šä¼ çš„å›¾ç‰‡åœ°å€:', uploadRes);
      this.setData({
        "formData.avator": uploadRes.fileURL,
      });
    }
    // ä¿®æ”¹ä¿¡æ¯
    const res = await reqEditUserInfo({
      ...this.data.formData,
      splid: wx.getStorageSync("liveId"),
    });
    if (res.data.code === "200") {
      wx.showToast({
        title: "ä¿®æ”¹æˆåŠŸ!",
        icon: "none",
      });
      // å‡æ‰ä½™é¢
      this.subtractRemainAfterEditUserInfo();
      // æ ‡è¯†äº’åŠ¨H5éœ€è¦åˆ·æ–°
      app.splidInfo_setSplidInfo({
        needH5Refresh: true
      });
      // æ›´æ–°ç¼“å­˜ä¸­çš„å¤´åƒã€æ˜µç§°
      app.userInfo_setuserInfo({
        avatar: this.data.formData.avator,
        nickname: this.data.formData.wx_name,
      });
    } else if (res.data.code === '100') {
      wx.showToast({
        title: "å–µå¸ä¸è¶³!",
        icon: "none",
      });
      timeoutTask(() => {
        // å……å€¼åé‡æ–°ç¼–è¾‘
        this.rechargeThenEdit(this.confirmEdit.bind(this));
      }, 300);
    } else {
      wx.showToast({
        title: res.data.msg,
        icon: "none",
      });
      // å¤´åƒã€æ˜µç§°å›æ»š
      this.setData({
        "formData.avator": this.currentAvator,
        "formData.wx_name": this.currentName,
      });
    }
    this.hideEditPopup();
  },
  /**
   * åˆ¤å®šæ˜¯å¦éœ€è¦ä¸Šä¼ å›¾ç‰‡
   */
  needUpload(filePath) {
    return filePath.indexOf("tmp") > -1;
  },
  /**
   * å–µå¸å¤Ÿç”¨æ¥ç¼–è¾‘ä¸ªäººä¿¡æ¯å—
   */
  canEditUserInfo() {
    return Number(this.data.remainMoney) >= Number(this.data.editUserInfoPrice);
  },
  /**
   * å…³é—­å¤´åƒè£å‰ª
   */
  onCancelCropper() {
    this.setData({
      avatarUncropped: "",
    });
  },
  /**
   * ç¡®è®¤å¤´åƒè£å‰ª
   */
  onConfirmCropper(e) {
    console.log(e);
    this.setData({
      "formData.avator": e.detail,
      avatarUncropped: "",
    });
  },
});
````

## File: packageGame/pages/shoutHb/modules/game/index.json
````json
{
    "component": true,
    "usingComponents": {
        "microphone": "../../components/microphone/index",
        "resPopup": "../../components/resPopup/index",
        "danmu": "../../components/danmu/index",
        "cd": "../../components/cd/index",
        "ready": "../../components/ready/index"
    }
}
````

## File: packageGame/pages/shoutHb/modules/wait/index.scss
````scss
.wait {
  .textBoardComp {
    display: flex;
    justify-content: center;
    // margin-top: 128rpx;
    margin-top: 40rpx;
  }

  .microPhoneComp {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  .game-tip {
    font-size: 44rpx;
    font-weight: 500;
    color: #fff3b6;
    text-shadow: 0px 0px 8px 0px rgba(255, 252, 168, 0.6);
    position: absolute;
    bottom: 350rpx;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
  }
  .control-btn {
    width: 476rpx;
    height: 196rpx;
    background-size: 100% 100%;
    position: absolute;
    bottom: 120rpx;
    left: 50%;
    animation: heart-beat 2s infinite;
    transform-origin: center center;
  }
  .start-btn {
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/start-btn2_compressed.png");
  }
  .test-btn {
    background-image: url("https://ustatic.hudongmiao.com/joymewMp/test-btn_compressed.png");
  }
  @keyframes heart-beat {
    0% {
      transform: translateX(-50%) scale(0.8);
    }
    50% {
      transform: translateX(-50%) scale(1);
    }
    100% {
      transform: translateX(-50%) scale(0.8);
    }
  }
}
````

## File: packageGame/pages/shoutHb/modules/wait/index.wxml
````
<view class="wait">
    <textBoard class="textBoardComp" />
    <microphone class="microPhoneComp" gameStatus="wait" />
    <view class="game-tip">é•¿æŒ‰è¯ç­’ å³å¯è¯†åˆ«è¯­éŸ³</view>
    <view class="btn-wrap">
        <view class="control-btn test-btn" bindtap="onTestGame" wx:if="{{!inTest}}"></view>
        <view class="control-btn start-btn" bindtap="onStartGame" wx:else></view>
    </view>
</view>
````

## File: appGlobalData/accountInfo.js
````javascript
/**
 * å°ç¨‹åºè´¦å·æ¨¡å—
 * @description ä¸‰ä¸ªå°ç¨‹åºå„è‡ªçš„è´¦å·ä¿¡æ¯
 */

/**
 *
 * @param {Object} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function accountInfo_module(app) {
  const { globalData } = app;

  const ACCOUNTINFO_MAP = {
    wx091ab4aca5531a20: {
      name: "å—¨çŒ«äº’åŠ¨",
      subscribeTpMsg: {
        sign: {
          estimate: "RyXJFlmR_oSJfxaWTJ5Hgsq83n37Px_04FcCMwylFcE", // ç”¨äºç­¾åˆ°åæ”¶åˆ°ç»™æœ¬åœºæ´»åŠ¨ä¸»æŒçš„è¯„ä»·æ¶ˆæ¯(è¯„ä»·æ¶ˆæ¯)
          lottery: "oure_8zb9X8RteNDcB1EUwmm0ntDW_BEGsgtEaV5dHE", // ç”¨äºç­¾åˆ°åæ”¶åˆ°æœ¬åœºæ´»åŠ¨çš„æŠ½å¥–ç»“æœ(æŠ½å¥–æ¶ˆæ¯)
        },
        comment: {
          reply: "RyXJFlmR_oSJfxaWTJ5Hgsq83n37Px_04FcCMwylFcE", // ç”¨äºè¯„ä»·åæ”¶åˆ°åˆ«äººçš„å›å¤æ¶ˆæ¯(ç•™è¨€æ¶ˆæ¯)
        },
      },
      ad: {
        inspire: "adunit-4ee628b0d0eaa33c", // æ¿€åŠ±å¹¿å‘Š
        video: "adunit-4b5642ed84ae2c52", // è§†é¢‘å¹¿å‘Š
        insertScreen: "adunit-3c8de423a8eb463a", // æ’å±å¹¿å‘Š
      },
      getPhoneNumberType: "4", // è·å–æ‰‹æœºå·ä¼ çš„ç±»å‹å€¼
      h5PathType: "haimao", // è·³è½¬äº’åŠ¨h5ä¸»é¡µä¼ çš„ç±»å‹å€¼
    },
    wx356c91512ba073b6: {
      name: "å—¨å–µä¹åŠ¨",
      subscribeTpMsg: {
        sign: {
          estimate: "N0fsck4I33hA1lv_FmYEDHnI4e537x0DkGw_kCIo_Vs",
          lottery: "",
        },
        comment: {
          reply: "N0fsck4I33hA1lv_FmYEDHnI4e537x0DkGw_kCIo_Vs",
        },
      },
      ad: {
        inspire: "adunit-e9fcbd889a8b563d",
        video: "adunit-93a30d91120f0347",
        insertScreen: "adunit-6fedfa44427c9ea6",
      },
      getPhoneNumberType: "5",
      h5PathType: "ledong",
    },
    wx1108f970b2b531e1: {
      name: "å—¨å–µäº’åŠ¨",
      subscribeTpMsg: {
        sign: {
          estimate: "bUXI099LGZXdF3bifnVslIclyxkGZ0h3BBi1XRCwgWs",
          lottery: "smK_K6cNxrFRgSPW_YPDzMedFBZa6DfxAqv2inEsYvU",
        },
        comment: {
          reply: "BhiUV_fcDySAYxyZ--JNJroYDQJeky6DGlGQT8PaCdQ",
        },
      },
      ad: {
        inspire: "adunit-bf5d5ab9f926a2de",
        video: "adunit-f0b54cb0f0a31c97",
        insertScreen: "adunit-c6bf527fb4c13f71",
      },
      getPhoneNumberType: "1",
      h5PathType: "haimiao",
    },
    wx54e715f3de2774a3: {
      name: "å—¨å–µè·ƒåŠ¨",
      subscribeTpMsg: {
        sign: {
          estimate: "pWPLnqKnjmmEed4tkd3RkN4AGPLaC5UdsV2GZ8W0rsc",
          lottery: "nQZKG2H5Xs16fkTvUbodFjGpa5KbNk5sLdEHUIv5GLI",
        },
        comment: {
          reply: "pWPLnqKnjmmEed4tkd3RkN4AGPLaC5UdsV2GZ8W0rsc",
        },
      },
      ad: {
        inspire: "adunit-e9fcbd889a8b563d",
        video: "adunit-93a30d91120f0347",
        insertScreen: "adunit-6fedfa44427c9ea6",
      },
      getPhoneNumberType: "5",
      h5PathType: "ledong",
    },
  };

  /**
   * {Object} è®¢é˜…æ¶ˆæ¯æ¨¡æ¿
   * {
   *   sign: {
   *      estimate, {String} è¯„ä»·æ¶ˆæ¯id
   *      lottery, {String} æŠ½å¥–æ¶ˆæ¯id
   *   },
   *   comment: {
   *    reply, {String} ç•™è¨€æ¶ˆæ¯id
   *   }
   * }
   * -------------------------------
   * {Object} å¹¿å‘Šä½
   * {
   *  inspire, {String} æ¿€åŠ±å¹¿å‘Šid
   *  video, {String} è§†é¢‘å¹¿å‘Šid
   *  insertScreen, {String} æ’å±å¹¿å‘Šid
   * }
   */

  globalData.accountInfo_appId = ""; // {String} appId
  globalData.accountInfo_name = ""; // {String} å°ç¨‹åºåç§°
  globalData.accountInfo_subscribeTpMsg = null; //{Object} è®¢é˜…æ¶ˆæ¯æ¨¡æ¿
  globalData.accountInfo_ad = null; // {Object} å¹¿å‘Šä½
  globalData.accountInfo_getPhoneNumberType = ""; // {String} è·å–æ‰‹æœºå·ä¼ çš„ç±»å‹å€¼
  globalData.accountInfo_h5PathType = ""; // {String} è·³è½¬äº’åŠ¨h5ä¸»é¡µä¼ çš„ç±»å‹å€¼

  app.accountInfo_initData = () => {
    const accountInfo = wx.getAccountInfoSync();
    globalData.accountInfo_appId = accountInfo.miniProgram.appId;
    const { name, subscribeTpMsg, ad, getPhoneNumberType, h5PathType } =
      ACCOUNTINFO_MAP[globalData.accountInfo_appId];
    globalData.accountInfo_name = name;
    globalData.accountInfo_subscribeTpMsg = subscribeTpMsg;
    globalData.accountInfo_ad = ad;
    globalData.accountInfo_getPhoneNumberType = getPhoneNumberType;
    globalData.accountInfo_h5PathType = h5PathType;
    // appIdå­˜å…¥storage
    wx.setStorageSync("accountInfo_appId", globalData.accountInfo_appId);
  };
}

export default accountInfo_module;
````

## File: appGlobalData/userInfo.js
````javascript
import {
  reqAuthLogin,
  reqCheckAvatarExpired
} from "../api/index.js";

/**
 * ç”¨æˆ·ä¿¡æ¯æ¨¡å—
 */

const MAX_AUTHLOGIN_COUNT = 3;

/**
 *
 * @param {Object} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function userInfo_module(app) {
  const {
    globalData
  } = app;
  globalData.userInfo_avatar = ""; // {String} å¤´åƒ
  globalData.userInfo_nickname = ""; // {String} æ˜µç§°
  globalData.userInfo_token = ""; // {String} token
  globalData.userInfo_phone = ""; // {String} æ‰‹æœºå·
  globalData.userInfo_reAuthLoginCount = 0; // {Number} é‡æ–°æˆæƒç™»å½•çš„æ¬¡æ•°

  /**
   * @param {Object} userInfo
   * @description keyä¸å·²æœ‰çš„globalData.userInfo_xxxå±æ€§çš„xxxå¯¹åº”(æ¯”å¦‚å±æ€§avatarå¯¹åº”globalData.userInfo_avatar)
   */
  app.userInfo_setuserInfo = (userInfo) => {
    const keys = Object.keys(userInfo);
    const needSaveStorageKeys = ["avatar", "nickname", "token", "phone"];
    keys.forEach((key) => {
      if (userInfo[key] === undefined) {
        return;
      }
      globalData[`userInfo_${key}`] = userInfo[key];
      if (needSaveStorageKeys.includes(key) && userInfo[key]) {
        wx.setStorageSync(key, userInfo[key]);
      }
    });
  };

/**
   * ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯
   * @returns {Boolean} ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨æœ‰æ•ˆå¤´åƒã€æ˜µç§°ã€token
   */
  app.userInfo_setuserInfoFromStorage = async () => { // 1. å°†å‡½æ•°å˜ä¸º async
    let flag = false;
    const storageAvatar = wx.getStorageSync("avatar");
    const storageNickname = wx.getStorageSync("nickname");
    const storageToken = wx.getStorageSync("token");
    const storagePhone = wx.getStorageSync("phone");
    if (storagePhone) {
      globalData.userInfo_phone = storagePhone;
    }
    if (storageAvatar && storageNickname && storageToken) {
      flag = true;
      // 2. æ£€æŸ¥ç¼“å­˜ä¸­çš„å¤´åƒæ˜¯å¦è¿‡æœŸ
      let targetAvatar = storageAvatar;
      try {
        targetAvatar = await reqCheckAvatarExpired(storageAvatar);
      } catch(err) {
        console.log('æ£€æŸ¥ç¼“å­˜å¤´åƒæ—¶å‡ºé”™', err);
        targetAvatar = undefined; // å‡ºé”™ä¹Ÿå½“æˆè¿‡æœŸå¤„ç†
      }

      app.userInfo_setuserInfo({
        avatar: targetAvatar, // 3. ä½¿ç”¨æ£€æŸ¥åçš„å¤´åƒ
        nickname: storageNickname,
        token: storageToken,
      });

      // 4. å¦‚æœå¤´åƒæ˜¯æ— æ•ˆçš„(undefined), é‚£ä¹ˆè®¤ä¸ºéœ€è¦é‡æ–°æˆæƒ, è¿”å› false
      if (!targetAvatar) {
        flag = false;
      }
    }
    return flag;
  };
  /**
   * æˆæƒç™»å½•
   * @param {Function} task éœ€è¦åœ¨æˆæƒç™»å½•åé‡æ–°æ‰§è¡Œçš„é€»è¾‘
   */
  app.userInfo_authLogin = (task) => {
    return new Promise((resolve, reject) => {
      if (globalData.userInfo_reAuthLoginCount >= MAX_AUTHLOGIN_COUNT) {
        wx.showToast({
          title: "æˆæƒç™»å½•å¤±è´¥!",
          icon: "error",
        });
        reject("loginError");
        return;
      }
      wx.login({
        timeout: 10000,
        success: async (res) => {
          try {
            const loginData = await reqAuthLogin(res.code);
            const {
              token,
              user
            } = loginData.data;
            const {
              avator,
              wx_name
            } = user;
            // éªŒè¯avatoræ˜¯å¦è¿‡æœŸ
            let targetAvatar = avator;
            try {
              targetAvatar = await reqCheckAvatarExpired(avator);
            } catch(err) {
              console.log(err);
            }
            app.userInfo_setuserInfo({
              avatar: targetAvatar,
              nickname: wx_name,
              token: token,
            });
            globalData.userInfo_reAuthLoginCount++;
            wx.showToast({
              title: "ç™»å½•æˆåŠŸ!",
              icon: "success",
            });
            if (task) {
              task();
            }
            resolve(loginData);
          } catch (err) {
            console.log(err);
            reject(err);
          }
        },
        fail: (err) => {
          console.log(err);
          reject(err);
          wx.showToast({
            title: JSON.stringify(err),
            icon: "error",
          });
        },
      });
    });
  };
}

export default userInfo_module;
````

## File: packageGame/pages/shoutHb/components/danmu/index.js
````javascript
/*************************************************
 * ç»„ä»¶å‚æ•°ä¼ é€’è¯´æ˜
 * barrageList<barrage>ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
 * barrageï¼š{
 *    content: string,//å¼¹å¹•å†…å®¹ï¼Œæ˜¯å¦å¿…å¡«ï¼šæ˜¯
 *    line: number,//æ·»åŠ åˆ°ç¬¬å‡ è¡Œ,å¯é€‰å€¼ï¼š1ã€2å’Œ3ï¼Œæ˜¯å¦å¿…å¡«ï¼šæ˜¯
 *    duration: number,//å¼¹å¹•çš„æŒç»­æ—¶é—´ï¼Œæ˜¯å¦å¿…å¡«ï¼Œå¦ï¼Œé»˜è®¤ä¸ºéšæœºï¼Œå•ä½æ¯«ç§’
 * }
 */
const DANMU_CONFIG = {
  firstTop: 20, // ç¬¬ä¸€æ¡å¼¹å¹•è·ç¦»å®¹å™¨é¡¶ç«¯çš„è·ç¦»(å•ä½rpx)
  height: 80, // å¼¹å¹•é«˜åº¦(å•ä½rpx)
  gap: 30, // å¼¹å¹•é—´éš”(å•ä½rpx)
}

Component({
  properties: {
    barrageList: {
      type: Array,
      value: []
    }
  },
  data: {
    barrageListUI: []
  },
  observers: {
    barrageList(newVal) {
      if (newVal.length > 0) {
        this.start();
      } else {
        this.setData({
          barrageListUI: []
        })
      }
    }
  },
  methods: {
    start() {
      // if (this.data.barrageListUI.length > 0) {
      //   return;
      // }
      const random = [3000 + 50 * Math.random(), 3345 + 50 * Math.random(), 3876 + 50 * Math.random()]
      this.setData({
        barrageListUI: this.data.barrageList.map(item => {
          item.style = `animation: barrage-move ${item.duration||random.shift()}ms infinite alternate-reverse cubic-bezier(.62,.03,.4,.97);top: ${this.getTopByLine(item.line)}rpx;display:flex;`
          return item;
        }),
      })
    },
    /**
     * æ ¹æ®è¡Œå·ç®—å‡ºtopå€¼
     */
    getTopByLine(line) {
      const { firstTop, gap, height } = DANMU_CONFIG;
      return firstTop + (line - 1) * (gap + height);
    }
  },
})
````

## File: packageGame/pages/shoutHb/modules/rank/index.js
````javascript
import { reqRankList } from "../../../../api/shoutHb";

Component({
  properties: {
    userId: {
      type: String,
      value: ''
    }
  },
  lifetimes: {
    attached() {
      this.initData();
    }
  },
  data: {
    topThreeData: [], // å‰ä¸‰åæ•°æ®
    otherData: [], // å…¶ä»–æ•°æ®
  },
  methods: {
    async initData() {
      try {
        const res = await reqRankList(this.data.userId);
        console.log('æ’è¡Œæ¦œåˆ—è¡¨>>>', res);
        this.setData({
          topThreeData: res.data.list.slice(0, 3),
          otherData: res.data.list.slice(3,10)
        });
      }catch(err) {
        console.log(err);
        wx.showToast({
          title: 'è·å–æ’è¡Œæ¦œå¤±è´¥!',
          icon: 'error'
        })
      }
    }
  }
});
````

## File: packageGame/pages/shoutHb/modules/rank/index.wxml
````
<view class="rank">
  <view class="rank-content">
    <view class="rc-top"></view>
    <view class="rc-t-winner">
      <view class="rc-tw-item" wx:for="{{topThreeData}}" wx:for-index="i" wx:key="i" wx:for-item="item">
        <view class="rc-tw-i-info" style="background-image: url({{item.avator}});">
          <image class="rc-tw-ii-image" src="https://ustatic.joymew.com/joymewScreen/img/{{i==0?'one':i==1?'two':'three'}}.png" mode="" />
          <view class="rc-tw-ii-name">{{item.wx_name}}</view>
        </view>
        <!-- åˆ†è´ -->
        <view class="fenbei">
          <image class="db" src="https://ustatic.hudongmiao.com/joymewMp/db.png" />
          æœ€å¤§åˆ†è´: {{item.fenbei}}
        </view>
        <view style="margin-top: 5rpx;color: #FF3E55;font-weight: bold;font-size: 41rpx;">
          {{item.money}}å…ƒ
        </view>
      </view>
    </view>
    <view class="rc-t-list">
      <view class="rc-tl-item" wx:for="{{otherData}}" wx:for-index="i" wx:key="i" wx:for-item="item">
        <view class="rc-tl-i-info">
          <view class="rc-tl-ii-view">
            <image class="rc-tl-ii-v-avatar" src="{{item.avator}}" mode="" />
            <view class="rc-tl-ii-v-content">
              <view class="rc-tl-ii-vc-number">{{i+4}}</view>
            </view>
          </view>
        </view>
        <view class="rc-tl-i-a">
          <view class="rc-tl-ia-name">{{item.wx_name}}</view>
        </view>
        <view class="rc-tl-i-money">{{item.money}}å…ƒ</view>
      </view>
    </view>
  </view>
</view>
````

## File: pages/estimate/estimate.js
````javascript
import { reqGetHostInfo, reqSaveVisitInfo } from "../../api/estimate";

const app = getApp();

const DEFAULT_REVIEW_BG = 'https://ustatic.hudongmiao.com/joymew-mp/review/weddingBg.png';
const WEDDING_BG =
    "https://static.joymew.com/joymewScreen/img/background/weddingBg02.png";

const dateTransform = (timedata) => {
    const newDate = new Date(timedata);
    const Year = newDate.getFullYear();
    const Month = newDate.getMonth() + 1 < 10 ? `0${newDate.getMonth() + 1}` : newDate.getMonth() + 1;
    const d = newDate.getDate() < 10 ? `0${newDate.getDate()}` : newDate.getDate();
    const Hours = newDate.getHours() < 10 ? `0${newDate.getHours()}` : newDate.getHours();
    const Minutes = newDate.getMinutes() < 10 ? `0${newDate.getMinutes()}` : newDate.getMinutes();
    const Seconds = newDate.getSeconds() < 10 ? `0${newDate.getSeconds()}` : newDate.getSeconds();
    const overTime = `${Year}/${Month}/${d} ${Hours}:${Minutes}:${Seconds}`;
    return overTime;
}

Page({
    data: {
        titleBarHeight: 0, // æ ‡é¢˜æ é«˜åº¦
        statusBarHeight: 0, // çŠ¶æ€æ é«˜åº¦
        sceneType: "", // æ´»åŠ¨ç‰ˆæœ¬
        markData: { // è¯„åˆ†é¡µé¢æ•°æ®
            hostAvatar: "", // ä¸»æŒäººå¤´åƒ
            hostName: "", // ä¸»æŒäººæ˜µç§°
            hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
            hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
            starNum: 0, // æ‰“å‡ åˆ†?
            tags: [], // æ ‡ç­¾åˆ—è¡¨
            markContent: "", // è¯„åˆ†å†…å®¹
            commentInfo: {
                // è¯„è®ºç›¸å…³å†…å®¹
                my: {
                    // æˆ‘çš„è¯„è®ºä¿¡æ¯
                    id: "",
                    avatar: "",
                    nickname: "",
                    content: "",
                    time: "",
                },
                chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
            },
        },
        reviewData: { // ç°åœºå›é¡¾é¡µé¢æ•°æ®
            currentPage: 1, // å½“å‰é¡µæ•°
            showCount: 10, // æ¯é¡µæ˜¾ç¤ºæ•°é‡
            totalPage: 1, // æ€»é¡µæ•°
            bgImg: '', // èƒŒæ™¯
            rankInfo: { // ä¸ªäººé€ç¥ç¦æ’è¡Œä¿¡æ¯
                name: '',
                avatar: '',
                value: '',
                rank: '',
            },
            hostReview: { //ä¸»æŒäººå‘å¸ƒçš„ä¿¡æ¯
                name: "", // ä¸»æŒäººåç§°
                avatar: "", // ä¸»æŒäººå¤´åƒ
                count: 1, // å‘é€å›¾ç‰‡æ•°é‡æˆ–å¼¹å¹•æ•°é‡
                action: 1, // å‘é€çš„æ˜¯å›¾ç‰‡è¿˜æ˜¯å¼¹å¹• 1:å›¾ç‰‡ 2:å¼¹å¹•
                imgs: [], // å›¾ç‰‡åˆ—è¡¨
                datetime: "", // å‘é€æ—¶é—´
                userType: 0, // 0:ä¸»æŒäºº 1:å˜‰å®¾
            },
            recorderList: [], // ç°åœºå›é¡¾çš„ä¿¡æ¯åˆ—è¡¨
        },
        visitInfo: {
            enterTimeInfo: {
                date: '',
                timestamp: '',
            },
            leaveTimeInfo: {
                date: '',
                timestamp: '',
            },
            duration: 0,
        },
    },
    onLoad(options) {
        const { splid } = options;

        app.splidInfo_setSplidInfo({ liveId: splid });
        const tmpVisitInfo = this.data.visitInfo;
        tmpVisitInfo.enterTimeInfo.date = this.getCurrentTime('date');
        tmpVisitInfo.enterTimeInfo.timestamp = this.getCurrentTime('timestamp');
        this.setData({
            visitInfo: tmpVisitInfo,
        });
        this.initData();
    },
    onShow() { },
    onUnload() { 
        console.log('onUnload');
        this.saveMyVisitInfo();
    },
    onHide() { 
        console.log('onHide');
        this.saveMyVisitInfo();
    },
    methods:{
    },
    /**
     * åˆå§‹åŒ–æ•°æ®
     */
    async initData() {
        try {
            this.setData({
                titleBarHeight: app.globalData.systemInfo_titleBarHeight,
                statusBarHeight: app.globalData.systemInfo_statusBarHeight,
            });
            const hostInfo = await reqGetHostInfo({
                splid: app.globalData.splidInfo_liveId,
            });
            // console.log("å…¨å±€æ•°æ®");
            // console.log(app.globalData);
            console.log("hostInfo:", hostInfo);
            const { splidInfo, myCommentInfo, labelList } = hostInfo.data;
            // ç®—å‡ºè¯„åˆ†é¡µé¢æ•°æ®
            const markData = this.getMarkData(splidInfo, myCommentInfo, labelList);
            console.log("è¯„åˆ†é¡µé¢æ•°æ®ï¼š", markData);
            // æ•°æ®æ±‡æ€»
            this.setData({
                markData,
                sceneType: splidInfo.scenario,
            });
        } catch (err) {
            console.log(err);
            if (err === "401") {
                app.userInfo_authLogin(this.initData.bind(this));
            }
        }
    },
    /**
     * é¡µé¢åˆ‡æ¢
     */
    onChangePage(e) {
        const page = e.detail.page;
        if (page === 'review') {
            console.log('è·³è½¬ç°åœºå›é¡¾é¡µé¢');
        } else if (page === 'reserve') {
            console.log('è·³è½¬é¢„å®šé¡µé¢');
        }
    },
    /**
     * ç®—å‡ºè¯„åˆ†é¡µé¢æ•°æ®
     */
    getMarkData(splidInfo, myCommentInfo, labelList) {
        const { avator, emcee_name, comment_json } = splidInfo;
        const satisfaction = myCommentInfo?.satisfaction ?? 0;
        const markData = {
            // è¯„åˆ†é¡µé¢æ•°æ®
            hostAvatar: "", // ä¸»æŒäººå¤´åƒ
            hostName: "", // ä¸»æŒäººæ˜µç§°
            hostWechatQrcode: "", // ä¸»æŒä»»å¾®ä¿¡äºŒç»´ç 
            hasMarked: false, // æ˜¯å¦å·²è¢«è¯„åˆ†
            starNum: 0, // æ‰“å‡ åˆ†?
            tags: [], // æ ‡ç­¾åˆ—è¡¨
            markContent: "", // è¯„åˆ†å†…å®¹
            commentInfo: {
                // è¯„è®ºç›¸å…³å†…å®¹
                my: {
                    // æˆ‘çš„è¯„è®ºä¿¡æ¯
                    avatar: "",
                    nickname: "",
                    content: "",
                    time: "",
                },
                chatList: [], // è¯„è®ºå›å¤ä¿¡æ¯
            },
        };

        console.log("myCommentInfo", myCommentInfo)
        markData.hostAvatar = avator;
        markData.hostName = emcee_name;
        markData.hostWechatQrcode = comment_json;
        if (!myCommentInfo)
            markData.hasMarked = false;
        else
            markData.hasMarked = myCommentInfo.content === "" ? false : true;
        markData.starNum = satisfaction;
        markData.tags = labelList.map((item) => {
            let selected = false;
            if (myCommentInfo) {
                const choosedLabel = myCommentInfo.label.split(",");
                selected = choosedLabel.includes(item.id);
            }
            return {
                info: item.bg_name,
                id: item.id,
                selected,
            };
        });
        if (myCommentInfo) {
            markData.commentInfo.my.id = myCommentInfo.album_comment_id;
            markData.commentInfo.my.avatar = myCommentInfo.avatar;
            markData.commentInfo.my.nickname = myCommentInfo.nickname;
            markData.commentInfo.my.content = myCommentInfo.content;
            markData.commentInfo.my.time = myCommentInfo.comment_time;
            markData.commentInfo.chatList = myCommentInfo.chat_list ? myCommentInfo.chat_list.map((item) => ({
                ...item,
                nickname: item.type === "5" ? "æˆ‘" : item.nickname,
            })) : [];
        }

        return markData;
    },
    /**
     * ç®—å‡ºç°åœºå›é¡¾é¡µé¢æ•°æ®
     */
    getReviewData(messageMap, backInfo, user, loveVal, size) {
        const reviewData = {
            totalPage: 1,
            bgImg: '',
            rankInfo: null,
            hostReview: null,
            recorderList: null,
        };
        reviewData.totalPage = messageMap?.totalPages ? messageMap.totalPages : 1;
        reviewData.bgImg = backInfo?.phone_piclink
            ? backInfo.phone_piclink
            : DEFAULT_REVIEW_BG;
        reviewData.rankInfo = {
            name: user?.wx_name ?? '',
            avatar: user?.avator ?? '',
            value: loveVal ?? '',
            rank: size ?? '',
        };
        reviewData.hostReview = {
            name: backInfo?.siyi_info?.emcee_name
                ? backInfo.siyi_info.emcee_name
                : "",
            avatar: backInfo?.siyi_info?.avator
                ? backInfo.siyi_info.avator
                : "",
            count: backInfo?.list?.length > 0 ? backInfo.list.length : 1,
            action: 1,
            imgs: backInfo?.list?.length > 0
                ? backInfo.list.map(
                    (item) => `https://ustatic.hudongmiao.com/${item.piclink}`
                )
                : [WEDDING_BG],
            datetime:
                backInfo?.list?.length > 0
                    ? dateTransform(backInfo.list[0].create_time)
                    : "",
            userType: 0,
        };
        if (reviewData.bgImg) {
            reviewData.hostReview.imgs.push(reviewData.bgImg);
            reviewData.hostReview.count += 1;
        }
        reviewData.recorderList = messageMap.chat_list.map((item) => ({
            id: item.id,
            name: item.miaoName,
            avatar: item.miaoTxUrl,
            count: 1,
            action: item.miaoTpUrl ? 1 : 0,
            dm: item.miaoContent,
            imgs: [item.miaoTpUrl],
            datetime: dateTransform(item.sendTime),
            userType: item.miaoType
        }));

        return reviewData;
    },
    /**
     * è¯„åˆ†é¡µé¢æ•°æ®å‘ç”Ÿå˜åŒ–
     * @param {Object} changedData æ•°æ®æ ¼å¼åŒmarkData
     */
    onMarkDataChange(e) {
        this.setData({
            markData: e.detail,
        });
    },
    onStarChange(e) {
        this.setData({
            markData: e.detail,
        });
    },
    
    getCurrentTime(dateType){
        let tmpResultDate;
        const date = new Date();
        if (dateType === 'date') {
            const year = date.getFullYear();
            const tmpMonth = date.getMonth() + 1;
            const month = tmpMonth < 10 ? "0" + tmpMonth : tmpMonth;
            const day = date.getDate() < 10 ? "0" + date.getDate() : date.getDate();
            const hour = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
            const minute = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
            const second = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();
            tmpResultDate = `${year}-${month}-${day} ${hour}:${minute}:${second}`;
        } else if (dateType === 'timestamp') {
            tmpResultDate = date.getTime();
        }
        return tmpResultDate;
    },
    saveMyVisitInfo() {
        const tmpVisitInfo = this.data.visitInfo;
        tmpVisitInfo.leaveTimeInfo.date = this.getCurrentTime('date');
        tmpVisitInfo.leaveTimeInfo.timestamp = this.getCurrentTime('timestamp');
        tmpVisitInfo.duration = Math.round(
            (tmpVisitInfo.leaveTimeInfo.timestamp -
                tmpVisitInfo.enterTimeInfo.timestamp) /
            1000,
        );
        this.setData({
            visitInfo: tmpVisitInfo,
        });
        console.log(this.data.visitInfo);
        reqSaveVisitInfo({
            splid: app.globalData.splidInfo_liveId,
            album_comment_id: this.data.markData.commentInfo.my.id,
            start_time: this.data.visitInfo.enterTimeInfo.date,
            end_time: this.data.visitInfo.leaveTimeInfo.date,
            time_length: this.data.visitInfo.duration,
        }).then(res => {
            console.log("reqSaveVisitInfo",res);
        });
    },
});
````

## File: packageGame/pages/shoutHb/modules/wait/index.js
````javascript
import { reqGameStatus } from "../../../../api/shoutHb";
import { timeoutTask } from "../../../../../utils/index";

let timer = null;
let recorderManager = wx.getRecorderManager();

Component({
  properties: {
    userId: String,
  },
  lifetimes: {
    attached() {
      this.loopGetGameStatus();
    },
    detached() {
      this.destroyTimer();
    },
  },
  data: {
    inTest: false,
  },
  methods: {
    async onStartGame() {
      wx.showLoading({
        title: "è¯·æ±‚ä¸­...",
        mask: true,
      });
      try {
        const res = await reqGameStatus(this.data.userId);
        console.log("æ¸¸æˆçŠ¶æ€>>>", res);
        const { status } = res.data;
        if (status === "0") {
          wx.showToast({
            title: "æ¸¸æˆå°šæœªå¼€å§‹!",
            icon: "none",
          });
        } else {
          // é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å˜æ¸¸æˆçŠ¶æ€
          this.triggerEvent("gameStart", status);
        }
        wx.hideLoading();
      } catch (err) {
        console.log(err);
        wx.hideLoading();
        wx.showToast({
          title: "è¯·æ±‚å¤±è´¥!",
          icon: "error",
        });
      }
    },
    /**
     * æµ‹è¯•å½•éŸ³
     * ç›®çš„ï¼šæå‰è·å–å½•éŸ³æƒé™
     * æ–¹å¼ï¼šè°ƒç”¨å½•éŸ³API,2såè‡ªåŠ¨ç»“æŸ
     */
    async onTestGame() {
      // å·²ç»åœ¨æµ‹è¯•ä¸­ä¸å¯é‡å¤æµ‹è¯•
      if (this.data.inTest) {
        return;
      }
      // æ ‡è®°ä¸ºæµ‹è¯•
      this.setData({
        inTest: true,
      });
      // loading
      wx.showLoading({
        title: "æµ‹è¯•ä¸­...",
        mask: true,
      });
      recorderManager.start({
        duration: 10000,
        sampleRate: 16000,
        numberOfChannels: 1,
        format: "mp3",
      });
      // å½•éŸ³2sååœæ­¢
      timeoutTask(() => {
        wx.hideLoading();
        recorderManager.stop();
        wx.showToast({
          title: "æµ‹è¯•æˆåŠŸ!",
          icon: "success",
        });
      }, 2000);
    },
    /**
     * è½®è¯¢è·å–æ¸¸æˆçŠ¶æ€
     */
    loopGetGameStatus() {
      this.destroyTimer();
      timer = setInterval(async () => {
        try {
          const res = await reqGameStatus(this.data.userId, true);
          const { status } = res.data;
          if (status !== "0") {
            // é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å˜æ¸¸æˆçŠ¶æ€
            this.triggerEvent("gameStart", status);
          }
        } catch (err) {
          console.log(err);
          wx.showToast({
            title: "æ¸¸æˆå¼‚å¸¸!",
            icon: "error",
          });
          this.destroyTimer();
        }
      }, 2000);
    },
    /**
     * é”€æ¯è®¡æ—¶å™¨
     */
    destroyTimer() {
      clearInterval(timer);
      timer = null;
    },
  },
});
````

## File: packageGame/pages/shoutHb/index.js
````javascript
import { reqGameStatus } from "../../api/shoutHb";

Page({
  data: {
    gameStatus: "wait", // å–å€¼: 'wait' | 'game' | 'rank'
    userId: "",
    rankData: []
  },
  
  
  onLoad(options) {
    console.log(options.userId);
    this.setData({
      userId: options.userId,
    });
    this.initGameStatus(options.userId);
  },
  /**
   * åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
   */
  async initGameStatus(userId) {
    try {
      const res = await reqGameStatus(userId);
      console.log("æ¸¸æˆçŠ¶æ€>>>", res);
      const { status } = res.data;
      this.setGameStatus(status);
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "åˆå§‹åŒ–å¤±è´¥!",
        icon: "error",
      });
    }
  },
  
  setGameStatus(status) {
    if(typeof status === 'object') {
      status = status.detail;
    }
    if (status === "0") {
      this.setData({
        gameStatus: "wait",
      });
    } else if (status === "1") {
      this.setData({
        gameStatus: "game",
      });
    } else {
      this.setData({
        gameStatus: "rank",
      });
    }
  },
});
````

## File: appGlobalData/splidInfo.js
````javascript
import { H5_HOST, DEV_PAGE_HOST } from "../assets/constant/host";
/**
 * æœ¬åœºæ´»åŠ¨ä¿¡æ¯æ¨¡å—
 */

let useDevPageHost = false; // å¦‚æœæƒ³è¦ä½¿ç”¨æœ¬åœ°å¼€å‘ç¯å¢ƒçš„h5åœ°å€,å°†è¯¥å€¼æ”¹ä¸ºtrue
let h5Host = useDevPageHost ? DEV_PAGE_HOST : H5_HOST;

/**
 *
 * @param {Object} app å°ç¨‹åºappå®ä¾‹å¯¹è±¡
 */
function splidInfo_module(app) {
  const { globalData } = app;
  globalData.splidInfo_liveId = ""; // {String} æ´»åŠ¨id
  globalData.splidInfo_sceneType = ""; // {String} æ´»åŠ¨ç‰ˆæœ¬
  globalData.splidInfo_title = ""; // {String} æ´»åŠ¨æ ‡é¢˜
  globalData.splidInfo_customSignBg = ""; // {String} è‡ªå®šä¹‰ç­¾åˆ°èƒŒæ™¯
  globalData.splidInfo_isForbidCustomWish = false; // {Boolean} æ˜¯å¦ç¦æ­¢è‡ªå®šä¹‰ç¥ç¦è¯­
  globalData.splidInfo_isForcePhone = false; // {Boolean} æ˜¯å¦å¼ºåˆ¶è·å–æ‰‹æœºå·
  globalData.splidInfo_isEnd = false; // {Boolean} æ´»åŠ¨æ˜¯å¦å·²ç»“æŸ
  globalData.splidInfo_customAvatarNickname = false; // {Boolean} æ˜¯å¦è‡ªå®šä¹‰å¤´åƒå’Œæ˜µç§°
  globalData.splidInfo_liveH5Path = ''; // {String} äº’åŠ¨H5åœ°å€
  globalData.splidInfo_needH5Refresh = false; // {Boolean} éœ€è¦H5åˆ·æ–°
  globalData.splidInfo_identitySwitch = false; // {Boolean} ç”·å¥³æ–¹äº²å‹
  /**
   * @param {Object} splidInfo
   * @description keyä¸å·²æœ‰çš„globalData.splidInfo_xxxå±æ€§çš„xxxå¯¹åº”(æ¯”å¦‚å±æ€§liveIdå¯¹åº”globalData.splidInfo_liveId)
   */
  app.splidInfo_setSplidInfo = (splidInfo) => {
    const keys = Object.keys(splidInfo);
    keys.forEach((key) => {
      if(splidInfo[key] === undefined) {
        return;
      }
      globalData[`splidInfo_${key}`] = splidInfo[key];
      if(key === 'liveId') {
        wx.setStorageSync('liveId', splidInfo[key]);
      }
    });
  };
  /**
   * è®¾ç½®äº’åŠ¨H5åœ°å€
   */
  app.splidInfo_setLiveH5Path = (needSeverSign) => {
    let liveH5Path;
    const token = wx.getStorageSync('token');
    if(needSeverSign) {
      liveH5Path = `${h5Host}hmScanReportController/method1?token=${token}`;
    } else {
      const liveId = globalData.splidInfo_liveId;
      const time = Date.now();
      const mpType = globalData.accountInfo_h5PathType;
      const phone = wx.getStorageSync('phone');
      const phoneInfo = phone ? `&userPhone=${phone}` : '';
      liveH5Path = `${h5Host}?liveId=${liveId}&token=${token}&time=${time}&mpType=${mpType}${phoneInfo}`;
    }
    globalData.splidInfo_liveH5Path = liveH5Path;
  }
  /**
   * æœåŠ¡ç«¯ç­¾åˆ°åé‡å®šå‘åœ°å€
   */

  app.splidInfo_getRedirectUrl = () => {
    const liveId = globalData.splidInfo_liveId;
    const token = wx.getStorageSync('token');
    const time = Date.now();
    const mpType = globalData.accountInfo_h5PathType;
    const phone = wx.getStorageSync('phone');
    const phoneInfo = phone ? `&userPhone=${phone}` : '';
    const liveH5Path = `${h5Host}?liveId=${liveId}&token=${token}&time=${time}&mpType=${mpType}${phoneInfo}`;
    return liveH5Path;
  }
}

export default splidInfo_module;
````

## File: packageGame/pages/shoutHb/modules/game/index.js
````javascript
import {
  reqUploadVoice,
  reqGetHbIdNew,
  reqGameStatus,
  reqRobHb,
} from "../../../../api/shoutHb";

let timer = null;
const GETMONEY_AUDIO =
  "https://ustatic.hudongmiao.com/joymewH5/audio/getMoneyNew.mp3";
let audioContext = null;
Component({
  properties: {
    userId: String,
  },
  data: {
    resPopupVisible: false,
    moneyTotal: 0, // ç´¯è®¡é‡‘é¢
    moneyCurrent: 0, // å½“å‰é‡‘é¢
    barrageList: [], // å½“å‰å±•ç¤ºçš„å¼¹å¹•(å³ï¼šæ¿€æ´»å¼¹å¹•)
    barrageListAll: [], // æ‰€æœ‰å¼¹å¹•
    activeBarrage: {
      // å½“å‰æ¿€æ´»çš„å¼¹å¹•çŠ¶æ€
      index: 0, // ç´¢å¼•
      isCover: 1, // é®ç›–äº†å— 1å˜0æ˜¾ç¤ºå€’è®¡æ—¶
      isDrawRed: 0, // ç€è‰²äº†å— å·²ç€è‰²æ˜¾ç¤ºç­‰å¾…ä¸‹ä¸€è½®
    },
    hbId: "",
    cdVisible: false, // å€’è®¡æ—¶æ˜¯å¦æ˜¾ç¤º
    readyVisible: false, // å‡†å¤‡å¼¹çª—æ˜¯å¦æ˜¾ç¤º
    readyText: 'è¯·å‡†å¤‡',
  },
  lifetimes: {
    attached() {
      this.initData();
      this.loopGetGameStatus();
      // æ˜¾ç¤ºå‡†å¤‡å¼¹çª—
      this.setData({
        readyVisible: true,
        readyText: 'è¯·å‡†å¤‡'
      });
    },
    detached() {
      this.destroyTimer();
      this.destroyAudio();
    },
  },
  methods: {
    /**
     * å…³é—­ä¸­å¥–å¼¹çª—
     */
    closeResPopup() {
      this.setData({
        resPopupVisible: false,
        moneyCurrent: 0,
      });
    },
    /**
     * æ›´æ–°é‡‘é¢ã€å¼€å¯ä¸­å¥–å¼¹çª—
     */
    openResPopup(newMoney, totalMoney) {
      // const moneyCurrent = (newMoney - this.data.moneyTotal).toFixed(2);
      // this.setData({
      //   resPopupVisible: true,
      //   moneyCurrent,
      //   moneyTotal: newMoney,
      // });
      this.setData({
        resPopupVisible: true,
        moneyTotal: totalMoney,
        moneyCurrent: newMoney
      })
      this.playGetMoneyAudio();
    },
    /**
     * æ’­æ”¾åˆ°è´¦éŸ³é¢‘
     */
    playGetMoneyAudio() {
      audioContext.play();
    },
    /**
     * å½•éŸ³å®Œæˆ
     */
    async onRecordFinish(e) {
      console.log("å½•éŸ³å®Œæˆ>>>", e);
      wx.showLoading({
        title: "ä¸Šä¼ ä¸­...",
        mask: true,
      });
      try {
        const currentText = this.data.barrageListAll[this.data.activeBarrage.index].text;
        console.log(currentText);
        const uploadVoiceRes = await reqUploadVoice(e.detail, currentText);
        console.log(uploadVoiceRes);
        if (uploadVoiceRes.size === 0) {
          wx.hideLoading();
          this.failTip(uploadVoiceRes.code);
        } else {
          // const res = await reqSubmitSize({
          //   hbId: this.data.hbId,
          //   size: uploadVoiceRes.size,
          //   fenbei: uploadVoiceRes.fenBeiVal,
          // });
          const res = await reqRobHb({
            userId: this.data.userId,
            hbId: this.data.hbId,
            fenbei: uploadVoiceRes.fenBeiVal,
            totalSort: this.data.barrageListAll.length,
            currentSort: this.data.activeBarrage.index + 1
          })
          wx.hideLoading();
          console.log(res);
          if (res.data.data.status === 1) {
            const newGold = res.data.data.gold;
            this.openResPopup(newGold, this.getTotalMoney(newGold));
          } else {
            wx.showToast({
              title: 'å¾ˆé—æ†¾!æœªä¸­å¥–!',
              icon: 'none'
            });
          }

        }
      } catch (err) {
        console.log(err);
        wx.hideLoading();
      }
    },
    /**
     * åˆå§‹åŒ–hbIdå’ŒbarrageListã€éŸ³é¢‘æ’­æ”¾å™¨
     */
    async initData() {
      try {
        const res = await reqGetHbIdNew(this.data.userId);
        console.log("åˆå§‹åŒ–ç»“æœ>>>", res);
        const tmpBarrages = res.data.rightText
          .split("_")
          .map((item, index) => ({
            text: item,
            isCover: 1,
            isDrawRed: 0,
          }));
        this.setData({
          hbId: res.data.hbId,
          barrageListAll: tmpBarrages,
          moneyTotal: res.data.gold
        });
        this.initAudio();
      } catch (err) {
        console.log(err);
        wx.showToast({
          title: "æ¸¸æˆå¼€å§‹å¤±è´¥ï¼",
          icon: "error",
        });
      }
    },
    /**
     * è½®è¯¢è·å–æ¸¸æˆçŠ¶æ€
     */
    loopGetGameStatus() {
      this.destroyTimer();
      timer = setInterval(async () => {
        try {
          const res = await reqGameStatus(this.data.userId, true);
          const progressDataStr = res.data.hanHongBaoConfig;
          if (progressDataStr) {
            const progressData = JSON.parse(progressDataStr);
            // ä»æœåŠ¡ç«¯æ‹¿åˆ°çš„è¿›åº¦ä¿¡æ¯æ›´æ–°UIæ˜¾ç¤º
            this.updateUIStatus(progressData);
          }
          const {
            status
          } = res.data;
          // æ¸¸æˆç»“æŸé€šçŸ¥çˆ¶ç»„ä»¶åˆ‡æ¢åˆ°æ’è¡Œæ¦œé¡µé¢
          if (!status) {
            this.triggerEvent("gameEnd", "");
          }
        } catch (err) {
          console.log(err);
          wx.showToast({
            title: "æ¸¸æˆå¼‚å¸¸!",
            icon: "error",
          });
          this.destroyTimer();
        }
      }, 1000);
    },
    /**
     * é”€æ¯è®¡æ—¶å™¨
     */
    destroyTimer() {
      clearInterval(timer);
      timer = null;
    },
    /**
     * åˆå§‹åŒ–éŸ³é¢‘
     */
    initAudio() {
      audioContext = wx.createInnerAudioContext({
        useWebAudioImplement: true,
      });
      audioContext.src = GETMONEY_AUDIO;
    },
    /**
     * é”€æ¯éŸ³é¢‘
     */
    destroyAudio() {
      audioContext.destroy();
      audioContext = null;
    },
    /**
     * å¤±è´¥çš„æç¤º
     */
    failTip(code) {
      if (code === "202") {
        wx.showToast({
          title: "è¯·æŒ‰ç…§ä¸Šæ–¹æ˜¾ç¤ºçš„æ–‡å­—è¯»å“¦!",
          icon: "none",
        });
      } else if (code === "201") {
        wx.showToast({
          title: "å£°éŸ³å¤ªå°å•¦!",
          icon: "error",
        });
      } else {
        wx.showToast({
          title: "å¥½åƒä¸å¯¹å“¦!",
          icon: "error",
        });
      }
    },
    /**
     * æ˜¾ç¤ºå¼¹å¹•
     */
    showBarrage() {
      const activeIndex = this.data.activeBarrage.index;
      const tmpBarrageList = [{
        content: this.data.barrageListAll[activeIndex].text,
        line: 2,
      }, ];
      this.setData({
        barrageList: tmpBarrageList,
      });
    },
    /**
     * å…³é—­å¼¹å¹•
     */
    hideBarrage() {
      this.setData({
        barrageList: [],
      });
    },
    /**
     * å€’è®¡æ—¶ç»“æŸçš„å›è°ƒ
     * å…³é—­å€’è®¡æ—¶å¼¹çª—ã€æ˜¾ç¤ºå¼¹å¹•
     */
    onCdEnd() {
      this.setData({
        cdVisible: false,
      });
      this.showBarrage();
    },
    /**
     * æ¯”å¯¹æ–°æ—§activeBarrageçŠ¶æ€æ¥æ›´æ–°UIçŠ¶æ€
     * UIçŠ¶æ€: æ˜¾ç¤ºå‡†å¤‡å¼¹çª—ã€æ˜¾ç¤ºå€’è®¡æ—¶ã€æ˜¾ç¤ºå¼¹å¹•
     *
     * 1ã€isCoverä»1å˜æˆ0(å³ï¼šè¿‡æ¸¡è‡³æ˜¾ç¤º)->æ˜¾ç¤ºå€’è®¡æ—¶
     * 2ã€å€’è®¡æ—¶ç»“æŸå->æ˜¾ç¤ºå¼¹å¹•
     * æ—§é€»è¾‘ï¼š3ã€isDrawRedä»0å˜1(å³å½“å‰æ–‡å­—å±•ç¤ºå®Œæ¯•)ï¼šå…³é—­å¼¹å¹•ã€æ˜¾ç¤ºç­‰å¾…ä¸‹ä¸€è½®å¼¹çª—
     * æ–°é€»è¾‘ï¼šå¼ƒç”¨isDrawRed
     * æ—§é€»è¾‘ï¼šisCover isDrawRedä¸ºåˆå§‹å€¼->æ˜¾ç¤ºå‡†å¤‡å¼¹çª—
     * æ–°é€»è¾‘ï¼šisCoverä¸º1->æ˜¾ç¤ºå‡†å¤‡å¼¹çª—
     *
     */
    updateUIStatus(newData) {
      const {
        index: oldIndex,
        isCover: oldIsCover,
        // isDrawRed: oldIsDrawRed,
      } = this.data.activeBarrage;
      const {
        index: newIndex,
        isCover: nowIsCover,
        // isDrawRed: nowIsDrawRed,
      } = newData;
      // å¦‚æœæ–°æ—§å¯¹æ¯”æ²¡æœ‰å˜åŒ–UIä¸ä½œæ›´æ”¹
      if (
        oldIndex === newIndex &&
        parseInt(oldIsCover) === parseInt(nowIsCover)
      ) {
        return;
      }
      // å¦‚æœå‘ç°ä¸­å¥–å¼¹çª—æ˜¾ç¤ºç€ï¼Œå°†å…¶å…³é—­
      if (this.data.resPopupVisible) {
        this.closeResPopup();
      }
      // isCoverä»1å˜æˆ0(å³ï¼šè¿‡æ¸¡è‡³æ˜¾ç¤º)->æ˜¾ç¤ºå€’è®¡æ—¶
      // å€’è®¡æ—¶ç»“æŸä¼šè‡ªåŠ¨æ˜¾ç¤ºå¼¹å¹•
      if (parseInt(oldIsCover) === 1 && parseInt(nowIsCover) === 0) {
        this.setData({
          readyVisible: false,
          readyText: '',
          cdVisible: true,
        });
      } else if (parseInt(nowIsCover) === 1) {
        // isCoverä¸º1->å…³é—­å¼¹å¹•ã€æ˜¾ç¤ºå‡†å¤‡å¼¹çª—
        this.hideBarrage();
        this.setData({
          readyVisible: true,
          readyText: 'è¯·å‡†å¤‡'
        });
      }

      // æ—§é€»è¾‘ï¼š
      // else if (parseInt(oldIsDrawRed) === 0 && parseInt(nowIsDrawRed) === 1) {
      //   // isDrawRedä»0å˜1(å³å½“å‰æ–‡å­—å±•ç¤ºå®Œæ¯•)ï¼šå…³é—­å¼¹å¹•ã€æ˜¾ç¤ºç­‰å¾…ä¸‹ä¸€è½®å¼¹çª—
      //   this.hideBarrage();
      //   this.setData({
      //     readyVisible: true,
      //     readyText: 'ç­‰å¾…ä¸‹ä¸€è½®'
      //   });
      // } 
      // else if (parseInt(nowIsCover) === 1 && parseInt(nowIsDrawRed) === 0) {
      //   // isCover isDrawRedä¸ºåˆå§‹å€¼->æ˜¾ç¤ºå‡†å¤‡å¼¹çª—
      //   this.setData({
      //     readyVisible: true,
      //     readyText: 'è¯·å‡†å¤‡'
      //   });
      // }
      // æ›´æ–°activeBarrage
      this.setData({
        activeBarrage: newData,
      });
    },
    /**
     * è®¡ç®—ç´¯è®¡é‡‘é¢
     */
    getTotalMoney(newMoney) {
      return (parseFloat(newMoney) + parseFloat(this.data.moneyTotal)).toFixed(2);
    }
  },
});
````

## File: packageGame/pages/shoutHb/modules/game/index.wxml
````
<view class="game">
  <danmu id="danmu" barrageList="{{barrageList}}"></danmu>
  <microphone class="microPhoneComp" gameStatus="game" bind:recordFinish="onRecordFinish" />
  <view class="current-money">ç´¯è®¡é‡‘é¢ï¼š{{moneyTotal}}</view>
  <view class="tip">é•¿æŒ‰è¯ç­’å³å¯è¯†åˆ«è¯­éŸ³</view>
  <!-- ç»“æœå¼¹çª— -->
  <resPopup wx:if="{{resPopupVisible}}" bind:popupClose="closeResPopup" money="{{moneyCurrent}}" />
  <!-- å€’è®¡æ—¶å¼¹çª— -->
  <cd cdVisible="{{cdVisible}}" bind:cdEnd="onCdEnd" />
  <!-- ç­‰å¾…æç¤ºå¼¹çª— -->
  <ready readyVisible="{{readyVisible}}" readyText="{{readyText}}"/>
</view>
````

## File: assets/constant/host.js
````javascript
export const MP_HOST = 'https://hm.hudongmiao.com/';
export const H5_HOST = 'https://shm.hudongmiao.com/';
export const WWW_HOST = 'https://www.hudongmiao.com/';
export const AI_HOST = 'https://x.hudongmiao.com/';
// export const AI_HOST = 'http://192.168.66.97:8027/'; // TODO å¾…æ”¹æˆæ­£å¼åŸŸå
// export const MP_HOST = 'https://hmstage.hudongmiao.com/';
// export const H5_HOST = 'https://shmstage.hudongmiao.com/';
// export const WWW_HOST = 'https://wwwstage.hudongmiao.com/';
export const DEV_PAGE_HOST = 'http://dev.joymew.com:1024/';
// export const DEV_PAGE_HOST = 'https://shmstage.hudongmiao.com/'

// export const MP_HOST = 'http://192.168.66.97:8022/'
````

## File: packageGame/pages/shoutHb/index.wxml
````
<view class="shouthb-container">
    <wait bind:gameStart="setGameStatus" wx:if="{{gameStatus === 'wait'}}" userId="{{userId}}"/>
    <game bind:gameEnd="setGameStatus" userId="{{userId}}" wx:if="{{gameStatus === 'game'}}" />
    <rank userId="{{userId}}" wx:if="{{gameStatus === 'rank'}}" />
</view>
<!-- éšç§æˆæƒç»„ä»¶ -->
<privacyAuthorize needAutoShow="{{true}}"/>
````

## File: pages/joymewIndex/joymewIndex.js
````javascript
/**
 * ===================================================================================
 * åŠŸèƒ½è¿ç§»æç¤º (Migration Notice)
 * -----------------------------------------------------------------------------------
 * è¯¥æ–‡ä»¶ (joymewIndex.js) çš„æ ¸å¿ƒç­¾åˆ°åŠŸèƒ½å·²äº [YYYY-MM-DD] è¿ç§»è‡³ H5 é¡¹ç›®ã€‚
 * æ–°çš„å®ç°ä½äº: src/views/sign/index.vue
 *
 * H5 ç‰ˆæœ¬å·²å®ç°ä»¥ä¸‹æ ¸å¿ƒé€»è¾‘:
 * - ä» Vuex store è·å–æ´»åŠ¨ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯
 * - æ ¹æ®æ´»åŠ¨é…ç½®åŠ¨æ€æ¸²æŸ“è¡¨å• (å¼ºåˆ¶æ‰‹æœºå·ã€äº²å‹èº«ä»½é€‰æ‹©ç­‰)
 * - è¡¨å•éªŒè¯ä¸ç­¾åˆ° API è°ƒç”¨
 * - ç­¾åˆ°æˆåŠŸåè‡ªåŠ¨è·³è½¬
 *
 * æ­¤å¤„ä»£ç ä»…ä½œä¸ºå†å²é€»è¾‘å‚è€ƒï¼Œä¸åº”å†è¿›è¡Œä¿®æ”¹ã€‚
 * ===================================================================================
 */
import {
  getParamsFromUrl,
  isOverDate,
  getRandom,
  timeoutTask,
  isHttpUrl,
} from "../../utils/index";
import qiniuUploader from "../../utils/qiniu/index";
import {
  reqGetLiveInfo,
  reqSign,
  reqSaveSignInfo,
  reqGetSignStatus,
  reqGetPhone,
  reqSubscribeMessage,
  reqGetLiveIdByUserId,
} from "../../api/index.js";
import sceneInfo from "../../assets/constant/sceneInfo";
import defaultContent from "../../assets/constant/default";

const app = getApp();

Page({
  data: {
    sceneType: "",
    title: "",
    sceneAlias: "",
    customSignBg: "",
    isForbidCustomWish: false,
    isForcePhone: false,
    isEnd: false,
    customAvatarNickname: false,
    isNeedUserComment: false,
    isOpenWxPhone: false, // å¼€å¯å¾®ä¿¡ç»„ä»¶è·å–æ‰‹æœºå·åŠŸèƒ½
    phoneInputFocus: false, // æ‰‹æœºå·è¾“å…¥æ¡†èšç„¦çŠ¶æ€
    identitySwitch: false, // ç”·å¥³æ–¹äº²å‹å¼€å…³
    types: [], // äº²å‹åˆ—è¡¨
    wishes: [], // ç¥ç¦è¯­åˆ—è¡¨
    hasSign: false,
    avatarUncropped: "", // è£å‰ªå‰çš„å›¾ç‰‡åœ°å€
    signForm: {
      splid: "",
      avator: defaultContent.defaultGrayAvatar,
      wx_name: "",
      bless_str: "",
      type: "",
      phonenumber: "",
    },
  },
  async onLoad(options) {
    const { q, liveId } = options;
    const stLiveId = wx.getStorageSync("liveId");
    // åˆå§‹åŒ–å®¡æ ¸æ¨¡å¼çŠ¶æ€
    const examineLiveId = app.examineMode_initData({
      qrcodeInfo: q,
      sharedLiveId: liveId,
      storageLiveId: stLiveId,
    });
    // è®¾ç½®liveId
    await this.setLiveId(q, liveId, examineLiveId, stLiveId);
    // è·å–æ´»åŠ¨ä¿¡æ¯
    await this.getLiveInfo();
  },
  onShow() {},
  onShareAppMessage() {
    return {
      title: this.data.title,
      path: `/pages/joymewIndex/joymewIndex?liveId=${app.globalData.splidInfo_liveId}`,
    };
  },
  /**
   * å°†ä»å…¶ä»–ç¯å¢ƒè·å–åˆ°çš„liveIdä¿å­˜åˆ°storageä¸­
   * @description è·å–liveIdçš„ä¼˜å…ˆçº§: æ‰«ç  > åˆ†äº«å¸¦å‚  > å®¡æ ¸liveId > ç¼“å­˜ä¸­liveId
   * @param {String} qrcodeInfo äºŒç»´ç ä¿¡æ¯ é‡Œé¢æºå¸¦liveIdæˆ–userId
   * @param {String} sharedLiveId åˆ†äº«æºå¸¦çš„liveId
   * @param {String} examineLiveId å®¡æ ¸ç”¨çš„liveId
   * @param {String} stLiveId ç¼“å­˜ä¸­çš„liveId
   */
  async setLiveId(qrcodeInfo, sharedLiveId, examineLiveId, stLiveId) {
    let liveIdLast;
    const urlFromQrcode = decodeURIComponent(qrcodeInfo);
    const { liveId, userId } = getParamsFromUrl(urlFromQrcode);
    if (userId) {
      const res = await reqGetLiveIdByUserId(userId);
      liveIdLast = res.data.splid;
    } else if (liveId) {
      liveIdLast = liveId;
    } else if (sharedLiveId) {
      liveIdLast = sharedLiveId;
    } else if (examineLiveId) {
      liveIdLast = examineLiveId;
    } else if (stLiveId) {
      liveIdLast = stLiveId;
    } else {
      wx.showToast({
        title: "å¾®ä¿¡ç‰ˆæœ¬è¿‡ä½!",
        icon: "error",
      });
    }
    app.splidInfo_setSplidInfo({
      liveId: liveIdLast,
    });
  },
  async getLiveInfo() {
    try {
      const res = await reqGetLiveInfo(app.globalData.splidInfo_liveId);
      console.log("æ´»åŠ¨ä¿¡æ¯:", res);
      // è®¾ç½®æ´»åŠ¨ä¿¡æ¯
      const {
        scenario,
        theme,
        qd_back,
        is_forbid_send,
        forcephone,
        using_date,
        is_end_wedding,
        location_val,
        identity_switch,
      } = res.data.splid;
      // éªŒè¯å¹¶è®¾ç½®qd_back
      const validatedQdBack = isHttpUrl(qd_back) ? qd_back : '';
      this.setSplidInfo({
        scenario,
        theme,
        qd_back: validatedQdBack,
        is_forbid_send,
        forcephone,
        using_date,
        is_end_wedding,
        location_val,
        identity_switch,
      });
      // æ´»åŠ¨è¿‡æœŸäº†å—ï¼Ÿ
      if (this.data.isEnd) {
        this.onSplidEnd();
        return;
      }
       // ç¼“å­˜ä¸­æ²¡æœ‰æœ‰æ•ˆå¤´åƒã€æ˜µç§°ã€tokençš„è¯éœ€è¦æˆæƒç™»å½•
      if (!await app.userInfo_setuserInfoFromStorage()) { // åœ¨è°ƒç”¨å¤„å¢åŠ  await
        console.log("ç¼“å­˜ä¿¡æ¯æ— æ•ˆæˆ–ä¸å­˜åœ¨ï¼Œéœ€è¦é‡æ–°æˆæƒç™»å½•!");
        await app.userInfo_authLogin();
      }
      // è®¾ç½®å¸ä»ªä¿¡æ¯
      const { isNeedUserComment, isOpenWxPhone } = res.data.siyiInfo;
      this.setSiyiInfo({
        isNeedUserComment,
        isOpenWxPhone,
      });
      console.log("å…¨å±€çŠ¶æ€ï¼š", app.globalData);

      // åˆå§‹åŒ–è¡¨å•ç›¸å…³æ•°æ®
      this.initSignForm({
        customWishes: res.data.signWish,
      });

      // è®¾ç½®æ¸¸æˆç›¸å…³ä¿¡æ¯(æ‰­ä¸€æ‰­å’Œå¹¸è¿å°è½¬ç›˜çš„å¥–é¡¹åˆ—è¡¨)
      app.gameInfo_initNynAndluckyWheel(
        res.data.nynList,
        res.data.luckySmallList
      );

      // è®¾ç½®ç­¾åˆ°çŠ¶æ€
      await this.setHasSign();
      // å·²ç»ç­¾åˆ°è¿‡å°±ç›´æ¥è·³è½¬äº’åŠ¨ä¸»é¡µ(å®¡æ ¸æ¨¡å¼ä¸‹é™¤å¤–)
      if (this.data.hasSign && !app.globalData.examineMode_isExamineMode) {
        this.toLive();
      }
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: "æ´»åŠ¨ä¿¡æ¯è·å–å¤±è´¥ï¼è¯·åˆ é™¤å°ç¨‹åºé‡æ–°æ‰«ç è¿›å…¥!",
        icon: "none",
      });
    }
  },
  setSplidInfo({
    scenario,
    theme,
    qd_back,
    is_forbid_send,
    forcephone,
    using_date,
    is_end_wedding,
    location_val,
    identity_switch,
  }) {
    const setCustomAvatarNickname = (jsonStr) => {
      try {
        const jsonObj = JSON.parse(jsonStr);
        if (jsonObj.needFormAuth === "1") {
          return true;
        }
        return false;
      } catch (err) {
        console.log(err);
        return false;
      }
    };
    console.log('qd_back',qd_back,typeof qd_back);
    // éªŒè¯å¹¶è®¾ç½®qd_back
    const validatedQdBack = isHttpUrl(qd_back) ? qd_back : '';
    this.setData({
      sceneType: scenario,
      sceneAlias: sceneInfo[scenario].alias,
      title: theme,
      customSignBg: validatedQdBack,
      isForbidCustomWish: is_forbid_send === "1",
      isForcePhone: forcephone === "1",
      isEnd: isOverDate(using_date) || is_end_wedding === "1",
      customAvatarNickname: setCustomAvatarNickname(location_val),
      identitySwitch: identity_switch === "1",
    });

    app.splidInfo_setSplidInfo({
      sceneType: this.data.sceneType,
      title: this.data.title,
      customSignBg: this.data.customSignBg,
      isForbidCustomWish: this.data.isForbidCustomWish,
      isForcePhone: this.data.isForcePhone,
      isEnd: this.data.isEnd,
      customAvatarNickname: this.data.customAvatarNickname,
      identitySwitch: this.data.identitySwitch,
    });
  },
  setSiyiInfo({ isNeedUserComment, isOpenWxPhone }) {
    this.setData({
      isNeedUserComment: isNeedUserComment === "1",
      isOpenWxPhone: isOpenWxPhone === "1",
    });
    app.siyiInfo_setSiyiInfo({
      isNeedUserComment: this.data.isNeedUserComment,
      isOpenWxPhone: this.data.isOpenWxPhone,
    });
  },
  async setHasSign() {
    try {
      const signStatusRes = await reqGetSignStatus(
        app.globalData.splidInfo_liveId
      );
      const { isNeddReload, qian_dao_le_me } = signStatusRes.data;
      // ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸é‡æ–°æˆæƒç™»å½•
      if (isNeddReload === "1") {
        throw "401";
      }
      this.setData({
        hasSign: qian_dao_le_me,
      });
    } catch (err) {
      console.log(err);
      // æˆæƒç™»å½• å¹¶å°†å½“å‰ä»»åŠ¡é‡æ–°æ‰§è¡Œä¸€é
      app.userInfo_authLogin(this.setHasSign.bind(this));
    }
  },
  onChooseAvatar(e) {
    // å›¾ç‰‡è£å‰ª
    this.setData({
      avatarUncropped: e.detail.avatarUrl,
    });
    // ä¸ƒç‰›äº‘åˆå§‹åŒ–
    if (this.hasQiniuInit) {
      return;
    }
    this.hasQiniuInit = true;
    qiniuUploader.init();
  },
  /**
   * è¾“å…¥æ˜µç§°
   */
  onNickNameBlur(e) {
    this.setData({
      "signForm.wx_name": e.detail.value,
    });
  },
  /**
   * è¾“å…¥ç¥ç¦è¯­
   */
  onBlessBlur(e) {
    this.setData({
      "signForm.bless_str": e.detail.value,
    });
  },
  /**
   * åˆ·æ–°ç¥ç¦è¯­
   */
  onChangeBless() {
    this.setData({
      "signForm.bless_str":
        this.data.wishes[getRandom(0, this.data.wishes.length)],
    });
  },
  /**
   * é€‰æ‹©äº²å‹
   */
  onChooseType(e) {
    const { type } = e.currentTarget.dataset;
    this.setData({
      "signForm.type": type,
    });
  },
  /**
   * è¾“å…¥æ‰‹æœºå·
   */
  onPhoneBlur(e) {
    this.setData({
      "signForm.phonenumber": e.detail.value,
    });
    // å­˜å…¥å…¨å±€
    app.userInfo_setuserInfo({
      phone: this.data.signForm.phonenumber,
    });
  },
  /**
   * å¾®ä¿¡ç»„ä»¶è·å–æ‰‹æœºå·
   */
  async onWxButtonGetPhone(e) {
    try {
      if (e.detail.errno === 1400001 || !e.detail.code) {
        throw "openInputPhoneMode";
      }
      const phoneRes = await reqGetPhone({
        code: e.detail.code,
        type: app.globalData.accountInfo_getPhoneNumberType,
      });
      this.setData({
        "signForm.phonenumber": phoneRes.phone_info.phoneNumber,
      });
      // å­˜å…¥å…¨å±€
      app.userInfo_setuserInfo({
        phone: this.data.signForm.phonenumber,
      });
    } catch (err) {
      console.log(err);
      // å¼€å¯æ‰‹åŠ¨è¾“å…¥æ‰‹æœºå·æ¨¡å¼
      this.openInputPhoneMode();
    }
  },
  /**
   * å¼€å¯æ‰‹åŠ¨è¾“å…¥æ‰‹æœºå·æ¨¡å¼
   */
  openInputPhoneMode() {
    // æç¤ºè¾“å…¥æ‰‹æœºå·
    wx.showToast({
      title: "è¯·è¾“å…¥æ‰‹æœºå·!",
      icon: "none",
    });
    // æ˜¾ç¤ºæ‰‹æœºå·è¾“å…¥æ¡†
    this.setData({
      isOpenWxPhone: false,
    });
    // å»¶è¿Ÿ300msèšç„¦æ‰‹æœºå·è¾“å…¥æ¡†
    timeoutTask(() => {
      this.setData({
        phoneInputFocus: true,
      });
    }, 300);
  },
  /**
   *
   * @param {undefined|[]|{bless_str:string}[]} customWishes
   * @param {string[]} defaultWishes
   * @returns {string[]}
   */
  getWishes(customWishes, defaultWishes) {
    let targetWishes = null;
    if (customWishes && customWishes.length > 0) {
      targetWishes = customWishes.map((item) => item.bless_str);
    } else {
      targetWishes = defaultWishes;
    }
    return targetWishes;
  },
  /**
   * åˆå§‹åŒ–è¡¨å•ç›¸å…³æ•°æ®
   */
  initSignForm({ customWishes }) {
    let types = [];
    // äº²å‹å›¢åˆ—è¡¨
    if (this.data.sceneAlias === "wedding" || this.data.sceneAlias === "zshl") {
      types = [
        {
          type: "1",
          label: "ç”·æ–¹",
        },
        {
          type: "2",
          label: "å¥³æ–¹",
        },
        {
          type: "",
          label: "ä¸é€‰",
        },
      ];
    }
    // ç¥ç¦è¯­åˆ—è¡¨
    const wishes = this.getWishes(
      customWishes,
      sceneInfo[this.data.sceneType].wishes
    );
    const wishesLen = wishes.length;

    // è¡¨å•ç¥ç¦è¯­
    const blessStr = wishes[getRandom(0, wishesLen)];
    // å¤´åƒã€æ˜µç§°
    let tmpAvator;
    let tmpWxName;
    if (this.data.customAvatarNickname) {
      tmpAvator = defaultContent.defaultGrayAvatar;
      tmpWxName = "";
    } else {
      tmpAvator =
        app.globalData.userInfo_avatar || defaultContent.defaultGrayAvatar;
      tmpWxName = app.globalData.userInfo_nickname;
    }

    this.setData({
      types,
      wishes,
      "signForm.splid": app.globalData.splidInfo_liveId,
      "signForm.bless_str": blessStr,
      "signForm.avator": tmpAvator,
      "signForm.wx_name": tmpWxName,
      "signForm.phonenumber": app.globalData.userInfo_phone || "",
    });
  },
  /**
   * æ´»åŠ¨è¿‡æœŸçš„å¤„ç†
   */
  onSplidEnd() {
    wx.showToast({
      title: "æ´»åŠ¨å·²ç»“æŸ!",
      icon: "error",
    });
    // è·³è½¬è¯„ä»·
    timeoutTask(() => {
      wx.navigateTo({
        url: `/pages/estimate/estimate?splid=${wx.getStorageSync("liveId")}`,
      });
    }, 300);
  },
  /**
   * å–æ¶ˆå¤´åƒè£å‰ª
   */
  onCancelCropper() {
    // å…³é—­å¤´åƒè£å‰ªå¼¹çª—
    this.setData({
      avatarUncropped: "",
    });
  },
  /**
   * ç¡®è®¤å¤´åƒè£å‰ª
   */
  async onConfirmCropper(e) {
    // è·å–åˆ°è£å‰ªåçš„å¤´åƒä¸´æ—¶åœ°å€
    const avatarCropped = e.detail;
    // ä¸Šä¼ ä¸ƒç‰›äº‘æœåŠ¡å™¨
    const uploadRes = await qiniuUploader.upload(avatarCropped);
    // è·å–åˆ°ä¸Šä¼ åçš„å¤´åƒåœ°å€å¹¶ç»™signForm.avatorèµ‹å€¼
    this.setData({
      "signForm.avator": uploadRes.fileURL,
      avatarUncropped: "",
    });
    // æ›´æ–°å…¨å±€ç”¨æˆ·çš„å¤´åƒä¿¡æ¯
    app.userInfo_setuserInfo({
      avatar: uploadRes.fileURL,
    });
  },
  /**
   * éœ€è¦æœåŠ¡ç«¯å®Œæˆç­¾åˆ°å˜›ï¼Ÿ
   * @description å¦‚æœä¸æ˜¯è‡ªå®šä¹‰å¤´åƒæ˜µç§° && è¡¨å•ä¸­æ²¡æœ‰å¤´åƒæˆ–æ˜µç§° çš„æƒ…å†µ
   */
  getNeedServerSign() {
    if (
      !this.data.customAvatarNickname &&
      (this.data.signForm.avator === defaultContent.defaultGrayAvatar ||
        !this.data.signForm.wx_name)
    ) {
      return true;
    }
    return false;
  },
  /**
   * è·å–è®¢é˜…æ¶ˆæ¯æ¨¡æ¿id
   * @returns {Array} æ¶ˆæ¯idæ•°ç»„
   */
  getMsgIds() {
    const msgIds = [];
    const { sign } = app.globalData.accountInfo_subscribeTpMsg;
    if (sign?.lottery) {
      // æŠ½å¥–æ¶ˆæ¯id
      msgIds.push(sign.lottery);
    }
    // è¯„ä»·æ¶ˆæ¯id
    if (this.data.isNeedUserComment && sign?.estimate) {
      msgIds.push(sign.estimate);
    }
    return msgIds;
  },
  /**
   * éªŒè¯ç­¾åˆ°è¡¨å•
   * @returns {Boolean} æ˜¯å¦éªŒè¯é€šè¿‡
   */
  validateSignForm() {
    const { avator, wx_name, bless_str, phonenumber, type } =
      this.data.signForm;
    // éœ€è¦è‡ªå®šä¹‰å¤´åƒæ˜µç§°çš„æƒ…å†µä¸‹ å¤´åƒã€æ˜µç§°ä¸èƒ½ä¸ºç©º
    if (this.data.customAvatarNickname) {
      if (!avator || avator === defaultContent.defaultGrayAvatar) {
        wx.showToast({
          title: "å¤´åƒä¸èƒ½ä¸ºç©º!",
          icon: "error",
        });
        return false;
      }
      if (!wx_name) {
        wx.showToast({
          title: "æ˜µç§°ä¸èƒ½ä¸ºç©º!",
          icon: "error",
        });
        return false;
      }
    }
    // ç¥ç¦è¯­ä¸èƒ½ä¸ºç©º
    if (!bless_str) {
      wx.showToast({
        title: "ç¥ç¦è¯­ä¸èƒ½ä¸ºç©º!",
        icon: "error",
      });
      return false;
    }
    // éœ€è¦ä¸Šä¼ æ‰‹æœºå·çš„æƒ…å†µä¸‹ æ‰‹æœºå·ä¸èƒ½ä¸ºç©º
    if (this.data.isForcePhone) {
      if (!phonenumber) {
        wx.showToast({
          title: "æ‰‹æœºå·ä¸èƒ½ä¸ºç©º!",
          icon: "error",
        });
        return false;
      }
      if (phonenumber.length !== 11) {
        wx.showToast({
          title: "æ‰‹æœºå·æ ¼å¼é”™è¯¯!",
          icon: "error",
        });
        return false;
      }
    }
    return true;
  },
  /**
   * è·³è½¬äº’åŠ¨ä¸»é¡µ
   */
  toLive() {
    if (app.globalData.examineMode_isExamineMode) {
      wx.navigateTo({
        url: "/pages/index/index",
      });
      return;
    }
    app.splidInfo_setLiveH5Path(this.needSeverSign);
    wx.redirectTo({
      url: "/pages/live/live",
    });
  },
  /**
   * æœåŠ¡ç«¯ç­¾åˆ°
   */
  async serverSign() {
    // å¾—åˆ°é‡å®šå‘åœ°å€
    const redirectUrl = app.splidInfo_getRedirectUrl();
    // ä¿å­˜ç­¾åˆ°ä¿¡æ¯
    const serverRes = await reqSaveSignInfo({
      splid: this.data.signForm.splid,
      bless_str: this.data.signForm.bless_str,
      phonenumber: this.data.signForm.phonenumber,
      type: this.data.signForm.type,
      redirect_url: redirectUrl,
      birthDate: "",
      gender: "",
    });
    console.log(serverRes);
    if (!serverRes.success) {
      throw new Error(serverRes);
    }
  },
  /**
   * æ­£å¸¸ç­¾åˆ°
   */
  async commonSign() {
    // ç­¾åˆ°
    const signRes = await reqSign(this.data.signForm);
    // ä¸åœ¨ç­¾åˆ°ç™½åå•ä¹‹ä¸­
    if (signRes.data.checkPhoneStatus === "no_pass") {
      wx.showToast({
        title: "æŠ±æ­‰, æ‚¨æ— æ³•ç­¾åˆ°!",
        icon: "none",
      });
      throw "not in white list";
    }
  },
  /**
   * ç‚¹å‡»ç­¾åˆ°
   */
  async onSign() {
    if (!this.validateSignForm()) {
      return;
    }
    if (app.globalData.examineMode_isExamineMode) {
      if (!this.data.hasSign) {
        await this.commonSign();
      }
      this.toLive();
      return;
    }
    try {
      // 1ã€æ¶ˆæ¯è®¢é˜…
      try {
        const msgIds = this.getMsgIds();
        if (msgIds.length > 0) {
          await reqSubscribeMessage(msgIds);
        }
      } catch (subscribeMsgErr) {
        console.log(subscribeMsgErr);
      }
      // 2ã€ç­¾åˆ°
      this.needSeverSign = this.getNeedServerSign();
      if (this.needSeverSign) {
        // æœåŠ¡ç«¯å®Œæˆç­¾åˆ°
        await this.serverSign();
      } else {
        // æ­£å¸¸ç­¾åˆ°
        await this.commonSign();
      }
      // 3ã€è·³è½¬äº’åŠ¨ä¸»é¡µ
      this.toLive();
    } catch (err) {
      console.log(err);
      wx.showToast({
        title: JSON.stringify(err),
        icon: "none",
      });
    }
  },
});
````

## File: app.json
````json
{
  "pages": [
    "pages/joymewIndex/joymewIndex",
    "pages/index/index",
    "pages/live/live",
    "pages/pay/pay",
    "pages/estimate/estimate",
    "pages/review/review",
    "pages/reserve/reserve",
    "pages/reserve/hostingStyle/workDetail/workDetail",
    "pages/test/test"
  ],
  "subpackages": [
    {
      "root": "packageA",
      "name": "packageA",
      "pages": [
        "pages/hbkdRecharge/hbkdRecharge",
        "pages/recharge/recharge",
        "pages/rechargeWedding/rechargeWedding",
        "pages/wishRank/wishRank"
      ]
    },
    {
      "root": "packageB",
      "name": "packageB",
      "pages": [
        "pages/photoWallIndex/photoWallIndex",
        "pages/photoWallUpload/photoWallUpload",
        "pages/winningRecord/winningRecord",
        "pages/sendGiftLottery/index"
      ]
    },
    {
      "root": "packageC",
      "name": "packageC",
      "pages": [
        "pages/feedback/feedback",
        "pages/agreement/agreement",
        "pages/photographerWall/photographerWall",
        "pages/outerLink/outerLink",
        "pages/brides/brides",
        "pages/draw/draw",
        "pages/draw/drawPage/drawPage"
      ]
    },
    {
      "root": "packageGame",
      "name": "packageGame",
      "pages": [
        "pages/guessHb/guessHb",
        "pages/hbWall/hbWall",
        "pages/kbx/kbx",
        "pages/luckyWheel/luckyWheel",
        "pages/nyn/nyn",
        "pages/zfdm/zfdm",
        "pages/zyz/zyz",
        "pages/shoutHb/index",
        "pages/commonRank/commonRank"
      ]
    }
  ],
  "window": {
    "backgroundTextStyle": "light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": " å—¨å–µæ‚¦åŠ¨",
    "navigationBarTextStyle": "black",
    "onReachBottomDistance": 100
  },
  "usingComponents": {
    "imageCropper": "/components/imageCropper/index",
    "privacyAuthorize": "/components/privacyAuthorize/privacyAuthorize"
  },
  "sitemapLocation": "sitemap.json",
  "resolveAlias": {
    "@/*": "/*"
  },
  "__usePrivacyCheck__": true,
  "embeddedAppIdList": [
    "appId"
  ],
  "lazyCodeLoading": "requiredComponents",
  "plugins": {
    "jihuoniao-ad-plugin": {
        "version": "latest",
        "provider": "wx93044ef9a760a07f"
    }
  }
}
````
